"use strict";(self.webpackChunkprimer_parcial_fernandez_mariano=self.webpackChunkprimer_parcial_fernandez_mariano||[]).push([[179],{4206:(Mt,Ve,F)=>{F.d(Ve,{$:()=>Eo,A:()=>ue,G:()=>qe,K:()=>$o,L:()=>os,N:()=>Bn,P:()=>pi,R:()=>fh,U:()=>dt,V:()=>Os,W:()=>dn,X:()=>wi,Y:()=>so,Z:()=>Ii,_:()=>Ts,a:()=>$,a0:()=>Ba,a1:()=>ps,a2:()=>Ui,a3:()=>Ho,a4:()=>Pi,a5:()=>ls,a6:()=>wr,a7:()=>Ki,a8:()=>Oo,a9:()=>pa,aA:()=>Vt,aB:()=>Be,aC:()=>ce,aD:()=>ai,aE:()=>be,aF:()=>Ct,aG:()=>Bs,aH:()=>sa,aI:()=>Wa,aJ:()=>Fn,aN:()=>ye,aQ:()=>ao,aa:()=>vt,ab:()=>Ls,ac:()=>Xi,ad:()=>ko,ae:()=>ia,af:()=>hu,ag:()=>K,ah:()=>W,ak:()=>jt,al:()=>dr,am:()=>_r,ap:()=>fa,aq:()=>At,as:()=>mc,at:()=>ir,au:()=>It,av:()=>Ge,aw:()=>fe,ax:()=>se,ay:()=>Iu,az:()=>aa,b:()=>_,c:()=>Bi,d:()=>Ko,e:()=>qo,f:()=>vc,g:()=>_h,h:()=>dd,i:()=>C,j:()=>qu,k:()=>pd,l:()=>Rl,m:()=>wu,p:()=>_e,r:()=>ad,s:()=>ph,u:()=>Lo});var d=F(5861),ee=F(9058),J=F(534),Ee=F(7879),ge=F(7582),ne=F(4537);const _e={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},ue={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const qe=function Se(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},ht=function et(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},it=new ee.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Xe=new Ee.Yd("@firebase/auth");function nt(v,...f){Xe.logLevel<=Ee.in.ERROR&&Xe.error(`Auth (${J.SDK_VERSION}): ${v}`,...f)}function se(v,...f){throw tt(v,...f)}function Be(v,...f){return tt(v,...f)}function ke(v,f,m){const T=Object.assign(Object.assign({},ht()),{[f]:m});return new ee.LL("auth","Firebase",T).create(f,{appName:v.name})}function xe(v,f,m){if(!(f instanceof m))throw m.name!==f.constructor.name&&se(v,"argument-error"),ke(v,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function tt(v,...f){if("string"!=typeof v){const m=f[0],T=[...f.slice(1)];return T[0]&&(T[0].appName=v.name),v._errorFactory.create(m,...T)}return it.create(v,...f)}function ce(v,f,...m){if(!v)throw tt(f,...m)}function ct(v){const f="INTERNAL ASSERTION FAILED: "+v;throw nt(f),new Error(f)}function It(v,f){v||ct(f)}function zt(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function un(){return"http:"===pn()||"https:"===pn()}function pn(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class Pt{constructor(f,m){this.shortDelay=f,this.longDelay=m,It(m>f,"Short delay should be less than long delay!"),this.isMobile=(0,ee.uI)()||(0,ee.b$)()}get(){return function ar(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(un()||(0,ee.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function wt(v,f){It(v.emulator,"Emulator should always be set here");const{url:m}=v.emulator;return f?`${m}${f.startsWith("/")?f.slice(1):f}`:m}class Ce{static initialize(f,m,T){this.fetchImpl=f,m&&(this.headersImpl=m),T&&(this.responseImpl=T)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void ct("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void ct("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void ct("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Pe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},$e=new Pt(3e4,6e4);function Me(v,f){return v.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:v.tenantId}):f}function Ke(v,f,m,T){return lt.apply(this,arguments)}function lt(){return(lt=(0,d.Z)(function*(v,f,m,T,z={}){return Et(v,z,(0,d.Z)(function*(){let te={},Ne={};T&&("GET"===f?Ne=T:te={body:JSON.stringify(T)});const Je=(0,ee.xO)(Object.assign({key:v.config.apiKey},Ne)).slice(1),mt=yield v._getAdditionalHeaders();return mt["Content-Type"]="application/json",v.languageCode&&(mt["X-Firebase-Locale"]=v.languageCode),Ce.fetch()(Nn(v,v.config.apiHost,m,Je),Object.assign({method:f,headers:mt,referrerPolicy:"no-referrer"},te))}))})).apply(this,arguments)}function Et(v,f,m){return yt.apply(this,arguments)}function yt(){return(yt=(0,d.Z)(function*(v,f,m){v._canInitEmulator=!1;const T=Object.assign(Object.assign({},Pe),f);try{const z=new $n(v),te=yield Promise.race([m(),z.promise]);z.clearNetworkTimeout();const Ne=yield te.json();if("needConfirmation"in Ne)throw In(v,"account-exists-with-different-credential",Ne);if(te.ok&&!("errorMessage"in Ne))return Ne;{const Je=te.ok?Ne.errorMessage:Ne.error.message,[mt,rn]=Je.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===mt)throw In(v,"credential-already-in-use",Ne);if("EMAIL_EXISTS"===mt)throw In(v,"email-already-in-use",Ne);if("USER_DISABLED"===mt)throw In(v,"user-disabled",Ne);const hn=T[mt]||mt.toLowerCase().replace(/[_\s]+/g,"-");if(rn)throw ke(v,hn,rn);se(v,hn)}}catch(z){if(z instanceof ee.ZR)throw z;se(v,"network-request-failed",{message:String(z)})}})).apply(this,arguments)}function Mn(v,f,m,T){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,d.Z)(function*(v,f,m,T,z={}){const te=yield Ke(v,f,m,T,z);return"mfaPendingCredential"in te&&se(v,"multi-factor-auth-required",{_serverResponse:te}),te})).apply(this,arguments)}function Nn(v,f,m,T){const z=`${f}${m}?${T}`;return v.config.emulator?wt(v.config,z):`${v.config.apiScheme}://${z}`}function on(v){switch(v){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class $n{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((m,T)=>{this.timer=setTimeout(()=>T(Be(this.auth,"network-request-failed")),$e.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function In(v,f,m){const T={appName:v.name};m.email&&(T.email=m.email),m.phoneNumber&&(T.phoneNumber=m.phoneNumber);const z=Be(v,f,T);return z.customData._tokenResponse=m,z}function Wn(v){return void 0!==v&&void 0!==v.getResponse}function Rt(v){return void 0!==v&&void 0!==v.enterprise}class Jn{constructor(f){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===f.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=f.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=f.recaptchaEnforcementState}getProviderEnforcementState(f){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const m of this.recaptchaEnforcementState)if(m.provider&&m.provider===f)return on(m.enforcementState);return null}isProviderEnabled(f){return"ENFORCE"===this.getProviderEnforcementState(f)||"AUDIT"===this.getProviderEnforcementState(f)}}function tr(){return(tr=(0,d.Z)(function*(v){return(yield Ke(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function kn(v,f){return Un.apply(this,arguments)}function Un(){return(Un=(0,d.Z)(function*(v,f){return Ke(v,"GET","/v2/recaptchaConfig",Me(v,f))})).apply(this,arguments)}function Gn(){return(Gn=(0,d.Z)(function*(v,f){return Ke(v,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function Xt(){return(Xt=(0,d.Z)(function*(v,f){return Ke(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function qn(){return(qn=(0,d.Z)(function*(v,f){return Ke(v,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function ur(v){if(v)try{const f=new Date(Number(v));if(!isNaN(f.getTime()))return f.toUTCString()}catch{}}function vr(){return(vr=(0,d.Z)(function*(v,f=!1){const m=(0,ee.m9)(v),T=yield m.getIdToken(f),z=$t(T);ce(z&&z.exp&&z.auth_time&&z.iat,m.auth,"internal-error");const te="object"==typeof z.firebase?z.firebase:void 0,Ne=te?.sign_in_provider;return{claims:z,token:T,authTime:ur(ss(z.auth_time)),issuedAtTime:ur(ss(z.iat)),expirationTime:ur(ss(z.exp)),signInProvider:Ne||null,signInSecondFactor:te?.sign_in_second_factor||null}})).apply(this,arguments)}function ss(v){return 1e3*Number(v)}function $t(v){const[f,m,T]=v.split(".");if(void 0===f||void 0===m||void 0===T)return nt("JWT malformed, contained fewer than 3 sections"),null;try{const z=(0,ee.tV)(m);return z?JSON.parse(z):(nt("Failed to decode base64 JWT payload"),null)}catch(z){return nt("Caught error parsing JWT payload as JSON",z?.toString()),null}}function nn(v,f){return sn.apply(this,arguments)}function sn(){return(sn=(0,d.Z)(function*(v,f,m=!1){if(m)return f;try{return yield f}catch(T){throw T instanceof ee.ZR&&function Fr({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}(T)&&v.auth.currentUser===v&&(yield v.auth.signOut()),T}})).apply(this,arguments)}class bi{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var m;if(f){const T=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),T}{this.errorBackoff=3e4;const z=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,z)}}schedule(f=!1){var m=this;if(!this.isRunning)return;const T=this.getInterval(f);this.timerId=setTimeout((0,d.Z)(function*(){yield m.iteration()}),T)}iteration(){var f=this;return(0,d.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m?.code&&f.schedule(!0))}f.schedule()})()}}class Vn{constructor(f,m){this.createdAt=f,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=ur(this.lastLoginAt),this.creationTime=ur(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function mn(v){return rr.apply(this,arguments)}function rr(){return rr=(0,d.Z)(function*(v){var f;const m=v.auth,T=yield v.getIdToken(),z=yield nn(v,function tn(v,f){return qn.apply(this,arguments)}(m,{idToken:T}));ce(z?.users.length,m,"internal-error");const te=z.users[0];v._notifyReloadListener(te);const Ne=null!==(f=te.providerUserInfo)&&void 0!==f&&f.length?function Pr(v){return v.map(f=>{var{providerId:m}=f,T=(0,ge._T)(f,["providerId"]);return{providerId:m,uid:T.rawId||"",displayName:T.displayName||null,email:T.email||null,phoneNumber:T.phoneNumber||null,photoURL:T.photoUrl||null}})}(te.providerUserInfo):[],Je=function Rr(v,f){return[...v.filter(T=>!f.some(z=>z.providerId===T.providerId)),...f]}(v.providerData,Ne),hn=!!v.isAnonymous&&!(v.email&&te.passwordHash||Je?.length),Tr={uid:te.localId,displayName:te.displayName||null,photoURL:te.photoUrl||null,email:te.email||null,emailVerified:te.emailVerified||!1,phoneNumber:te.phoneNumber||null,tenantId:te.tenantId||null,providerData:Je,metadata:new Vn(te.createdAt,te.lastLoginAt),isAnonymous:hn};Object.assign(v,Tr)}),rr.apply(this,arguments)}function Sr(){return(Sr=(0,d.Z)(function*(v){const f=(0,ee.m9)(v);yield mn(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function mr(){return(mr=(0,d.Z)(function*(v,f){const m=yield Et(v,{},(0,d.Z)(function*(){const T=(0,ee.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:z,apiKey:te}=v.config,Ne=Nn(v,z,"/v1/token",`key=${te}`),Je=yield v._getAdditionalHeaders();return Je["Content-Type"]="application/x-www-form-urlencoded",Ce.fetch()(Ne,{method:"POST",headers:Je,body:T})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}function Y(){return(Y=(0,d.Z)(function*(v,f){return Ke(v,"POST","/v2/accounts:revokeToken",Me(v,f))})).apply(this,arguments)}class U{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){ce(f.idToken,"internal-error"),ce(typeof f.idToken<"u","internal-error"),ce(typeof f.refreshToken<"u","internal-error");const m="expiresIn"in f&&typeof f.expiresIn<"u"?Number(f.expiresIn):function Si(v){const f=$t(v);return ce(f,"internal-error"),ce(typeof f.exp<"u","internal-error"),ce(typeof f.iat<"u","internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,m)}getToken(f,m=!1){var T=this;return(0,d.Z)(function*(){return ce(!T.accessToken||T.refreshToken,f,"user-token-expired"),m||!T.accessToken||T.isExpired?T.refreshToken?(yield T.refresh(f,T.refreshToken),T.accessToken):null:T.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,m){var T=this;return(0,d.Z)(function*(){const{accessToken:z,refreshToken:te,expiresIn:Ne}=yield function jr(v,f){return mr.apply(this,arguments)}(f,m);T.updateTokensAndExpiration(z,te,Number(Ne))})()}updateTokensAndExpiration(f,m,T){this.refreshToken=m||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*T}static fromJSON(f,m){const{refreshToken:T,accessToken:z,expirationTime:te}=m,Ne=new U;return T&&(ce("string"==typeof T,"internal-error",{appName:f}),Ne.refreshToken=T),z&&(ce("string"==typeof z,"internal-error",{appName:f}),Ne.accessToken=z),te&&(ce("number"==typeof te,"internal-error",{appName:f}),Ne.expirationTime=te),Ne}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new U,this.toJSON())}_performRefresh(){return ct("not implemented")}}function x(v,f){ce("string"==typeof v||typeof v>"u","internal-error",{appName:f})}class N{constructor(f){var{uid:m,auth:T,stsTokenManager:z}=f,te=(0,ge._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new bi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=T,this.stsTokenManager=z,this.accessToken=z.accessToken,this.displayName=te.displayName||null,this.email=te.email||null,this.emailVerified=te.emailVerified||!1,this.phoneNumber=te.phoneNumber||null,this.photoURL=te.photoURL||null,this.isAnonymous=te.isAnonymous||!1,this.tenantId=te.tenantId||null,this.providerData=te.providerData?[...te.providerData]:[],this.metadata=new Vn(te.createdAt||void 0,te.lastLoginAt||void 0)}getIdToken(f){var m=this;return(0,d.Z)(function*(){const T=yield nn(m,m.stsTokenManager.getToken(m.auth,f));return ce(T,m.auth,"internal-error"),m.accessToken!==T&&(m.accessToken=T,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),T})()}getIdTokenResult(f){return function vn(v){return vr.apply(this,arguments)}(this,f)}reload(){return function qr(v){return Sr.apply(this,arguments)}(this)}_assign(f){this!==f&&(ce(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(m=>Object.assign({},m)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){const m=new N(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}));return m.metadata._copy(this.metadata),m}_onReload(f){ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,m=!1){var T=this;return(0,d.Z)(function*(){let z=!1;f.idToken&&f.idToken!==T.stsTokenManager.accessToken&&(T.stsTokenManager.updateFromServerResponse(f),z=!0),m&&(yield mn(T)),yield T.auth._persistUserIfCurrent(T),z&&T.auth._notifyListenersIfCurrent(T)})()}delete(){var f=this;return(0,d.Z)(function*(){const m=yield f.getIdToken();return yield nn(f,function nr(v,f){return Gn.apply(this,arguments)}(f.auth,{idToken:m})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,m){var T,z,te,Ne,Je,mt,rn,hn;const Tr=null!==(T=m.displayName)&&void 0!==T?T:void 0,cs=null!==(z=m.email)&&void 0!==z?z:void 0,Uo=null!==(te=m.phoneNumber)&&void 0!==te?te:void 0,jl=null!==(Ne=m.photoURL)&&void 0!==Ne?Ne:void 0,eu=null!==(Je=m.tenantId)&&void 0!==Je?Je:void 0,Ju=null!==(mt=m._redirectEventId)&&void 0!==mt?mt:void 0,Xu=null!==(rn=m.createdAt)&&void 0!==rn?rn:void 0,Sh=null!==(hn=m.lastLoginAt)&&void 0!==hn?hn:void 0,{uid:el,emailVerified:$l,isAnonymous:Zf,providerData:bh,stsTokenManager:xi}=m;ce(el&&xi,f,"internal-error");const vd=U.fromJSON(this.name,xi);ce("string"==typeof el,f,"internal-error"),x(Tr,f.name),x(cs,f.name),ce("boolean"==typeof $l,f,"internal-error"),ce("boolean"==typeof Zf,f,"internal-error"),x(Uo,f.name),x(jl,f.name),x(eu,f.name),x(Ju,f.name),x(Xu,f.name),x(Sh,f.name);const tl=new N({uid:el,auth:f,email:cs,emailVerified:$l,displayName:Tr,isAnonymous:Zf,photoURL:jl,phoneNumber:Uo,tenantId:eu,stsTokenManager:vd,createdAt:Xu,lastLoginAt:Sh});return bh&&Array.isArray(bh)&&(tl.providerData=bh.map(Hl=>Object.assign({},Hl))),Ju&&(tl._redirectEventId=Ju),tl}static _fromIdTokenResponse(f,m,T=!1){return(0,d.Z)(function*(){const z=new U;z.updateFromServerResponse(m);const te=new N({uid:m.localId,auth:f,stsTokenManager:z,isAnonymous:T});return yield mn(te),te})()}}const oe=new Map;function be(v){It(v instanceof Function,"Expected a class definition");let f=oe.get(v);return f?(It(f instanceof v,"Instance stored in cache mismatched with class"),f):(f=new v,oe.set(v,f),f)}const dt=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.Z)(function*(){return!0})()}_set(m,T){var z=this;return(0,d.Z)(function*(){z.storage[m]=T})()}_get(m){var T=this;return(0,d.Z)(function*(){const z=T.storage[m];return void 0===z?null:z})()}_remove(m){var T=this;return(0,d.Z)(function*(){delete T.storage[m]})()}_addListener(m,T){}_removeListener(m,T){}}return v.type="NONE",v})();function Ct(v,f,m){return`firebase:${v}:${f}:${m}`}class St{constructor(f,m,T){this.persistence=f,this.auth=m,this.userKey=T;const{config:z,name:te}=this.auth;this.fullUserKey=Ct(this.userKey,z.apiKey,te),this.fullPersistenceKey=Ct("persistence",z.apiKey,te),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,d.Z)(function*(){const m=yield f.persistence._get(f.fullUserKey);return m?N._fromJSON(f.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var m=this;return(0,d.Z)(function*(){if(m.persistence===f)return;const T=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=f,T?m.setCurrentUser(T):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,m,T="authUser"){return(0,d.Z)(function*(){if(!m.length)return new St(be(dt),f,T);const z=(yield Promise.all(m.map(function(){var rn=(0,d.Z)(function*(hn){if(yield hn._isAvailable())return hn});return function(hn){return rn.apply(this,arguments)}}()))).filter(rn=>rn);let te=z[0]||be(dt);const Ne=Ct(T,f.config.apiKey,f.name);let Je=null;for(const rn of m)try{const hn=yield rn._get(Ne);if(hn){const Tr=N._fromJSON(f,hn);rn!==te&&(Je=Tr),te=rn;break}}catch{}const mt=z.filter(rn=>rn._shouldAllowMigration);return te._shouldAllowMigration&&mt.length?(te=mt[0],Je&&(yield te._set(Ne,Je.toJSON())),yield Promise.all(m.map(function(){var rn=(0,d.Z)(function*(hn){if(hn!==te)try{yield hn._remove(Ne)}catch{}});return function(hn){return rn.apply(this,arguments)}}())),new St(te,f,T)):new St(te,f,T)})()}}function Zt(v){const f=v.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(De(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(On(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(pe(f))return"Blackberry";if(Fe(f))return"Webos";if(we(f))return"Safari";if((f.includes("chrome/")||me(f))&&!f.includes("edge/"))return"Chrome";if(fe(f))return"Android";{const T=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===T?.length)return T[1]}return"Other"}function On(v=(0,ee.z$)()){return/firefox\//i.test(v)}function we(v=(0,ee.z$)()){const f=v.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function me(v=(0,ee.z$)()){return/crios\//i.test(v)}function De(v=(0,ee.z$)()){return/iemobile/i.test(v)}function fe(v=(0,ee.z$)()){return/android/i.test(v)}function pe(v=(0,ee.z$)()){return/blackberry/i.test(v)}function Fe(v=(0,ee.z$)()){return/webos/i.test(v)}function Ge(v=(0,ee.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function Vt(v=(0,ee.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}function Xn(v=(0,ee.z$)()){return Ge(v)||fe(v)||Fe(v)||pe(v)||/windows phone/i.test(v)||De(v)}function Mr(v,f=[]){let m;switch(v){case"Browser":m=Zt((0,ee.z$)());break;case"Worker":m=`${Zt((0,ee.z$)())}-${v}`;break;default:m=v}const T=f.length?f.join(","):"FirebaseCore-web";return`${m}/JsCore/${J.SDK_VERSION}/${T}`}class Lr{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,m){const T=te=>new Promise((Ne,Je)=>{try{Ne(f(te))}catch(mt){Je(mt)}});T.onAbort=m,this.queue.push(T);const z=this.queue.length-1;return()=>{this.queue[z]=()=>Promise.resolve()}}runMiddleware(f){var m=this;return(0,d.Z)(function*(){if(m.auth.currentUser===f)return;const T=[];try{for(const z of m.queue)yield z(f),z.onAbort&&T.push(z.onAbort)}catch(z){T.reverse();for(const te of T)try{te()}catch{}throw m.auth._errorFactory.create("login-blocked",{originalMessage:z?.message})}})()}}function xn(){return(xn=(0,d.Z)(function*(v,f={}){return Ke(v,"GET","/v2/passwordPolicy",Me(v,f))})).apply(this,arguments)}class li{constructor(f){var m,T,z,te;const Ne=f.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(m=Ne.minPasswordLength)&&void 0!==m?m:6,Ne.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=Ne.maxPasswordLength),void 0!==Ne.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=Ne.containsLowercaseCharacter),void 0!==Ne.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=Ne.containsUppercaseCharacter),void 0!==Ne.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=Ne.containsNumericCharacter),void 0!==Ne.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=Ne.containsNonAlphanumericCharacter),this.enforcementState=f.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(z=null===(T=f.allowedNonAlphanumericCharacters)||void 0===T?void 0:T.join(""))&&void 0!==z?z:"",this.forceUpgradeOnSignin=null!==(te=f.forceUpgradeOnSignin)&&void 0!==te&&te,this.schemaVersion=f.schemaVersion}validatePassword(f){var m,T,z,te,Ne,Je;const mt={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(f,mt),this.validatePasswordCharacterOptions(f,mt),mt.isValid&&(mt.isValid=null===(m=mt.meetsMinPasswordLength)||void 0===m||m),mt.isValid&&(mt.isValid=null===(T=mt.meetsMaxPasswordLength)||void 0===T||T),mt.isValid&&(mt.isValid=null===(z=mt.containsLowercaseLetter)||void 0===z||z),mt.isValid&&(mt.isValid=null===(te=mt.containsUppercaseLetter)||void 0===te||te),mt.isValid&&(mt.isValid=null===(Ne=mt.containsNumericCharacter)||void 0===Ne||Ne),mt.isValid&&(mt.isValid=null===(Je=mt.containsNonAlphanumericCharacter)||void 0===Je||Je),mt}validatePasswordLengthOptions(f,m){const T=this.customStrengthOptions.minPasswordLength,z=this.customStrengthOptions.maxPasswordLength;T&&(m.meetsMinPasswordLength=f.length>=T),z&&(m.meetsMaxPasswordLength=f.length<=z)}validatePasswordCharacterOptions(f,m){let T;this.updatePasswordCharacterOptionsStatuses(m,!1,!1,!1,!1);for(let z=0;z<f.length;z++)T=f.charAt(z),this.updatePasswordCharacterOptionsStatuses(m,T>="a"&&T<="z",T>="A"&&T<="Z",T>="0"&&T<="9",this.allowedNonAlphanumericCharacters.includes(T))}updatePasswordCharacterOptionsStatuses(f,m,T,z,te){this.customStrengthOptions.containsLowercaseLetter&&(f.containsLowercaseLetter||(f.containsLowercaseLetter=m)),this.customStrengthOptions.containsUppercaseLetter&&(f.containsUppercaseLetter||(f.containsUppercaseLetter=T)),this.customStrengthOptions.containsNumericCharacter&&(f.containsNumericCharacter||(f.containsNumericCharacter=z)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(f.containsNonAlphanumericCharacter||(f.containsNonAlphanumericCharacter=te))}}class vs{constructor(f,m,T,z){this.app=f,this.heartbeatServiceProvider=m,this.appCheckServiceProvider=T,this.config=z,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Kr(this),this.idTokenSubscription=new Kr(this),this.beforeStateQueue=new Lr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=it,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=z.sdkClientVersion}_initializeWithPersistence(f,m){var T=this;return m&&(this._popupRedirectResolver=be(m)),this._initializationPromise=this.queue((0,d.Z)(function*(){var z,te;if(!T._deleted&&(T.persistenceManager=yield St.create(T,f),!T._deleted)){if(null!==(z=T._popupRedirectResolver)&&void 0!==z&&z._shouldInitProactively)try{yield T._popupRedirectResolver._initialize(T)}catch{}yield T.initializeCurrentUser(m),T.lastNotifiedUid=(null===(te=T.currentUser)||void 0===te?void 0:te.uid)||null,!T._deleted&&(T._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,d.Z)(function*(){if(f._deleted)return;const m=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||m){if(f.currentUser&&m&&f.currentUser.uid===m.uid)return f._currentUser._assign(m),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(m,!0)}})()}initializeCurrentUser(f){var m=this;return(0,d.Z)(function*(){var T;const z=yield m.assertedPersistence.getCurrentUser();let te=z,Ne=!1;if(f&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const Je=null===(T=m.redirectUser)||void 0===T?void 0:T._redirectEventId,mt=te?._redirectEventId,rn=yield m.tryRedirectSignIn(f);(!Je||Je===mt)&&rn?.user&&(te=rn.user,Ne=!0)}if(!te)return m.directlySetCurrentUser(null);if(!te._redirectEventId){if(Ne)try{yield m.beforeStateQueue.runMiddleware(te)}catch(Je){te=z,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(Je))}return te?m.reloadAndSetCurrentUserOrClear(te):m.directlySetCurrentUser(null)}return ce(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===te._redirectEventId?m.directlySetCurrentUser(te):m.reloadAndSetCurrentUserOrClear(te)})()}tryRedirectSignIn(f){var m=this;return(0,d.Z)(function*(){let T=null;try{T=yield m._popupRedirectResolver._completeRedirectFn(m,f,!0)}catch{yield m._setRedirectUser(null)}return T})()}reloadAndSetCurrentUserOrClear(f){var m=this;return(0,d.Z)(function*(){try{yield mn(f)}catch(T){if("auth/network-request-failed"!==T?.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function Nt(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var f=this;return(0,d.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var m=this;return(0,d.Z)(function*(){const T=f?(0,ee.m9)(f):null;return T&&ce(T.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(T&&T._clone(m))})()}_updateCurrentUser(f,m=!1){var T=this;return(0,d.Z)(function*(){if(!T._deleted)return f&&ce(T.tenantId===f.tenantId,T,"tenant-id-mismatch"),m||(yield T.beforeStateQueue.runMiddleware(f)),T.queue((0,d.Z)(function*(){yield T.directlySetCurrentUser(f),T.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,d.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var m=this;return this.queue((0,d.Z)(function*(){yield m.assertedPersistence.setPersistence(be(f))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(f){var m=this;return(0,d.Z)(function*(){m._getPasswordPolicyInternal()||(yield m._updatePasswordPolicy());const T=m._getPasswordPolicyInternal();return T.schemaVersion!==m.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(m._errorFactory.create("unsupported-password-policy-schema-version",{})):T.validatePassword(f)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var f=this;return(0,d.Z)(function*(){const m=yield function ki(v){return xn.apply(this,arguments)}(f),T=new li(m);null===f.tenantId?f._projectPasswordPolicy=T:f._tenantPasswordPolicies[f.tenantId]=T})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new ee.LL("auth","Firebase",f())}onAuthStateChanged(f,m,T){return this.registerStateListener(this.authStateSubscription,f,m,T)}beforeAuthStateChanged(f,m){return this.beforeStateQueue.pushCallback(f,m)}onIdTokenChanged(f,m,T){return this.registerStateListener(this.idTokenSubscription,f,m,T)}authStateReady(){return new Promise((f,m)=>{if(this.currentUser)f();else{const T=this.onAuthStateChanged(()=>{T(),f()},m)}})}revokeAccessToken(f){var m=this;return(0,d.Z)(function*(){if(m.currentUser){const T=yield m.currentUser.getIdToken(),z={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:f,idToken:T};null!=m.tenantId&&(z.tenantId=m.tenantId),yield function ve(v,f){return Y.apply(this,arguments)}(m,z)}})()}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,m){var T=this;return(0,d.Z)(function*(){const z=yield T.getOrInitRedirectPersistenceManager(m);return null===f?z.removeCurrentUser():z.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var m=this;return(0,d.Z)(function*(){if(!m.redirectPersistenceManager){const T=f&&be(f)||m._popupRedirectResolver;ce(T,m,"argument-error"),m.redirectPersistenceManager=yield St.create(m,[be(T._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(f){var m=this;return(0,d.Z)(function*(){var T,z;return m._isInitialized&&(yield m.queue((0,d.Z)(function*(){}))),(null===(T=m._currentUser)||void 0===T?void 0:T._redirectEventId)===f?m._currentUser:(null===(z=m.redirectUser)||void 0===z?void 0:z._redirectEventId)===f?m.redirectUser:null})()}_persistUserIfCurrent(f){var m=this;return(0,d.Z)(function*(){if(f===m.currentUser)return m.queue((0,d.Z)(function*(){return m.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const T=null!==(m=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==T&&(this.lastNotifiedUid=T,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,m,T,z){if(this._deleted)return()=>{};const te="function"==typeof m?m:m.next.bind(m);let Ne=!1;const Je=this._isInitialized?Promise.resolve():this._initializationPromise;if(ce(Je,this,"internal-error"),Je.then(()=>{Ne||te(this.currentUser)}),"function"==typeof m){const mt=f.addObserver(m,T,z);return()=>{Ne=!0,mt()}}{const mt=f.addObserver(m);return()=>{Ne=!0,mt()}}}directlySetCurrentUser(f){var m=this;return(0,d.Z)(function*(){m.currentUser&&m.currentUser!==f&&m._currentUser._stopProactiveRefresh(),f&&m.isProactiveRefreshEnabled&&f._startProactiveRefresh(),m.currentUser=f,f?yield m.assertedPersistence.setCurrentUser(f):yield m.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=Mr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,d.Z)(function*(){var m;const T={"X-Client-Version":f.clientVersion};f.app.options.appId&&(T["X-Firebase-gmpid"]=f.app.options.appId);const z=yield null===(m=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();z&&(T["X-Firebase-Client"]=z);const te=yield f._getAppCheckToken();return te&&(T["X-Firebase-AppCheck"]=te),T})()}_getAppCheckToken(){var f=this;return(0,d.Z)(function*(){var m;const T=yield null===(m=f.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getToken();return T?.error&&function Lt(v,...f){Xe.logLevel<=Ee.in.WARN&&Xe.warn(`Auth (${J.SDK_VERSION}): ${v}`,...f)}(`Error while retrieving App Check token: ${T.error}`),T?.token})()}}function Fn(v){return(0,ee.m9)(v)}class Kr{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,ee.ne)(m=>this.observer=m)}get next(){return ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let ni={loadJS:()=>(0,d.Z)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Fi(v){return ni.loadJS(v)}function Nr(v){return`__${v}${Math.floor(1e6*Math.random())}`}class Es{constructor(f){this.type="recaptcha-enterprise",this.auth=Fn(f)}verify(f="verify",m=!1){var T=this;return(0,d.Z)(function*(){function te(){return te=(0,d.Z)(function*(Je){if(!m){if(null==Je.tenantId&&null!=Je._agentRecaptchaConfig)return Je._agentRecaptchaConfig.siteKey;if(null!=Je.tenantId&&void 0!==Je._tenantRecaptchaConfigs[Je.tenantId])return Je._tenantRecaptchaConfigs[Je.tenantId].siteKey}return new Promise(function(){var mt=(0,d.Z)(function*(rn,hn){kn(Je,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Tr=>{if(void 0!==Tr.recaptchaKey){const cs=new Jn(Tr);return null==Je.tenantId?Je._agentRecaptchaConfig=cs:Je._tenantRecaptchaConfigs[Je.tenantId]=cs,rn(cs.siteKey)}hn(new Error("recaptcha Enterprise site key undefined"))}).catch(Tr=>{hn(Tr)})});return function(rn,hn){return mt.apply(this,arguments)}}())}),te.apply(this,arguments)}function Ne(Je,mt,rn){const hn=window.grecaptcha;Rt(hn)?hn.enterprise.ready(()=>{hn.enterprise.execute(Je,{action:f}).then(Tr=>{mt(Tr)}).catch(()=>{mt("NO_RECAPTCHA")})}):rn(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Je,mt)=>{(function z(Je){return te.apply(this,arguments)})(T.auth).then(rn=>{if(!m&&Rt(window.grecaptcha))Ne(rn,Je,mt);else{if(typeof window>"u")return void mt(new Error("RecaptchaVerifier is only supported in browser"));let hn=function eo(){return ni.recaptchaEnterpriseScript}();0!==hn.length&&(hn+=rn),Fi(hn).then(()=>{Ne(rn,Je,mt)}).catch(Tr=>{mt(Tr)})}}).catch(rn=>{mt(rn)})})})()}}function Qi(v,f,m){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,d.Z)(function*(v,f,m,T=!1){const z=new Es(v);let te;try{te=yield z.verify(m)}catch{te=yield z.verify(m,!0)}const Ne=Object.assign({},f);return Object.assign(Ne,T?{captchaResp:te}:{captchaResponse:te}),Object.assign(Ne,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Ne,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Ne})).apply(this,arguments)}function Ri(v,f,m,T){return Ms.apply(this,arguments)}function Ms(){return Ms=(0,d.Z)(function*(v,f,m,T){var z;if(null!==(z=v._getRecaptchaConfig())&&void 0!==z&&z.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const te=yield Qi(v,f,m,"getOobCode"===m);return T(v,te)}return T(v,f).catch(function(){var te=(0,d.Z)(function*(Ne){if("auth/missing-recaptcha-token"===Ne.code){console.log(`${m} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const Je=yield Qi(v,f,m,"getOobCode"===m);return T(v,Je)}return Promise.reject(Ne)});return function(Ne){return te.apply(this,arguments)}}())}),Ms.apply(this,arguments)}function $o(v,f,m){const T=Fn(v);ce(T._canInitEmulator,T,"emulator-config-failed"),ce(/^https?:\/\//.test(f),T,"invalid-emulator-scheme");const z=!!m?.disableWarnings,te=no(f),{host:Ne,port:Je}=function _o(v){const f=no(v),m=/(\/\/)?([^?#/]+)/.exec(v.substr(f.length));if(!m)return{host:"",port:null};const T=m[2].split("@").pop()||"",z=/^(\[[^\]]+\])(:|$)/.exec(T);if(z){const te=z[1];return{host:te,port:ji(T.substr(te.length+1))}}{const[te,Ne]=T.split(":");return{host:te,port:ji(Ne)}}}(f);T.config.emulator={url:`${te}//${Ne}${null===Je?"":`:${Je}`}/`},T.settings.appVerificationDisabledForTesting=!0,T.emulatorConfig=Object.freeze({host:Ne,port:Je,protocol:te.replace(":",""),options:Object.freeze({disableWarnings:z})}),z||function yo(){function v(){const f=document.createElement("p"),m=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}function no(v){const f=v.indexOf(":");return f<0?"":v.substr(0,f+1)}function ji(v){if(!v)return null;const f=Number(v);return isNaN(f)?null:f}class os{constructor(f,m){this.providerId=f,this.signInMethod=m}toJSON(){return ct("not implemented")}_getIdTokenResponse(f){return ct("not implemented")}_linkToIdToken(f,m){return ct("not implemented")}_getReauthenticationResolver(f){return ct("not implemented")}}function ro(v,f){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,d.Z)(function*(v,f){return Ke(v,"POST","/v1/accounts:resetPassword",Me(v,f))})).apply(this,arguments)}function ri(){return(ri=(0,d.Z)(function*(v,f){return Ke(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Vr(v,f){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,d.Z)(function*(v,f){return Ke(v,"POST","/v1/accounts:signUp",f)})).apply(this,arguments)}function Ns(){return(Ns=(0,d.Z)(function*(v,f){return Ke(v,"POST","/v1/accounts:update",Me(v,f))})).apply(this,arguments)}function io(v,f){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,d.Z)(function*(v,f){return Mn(v,"POST","/v1/accounts:signInWithPassword",Me(v,f))})).apply(this,arguments)}function Li(v,f){return $i.apply(this,arguments)}function $i(){return($i=(0,d.Z)(function*(v,f){return Ke(v,"POST","/v1/accounts:sendOobCode",Me(v,f))})).apply(this,arguments)}function Ot(){return(Ot=(0,d.Z)(function*(v,f){return Li(v,f)})).apply(this,arguments)}function cn(v,f){return cr.apply(this,arguments)}function cr(){return(cr=(0,d.Z)(function*(v,f){return Li(v,f)})).apply(this,arguments)}function Hi(v,f){return as.apply(this,arguments)}function as(){return(as=(0,d.Z)(function*(v,f){return Li(v,f)})).apply(this,arguments)}function Vi(){return(Vi=(0,d.Z)(function*(v,f){return Li(v,f)})).apply(this,arguments)}function zi(){return(zi=(0,d.Z)(function*(v,f){return Mn(v,"POST","/v1/accounts:signInWithEmailLink",Me(v,f))})).apply(this,arguments)}function an(){return(an=(0,d.Z)(function*(v,f){return Mn(v,"POST","/v1/accounts:signInWithEmailLink",Me(v,f))})).apply(this,arguments)}class _i extends os{constructor(f,m,T,z=null){super("password",T),this._email=f,this._password=m,this._tenantId=z}static _fromEmailAndPassword(f,m){return new _i(f,m,"password")}static _fromEmailAndCode(f,m,T=null){return new _i(f,m,"emailLink",T)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f;if(m?.email&&m?.password){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(f){var m=this;return(0,d.Z)(function*(){switch(m.signInMethod){case"password":return Ri(f,{returnSecureToken:!0,email:m._email,password:m._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",io);case"emailLink":return function er(v,f){return zi.apply(this,arguments)}(f,{email:m._email,oobCode:m._password});default:se(f,"internal-error")}})()}_linkToIdToken(f,m){var T=this;return(0,d.Z)(function*(){switch(T.signInMethod){case"password":return Ri(f,{idToken:m,returnSecureToken:!0,email:T._email,password:T._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Vr);case"emailLink":return function fs(v,f){return an.apply(this,arguments)}(f,{idToken:m,email:T._email,oobCode:T._password});default:se(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function yi(v,f){return Is.apply(this,arguments)}function Is(){return(Is=(0,d.Z)(function*(v,f){return Mn(v,"POST","/v1/accounts:signInWithIdp",Me(v,f))})).apply(this,arguments)}class Bn extends os{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const m=new Bn(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(m.idToken=f.idToken),f.accessToken&&(m.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(m.nonce=f.nonce),f.pendingToken&&(m.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(m.accessToken=f.oauthToken,m.secret=f.oauthTokenSecret):se("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:T,signInMethod:z}=m,te=(0,ge._T)(m,["providerId","signInMethod"]);if(!T||!z)return null;const Ne=new Bn(T,z);return Ne.idToken=te.idToken||void 0,Ne.accessToken=te.accessToken||void 0,Ne.secret=te.secret,Ne.nonce=te.nonce,Ne.pendingToken=te.pendingToken||null,Ne}_getIdTokenResponse(f){return yi(f,this.buildRequest())}_linkToIdToken(f,m){const T=this.buildRequest();return T.idToken=m,yi(f,T)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,yi(f,m)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),f.postBody=(0,ee.xO)(m)}return f}}function Dr(){return(Dr=(0,d.Z)(function*(v,f){return Ke(v,"POST","/v1/accounts:sendVerificationCode",Me(v,f))})).apply(this,arguments)}function Ei(){return(Ei=(0,d.Z)(function*(v,f){return Mn(v,"POST","/v1/accounts:signInWithPhoneNumber",Me(v,f))})).apply(this,arguments)}function Qr(){return(Qr=(0,d.Z)(function*(v,f){const m=yield Mn(v,"POST","/v1/accounts:signInWithPhoneNumber",Me(v,f));if(m.temporaryProof)throw In(v,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const ws={USER_NOT_FOUND:"user-not-found"};function jn(){return(jn=(0,d.Z)(function*(v,f){return Mn(v,"POST","/v1/accounts:signInWithPhoneNumber",Me(v,Object.assign(Object.assign({},f),{operation:"REAUTH"})),ws)})).apply(this,arguments)}class Ws extends os{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,m){return new Ws({verificationId:f,verificationCode:m})}static _fromTokenResponse(f,m){return new Ws({phoneNumber:f,temporaryProof:m})}_getIdTokenResponse(f){return function vi(v,f){return Ei.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,m){return function Ji(v,f){return Qr.apply(this,arguments)}(f,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function vo(v,f){return jn.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:m,verificationId:T,verificationCode:z}=this.params;return f&&m?{temporaryProof:f,phoneNumber:m}:{sessionInfo:T,code:z}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:m,verificationCode:T,phoneNumber:z,temporaryProof:te}=f;return T||m||z||te?new Ws({verificationId:m,verificationCode:T,phoneNumber:z,temporaryProof:te}):null}}class Gr{constructor(f){var m,T,z,te,Ne,Je;const mt=(0,ee.zd)((0,ee.pd)(f)),rn=null!==(m=mt.apiKey)&&void 0!==m?m:null,hn=null!==(T=mt.oobCode)&&void 0!==T?T:null,Tr=function bo(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(z=mt.mode)&&void 0!==z?z:null);ce(rn&&hn&&Tr,"argument-error"),this.apiKey=rn,this.operation=Tr,this.code=hn,this.continueUrl=null!==(te=mt.continueUrl)&&void 0!==te?te:null,this.languageCode=null!==(Ne=mt.languageCode)&&void 0!==Ne?Ne:null,this.tenantId=null!==(Je=mt.tenantId)&&void 0!==Je?Je:null}static parseLink(f){const m=function qs(v){const f=(0,ee.zd)((0,ee.pd)(v)).link,m=f?(0,ee.zd)((0,ee.pd)(f)).deep_link_id:null,T=(0,ee.zd)((0,ee.pd)(v)).deep_link_id;return(T?(0,ee.zd)((0,ee.pd)(T)).link:null)||T||m||f||v}(f);try{return new Gr(m)}catch{return null}}}let Os=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(m,T){return _i._fromEmailAndPassword(m,T)}static credentialWithLink(m,T){const z=Gr.parseLink(T);return ce(z,"argument-error"),_i._fromEmailAndCode(m,z.code,z.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class ii{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class Or extends ii{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class Ii extends Or{static credentialFromJSON(f){const m="string"==typeof f?JSON.parse(f):f;return ce("providerId"in m&&"signInMethod"in m,"argument-error"),Bn._fromParams(m)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return ce(f.idToken||f.accessToken,"argument-error"),Bn._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return Ii.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return Ii.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:m,oauthAccessToken:T,oauthTokenSecret:z,pendingToken:te,nonce:Ne,providerId:Je}=f;if(!T&&!z&&!m&&!te||!Je)return null;try{return new Ii(Je)._credential({idToken:m,accessToken:T,nonce:Ne,pendingToken:te})}catch{return null}}}let dn=(()=>{class v extends Or{constructor(){super("facebook.com")}static credential(m){return Bn._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),wi=(()=>{class v extends Or{constructor(){super("google.com"),this.addScope("profile")}static credential(m,T){return Bn._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:T})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:T,oauthAccessToken:z}=m;if(!T&&!z)return null;try{return v.credential(T,z)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),so=(()=>{class v extends Or{constructor(){super("github.com")}static credential(m){return Bn._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class ao extends os{constructor(f,m){super(f,f),this.pendingToken=m}_getIdTokenResponse(f){return yi(f,this.buildRequest())}_linkToIdToken(f,m){const T=this.buildRequest();return T.idToken=m,yi(f,T)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,yi(f,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:T,signInMethod:z,pendingToken:te}=m;return T&&z&&te&&T===z?new ao(T,te):null}static _create(f,m){return new ao(f,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ts extends ii{constructor(f){ce(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return Ts.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return Ts.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const m=ao.fromJSON(f);return ce(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:m,providerId:T}=f;if(!m||!T)return null;try{return ao._create(T,m)}catch{return null}}}let Eo=(()=>{class v extends Or{constructor(){super("twitter.com")}static credential(m,T){return Bn._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:T})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:T,oauthTokenSecret:z}=m;if(!T||!z)return null;try{return v.credential(T,z)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function Po(v,f){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,d.Z)(function*(v,f){return Mn(v,"POST","/v1/accounts:signUp",Me(v,f))})).apply(this,arguments)}class kr{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,m,T,z=!1){return(0,d.Z)(function*(){const te=yield N._fromIdTokenResponse(f,T,z),Ne=xs(T);return new kr({user:te,providerId:Ne,_tokenResponse:T,operationType:m})})()}static _forOperation(f,m,T){return(0,d.Z)(function*(){yield f._updateTokensIfNecessary(T,!0);const z=xs(T);return new kr({user:f,providerId:z,_tokenResponse:T,operationType:m})})()}}function xs(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function Ba(v){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,d.Z)(function*(v){var f;const m=Fn(v);if(yield m._initializationPromise,null!==(f=m.currentUser)&&void 0!==f&&f.isAnonymous)return new kr({user:m.currentUser,providerId:null,operationType:"signIn"});const T=yield Po(m,{returnSecureToken:!0}),z=yield kr._fromIdTokenResponse(m,"signIn",T,!0);return yield m._updateCurrentUser(z.user),z})).apply(this,arguments)}class uo extends ee.ZR{constructor(f,m,T,z){var te;super(m.code,m.message),this.operationType=T,this.user=z,Object.setPrototypeOf(this,uo.prototype),this.customData={appName:f.name,tenantId:null!==(te=f.tenantId)&&void 0!==te?te:void 0,_serverResponse:m.customData._serverResponse,operationType:T}}static _fromErrorAndOperation(f,m,T,z){return new uo(f,m,T,z)}}function Ir(v,f,m,T){return("reauthenticate"===f?m._getReauthenticationResolver(v):m._getIdTokenResponse(v)).catch(te=>{throw"auth/multi-factor-auth-required"===te.code?uo._fromErrorAndOperation(v,te,f,T):te})}function Sa(v){return new Set(v.map(({providerId:f})=>f).filter(f=>!!f))}function fa(v,f){return j.apply(this,arguments)}function j(){return j=(0,d.Z)(function*(v,f){const m=(0,ee.m9)(v);yield X(!0,m,f);const{providerUserInfo:T}=yield function Kt(v,f){return Xt.apply(this,arguments)}(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[f]}),z=Sa(T||[]);return m.providerData=m.providerData.filter(te=>z.has(te.providerId)),z.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m}),j.apply(this,arguments)}function G(v,f){return M.apply(this,arguments)}function M(){return(M=(0,d.Z)(function*(v,f,m=!1){const T=yield nn(v,f._linkToIdToken(v.auth,yield v.getIdToken()),m);return kr._forOperation(v,"link",T)})).apply(this,arguments)}function X(v,f,m){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,d.Z)(function*(v,f,m){yield mn(f);const z=!1===v?"provider-already-linked":"no-such-provider";ce(Sa(f.providerData).has(m)===v,f.auth,z)})).apply(this,arguments)}function Bt(v,f){return gn.apply(this,arguments)}function gn(){return(gn=(0,d.Z)(function*(v,f,m=!1){const{auth:T}=v,z="reauthenticate";try{const te=yield nn(v,Ir(T,z,f,v),m);ce(te.idToken,T,"internal-error");const Ne=$t(te.idToken);ce(Ne,T,"internal-error");const{sub:Je}=Ne;return ce(v.uid===Je,T,"user-mismatch"),kr._forOperation(v,z,te)}catch(te){throw"auth/user-not-found"===te?.code&&se(T,"user-mismatch"),te}})).apply(this,arguments)}function hi(v,f){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,d.Z)(function*(v,f,m=!1){const T="signIn",z=yield Ir(v,T,f),te=yield kr._fromIdTokenResponse(v,T,z);return m||(yield v._updateCurrentUser(te.user)),te})).apply(this,arguments)}function ps(v,f){return lo.apply(this,arguments)}function lo(){return(lo=(0,d.Z)(function*(v,f){return hi(Fn(v),f)})).apply(this,arguments)}function Ui(v,f){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,d.Z)(function*(v,f){const m=(0,ee.m9)(v);return yield X(!1,m,f.providerId),G(m,f)})).apply(this,arguments)}function Ho(v,f){return zo.apply(this,arguments)}function zo(){return(zo=(0,d.Z)(function*(v,f){return Bt((0,ee.m9)(v),f)})).apply(this,arguments)}function Mo(){return(Mo=(0,d.Z)(function*(v,f){return Mn(v,"POST","/v1/accounts:signInWithCustomToken",Me(v,f))})).apply(this,arguments)}function Pi(v,f){return ea.apply(this,arguments)}function ea(){return ea=(0,d.Z)(function*(v,f){const m=Fn(v),T=yield function qi(v,f){return Mo.apply(this,arguments)}(m,{token:f,returnSecureToken:!0}),z=yield kr._fromIdTokenResponse(m,"signIn",T);return yield m._updateCurrentUser(z.user),z}),ea.apply(this,arguments)}class si{constructor(f,m){this.factorId=f,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(f,m){return"phoneInfo"in m?Ur._fromServerResponse(f,m):"totpInfo"in m?No._fromServerResponse(f,m):se(f,"internal-error")}}class Ur extends si{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,m){return new Ur(m)}}class No extends si{constructor(f){super("totp",f)}static _fromServerResponse(f,m){return new No(m)}}function ks(v,f,m){var T;ce((null===(T=m.url)||void 0===T?void 0:T.length)>0,v,"invalid-continue-uri"),ce(typeof m.dynamicLinkDomain>"u"||m.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),f.continueUrl=m.url,f.dynamicLinkDomain=m.dynamicLinkDomain,f.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(ce(m.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),f.iOSBundleId=m.iOS.bundleId),m.android&&(ce(m.android.packageName.length>0,v,"missing-android-pkg-name"),f.androidInstallApp=m.android.installApp,f.androidMinimumVersionCode=m.android.minimumVersion,f.androidPackageName=m.android.packageName)}function Ds(v){return ta.apply(this,arguments)}function ta(){return(ta=(0,d.Z)(function*(v){const f=Fn(v);f._getPasswordPolicyInternal()&&(yield f._updatePasswordPolicy())})).apply(this,arguments)}function ls(v,f,m){return na.apply(this,arguments)}function na(){return(na=(0,d.Z)(function*(v,f,m){const T=Fn(v),z={requestType:"PASSWORD_RESET",email:f,clientType:"CLIENT_TYPE_WEB"};m&&ks(T,z,m),yield Ri(T,z,"getOobCode",cn)})).apply(this,arguments)}function wr(v,f,m){return ra.apply(this,arguments)}function ra(){return ra=(0,d.Z)(function*(v,f,m){yield ro((0,ee.m9)(v),{oobCode:f,newPassword:m}).catch(function(){var T=(0,d.Z)(function*(z){throw"auth/password-does-not-meet-requirements"===z.code&&Ds(v),z});return function(z){return T.apply(this,arguments)}}())}),ra.apply(this,arguments)}function Ki(v,f){return Ti.apply(this,arguments)}function Ti(){return Ti=(0,d.Z)(function*(v,f){yield function Zr(v,f){return Ns.apply(this,arguments)}((0,ee.m9)(v),{oobCode:f})}),Ti.apply(this,arguments)}function Oo(v,f){return xo.apply(this,arguments)}function xo(){return(xo=(0,d.Z)(function*(v,f){const m=(0,ee.m9)(v),T=yield ro(m,{oobCode:f}),z=T.requestType;switch(ce(z,m,"internal-error"),z){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ce(T.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ce(T.mfaInfo,m,"internal-error");default:ce(T.email,m,"internal-error")}let te=null;return T.mfaInfo&&(te=si._fromServerResponse(Fn(m),T.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===T.requestType?T.newEmail:T.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===T.requestType?T.email:T.newEmail)||null,multiFactorInfo:te},operation:z}})).apply(this,arguments)}function pa(v,f){return ba.apply(this,arguments)}function ba(){return(ba=(0,d.Z)(function*(v,f){const{data:m}=yield Oo((0,ee.m9)(v),f);return m.email})).apply(this,arguments)}function vt(v,f,m){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,d.Z)(function*(v,f,m){const T=Fn(v),Ne=yield Ri(T,{returnSecureToken:!0,email:f,password:m,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Po).catch(mt=>{throw"auth/password-does-not-meet-requirements"===mt.code&&Ds(v),mt}),Je=yield kr._fromIdTokenResponse(T,"signIn",Ne);return yield T._updateCurrentUser(Je.user),Je})).apply(this,arguments)}function Ls(v,f,m){return ps((0,ee.m9)(v),Os.credential(f,m)).catch(function(){var T=(0,d.Z)(function*(z){throw"auth/password-does-not-meet-requirements"===z.code&&Ds(v),z});return function(z){return T.apply(this,arguments)}}())}function Xi(v,f,m){return Go.apply(this,arguments)}function Go(){return(Go=(0,d.Z)(function*(v,f,m){const T=Fn(v),z={requestType:"EMAIL_SIGNIN",email:f,clientType:"CLIENT_TYPE_WEB"};(function te(Ne,Je){ce(Je.handleCodeInApp,T,"argument-error"),Je&&ks(T,Ne,Je)})(z,m),yield Ri(T,z,"getOobCode",Hi)})).apply(this,arguments)}function ko(v,f){const m=Gr.parseLink(f);return"EMAIL_SIGNIN"===m?.operation}function ia(v,f,m){return co.apply(this,arguments)}function co(){return(co=(0,d.Z)(function*(v,f,m){const T=(0,ee.m9)(v),z=Os.credentialWithLink(f,m||zt());return ce(z._tenantId===(T.tenantId||null),T,"tenant-id-mismatch"),ps(T,z)})).apply(this,arguments)}function gs(){return(gs=(0,d.Z)(function*(v,f){return Ke(v,"POST","/v1/accounts:createAuthUri",Me(v,f))})).apply(this,arguments)}function hu(v,f){return D.apply(this,arguments)}function D(){return D=(0,d.Z)(function*(v,f){const T={identifier:f,continueUri:un()?zt():"http://localhost"},{signinMethods:z}=yield function Ra(v,f){return gs.apply(this,arguments)}((0,ee.m9)(v),T);return z||[]}),D.apply(this,arguments)}function K(v,f){return k.apply(this,arguments)}function k(){return k=(0,d.Z)(function*(v,f){const m=(0,ee.m9)(v),z={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};f&&ks(m.auth,z,f);const{email:te}=yield function Er(v,f){return Ot.apply(this,arguments)}(m.auth,z);te!==v.email&&(yield v.reload())}),k.apply(this,arguments)}function W(v,f,m){return de.apply(this,arguments)}function de(){return de=(0,d.Z)(function*(v,f,m){const T=(0,ee.m9)(v),te={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:f};m&&ks(T.auth,te,m);const{email:Ne}=yield function di(v,f){return Vi.apply(this,arguments)}(T.auth,te);Ne!==v.email&&(yield v.reload())}),de.apply(this,arguments)}function ot(){return(ot=(0,d.Z)(function*(v,f){return Ke(v,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function jt(v,f){return Tn.apply(this,arguments)}function Tn(){return Tn=(0,d.Z)(function*(v,{displayName:f,photoURL:m}){if(void 0===f&&void 0===m)return;const T=(0,ee.m9)(v),te={idToken:yield T.getIdToken(),displayName:f,photoUrl:m,returnSecureToken:!0},Ne=yield nn(T,function Ye(v,f){return ot.apply(this,arguments)}(T.auth,te));T.displayName=Ne.displayName||null,T.photoURL=Ne.photoUrl||null;const Je=T.providerData.find(({providerId:mt})=>"password"===mt);Je&&(Je.displayName=T.displayName,Je.photoURL=T.photoURL),yield T._updateTokensIfNecessary(Ne)}),Tn.apply(this,arguments)}function dr(v,f){return Yt((0,ee.m9)(v),f,null)}function _r(v,f){return Yt((0,ee.m9)(v),null,f)}function Yt(v,f,m){return hr.apply(this,arguments)}function hr(){return hr=(0,d.Z)(function*(v,f,m){const{auth:T}=v,te={idToken:yield v.getIdToken(),returnSecureToken:!0};f&&(te.email=f),m&&(te.password=m);const Ne=yield nn(v,function Hn(v,f){return ri.apply(this,arguments)}(T,te));yield v._updateTokensIfNecessary(Ne,!0)}),hr.apply(this,arguments)}class br{constructor(f,m,T={}){this.isNewUser=f,this.providerId=m,this.profile=T}}class ms extends br{constructor(f,m,T,z){super(f,m,T),this.username=z}}class at extends br{constructor(f,m){super(f,"facebook.com",m)}}class yr extends ms{constructor(f,m){super(f,"github.com",m,"string"==typeof m?.login?m?.login:null)}}class xr extends br{constructor(f,m){super(f,"google.com",m)}}class es extends ms{constructor(f,m,T){super(f,"twitter.com",m,T)}}function At(v){const{user:f,_tokenResponse:m}=v;return f.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function _n(v){var f,m;if(!v)return null;const{providerId:T}=v,z=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},te=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!T&&v?.idToken){const Ne=null===(m=null===(f=$t(v.idToken))||void 0===f?void 0:f.firebase)||void 0===m?void 0:m.sign_in_provider;if(Ne)return new br(te,"anonymous"!==Ne&&"custom"!==Ne?Ne:null)}if(!T)return null;switch(T){case"facebook.com":return new at(te,z);case"github.com":return new yr(te,z);case"google.com":return new xr(te,z);case"twitter.com":return new es(te,z,v.screenName||null);case"custom":case"anonymous":return new br(te,null);default:return new br(te,T,z)}}(m)}class _s{constructor(f,m,T){this.type=f,this.credential=m,this.user=T}static _fromIdtoken(f,m){return new _s("enroll",f,m)}static _fromMfaPendingCredential(f){return new _s("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var m,T;if(f?.multiFactorSession){if(null!==(m=f.multiFactorSession)&&void 0!==m&&m.pendingCredential)return _s._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null!==(T=f.multiFactorSession)&&void 0!==T&&T.idToken)return _s._fromIdtoken(f.multiFactorSession.idToken)}return null}}class Ma{constructor(f,m,T){this.session=f,this.hints=m,this.signInResolver=T}static _fromError(f,m){const T=Fn(f),z=m.customData._serverResponse,te=(z.mfaInfo||[]).map(Je=>si._fromServerResponse(T,Je));ce(z.mfaPendingCredential,T,"internal-error");const Ne=_s._fromMfaPendingCredential(z.mfaPendingCredential);return new Ma(Ne,te,function(){var Je=(0,d.Z)(function*(mt){const rn=yield mt._process(T,Ne);delete z.mfaInfo,delete z.mfaPendingCredential;const hn=Object.assign(Object.assign({},z),{idToken:rn.idToken,refreshToken:rn.refreshToken});switch(m.operationType){case"signIn":const Tr=yield kr._fromIdTokenResponse(T,m.operationType,hn);return yield T._updateCurrentUser(Tr.user),Tr;case"reauthenticate":return ce(m.user,T,"internal-error"),kr._forOperation(m.user,m.operationType,hn);default:se(T,"internal-error")}});return function(mt){return Je.apply(this,arguments)}}())}resolveSignIn(f){var m=this;return(0,d.Z)(function*(){return m.signInResolver(f)})()}}function mc(v,f){var m;const T=(0,ee.m9)(v),z=f;return ce(f.customData.operationType,T,"argument-error"),ce(null===(m=z.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,T,"argument-error"),Ma._fromError(T,z)}class en{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(T=>si._fromServerResponse(f.auth,T)))})}static _fromUser(f){return new en(f)}getSession(){var f=this;return(0,d.Z)(function*(){return _s._fromIdtoken(yield f.user.getIdToken(),f.user)})()}enroll(f,m){var T=this;return(0,d.Z)(function*(){const z=f,te=yield T.getSession(),Ne=yield nn(T.user,z._process(T.user.auth,te,m));return yield T.user._updateTokensIfNecessary(Ne),T.user.reload()})()}unenroll(f){var m=this;return(0,d.Z)(function*(){const T="string"==typeof f?f:f.uid,z=yield m.user.getIdToken();try{const te=yield nn(m.user,function Gt(v,f){return Ke(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Me(v,f))}(m.user.auth,{idToken:z,mfaEnrollmentId:T}));m.enrolledFactors=m.enrolledFactors.filter(({uid:Ne})=>Ne!==T),yield m.user._updateTokensIfNecessary(te),yield m.user.reload()}catch(te){throw te}})()}}const Cs=new WeakMap;function ir(v){const f=(0,ee.m9)(v);return Cs.has(f)||Cs.set(f,en._fromUser(f)),Cs.get(f)}const $a="__sak";class Yr{constructor(f,m){this.storageRetriever=f,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem($a,"1"),this.storage.removeItem($a),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(f,m){return this.storage.setItem(f,JSON.stringify(m)),Promise.resolve()}_get(f){const m=this.storage.getItem(f);return Promise.resolve(m?JSON.parse(m):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const _=(()=>{class v extends Yr{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,T)=>this.onStorageEvent(m,T),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Ft(){const v=(0,ee.z$)();return we(v)||Ge(v)}()&&function Sn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Xn(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const T of Object.keys(this.listeners)){const z=this.storage.getItem(T),te=this.localCache[T];z!==te&&m(T,te,z)}}onStorageEvent(m,T=!1){if(!m.key)return void this.forAllChangedKeys((Je,mt,rn)=>{this.notifyListeners(Je,rn)});const z=m.key;if(T?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Je=this.storage.getItem(z);if(m.newValue!==Je)null!==m.newValue?this.storage.setItem(z,m.newValue):this.storage.removeItem(z);else if(this.localCache[z]===m.newValue&&!T)return}const te=()=>{const Je=this.storage.getItem(z);!T&&this.localCache[z]===Je||this.notifyListeners(z,Je)},Ne=this.storage.getItem(z);!function Qt(){return(0,ee.w1)()&&10===document.documentMode}()||Ne===m.newValue||m.newValue===m.oldValue?te():setTimeout(te,10)}notifyListeners(m,T){this.localCache[m]=T;const z=this.listeners[m];if(z)for(const te of Array.from(z))te(T&&JSON.parse(T))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,T,z)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:T,newValue:z}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,T){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(T)}_removeListener(m,T){this.listeners[m]&&(this.listeners[m].delete(T),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,T){var z=()=>super._set,te=this;return(0,d.Z)(function*(){yield z().call(te,m,T),te.localCache[m]=JSON.stringify(T)})()}_get(m){var T=()=>super._get,z=this;return(0,d.Z)(function*(){const te=yield T().call(z,m);return z.localCache[m]=JSON.stringify(te),te})()}_remove(m){var T=()=>super._remove,z=this;return(0,d.Z)(function*(){yield T().call(z,m),delete z.localCache[m]})()}}return v.type="LOCAL",v})(),$=(()=>{class v extends Yr{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,T){}_removeListener(m,T){}}return v.type="SESSION",v})();let he=(()=>{class v{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const T=this.receivers.find(te=>te.isListeningto(m));if(T)return T;const z=new v(m);return this.receivers.push(z),z}isListeningto(m){return this.eventTarget===m}handleEvent(m){var T=this;return(0,d.Z)(function*(){const z=m,{eventId:te,eventType:Ne,data:Je}=z.data,mt=T.handlersMap[Ne];if(!mt?.size)return;z.ports[0].postMessage({status:"ack",eventId:te,eventType:Ne});const rn=Array.from(mt).map(function(){var Tr=(0,d.Z)(function*(cs){return cs(z.origin,Je)});return function(cs){return Tr.apply(this,arguments)}}()),hn=yield function H(v){return Promise.all(v.map(function(){var f=(0,d.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(T){return{fulfilled:!1,reason:T}}});return function(m){return f.apply(this,arguments)}}()))}(rn);z.ports[0].postMessage({status:"done",eventId:te,eventType:Ne,response:hn})})()}_subscribe(m,T){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(T)}_unsubscribe(m,T){this.handlersMap[m]&&T&&this.handlersMap[m].delete(T),(!T||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function ye(v="",f=10){let m="";for(let T=0;T<f;T++)m+=Math.floor(10*Math.random());return v+m}class Ue{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,m,T=50){var z=this;return(0,d.Z)(function*(){const te=typeof MessageChannel<"u"?new MessageChannel:null;if(!te)throw new Error("connection_unavailable");let Ne,Je;return new Promise((mt,rn)=>{const hn=ye("",20);te.port1.start();const Tr=setTimeout(()=>{rn(new Error("unsupported_event"))},T);Je={messageChannel:te,onMessage(cs){const Uo=cs;if(Uo.data.eventId===hn)switch(Uo.data.status){case"ack":clearTimeout(Tr),Ne=setTimeout(()=>{rn(new Error("timeout"))},3e3);break;case"done":clearTimeout(Ne),mt(Uo.data.response);break;default:clearTimeout(Tr),clearTimeout(Ne),rn(new Error("invalid_response"))}}},z.handlers.add(Je),te.port1.addEventListener("message",Je.onMessage),z.target.postMessage({eventType:f,eventId:hn,data:m},[te.port2])}).finally(()=>{Je&&z.removeMessageHandler(Je)})})()}}function ze(){return window}function kt(){return typeof ze().WorkerGlobalScope<"u"&&"function"==typeof ze().importScripts}function Dn(){return(Dn=(0,d.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const sr="firebaseLocalStorageDb",Kn="firebaseLocalStorage",fr="fbase_key";class Wr{constructor(f){this.request=f}toPromise(){return new Promise((f,m)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function zr(v,f){return v.transaction([Kn],f?"readwrite":"readonly").objectStore(Kn)}function Ni(){const v=indexedDB.open(sr,1);return new Promise((f,m)=>{v.addEventListener("error",()=>{m(v.error)}),v.addEventListener("upgradeneeded",()=>{const T=v.result;try{T.createObjectStore(Kn,{keyPath:fr})}catch(z){m(z)}}),v.addEventListener("success",(0,d.Z)(function*(){const T=v.result;T.objectStoreNames.contains(Kn)?f(T):(T.close(),yield function Di(){const v=indexedDB.deleteDatabase(sr);return new Wr(v).toPromise()}(),f(yield Ni()))}))})}function Io(v,f,m){return wo.apply(this,arguments)}function wo(){return(wo=(0,d.Z)(function*(v,f,m){const T=zr(v,!0).put({[fr]:f,value:m});return new Wr(T).toPromise()})).apply(this,arguments)}function Fo(){return(Fo=(0,d.Z)(function*(v,f){const m=zr(v,!1).get(f),T=yield new Wr(m).toPromise();return void 0===T?null:T.value})).apply(this,arguments)}function ho(v,f){const m=zr(v,!0).delete(f);return new Wr(m).toPromise()}const C=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,d.Z)(function*(){return m.db||(m.db=yield Ni()),m.db})()}_withRetries(m){var T=this;return(0,d.Z)(function*(){let z=0;for(;;)try{const te=yield T._openDb();return yield m(te)}catch(te){if(z++>3)throw te;T.db&&(T.db.close(),T.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,d.Z)(function*(){return kt()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,d.Z)(function*(){m.receiver=he._getInstance(function Cn(){return kt()?self:null}()),m.receiver._subscribe("keyChanged",function(){var T=(0,d.Z)(function*(z,te){return{keyProcessed:(yield m._poll()).includes(te.key)}});return function(z,te){return T.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var T=(0,d.Z)(function*(z,te){return["keyChanged"]});return function(z,te){return T.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,d.Z)(function*(){var T,z;if(m.activeServiceWorker=yield function ln(){return Dn.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new Ue(m.activeServiceWorker);const te=yield m.sender._send("ping",{},800);te&&null!==(T=te[0])&&void 0!==T&&T.fulfilled&&null!==(z=te[0])&&void 0!==z&&z.value.includes("keyChanged")&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var T=this;return(0,d.Z)(function*(){if(T.sender&&T.activeServiceWorker&&function Te(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===T.activeServiceWorker)try{yield T.sender._send("keyChanged",{key:m},T.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,d.Z)(function*(){try{if(!indexedDB)return!1;const m=yield Ni();return yield Io(m,$a,"1"),yield ho(m,$a),!0}catch{}return!1})()}_withPendingWrite(m){var T=this;return(0,d.Z)(function*(){T.pendingWrites++;try{yield m()}finally{T.pendingWrites--}})()}_set(m,T){var z=this;return(0,d.Z)(function*(){return z._withPendingWrite((0,d.Z)(function*(){return yield z._withRetries(te=>Io(te,m,T)),z.localCache[m]=T,z.notifyServiceWorker(m)}))})()}_get(m){var T=this;return(0,d.Z)(function*(){const z=yield T._withRetries(te=>function Oi(v,f){return Fo.apply(this,arguments)}(te,m));return T.localCache[m]=z,z})()}_remove(m){var T=this;return(0,d.Z)(function*(){return T._withPendingWrite((0,d.Z)(function*(){return yield T._withRetries(z=>ho(z,m)),delete T.localCache[m],T.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,d.Z)(function*(){const T=yield m._withRetries(Ne=>{const Je=zr(Ne,!1).getAll();return new Wr(Je).toPromise()});if(!T)return[];if(0!==m.pendingWrites)return[];const z=[],te=new Set;if(0!==T.length)for(const{fbase_key:Ne,value:Je}of T)te.add(Ne),JSON.stringify(m.localCache[Ne])!==JSON.stringify(Je)&&(m.notifyListeners(Ne,Je),z.push(Ne));for(const Ne of Object.keys(m.localCache))m.localCache[Ne]&&!te.has(Ne)&&(m.notifyListeners(Ne,null),z.push(Ne));return z})()}notifyListeners(m,T){this.localCache[m]=T;const z=this.listeners[m];if(z)for(const te of Array.from(z))te(T)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,d.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,T){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(T)}_removeListener(m,T){this.listeners[m]&&(this.listeners[m].delete(T),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})(),Tt=1e12;class An{constructor(f){this.auth=f,this.counter=Tt,this._widgets=new Map}render(f,m){const T=this.counter;return this._widgets.set(T,new Rn(f,this.auth.name,m||{})),this.counter++,T}reset(f){var m;const T=f||Tt;null===(m=this._widgets.get(T))||void 0===m||m.delete(),this._widgets.delete(T)}getResponse(f){var m;return(null===(m=this._widgets.get(f||Tt))||void 0===m?void 0:m.getResponse())||""}execute(f){var m=this;return(0,d.Z)(function*(){var T;return null===(T=m._widgets.get(f||Tt))||void 0===T||T.execute(),""})()}}class Rn{constructor(f,m,T){this.params=T,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const z="string"==typeof f?document.getElementById(f):f;ce(z,"argument-error",{appName:m}),this.container=z,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Pn(v){const f=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let T=0;T<v;T++)f.push(m.charAt(Math.floor(62*Math.random())));return f.join("")}(50);const{callback:f,"expired-callback":m}=this.params;if(f)try{f(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ts=Nr("rcb"),zn=new Pt(3e4,6e4);class Zs{constructor(){var f;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(f=ze().grecaptcha)||void 0===f||!f.render)}load(f,m=""){return ce(function As(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(m),f,"argument-error"),this.shouldResolveImmediately(m)&&Wn(ze().grecaptcha)?Promise.resolve(ze().grecaptcha):new Promise((T,z)=>{const te=ze().setTimeout(()=>{z(Be(f,"network-request-failed"))},zn.get());ze()[ts]=()=>{ze().clearTimeout(te),delete ze()[ts];const Je=ze().grecaptcha;if(!Je||!Wn(Je))return void z(Be(f,"internal-error"));const mt=Je.render;Je.render=(rn,hn)=>{const Tr=mt(rn,hn);return this.counter++,Tr},this.hostLanguage=m,T(Je)},Fi(`${function mo(){return ni.recaptchaV2Script}()}?${(0,ee.xO)({onload:ts,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(te),z(Be(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){var m;return!(null===(m=ze().grecaptcha)||void 0===m||!m.render)&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class To{load(f){return(0,d.Z)(function*(){return new An(f)})()}clearedOneInstance(){}}const Ha="recaptcha",hh={theme:"light",type:"image"};class fh{constructor(f,m,T=Object.assign({},hh)){this.parameters=T,this.type=Ha,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Fn(f),this.isInvisible="invisible"===this.parameters.size,ce(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const z="string"==typeof m?document.getElementById(m):m;ce(z,this.auth,"argument-error"),this.container=z,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new To:new Zs,this.validateStartingState()}verify(){var f=this;return(0,d.Z)(function*(){f.assertNotDestroyed();const m=yield f.render(),T=f.getAssertedRecaptcha();return T.getResponse(m)||new Promise(te=>{const Ne=Je=>{Je&&(f.tokenChangeListeners.delete(Ne),te(Je))};f.tokenChangeListeners.add(Ne),f.isInvisible&&T.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){ce(!this.parameters.sitekey,this.auth,"argument-error"),ce(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ce(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return m=>{if(this.tokenChangeListeners.forEach(T=>T(m)),"function"==typeof f)f(m);else if("string"==typeof f){const T=ze()[f];"function"==typeof T&&T(m)}}}assertNotDestroyed(){ce(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,d.Z)(function*(){if(yield f.init(),!f.widgetId){let m=f.container;if(!f.isInvisible){const T=document.createElement("div");m.appendChild(T),m=T}f.widgetId=f.getAssertedRecaptcha().render(m,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,d.Z)(function*(){ce(un()&&!kt(),f.auth,"internal-error"),yield function _c(){let v=null;return new Promise(f=>{"complete"!==document.readyState?(v=()=>f(),window.addEventListener("load",v)):f()}).catch(f=>{throw v&&window.removeEventListener("load",v),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const m=yield function wn(v){return tr.apply(this,arguments)}(f.auth);ce(m,f.auth,"internal-error"),f.parameters.sitekey=m})()}getAssertedRecaptcha(){return ce(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ga{constructor(f,m){this.verificationId=f,this.onConfirmation=m}confirm(f){const m=Ws._fromVerification(this.verificationId,f);return this.onConfirmation(m)}}function ph(v,f,m){return Hu.apply(this,arguments)}function Hu(){return(Hu=(0,d.Z)(function*(v,f,m){const T=Fn(v),z=yield Zi(T,f,(0,ee.m9)(m));return new ga(z,te=>ps(T,te))})).apply(this,arguments)}function Rl(v,f,m){return mu.apply(this,arguments)}function mu(){return(mu=(0,d.Z)(function*(v,f,m){const T=(0,ee.m9)(v);yield X(!1,T,"phone");const z=yield Zi(T.auth,f,(0,ee.m9)(m));return new ga(z,te=>Ui(T,te))})).apply(this,arguments)}function ad(v,f,m){return zu.apply(this,arguments)}function zu(){return(zu=(0,d.Z)(function*(v,f,m){const T=(0,ee.m9)(v),z=yield Zi(T.auth,f,(0,ee.m9)(m));return new ga(z,te=>Ho(T,te))})).apply(this,arguments)}function Zi(v,f,m){return yc.apply(this,arguments)}function yc(){return yc=(0,d.Z)(function*(v,f,m){var T;const z=yield m.verify();try{let te;if(ce("string"==typeof z,v,"argument-error"),ce(m.type===Ha,v,"argument-error"),te="string"==typeof f?{phoneNumber:f}:f,"session"in te){const Ne=te.session;if("phoneNumber"in te)return ce("enroll"===Ne.type,v,"internal-error"),(yield function pu(v,f){return Ke(v,"POST","/v2/accounts/mfaEnrollment:start",Me(v,f))}(v,{idToken:Ne.credential,phoneEnrollmentInfo:{phoneNumber:te.phoneNumber,recaptchaToken:z}})).phoneSessionInfo.sessionInfo;{ce("signin"===Ne.type,v,"internal-error");const Je=(null===(T=te.multiFactorHint)||void 0===T?void 0:T.uid)||te.multiFactorUid;return ce(Je,v,"missing-multi-factor-info"),(yield function O(v,f){return Ke(v,"POST","/v2/accounts/mfaSignIn:start",Me(v,f))}(v,{mfaPendingCredential:Ne.credential,mfaEnrollmentId:Je,phoneSignInInfo:{recaptchaToken:z}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Ne}=yield function Hr(v,f){return Dr.apply(this,arguments)}(v,{phoneNumber:te.phoneNumber,recaptchaToken:z});return Ne}}finally{m._reset()}}),yc.apply(this,arguments)}function Lo(v,f){return za.apply(this,arguments)}function za(){return(za=(0,d.Z)(function*(v,f){yield G((0,ee.m9)(v),f)})).apply(this,arguments)}let pi=(()=>{class v{constructor(m){this.providerId=v.PROVIDER_ID,this.auth=Fn(m)}verifyPhoneNumber(m,T){return Zi(this.auth,m,(0,ee.m9)(T))}static credential(m,T){return Ws._fromVerification(m,T)}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:T,temporaryProof:z}=m;return T&&z?Ws._fromTokenResponse(T,z):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function Na(v,f){return f?be(f):(ce(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class ns extends os{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return yi(f,this._buildIdpRequest())}_linkToIdToken(f,m){return yi(f,this._buildIdpRequest(m))}_getReauthenticationResolver(f){return yi(f,this._buildIdpRequest())}_buildIdpRequest(f){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(m.idToken=f),m}}function oi(v){return hi(v.auth,new ns(v),v.bypassAuthState)}function gh(v){const{auth:f,user:m}=v;return ce(m,f,"internal-error"),Bt(m,new ns(v),v.bypassAuthState)}function Gu(v){return fo.apply(this,arguments)}function fo(){return(fo=(0,d.Z)(function*(v){const{auth:f,user:m}=v;return ce(m,f,"internal-error"),G(m,new ns(v),v.bypassAuthState)})).apply(this,arguments)}class mh{constructor(f,m,T,z,te=!1){this.auth=f,this.resolver=T,this.user=z,this.bypassAuthState=te,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var f=this;return new Promise(function(){var m=(0,d.Z)(function*(T,z){f.pendingPromise={resolve:T,reject:z};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(te){f.reject(te)}});return function(T,z){return m.apply(this,arguments)}}())}onAuthEvent(f){var m=this;return(0,d.Z)(function*(){const{urlResponse:T,sessionId:z,postBody:te,tenantId:Ne,error:Je,type:mt}=f;if(Je)return void m.reject(Je);const rn={auth:m.auth,requestUri:T,sessionId:z,tenantId:Ne||void 0,postBody:te||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(mt)(rn))}catch(hn){m.reject(hn)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return oi;case"linkViaPopup":case"linkViaRedirect":return Gu;case"reauthViaPopup":case"reauthViaRedirect":return gh;default:se(this.auth,"internal-error")}}resolve(f){It(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){It(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ud=new Pt(2e3,1e4);function Bi(v,f,m){return ld.apply(this,arguments)}function ld(){return(ld=(0,d.Z)(function*(v,f,m){const T=Fn(v);xe(v,f,ii);const z=Na(T,m);return new _u(T,"signInViaPopup",f,z).executeNotNull()})).apply(this,arguments)}function qo(v,f,m){return gi.apply(this,arguments)}function gi(){return(gi=(0,d.Z)(function*(v,f,m){const T=(0,ee.m9)(v);xe(T.auth,f,ii);const z=Na(T.auth,m);return new _u(T.auth,"reauthViaPopup",f,z,T).executeNotNull()})).apply(this,arguments)}function Ko(v,f,m){return Pl.apply(this,arguments)}function Pl(){return(Pl=(0,d.Z)(function*(v,f,m){const T=(0,ee.m9)(v);xe(T.auth,f,ii);const z=Na(T.auth,m);return new _u(T.auth,"linkViaPopup",f,z,T).executeNotNull()})).apply(this,arguments)}let _u=(()=>{class v extends mh{constructor(m,T,z,te,Ne){super(m,T,te,Ne),this.provider=z,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var m=this;return(0,d.Z)(function*(){const T=yield m.execute();return ce(T,m.auth,"internal-error"),T})()}onExecution(){var m=this;return(0,d.Z)(function*(){It(1===m.filter.length,"Popup operations only handle one event");const T=ye();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],T),m.authWindow.associatedEvent=T,m.resolver._originValidation(m.auth).catch(z=>{m.reject(z)}),m.resolver._isIframeWebStorageSupported(m.auth,z=>{z||m.reject(Be(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(Be(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const m=()=>{var T,z;this.pollId=null!==(z=null===(T=this.authWindow)||void 0===T?void 0:T.window)&&void 0!==z&&z.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Be(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(m,ud.get())};m()}}return v.currentPopupAction=null,v})();const Wu="pendingRedirect",Ml=new Map;class Us extends mh{constructor(f,m,T=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,T),this.eventId=null}execute(){var f=()=>super.execute,m=this;return(0,d.Z)(function*(){let T=Ml.get(m.auth._key());if(!T){try{const te=(yield function Ga(v,f){return Oa.apply(this,arguments)}(m.resolver,m.auth))?yield f().call(m):null;T=()=>Promise.resolve(te)}catch(z){T=()=>Promise.reject(z)}Ml.set(m.auth._key(),T)}return m.bypassAuthState||Ml.set(m.auth._key(),()=>Promise.resolve(null)),T()})()}onAuthEvent(f){var m=()=>super.onAuthEvent,T=this;return(0,d.Z)(function*(){if("signInViaRedirect"===f.type)return m().call(T,f);if("unknown"!==f.type){if(f.eventId){const z=yield T.auth._redirectUserForId(f.eventId);if(z)return T.user=z,m().call(T,f);T.resolve(null)}}else T.resolve(null)})()}onExecution(){return(0,d.Z)(function*(){})()}cleanUp(){}}function Oa(){return(Oa=(0,d.Z)(function*(v,f){const m=qa(f),T=cd(v);if(!(yield T._isAvailable()))return!1;const z="true"===(yield T._get(m));return yield T._remove(m),z})).apply(this,arguments)}function Zo(v,f){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,d.Z)(function*(v,f){return cd(v)._set(qa(f),"true")})).apply(this,arguments)}function Wa(){Ml.clear()}function sa(v,f){Ml.set(v._key(),f)}function cd(v){return be(v._redirectPersistence)}function qa(v){return Ct(Wu,v.config.apiKey,v.name)}function vc(v,f,m){return function Nl(v,f,m){return ma.apply(this,arguments)}(v,f,m)}function ma(){return(ma=(0,d.Z)(function*(v,f,m){const T=Fn(v);xe(v,f,ii),yield T._initializationPromise;const z=Na(T,m);return yield Zo(z,T),z._openRedirect(T,f,"signInViaRedirect")})).apply(this,arguments)}function dd(v,f,m){return function Ka(v,f,m){return _a.apply(this,arguments)}(v,f,m)}function _a(){return(_a=(0,d.Z)(function*(v,f,m){const T=(0,ee.m9)(v);xe(T.auth,f,ii),yield T.auth._initializationPromise;const z=Na(T.auth,m);yield Zo(z,T.auth);const te=yield Ic(T);return z._openRedirect(T.auth,f,"reauthViaRedirect",te)})).apply(this,arguments)}function _h(v,f,m){return function Ol(v,f,m){return Za.apply(this,arguments)}(v,f,m)}function Za(){return(Za=(0,d.Z)(function*(v,f,m){const T=(0,ee.m9)(v);xe(T.auth,f,ii),yield T.auth._initializationPromise;const z=Na(T.auth,m);yield X(!1,T,f.providerId),yield Zo(z,T.auth);const te=yield Ic(T);return z._openRedirect(T.auth,f,"linkViaRedirect",te)})).apply(this,arguments)}function qu(v,f){return hd.apply(this,arguments)}function hd(){return(hd=(0,d.Z)(function*(v,f){return yield Fn(v)._initializationPromise,Bs(v,f,!1)})).apply(this,arguments)}function Bs(v,f){return Ec.apply(this,arguments)}function Ec(){return(Ec=(0,d.Z)(function*(v,f,m=!1){const T=Fn(v),z=Na(T,f),Ne=yield new Us(T,z,m).execute();return Ne&&!m&&(delete Ne.user._redirectEventId,yield T._persistUserIfCurrent(Ne.user),yield T._setRedirectUser(null,f)),Ne})).apply(this,arguments)}function Ic(v){return rs.apply(this,arguments)}function rs(){return(rs=(0,d.Z)(function*(v){const f=ye(`${v.uid}:::`);return v._redirectEventId=f,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),f})).apply(this,arguments)}class ai{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let m=!1;return this.consumers.forEach(T=>{this.isEventForConsumer(f,T)&&(m=!0,this.sendToConsumer(f,T),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function yu(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Qa(v);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=f,m=!0)),m}sendToConsumer(f,m){var T;if(f.error&&!Qa(f)){const z=(null===(T=f.error.code)||void 0===T?void 0:T.split("auth/")[1])||"internal-error";m.onError(Be(this.auth,z))}else m.onAuthEvent(f)}isEventForConsumer(f,m){const T=null===m.eventId||!!f.eventId&&f.eventId===m.eventId;return m.filter.includes(f.type)&&T}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(oa(f))}saveEventToCache(f){this.cachedEventUids.add(oa(f)),this.lastProcessedEventTime=Date.now()}}function oa(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(f=>f).join("-")}function Qa({type:v,error:f}){return"unknown"===v&&"auth/no-auth-event"===f?.code}function aa(v){return wc.apply(this,arguments)}function wc(){return(wc=(0,d.Z)(function*(v,f={}){return Ke(v,"GET","/v1/projects",f)})).apply(this,arguments)}const Tc=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,or=/^https?/;function Ya(){return(Ya=(0,d.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:f}=yield aa(v);for(const m of f)try{if(vh(m))return}catch{}se(v,"unauthorized-domain")})).apply(this,arguments)}function vh(v){const f=zt(),{protocol:m,hostname:T}=new URL(f);if(v.startsWith("chrome-extension://")){const Ne=new URL(v);return""===Ne.hostname&&""===T?"chrome-extension:"===m&&v.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===m&&Ne.hostname===T}if(!or.test(m))return!1;if(Tc.test(v))return T===v;const z=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+z+"|"+z+")$","i").test(T)}const Eh=new Pt(3e4,6e4);function Ih(){const v=ze().___jsl;if(v?.H)for(const f of Object.keys(v.H))if(v.H[f].r=v.H[f].r||[],v.H[f].L=v.H[f].L||[],v.H[f].r=[...v.H[f].L],v.CP)for(let m=0;m<v.CP.length;m++)v.CP[m]=null}let Dc=null;const vu=new Pt(5e3,15e3),Wf="__/auth/iframe",qf="emulator/auth/iframe",ys={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Th=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function xl(v){const f=v.config;ce(f.authDomain,v,"auth-domain-config-required");const m=f.emulator?wt(f,qf):`https://${v.config.authDomain}/${Wf}`,T={apiKey:f.apiKey,appName:v.name,v:J.SDK_VERSION},z=Th.get(v.config.apiHost);z&&(T.eid=z);const te=v._getFrameworks();return te.length&&(T.fw=te.join(",")),`${m}?${(0,ee.xO)(T).slice(1)}`}function Do(){return Do=(0,d.Z)(function*(v){const f=yield function Gf(v){return Dc=Dc||function wh(v){return new Promise((f,m)=>{var T,z,te;function Ne(){Ih(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{Ih(),m(Be(v,"network-request-failed"))},timeout:Eh.get()})}if(null!==(z=null===(T=ze().gapi)||void 0===T?void 0:T.iframes)&&void 0!==z&&z.Iframe)f(gapi.iframes.getContext());else{if(null===(te=ze().gapi)||void 0===te||!te.load){const Je=Nr("iframefcb");return ze()[Je]=()=>{gapi.load?Ne():m(Be(v,"network-request-failed"))},Fi(`${function zs(){return ni.gapiScript}()}?onload=${Je}`).catch(mt=>m(mt))}Ne()}}).catch(f=>{throw Dc=null,f})}(v),Dc}(v),m=ze().gapi;return ce(m,v,"internal-error"),f.open({where:document.body,url:xl(v),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ys,dontclear:!0},T=>new Promise(function(){var z=(0,d.Z)(function*(te,Ne){yield T.restyle({setHideOnLeave:!1});const Je=Be(v,"network-request-failed"),mt=ze().setTimeout(()=>{Ne(Je)},vu.get());function rn(){ze().clearTimeout(mt),te(T)}T.ping(rn).then(rn,()=>{Ne(Je)})});return function(te,Ne){return z.apply(this,arguments)}}()))}),Do.apply(this,arguments)}const Ku={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Cc{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Co="__/auth/handler",la="emulator/auth/handler",Eu=encodeURIComponent("fac");function Iu(v,f,m,T,z,te){return Fl.apply(this,arguments)}function Fl(){return(Fl=(0,d.Z)(function*(v,f,m,T,z,te){ce(v.config.authDomain,v,"auth-domain-config-required"),ce(v.config.apiKey,v,"invalid-api-key");const Ne={apiKey:v.config.apiKey,appName:v.name,authType:m,redirectUrl:T,v:J.SDK_VERSION,eventId:z};if(f instanceof ii){f.setDefaultLanguage(v.languageCode),Ne.providerId=f.providerId||"",(0,ee.xb)(f.getCustomParameters())||(Ne.customParameters=JSON.stringify(f.getCustomParameters()));for(const[hn,Tr]of Object.entries(te||{}))Ne[hn]=Tr}if(f instanceof Or){const hn=f.getScopes().filter(Tr=>""!==Tr);hn.length>0&&(Ne.scopes=hn.join(","))}v.tenantId&&(Ne.tid=v.tenantId);const Je=Ne;for(const hn of Object.keys(Je))void 0===Je[hn]&&delete Je[hn];const mt=yield v._getAppCheckToken(),rn=mt?`#${Eu}=${encodeURIComponent(mt)}`:"";return`${function fd({config:v}){return v.emulator?wt(v,la):`https://${v.authDomain}/${Co}`}(v)}?${(0,ee.xO)(Je).slice(1)}${rn}`})).apply(this,arguments)}const Ja="webStorageSupport",pd=class po{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$,this._completeRedirectFn=Bs,this._overrideRedirectResult=sa}_openPopup(f,m,T,z){var te=this;return(0,d.Z)(function*(){var Ne;It(null===(Ne=te.eventManagers[f._key()])||void 0===Ne?void 0:Ne.manager,"_initialize() not called before _openPopup()");const Je=yield Iu(f,m,T,zt(),z);return function Ac(v,f,m,T=500,z=600){const te=Math.max((window.screen.availHeight-z)/2,0).toString(),Ne=Math.max((window.screen.availWidth-T)/2,0).toString();let Je="";const mt=Object.assign(Object.assign({},Ku),{width:T.toString(),height:z.toString(),top:te,left:Ne}),rn=(0,ee.z$)().toLowerCase();m&&(Je=me(rn)?"_blank":m),On(rn)&&(f=f||"http://localhost",mt.scrollbars="yes");const hn=Object.entries(mt).reduce((cs,[Uo,jl])=>`${cs}${Uo}=${jl},`,"");if(function st(v=(0,ee.z$)()){var f;return Ge(v)&&!(null===(f=window.navigator)||void 0===f||!f.standalone)}(rn)&&"_self"!==Je)return function Kf(v,f){const m=document.createElement("a");m.href=v,m.target=f;const T=document.createEvent("MouseEvent");T.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(T)}(f||"",Je),new Cc(null);const Tr=window.open(f||"",Je,hn);ce(Tr,v,"popup-blocked");try{Tr.focus()}catch{}return new Cc(Tr)}(f,Je,ye())})()}_openRedirect(f,m,T,z){var te=this;return(0,d.Z)(function*(){return yield te._originValidation(f),function xt(v){ze().location.href=v}(yield Iu(f,m,T,zt(),z)),new Promise(()=>{})})()}_initialize(f){const m=f._key();if(this.eventManagers[m]){const{manager:z,promise:te}=this.eventManagers[m];return z?Promise.resolve(z):(It(te,"If manager is not set, promise should be"),te)}const T=this.initAndGetManager(f);return this.eventManagers[m]={promise:T},T.catch(()=>{delete this.eventManagers[m]}),T}initAndGetManager(f){var m=this;return(0,d.Z)(function*(){const T=yield function Dh(v){return Do.apply(this,arguments)}(f),z=new ai(f);return T.register("authEvent",te=>(ce(te?.authEvent,f,"invalid-auth-event"),{status:z.onEvent(te.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[f._key()]={manager:z},m.iframes[f._key()]=T,z})()}_isIframeWebStorageSupported(f,m){this.iframes[f._key()].send(Ja,{type:Ja},z=>{var te;const Ne=null===(te=z?.[0])||void 0===te?void 0:te[Ja];void 0!==Ne&&m(!!Ne),se(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const m=f._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Xr(v){return Ya.apply(this,arguments)}(f)),this.originValidationPromises[m]}get _shouldInitProactively(){return Xn()||we()||Ge()}};class gd{constructor(f){this.factorId=f}_process(f,m,T){switch(m.type){case"enroll":return this._finalizeEnroll(f,m.credential,T);case"signin":return this._finalizeSignIn(f,m.credential);default:return ct("unexpected MultiFactorSessionType")}}}class Qu extends gd{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new Qu(f)}_finalizeEnroll(f,m,T){return function bn(v,f){return Ke(v,"POST","/v2/accounts/mfaEnrollment:finalize",Me(v,f))}(f,{idToken:m,displayName:T,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,m){return function q(v,f){return Ke(v,"POST","/v2/accounts/mfaSignIn:finalize",Me(v,f))}(f,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let wu=(()=>{class v{constructor(){}static assertion(m){return Qu._fromCredential(m)}}return v.FACTOR_ID="phone",v})();var Yu="@firebase/auth";class ya{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var m=this;return(0,d.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const m=this.auth.onIdTokenChanged(T=>{f(T?.stsTokenManager.accessToken||null)});this.internalListeners.set(f,m),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const m=this.internalListeners.get(f);m&&(this.internalListeners.delete(f),m(),this.updateProactiveRefresh())}assertAuthConfigured(){ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,ee.Pz)("authIdTokenMaxAge"),function Rs(v){ni=v}({loadJS:v=>new Promise((f,m)=>{const T=document.createElement("script");T.setAttribute("src",v),T.onload=f,T.onerror=z=>{const te=Be("internal-error");te.customData=z,m(te)},T.type="text/javascript",T.charset="UTF-8",function Bl(){var v,f;return null!==(f=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==f?f:document}().appendChild(T)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function js(v){(0,J._registerComponent)(new ne.wA("auth",(f,{options:m})=>{const T=f.getProvider("app").getImmediate(),z=f.getProvider("heartbeat"),te=f.getProvider("app-check-internal"),{apiKey:Ne,authDomain:Je}=T.options;ce(Ne&&!Ne.includes(":"),"invalid-api-key",{appName:T.name});const mt={apiKey:Ne,authDomain:Je,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Mr(v)},rn=new vs(T,z,te,mt);return function to(v,f){const m=f?.persistence||[],T=(Array.isArray(m)?m:[m]).map(be);f?.errorMap&&v._updateErrorMap(f.errorMap),v._initializeWithPersistence(T,f?.popupRedirectResolver)}(rn,m),rn},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,m,T)=>{f.getProvider("auth-internal").initialize()})),(0,J._registerComponent)(new ne.wA("auth-internal",f=>{const m=Fn(f.getProvider("auth").getImmediate());return new ya(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,J.registerVersion)(Yu,"1.6.2",function md(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(v)),(0,J.registerVersion)(Yu,"1.6.2","esm2017")}("Browser")},5776:(Mt,Ve,F)=>{F.d(Ve,{u7:()=>hc,Jj:()=>El,IX:()=>_v,my:()=>is,xU:()=>fc,Lz:()=>Il,WA:()=>ft,F8:()=>Mf,$q:()=>oh,W:()=>Lu,EK:()=>Gt,PU:()=>uy,l7:()=>Us,Ky:()=>Ft,Xb:()=>Yr,Cf:()=>pr,K9:()=>Sl,Me:()=>ud,yq:()=>xr,Wi:()=>B_,ET:()=>zg,Ab:()=>fy,vr:()=>hy,Fc:()=>Iv,hJ:()=>gv,B$:()=>H_,at:()=>$_,oe:()=>Hg,AK:()=>dy,TF:()=>wv,JU:()=>Sg,ST:()=>vv,fH:()=>Ev,Ix:()=>Rg,Wu:()=>Lg,Lx:()=>ih,qY:()=>hs,GL:()=>Vu,QT:()=>kv,kl:()=>ey,Xk:()=>ty,PL:()=>ny,UQ:()=>Fv,zN:()=>Lv,ad:()=>yv,nP:()=>Kg,b9:()=>Pv,vh:()=>ZE,Pb:()=>Tv,L$:()=>Dv,cf:()=>Uv,sc:()=>kf,Xo:()=>Rv,IO:()=>Y_,iE:()=>bg,Eo:()=>Xd,i3:()=>cy,Bt:()=>Wv,pl:()=>Vv,Ub:()=>ms,qK:()=>X_,TQ:()=>Nv,e0:()=>Mv,r7:()=>ry,Mx:()=>q_,ar:()=>xg});var _e,d=F(5861),ee=F(534),J=F(4537),Ee=F(7879),ge=F(9058),ne=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ae={},Le=Le||{},re=ne||self;function ue(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function Se(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var qe="closure_uid_"+(1e9*Math.random()>>>0),ht=0;function it(i,e,n){return i.call.apply(i.bind,arguments)}function gt(i,e,n){if(!i)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var u=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(u,o),i.apply(e,u)}}return function(){return i.apply(e,arguments)}}function Xe(i,e,n){return(Xe=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?it:gt).apply(null,arguments)}function Lt(i,e){var n=Array.prototype.slice.call(arguments,1);return function(){var o=n.slice();return o.push.apply(o,arguments),i.apply(this,o)}}function nt(i,e){function n(){}n.prototype=e.prototype,i.$=e.prototype,i.prototype=new n,i.prototype.constructor=i,i.ac=function(o,u,c){for(var p=Array(arguments.length-2),A=2;A<arguments.length;A++)p[A-2]=arguments[A];return e.prototype[u].apply(o,p)}}function se(){this.s=this.s,this.o=this.o}se.prototype.s=!1,se.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function et(i){Object.prototype.hasOwnProperty.call(i,qe)&&i[qe]||(i[qe]=++ht)}(this)},se.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ke=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let n=0;n<i.length;n++)if(n in i&&i[n]===e)return n;return-1};function xe(i){const e=i.length;if(0<e){const n=Array(e);for(let o=0;o<e;o++)n[o]=i[o];return n}return[]}function tt(i,e){for(let n=1;n<arguments.length;n++){const o=arguments[n];if(ue(o)){const u=i.length||0,c=o.length||0;i.length=u+c;for(let p=0;p<c;p++)i[u+p]=o[p]}else i.push(o)}}function ce(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}ce.prototype.h=function(){this.defaultPrevented=!0};var ct=function(){if(!re.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{const n=()=>{};re.addEventListener("test",n,e),re.removeEventListener("test",n,e)}catch{}return i}();function It(i){return/^[\s\xa0]*$/.test(i)}function zt(){var i=re.navigator;return i&&(i=i.userAgent)?i:""}function un(i){return-1!=zt().indexOf(i)}function pn(i){return pn[" "](i),i}pn[" "]=function(){};var Ke,i,Nt=un("Opera"),Pt=un("Trident")||un("MSIE"),wt=un("Edge"),Ce=wt||Pt,Pe=un("Gecko")&&!(-1!=zt().toLowerCase().indexOf("webkit")&&!un("Edge"))&&!(un("Trident")||un("MSIE"))&&!un("Edge"),$e=-1!=zt().toLowerCase().indexOf("webkit")&&!un("Edge");function Me(){var i=re.document;return i?i.documentMode:void 0}e:{var lt="",Et=(i=zt(),Pe?/rv:([^\);]+)(\)|;)/.exec(i):wt?/Edge\/([\d\.]+)/.exec(i):Pt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):$e?/WebKit\/(\S+)/.exec(i):Nt?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(Et&&(lt=Et?Et[1]:""),Pt){var yt=Me();if(null!=yt&&yt>parseFloat(lt)){Ke=String(yt);break e}}Ke=lt}var Nn=re.document&&Pt&&(Me()||parseInt(Ke,10))||void 0;function on(i,e){if(ce.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var n=this.type=i.type,o=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(Pe){e:{try{pn(e.nodeName);var u=!0;break e}catch{}u=!1}u||(e=null)}}else"mouseover"==n?e=i.fromElement:"mouseout"==n&&(e=i.toElement);this.relatedTarget=e,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:$n[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&on.$.h.call(this)}}nt(on,ce);var $n={2:"touch",3:"pen",4:"mouse"};on.prototype.h=function(){on.$.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var In="closure_listenable_"+(1e6*Math.random()|0),Wn=0;function Rt(i,e,n,o,u){this.listener=i,this.proxy=null,this.src=e,this.type=n,this.capture=!!o,this.la=u,this.key=++Wn,this.fa=this.ia=!1}function Jn(i){i.fa=!0,i.listener=null,i.proxy=null,i.src=null,i.la=null}function wn(i,e,n){for(const o in i)e.call(n,i[o],o,i)}function kn(i){const e={};for(const n in i)e[n]=i[n];return e}const Un="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function nr(i,e){let n,o;for(let u=1;u<arguments.length;u++){for(n in o=arguments[u],o)i[n]=o[n];for(let c=0;c<Un.length;c++)n=Un[c],Object.prototype.hasOwnProperty.call(o,n)&&(i[n]=o[n])}}function Gn(i){this.src=i,this.g={},this.h=0}function Kt(i,e){var n=e.type;if(n in i.g){var c,o=i.g[n],u=ke(o,e);(c=0<=u)&&Array.prototype.splice.call(o,u,1),c&&(Jn(e),0==i.g[n].length&&(delete i.g[n],i.h--))}}function Xt(i,e,n,o){for(var u=0;u<i.length;++u){var c=i[u];if(!c.fa&&c.listener==e&&c.capture==!!n&&c.la==o)return u}return-1}Gn.prototype.add=function(i,e,n,o,u){var c=i.toString();(i=this.g[c])||(i=this.g[c]=[],this.h++);var p=Xt(i,e,o,u);return-1<p?(e=i[p],n||(e.ia=!1)):((e=new Rt(e,this.src,c,!!o,u)).ia=n,i.push(e)),e};var tn="closure_lm_"+(1e6*Math.random()|0),qn={};function ur(i,e,n,o,u){if(o&&o.once)return vr(i,e,n,o,u);if(Array.isArray(e)){for(var c=0;c<e.length;c++)ur(i,e[c],n,o,u);return null}return n=bi(n),i&&i[In]?i.O(e,n,Se(o)?!!o.capture:!!o,u):ui(i,e,n,!1,o,u)}function ui(i,e,n,o,u,c){if(!e)throw Error("Invalid event type");var p=Se(u)?!!u.capture:!!u,A=sn(i);if(A||(i[tn]=A=new Gn(i)),(n=A.add(e,n,o,p,c)).proxy)return n;if(o=function vn(){const e=nn;return function i(n){return e.call(i.src,i.listener,n)}}(),n.proxy=o,o.src=i,o.listener=n,i.addEventListener)ct||(u=p),void 0===u&&(u=!1),i.addEventListener(e.toString(),o,u);else if(i.attachEvent)i.attachEvent(Si(e.toString()),o);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(o)}return n}function vr(i,e,n,o,u){if(Array.isArray(e)){for(var c=0;c<e.length;c++)vr(i,e[c],n,o,u);return null}return n=bi(n),i&&i[In]?i.P(e,n,Se(o)?!!o.capture:!!o,u):ui(i,e,n,!0,o,u)}function ss(i,e,n,o,u){if(Array.isArray(e))for(var c=0;c<e.length;c++)ss(i,e[c],n,o,u);else o=Se(o)?!!o.capture:!!o,n=bi(n),i&&i[In]?(i=i.i,(e=String(e).toString())in i.g&&-1<(n=Xt(c=i.g[e],n,o,u))&&(Jn(c[n]),Array.prototype.splice.call(c,n,1),0==c.length&&(delete i.g[e],i.h--))):i&&(i=sn(i))&&(e=i.g[e.toString()],i=-1,e&&(i=Xt(e,n,o,u)),(n=-1<i?e[i]:null)&&$t(n))}function $t(i){if("number"!=typeof i&&i&&!i.fa){var e=i.src;if(e&&e[In])Kt(e.i,i);else{var n=i.type,o=i.proxy;e.removeEventListener?e.removeEventListener(n,o,i.capture):e.detachEvent?e.detachEvent(Si(n),o):e.addListener&&e.removeListener&&e.removeListener(o),(n=sn(e))?(Kt(n,i),0==n.h&&(n.src=null,e[tn]=null)):Jn(i)}}}function Si(i){return i in qn?qn[i]:qn[i]="on"+i}function nn(i,e){if(i.fa)i=!0;else{e=new on(e,this);var n=i.listener,o=i.la||i.src;i.ia&&$t(i),i=n.call(o,e)}return i}function sn(i){return(i=i[tn])instanceof Gn?i:null}var Fr="__closure_events_fn_"+(1e9*Math.random()>>>0);function bi(i){return"function"==typeof i?i:(i[Fr]||(i[Fr]=function(e){return i.handleEvent(e)}),i[Fr])}function Vn(){se.call(this),this.i=new Gn(this),this.S=this,this.J=null}function mn(i,e){var n,o=i.J;if(o)for(n=[];o;o=o.J)n.push(o);if(i=i.S,o=e.type||e,"string"==typeof e)e=new ce(e,i);else if(e instanceof ce)e.target=e.target||i;else{var u=e;nr(e=new ce(o,i),u)}if(u=!0,n)for(var c=n.length-1;0<=c;c--){var p=e.g=n[c];u=rr(p,o,!0,e)&&u}if(u=rr(p=e.g=i,o,!0,e)&&u,u=rr(p,o,!1,e)&&u,n)for(c=0;c<n.length;c++)u=rr(p=e.g=n[c],o,!1,e)&&u}function rr(i,e,n,o){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var u=!0,c=0;c<e.length;++c){var p=e[c];if(p&&!p.fa&&p.capture==n){var A=p.listener,P=p.la||p.src;p.ia&&Kt(i.i,p),u=!1!==A.call(P,o)&&u}}return u&&!o.defaultPrevented}nt(Vn,se),Vn.prototype[In]=!0,Vn.prototype.removeEventListener=function(i,e,n,o){ss(this,i,e,n,o)},Vn.prototype.N=function(){if(Vn.$.N.call(this),this.i){var e,i=this.i;for(e in i.g){for(var n=i.g[e],o=0;o<n.length;o++)Jn(n[o]);delete i.g[e],i.h--}}this.J=null},Vn.prototype.O=function(i,e,n,o){return this.i.add(String(i),e,!1,n,o)},Vn.prototype.P=function(i,e,n,o){return this.i.add(String(i),e,!0,n,o)};var qr=re.JSON.stringify;function Rr(){var i=N;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var jr=new class Sr{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new mr,i=>i.reset());class mr{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function ve(i){var e=1;i=i.split(":");const n=[];for(;0<e&&i.length;)n.push(i.shift()),e--;return i.length&&n.push(i.join(":")),n}function Y(i){re.setTimeout(()=>{throw i},0)}let U,x=!1,N=new class Pr{constructor(){this.h=this.g=null}add(e,n){const o=jr.get();o.set(e,n),this.h?this.h.next=o:this.g=o,this.h=o}},oe=()=>{const i=re.Promise.resolve(void 0);U=()=>{i.then(be)}};var be=()=>{for(var i;i=Rr();){try{i.h.call(i.g)}catch(n){Y(n)}var e=jr;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}x=!1};function rt(i,e){Vn.call(this),this.h=i||1,this.g=e||re,this.j=Xe(this.qb,this),this.l=Date.now()}function dt(i){i.ga=!1,i.T&&(i.g.clearTimeout(i.T),i.T=null)}function Ct(i,e,n){if("function"==typeof i)n&&(i=Xe(i,n));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=Xe(i.handleEvent,i)}return 2147483647<Number(e)?-1:re.setTimeout(i,e||0)}function St(i){i.g=Ct(()=>{i.g=null,i.i&&(i.i=!1,St(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}nt(rt,Vn),(_e=rt.prototype).ga=!1,_e.T=null,_e.qb=function(){if(this.ga){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-i):(this.T&&(this.g.clearTimeout(this.T),this.T=null),mn(this,"tick"),this.ga&&(dt(this),this.start()))}},_e.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},_e.N=function(){rt.$.N.call(this),dt(this),delete this.g};class Zt extends se{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:St(this)}N(){super.N(),this.g&&(re.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function On(i){se.call(this),this.h=i,this.g={}}nt(On,se);var we=[];function me(i,e,n,o){Array.isArray(n)||(n&&(we[0]=n.toString()),n=we);for(var u=0;u<n.length;u++){var c=ur(e,n[u],o||i.handleEvent,!1,i.h||i);if(!c)break;i.g[c.key]=c}}function De(i){wn(i.g,function(e,n){this.g.hasOwnProperty(n)&&$t(e)},i),i.g={}}function fe(){this.g=!0}function Ge(i,e,n,o){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function st(i,e){if(!i.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(i=0;i<n.length;i++)if(Array.isArray(n[i])){var o=n[i];if(!(2>o.length)){var u=o[1];if(Array.isArray(u)&&!(1>u.length)){var c=u[0];if("noop"!=c&&"stop"!=c&&"close"!=c)for(var p=1;p<u.length;p++)u[p]=""}}}return qr(n)}catch{return e}}(i,n)+(o?" "+o:"")})}On.prototype.N=function(){On.$.N.call(this),De(this)},On.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},fe.prototype.Ea=function(){this.g=!1},fe.prototype.info=function(){};var Qt={},Xn=null;function Sn(){return Xn=Xn||new Vn}function Mr(i){ce.call(this,Qt.Ta,i)}function Lr(i){const e=Sn();mn(e,new Mr(e))}function ki(i,e){ce.call(this,Qt.STAT_EVENT,i),this.stat=e}function xn(i){const e=Sn();mn(e,new ki(e,i))}function lr(i,e){ce.call(this,Qt.Ua,i),this.size=e}function li(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return re.setTimeout(function(){i()},e)}Qt.Ta="serverreachability",nt(Mr,ce),Qt.STAT_EVENT="statevent",nt(ki,ce),Qt.Ua="timingevent",nt(lr,ce);var vs={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Fn={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Kr(){}function Rs(){}Kr.prototype.h=null;var zs,Fi={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function mo(){ce.call(this,"d")}function eo(){ce.call(this,"c")}function Nr(){}function ci(i,e,n,o){this.l=i,this.j=e,this.m=n,this.W=o||1,this.U=new On(this),this.P=Es,this.V=new rt(i=Ce?125:void 0),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Gs}function Gs(){this.i=null,this.g="",this.h=!1}nt(mo,ce),nt(eo,ce),nt(Nr,Kr),Nr.prototype.g=function(){return new XMLHttpRequest},Nr.prototype.i=function(){return{}},zs=new Nr;var Es=45e3,Qi={},Ps={};function Ri(i,e,n){i.L=1,i.A=Li(Jr(e)),i.u=n,i.S=!0,Ms(i,null)}function Ms(i,e){i.G=Date.now(),to(i),i.B=Jr(i.A);var n=i.B,o=i.W;Array.isArray(o)||(o=[String(o)]),an(n.i,"t",o),i.o=0,n=i.l.J,i.h=new Gs,i.g=Pi(i.l,n?e:null,!i.u),0<i.O&&(i.M=new Zt(Xe(i.Pa,i,i.g),i.O)),me(i.U,i.g,"readystatechange",i.nb),e=i.I?kn(i.I):{},i.u?(i.v||(i.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ha(i.B,i.v,i.u,e)):(i.v="GET",i.g.ha(i.B,i.v,null,e)),Lr(),function pe(i,e,n,o,u,c){i.info(function(){if(i.g)if(c)for(var p="",A=c.split("&"),P=0;P<A.length;P++){var B=A[P].split("=");if(1<B.length){var Q=B[0];B=B[1];var ie=Q.split("_");p=2<=ie.length&&"type"==ie[1]?p+(Q+"=")+B+"&":p+(Q+"=redacted&")}}else p=null;else p=c;return"XMLHTTP REQ ("+o+") [attempt "+u+"]: "+e+"\n"+n+"\n"+p})}(i.j,i.v,i.B,i.m,i.W,i.u)}function jo(i){return!!i.g&&"GET"==i.v&&2!=i.L&&i.l.Ha}function mi(i,e,n){let u,o=!0;for(;!i.J&&i.o<n.length;){if(u=Aa(i,n),u==Ps){4==e&&(i.s=4,xn(14),o=!1),Ge(i.j,i.m,null,"[Incomplete Response]");break}if(u==Qi){i.s=4,xn(15),Ge(i.j,i.m,n,"[Invalid Chunk]"),o=!1;break}Ge(i.j,i.m,u,null),yo(i,u)}jo(i)&&0!=i.o&&(i.h.g=i.h.g.slice(i.o),i.o=0),4!=e||0!=n.length||i.h.h||(i.s=1,xn(16),o=!1),i.i=i.i&&o,o?0<n.length&&!i.ba&&(i.ba=!0,(e=i.l).g==i&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),ps(e),e.M=!0,xn(11))):(Ge(i.j,i.m,n,"[Invalid Chunked Response]"),ji(i),_o(i))}function Aa(i,e){var n=i.o,o=e.indexOf("\n",n);return-1==o?Ps:(n=Number(e.substring(n,o)),isNaN(n)?Qi:(o+=1)+n>e.length?Ps:(e=e.slice(o,o+n),i.o=o+n,e))}function to(i){i.Y=Date.now()+i.P,$o(i,i.P)}function $o(i,e){if(null!=i.C)throw Error("WatchDog timer not null");i.C=li(Xe(i.lb,i),e)}function no(i){i.C&&(re.clearTimeout(i.C),i.C=null)}function _o(i){0==i.l.H||i.J||Wi(i.l,i)}function ji(i){no(i);var e=i.M;e&&"function"==typeof e.sa&&e.sa(),i.M=null,dt(i.V),De(i.U),i.g&&(e=i.g,i.g=null,e.abort(),e.sa())}function yo(i,e){try{var n=i.l;if(0!=n.H&&(n.g==i||vi(n.i,i)))if(!i.K&&vi(n.i,i)&&3==n.H){try{var o=n.Ja.g.parse(e)}catch{o=null}if(Array.isArray(o)&&3==o.length){var u=o;if(0==u[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<i.G))break e;Ui(n),j(n)}Gi(n),xn(18)}}else n.Fa=u[1],0<n.Fa-n.V&&37500>u[2]&&n.G&&0==n.A&&!n.v&&(n.v=li(Xe(n.ib,n),6e3));if(1>=Dr(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else zo(n,11)}else if((i.K||n.g==i)&&Ui(n),!It(e))for(u=n.Ja.g.parse(e),e=0;e<u.length;e++){let B=u[e];if(n.V=B[0],B=B[1],2==n.H)if("c"==B[0]){n.K=B[1],n.pa=B[2];const Q=B[3];null!=Q&&(n.ra=Q,n.l.info("VER="+n.ra));const ie=B[4];null!=ie&&(n.Ga=ie,n.l.info("SVER="+n.Ga));const Re=B[5];null!=Re&&"number"==typeof Re&&0<Re&&(n.L=o=1.5*Re,n.l.info("backChannelRequestTimeoutMs_="+o)),o=n;const Ze=i.g;if(Ze){const bt=Ze.g?Ze.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(bt){var c=o.i;c.g||-1==bt.indexOf("spdy")&&-1==bt.indexOf("quic")&&-1==bt.indexOf("h2")||(c.j=c.l,c.g=new Set,c.h&&(Ei(c,c.h),c.h=null))}if(o.F){const Ht=Ze.g?Ze.g.getResponseHeader("X-HTTP-Session-Id"):null;Ht&&(o.Da=Ht,Ln(o.I,o.F,Ht))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-i.G,n.l.info("Handshake RTT: "+n.S+"ms"));var p=i;if((o=n).wa=Mo(o,o.J?o.pa:null,o.Y),p.K){Ji(o.i,p);var A=p,P=o.L;P&&A.setTimeout(P),A.C&&(no(A),to(A)),o.g=p}else hi(o);0<n.j.length&&M(n)}else"stop"!=B[0]&&"close"!=B[0]||zo(n,7);else 3==n.H&&("stop"==B[0]||"close"==B[0]?"stop"==B[0]?zo(n,7):fa(n):"noop"!=B[0]&&n.h&&n.h.Aa(B),n.A=0)}Lr()}catch{}}function Yi(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(ue(i)||"string"==typeof i)Array.prototype.forEach.call(i,e,void 0);else for(var n=function ro(i){if(i.ta&&"function"==typeof i.ta)return i.ta();if(!i.Z||"function"!=typeof i.Z){if(typeof Map<"u"&&i instanceof Map)return Array.from(i.keys());if(!(typeof Set<"u"&&i instanceof Set)){if(ue(i)||"string"==typeof i){var e=[];i=i.length;for(var n=0;n<i;n++)e.push(n);return e}e=[],n=0;for(const o in i)e[n++]=o;return e}}}(i),o=function os(i){if(i.Z&&"function"==typeof i.Z)return i.Z();if(typeof Map<"u"&&i instanceof Map||typeof Set<"u"&&i instanceof Set)return Array.from(i.values());if("string"==typeof i)return i.split("");if(ue(i)){for(var e=[],n=i.length,o=0;o<n;o++)e.push(i[o]);return e}for(o in e=[],n=0,i)e[n++]=i[o];return e}(i),u=o.length,c=0;c<u;c++)e.call(void 0,o[c],n&&n[c],i)}(_e=ci.prototype).setTimeout=function(i){this.P=i},_e.nb=function(i){i=i.target;const e=this.M;e&&3==kr(i)?e.l():this.Pa(i)},_e.Pa=function(i){try{if(i==this.g)e:{const Q=kr(this.g);var e=this.g.Ia();if(this.g.da(),!(3>Q)&&(3!=Q||Ce||this.g&&(this.h.h||this.g.ja()||xs(this.g)))){this.J||4!=Q||7==e||Lr(),no(this);var n=this.g.da();this.ca=n;t:if(jo(this)){var o=xs(this.g);i="";var u=o.length,c=4==kr(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){ji(this),_o(this);var p="";break t}this.h.i=new re.TextDecoder}for(e=0;e<u;e++)this.h.h=!0,i+=this.h.i.decode(o[e],{stream:c&&e==u-1});o.length=0,this.h.g+=i,this.o=0,p=this.h.g}else p=this.g.ja();if(this.i=200==n,function Fe(i,e,n,o,u,c,p){i.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+u+"]: "+e+"\n"+n+"\n"+c+" "+p})}(this.j,this.v,this.B,this.m,this.W,Q,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var A,P=this.g;if((A=P.g?P.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!It(A)){var B=A;break t}}B=null}if(!(n=B)){this.i=!1,this.s=3,xn(12),ji(this),_o(this);break e}Ge(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,yo(this,n)}this.S?(mi(this,Q,p),Ce&&this.i&&3==Q&&(me(this.U,this.V,"tick",this.mb),this.V.start())):(Ge(this.j,this.m,p,null),yo(this,p)),4==Q&&ji(this),this.i&&!this.J&&(4==Q?Wi(this.l,this):(this.i=!1,to(this)))}else(function Ba(i){const e={};i=(i.g&&2<=kr(i)&&i.g.getAllResponseHeaders()||"").split("\r\n");for(let o=0;o<i.length;o++){if(It(i[o]))continue;var n=ve(i[o]);const u=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const c=e[u]||[];e[u]=c,c.push(n)}!function tr(i,e){for(const n in i)e.call(void 0,i[n],n,i)}(e,function(o){return o.join(", ")})})(this.g),400==n&&0<p.indexOf("Unknown SID")?(this.s=3,xn(12)):(this.s=0,xn(13)),ji(this),_o(this)}}}catch{}},_e.mb=function(){if(this.g){var i=kr(this.g),e=this.g.ja();this.o<e.length&&(no(this),mi(this,i,e),this.i&&4!=i&&to(this))}},_e.cancel=function(){this.J=!0,ji(this)},_e.lb=function(){this.C=null;const i=Date.now();0<=i-this.Y?(function Vt(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.B),2!=this.L&&(Lr(),xn(17)),ji(this),this.s=2,_o(this)):$o(this,this.Y-i)};var Hn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Vr(i){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof Vr){this.h=i.h,Zr(this,i.j),this.s=i.s,this.g=i.g,Ns(this,i.m),this.l=i.l;var e=i.i,n=new Vi;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),io(this,n),this.o=i.o}else i&&(e=String(i).match(Hn))?(this.h=!1,Zr(this,e[1]||"",!0),this.s=$i(e[2]||""),this.g=$i(e[3]||"",!0),Ns(this,e[4]),this.l=$i(e[5]||"",!0),io(this,e[6]||"",!0),this.o=$i(e[7]||"")):(this.h=!1,this.i=new Vi(null,this.h))}function Jr(i){return new Vr(i)}function Zr(i,e,n){i.j=n?$i(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function Ns(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function io(i,e,n){e instanceof Vi?(i.i=e,function yi(i,e){e&&!i.j&&(er(i),i.i=null,i.g.forEach(function(n,o){var u=o.toLowerCase();o!=u&&(zi(this,o),an(this,u,n))},i)),i.j=e}(i.i,i.h)):(n||(e=Er(e,as)),i.i=new Vi(e,i.h))}function Ln(i,e,n){i.i.set(e,n)}function Li(i){return Ln(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function $i(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function Er(i,e,n){return"string"==typeof i?(i=encodeURI(i).replace(e,Ot),n&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function Ot(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}Vr.prototype.toString=function(){var i=[],e=this.j;e&&i.push(Er(e,cn,!0),":");var n=this.g;return(n||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(Er(e,cn,!0),"@"),i.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&i.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&i.push("/"),i.push(Er(n,"/"==n.charAt(0)?Hi:cr,!0))),(n=this.i.toString())&&i.push("?",n),(n=this.o)&&i.push("#",Er(n,di)),i.join("")};var cn=/[#\/\?@]/g,cr=/[#\?:]/g,Hi=/[#\?]/g,as=/[#\?@]/g,di=/#/g;function Vi(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function er(i){i.g||(i.g=new Map,i.h=0,i.i&&function ri(i,e){if(i){i=i.split("&");for(var n=0;n<i.length;n++){var o=i[n].indexOf("="),u=null;if(0<=o){var c=i[n].substring(0,o);u=i[n].substring(o+1)}else c=i[n];e(c,u?decodeURIComponent(u.replace(/\+/g," ")):"")}}}(i.i,function(e,n){i.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function zi(i,e){er(i),e=_i(i,e),i.g.has(e)&&(i.i=null,i.h-=i.g.get(e).length,i.g.delete(e))}function fs(i,e){return er(i),e=_i(i,e),i.g.has(e)}function an(i,e,n){zi(i,e),0<n.length&&(i.i=null,i.g.set(_i(i,e),xe(n)),i.h+=n.length)}function _i(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function $r(i){this.l=i||Bn,i=re.PerformanceNavigationTiming?0<(i=re.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(re.g&&re.g.Ka&&re.g.Ka()&&re.g.Ka().dc),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(_e=Vi.prototype).add=function(i,e){er(this),this.i=null,i=_i(this,i);var n=this.g.get(i);return n||this.g.set(i,n=[]),n.push(e),this.h+=1,this},_e.forEach=function(i,e){er(this),this.g.forEach(function(n,o){n.forEach(function(u){i.call(e,u,o,this)},this)},this)},_e.ta=function(){er(this);const i=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let o=0;o<e.length;o++){const u=i[o];for(let c=0;c<u.length;c++)n.push(e[o])}return n},_e.Z=function(i){er(this);let e=[];if("string"==typeof i)fs(this,i)&&(e=e.concat(this.g.get(_i(this,i))));else{i=Array.from(this.g.values());for(let n=0;n<i.length;n++)e=e.concat(i[n])}return e},_e.set=function(i,e){return er(this),this.i=null,fs(this,i=_i(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},_e.get=function(i,e){return i&&0<(i=this.Z(i)).length?String(i[0]):e},_e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var o=e[n];const c=encodeURIComponent(String(o)),p=this.Z(o);for(o=0;o<p.length;o++){var u=c;""!==p[o]&&(u+="="+encodeURIComponent(String(p[o]))),i.push(u)}}return this.i=i.join("&")};var Bn=10;function Hr(i){return!!i.h||!!i.g&&i.g.size>=i.j}function Dr(i){return i.h?1:i.g?i.g.size:0}function vi(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function Ei(i,e){i.g?i.g.add(e):i.h=e}function Ji(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function Qr(i){if(null!=i.h)return i.i.concat(i.h.F);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const n of i.g.values())e=e.concat(n.F);return e}return xe(i.i)}$r.prototype.cancel=function(){if(this.i=Qr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}};var ws=class{stringify(i){return re.JSON.stringify(i,void 0)}parse(i){return re.JSON.parse(i,void 0)}};function vo(){this.g=new ws}function jn(i,e,n){const o=n||"";try{Yi(i,function(u,c){let p=u;Se(u)&&(p=qr(u)),e.push(o+c+"="+encodeURIComponent(p))})}catch(u){throw e.push(o+"type="+encodeURIComponent("_badmap")),u}}function bo(i,e,n,o,u){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,u(o)}catch{}}function qs(i){this.l=i.ec||null,this.j=i.ob||!1}function Gr(i,e){Vn.call(this),this.F=i,this.u=e,this.m=void 0,this.readyState=Ro,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}nt(qs,Kr),qs.prototype.g=function(){return new Gr(this.l,this.j)},qs.prototype.i=function(i){return function(){return i}}({}),nt(Gr,Vn);var Ro=0;function Os(i){i.j.read().then(i.Xa.bind(i)).catch(i.ka.bind(i))}function ii(i){i.readyState=4,i.l=null,i.j=null,i.A=null,Or(i)}function Or(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(_e=Gr.prototype).open=function(i,e){if(this.readyState!=Ro)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,Or(this)},_e.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.F||re).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},_e.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ii(this)),this.readyState=Ro},_e.$a=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,Or(this)),this.g&&(this.readyState=3,Or(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof re.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Os(this)}else i.text().then(this.Za.bind(this),this.ka.bind(this))},_e.Xa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?ii(this):Or(this),3==this.readyState&&Os(this)}},_e.Za=function(i){this.g&&(this.response=this.responseText=i,ii(this))},_e.Ya=function(i){this.g&&(this.response=i,ii(this))},_e.ka=function(){this.g&&ii(this)},_e.setRequestHeader=function(i,e){this.v.append(i,e)},_e.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},_e.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var n=e.next();!n.done;)i.push((n=n.value)[0]+": "+n[1]),n=e.next();return i.join("\r\n")},Object.defineProperty(Gr.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var Ii=re.JSON.parse;function dn(i){Vn.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=wi,this.L=this.M=!1}nt(dn,Vn);var wi="",so=/^https?$/i,oo=["POST","PUT"];function us(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,Ts(i),Po(i)}function Ts(i){i.F||(i.F=!0,mn(i,"complete"),mn(i,"error"))}function Eo(i){if(i.h&&typeof Le<"u"&&(!i.C[1]||4!=kr(i)||2!=i.da()))if(i.v&&4==kr(i))Ct(i.La,0,i);else if(mn(i,"readystatechange"),4==kr(i)){i.h=!1;try{const p=i.da();e:switch(p){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var o;if(o=0===p){var u=String(i.I).match(Hn)[1]||null;!u&&re.self&&re.self.location&&(u=re.self.location.protocol.slice(0,-1)),o=!so.test(u?u.toLowerCase():"")}n=o}if(n)mn(i,"complete"),mn(i,"success");else{i.m=6;try{var c=2<kr(i)?i.g.statusText:""}catch{c=""}i.j=c+" ["+i.da()+"]",Ts(i)}}finally{Po(i)}}}function Po(i,e){if(i.g){Jo(i);const n=i.g,o=i.C[0]?()=>{}:null;i.g=null,i.C=null,e||mn(i,"ready");try{n.onreadystatechange=o}catch{}}}function Jo(i){i.g&&i.L&&(i.g.ontimeout=null),i.A&&(re.clearTimeout(i.A),i.A=null)}function kr(i){return i.g?i.g.readyState:0}function xs(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.K){case wi:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch{return null}}function Xo(i){let e="";return wn(i,function(n,o){e+=o,e+=":",e+=n,e+="\r\n"}),e}function uo(i,e,n){e:{for(o in n){var o=!1;break e}o=!0}o||(n=Xo(n),"string"==typeof i?null!=n&&encodeURIComponent(String(n)):Ln(i,e,n))}function Ir(i,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[i]||e}function Sa(i){this.Ga=0,this.j=[],this.l=new fe,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Ir("failFast",!1,i),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Ir("baseRetryDelayMs",5e3,i),this.hb=Ir("retryDelaySeedMs",1e4,i),this.eb=Ir("forwardChannelMaxRetries",2,i),this.xa=Ir("forwardChannelRequestTimeoutMs",2e4,i),this.va=i&&i.xmlHttpFactory||void 0,this.Ha=i&&i.useFetchStreams||!1,this.L=void 0,this.J=i&&i.supportsCrossDomainXhr||!1,this.K="",this.i=new $r(i&&i.concurrentRequestLimit),this.Ja=new vo,this.P=i&&i.fastHandshake||!1,this.O=i&&i.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=i&&i.bc||!1,i&&i.Ea&&this.l.Ea(),i&&i.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&i&&i.detectBufferingProxy||!1,this.qa=void 0,i&&i.longPollingTimeout&&0<i.longPollingTimeout&&(this.qa=i.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function fa(i){if(G(i),3==i.H){var e=i.W++,n=Jr(i.I);if(Ln(n,"SID",i.K),Ln(n,"RID",e),Ln(n,"TYPE","terminate"),Bt(i,n),(e=new ci(i,i.l,e)).L=2,e.A=Li(Jr(n)),n=!1,re.navigator&&re.navigator.sendBeacon)try{n=re.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&re.Image&&((new Image).src=e.A,n=!0),n||(e.g=Pi(e.l,null),e.g.ha(e.A)),e.G=Date.now(),to(e)}qi(i)}function j(i){i.g&&(ps(i),i.g.cancel(),i.g=null)}function G(i){j(i),i.u&&(re.clearTimeout(i.u),i.u=null),Ui(i),i.i.cancel(),i.m&&("number"==typeof i.m&&re.clearTimeout(i.m),i.m=null)}function M(i){if(!Hr(i.i)&&!i.m){i.m=!0;var e=i.Na;U||oe(),x||(U(),x=!0),N.add(e,i),i.C=0}}function Ie(i,e){var n;n=e?e.m:i.W++;const o=Jr(i.I);Ln(o,"SID",i.K),Ln(o,"RID",n),Ln(o,"AID",i.V),Bt(i,o),i.o&&i.s&&uo(o,i.o,i.s),n=new ci(i,i.l,n,i.C+1),null===i.o&&(n.I=i.s),e&&(i.j=e.F.concat(i.j)),e=gn(i,n,1e3),n.setTimeout(Math.round(.5*i.xa)+Math.round(.5*i.xa*Math.random())),Ei(i.i,n),Ri(n,o,e)}function Bt(i,e){i.na&&wn(i.na,function(n,o){Ln(e,o,n)}),i.h&&Yi({},function(n,o){Ln(e,o,n)})}function gn(i,e,n){n=Math.min(i.j.length,n);var o=i.h?Xe(i.h.Va,i.h,i):null;e:{var u=i.j;let c=-1;for(;;){const p=["count="+n];-1==c?0<n?(c=u[0].g,p.push("ofs="+c)):c=0:p.push("ofs="+c);let A=!0;for(let P=0;P<n;P++){let B=u[P].g;const Q=u[P].map;if(B-=c,0>B)c=Math.max(0,u[P].g-100),A=!1;else try{jn(Q,p,"req"+B+"_")}catch{o&&o(Q)}}if(A){o=p.join("&");break e}}}return i=i.j.splice(0,n),e.F=i,o}function hi(i){if(!i.g&&!i.u){i.ba=1;var e=i.Ma;U||oe(),x||(U(),x=!0),N.add(e,i),i.A=0}}function Gi(i){return!(i.g||i.u||3<=i.A||(i.ba++,i.u=li(Xe(i.Ma,i),Ho(i,i.A)),i.A++,0))}function ps(i){null!=i.B&&(re.clearTimeout(i.B),i.B=null)}function lo(i){i.g=new ci(i,i.l,"rpc",i.ba),null===i.o&&(i.g.I=i.s),i.g.O=0;var e=Jr(i.wa);Ln(e,"RID","rpc"),Ln(e,"SID",i.K),Ln(e,"AID",i.V),Ln(e,"CI",i.G?"0":"1"),!i.G&&i.qa&&Ln(e,"TO",i.qa),Ln(e,"TYPE","xmlhttp"),Bt(i,e),i.o&&i.s&&uo(e,i.o,i.s),i.L&&i.g.setTimeout(i.L);var n=i.g;i=i.pa,n.L=1,n.A=Li(Jr(e)),n.u=null,n.S=!0,Ms(n,i)}function Ui(i){null!=i.v&&(re.clearTimeout(i.v),i.v=null)}function Wi(i,e){var n=null;if(i.g==e){Ui(i),ps(i),i.g=null;var o=2}else{if(!vi(i.i,e))return;n=e.F,Ji(i.i,e),o=1}if(0!=i.H)if(e.i)if(1==o){n=e.u?e.u.length:0,e=Date.now()-e.G;var u=i.C;mn(o=Sn(),new lr(o,n)),M(i)}else hi(i);else if(3==(u=e.s)||0==u&&0<e.ca||!(1==o&&function X(i,e){return!(Dr(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.j=e.F.concat(i.j),0):1==i.H||2==i.H||i.C>=(i.cb?0:i.eb)||(i.m=li(Xe(i.Na,i,e),Ho(i,i.C)),i.C++,0)))}(i,e)||2==o&&Gi(i)))switch(n&&0<n.length&&(e=i.i,e.i=e.i.concat(n)),u){case 1:zo(i,5);break;case 4:zo(i,10);break;case 3:zo(i,6);break;default:zo(i,2)}}function Ho(i,e){let n=i.ab+Math.floor(Math.random()*i.hb);return i.isActive()||(n*=2),n*e}function zo(i,e){if(i.l.info("Error code "+e),2==e){var n=null;i.h&&(n=null);var o=Xe(i.pb,i);n||(n=new Vr("//www.google.com/images/cleardot.gif"),re.location&&"http"==re.location.protocol||Zr(n,"https"),Li(n)),function Ws(i,e){const n=new fe;if(re.Image){const o=new Image;o.onload=Lt(bo,n,o,"TestLoadImage: loaded",!0,e),o.onerror=Lt(bo,n,o,"TestLoadImage: error",!1,e),o.onabort=Lt(bo,n,o,"TestLoadImage: abort",!1,e),o.ontimeout=Lt(bo,n,o,"TestLoadImage: timeout",!1,e),re.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=i}else e(!1)}(n.toString(),o)}else xn(2);i.H=0,i.h&&i.h.za(e),qi(i),G(i)}function qi(i){if(i.H=0,i.ma=[],i.h){const e=Qr(i.i);(0!=e.length||0!=i.j.length)&&(tt(i.ma,e),tt(i.ma,i.j),i.i.i.length=0,xe(i.j),i.j.length=0),i.h.ya()}}function Mo(i,e,n){var o=n instanceof Vr?Jr(n):new Vr(n);if(""!=o.g)e&&(o.g=e+"."+o.g),Ns(o,o.m);else{var u=re.location;o=u.protocol,e=e?e+"."+u.hostname:u.hostname,u=+u.port;var c=new Vr(null);o&&Zr(c,o),e&&(c.g=e),u&&Ns(c,u),n&&(c.l=n),o=c}return e=i.Da,(n=i.F)&&e&&Ln(o,n,e),Ln(o,"VER",i.ra),Bt(i,o),o}function Pi(i,e,n){if(e&&!i.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new dn(i.Ha&&!i.va?new qs({ob:n}):i.va)).Oa(i.J),e}function ea(){}function si(){if(Pt&&!(10<=Number(Nn)))throw Error("Environmental error: no available transport.")}function Ur(i,e){Vn.call(this),this.g=new Sa(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(i?i["X-WebChannel-Client-Profile"]=e.Ca:i={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=i,(i=e&&e.cc)&&!It(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!It(e)&&(this.g.F=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new Ds(this)}function No(i){mo.call(this),i.__headers__&&(this.headers=i.__headers__,this.statusCode=i.__status__,delete i.__headers__,delete i.__status__);var e=i.__sm__;if(e){e:{for(const n in e){i=n;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function ks(){eo.call(this),this.status=1}function Ds(i){this.g=i}function ls(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function na(i,e,n){n||(n=0);var o=Array(16);if("string"==typeof e)for(var u=0;16>u;++u)o[u]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(u=0;16>u;++u)o[u]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;var c=i.g[3],p=(e=i.g[0])+(c^(n=i.g[1])&((u=i.g[2])^c))+o[0]+3614090360&4294967295;p=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=(n=(u=(c=(e=n+(p<<7&4294967295|p>>>25))+((p=c+(u^e&(n^u))+o[1]+3905402710&4294967295)<<12&4294967295|p>>>20))+((p=u+(n^c&(e^n))+o[2]+606105819&4294967295)<<17&4294967295|p>>>15))+((p=n+(e^u&(c^e))+o[3]+3250441966&4294967295)<<22&4294967295|p>>>10))+((p=e+(c^n&(u^c))+o[4]+4118548399&4294967295)<<7&4294967295|p>>>25))+((p=c+(u^e&(n^u))+o[5]+1200080426&4294967295)<<12&4294967295|p>>>20))+((p=u+(n^c&(e^n))+o[6]+2821735955&4294967295)<<17&4294967295|p>>>15))+((p=n+(e^u&(c^e))+o[7]+4249261313&4294967295)<<22&4294967295|p>>>10))+((p=e+(c^n&(u^c))+o[8]+1770035416&4294967295)<<7&4294967295|p>>>25))+((p=c+(u^e&(n^u))+o[9]+2336552879&4294967295)<<12&4294967295|p>>>20))+((p=u+(n^c&(e^n))+o[10]+4294925233&4294967295)<<17&4294967295|p>>>15))+((p=n+(e^u&(c^e))+o[11]+2304563134&4294967295)<<22&4294967295|p>>>10))+((p=e+(c^n&(u^c))+o[12]+1804603682&4294967295)<<7&4294967295|p>>>25))+((p=c+(u^e&(n^u))+o[13]+4254626195&4294967295)<<12&4294967295|p>>>20))+((p=u+(n^c&(e^n))+o[14]+2792965006&4294967295)<<17&4294967295|p>>>15))+((p=n+(e^u&(c^e))+o[15]+1236535329&4294967295)<<22&4294967295|p>>>10))+((p=e+(u^c&(n^u))+o[1]+4129170786&4294967295)<<5&4294967295|p>>>27))+((p=c+(n^u&(e^n))+o[6]+3225465664&4294967295)<<9&4294967295|p>>>23))+((p=u+(e^n&(c^e))+o[11]+643717713&4294967295)<<14&4294967295|p>>>18))+((p=n+(c^e&(u^c))+o[0]+3921069994&4294967295)<<20&4294967295|p>>>12))+((p=e+(u^c&(n^u))+o[5]+3593408605&4294967295)<<5&4294967295|p>>>27))+((p=c+(n^u&(e^n))+o[10]+38016083&4294967295)<<9&4294967295|p>>>23))+((p=u+(e^n&(c^e))+o[15]+3634488961&4294967295)<<14&4294967295|p>>>18))+((p=n+(c^e&(u^c))+o[4]+3889429448&4294967295)<<20&4294967295|p>>>12))+((p=e+(u^c&(n^u))+o[9]+568446438&4294967295)<<5&4294967295|p>>>27))+((p=c+(n^u&(e^n))+o[14]+3275163606&4294967295)<<9&4294967295|p>>>23))+((p=u+(e^n&(c^e))+o[3]+4107603335&4294967295)<<14&4294967295|p>>>18))+((p=n+(c^e&(u^c))+o[8]+1163531501&4294967295)<<20&4294967295|p>>>12))+((p=e+(u^c&(n^u))+o[13]+2850285829&4294967295)<<5&4294967295|p>>>27))+((p=c+(n^u&(e^n))+o[2]+4243563512&4294967295)<<9&4294967295|p>>>23))+((p=u+(e^n&(c^e))+o[7]+1735328473&4294967295)<<14&4294967295|p>>>18))+((p=n+(c^e&(u^c))+o[12]+2368359562&4294967295)<<20&4294967295|p>>>12))+((p=e+(n^u^c)+o[5]+4294588738&4294967295)<<4&4294967295|p>>>28))+((p=c+(e^n^u)+o[8]+2272392833&4294967295)<<11&4294967295|p>>>21))+((p=u+(c^e^n)+o[11]+1839030562&4294967295)<<16&4294967295|p>>>16))+((p=n+(u^c^e)+o[14]+4259657740&4294967295)<<23&4294967295|p>>>9))+((p=e+(n^u^c)+o[1]+2763975236&4294967295)<<4&4294967295|p>>>28))+((p=c+(e^n^u)+o[4]+1272893353&4294967295)<<11&4294967295|p>>>21))+((p=u+(c^e^n)+o[7]+4139469664&4294967295)<<16&4294967295|p>>>16))+((p=n+(u^c^e)+o[10]+3200236656&4294967295)<<23&4294967295|p>>>9))+((p=e+(n^u^c)+o[13]+681279174&4294967295)<<4&4294967295|p>>>28))+((p=c+(e^n^u)+o[0]+3936430074&4294967295)<<11&4294967295|p>>>21))+((p=u+(c^e^n)+o[3]+3572445317&4294967295)<<16&4294967295|p>>>16))+((p=n+(u^c^e)+o[6]+76029189&4294967295)<<23&4294967295|p>>>9))+((p=e+(n^u^c)+o[9]+3654602809&4294967295)<<4&4294967295|p>>>28))+((p=c+(e^n^u)+o[12]+3873151461&4294967295)<<11&4294967295|p>>>21))+((p=u+(c^e^n)+o[15]+530742520&4294967295)<<16&4294967295|p>>>16))+((p=n+(u^c^e)+o[2]+3299628645&4294967295)<<23&4294967295|p>>>9))+((p=e+(u^(n|~c))+o[0]+4096336452&4294967295)<<6&4294967295|p>>>26))+((p=c+(n^(e|~u))+o[7]+1126891415&4294967295)<<10&4294967295|p>>>22))+((p=u+(e^(c|~n))+o[14]+2878612391&4294967295)<<15&4294967295|p>>>17))+((p=n+(c^(u|~e))+o[5]+4237533241&4294967295)<<21&4294967295|p>>>11))+((p=e+(u^(n|~c))+o[12]+1700485571&4294967295)<<6&4294967295|p>>>26))+((p=c+(n^(e|~u))+o[3]+2399980690&4294967295)<<10&4294967295|p>>>22))+((p=u+(e^(c|~n))+o[10]+4293915773&4294967295)<<15&4294967295|p>>>17))+((p=n+(c^(u|~e))+o[1]+2240044497&4294967295)<<21&4294967295|p>>>11))+((p=e+(u^(n|~c))+o[8]+1873313359&4294967295)<<6&4294967295|p>>>26))+((p=c+(n^(e|~u))+o[15]+4264355552&4294967295)<<10&4294967295|p>>>22))+((p=u+(e^(c|~n))+o[6]+2734768916&4294967295)<<15&4294967295|p>>>17))+((p=n+(c^(u|~e))+o[13]+1309151649&4294967295)<<21&4294967295|p>>>11))+((c=(e=n+((p=e+(u^(n|~c))+o[4]+4149444226&4294967295)<<6&4294967295|p>>>26))+((p=c+(n^(e|~u))+o[11]+3174756917&4294967295)<<10&4294967295|p>>>22))^((u=c+((p=u+(e^(c|~n))+o[2]+718787259&4294967295)<<15&4294967295|p>>>17))|~e))+o[9]+3951481745&4294967295,i.g[0]=i.g[0]+e&4294967295,i.g[1]=i.g[1]+(u+(p<<21&4294967295|p>>>11))&4294967295,i.g[2]=i.g[2]+u&4294967295,i.g[3]=i.g[3]+c&4294967295}function wr(i,e){this.h=e;for(var n=[],o=!0,u=i.length-1;0<=u;u--){var c=0|i[u];o&&c==e||(n[u]=c,o=!1)}this.g=n}(_e=dn.prototype).Oa=function(i){this.M=i},_e.ha=function(i,e,n,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+i);e=e?e.toUpperCase():"GET",this.I=i,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():zs.g(),this.C=function ni(i){return i.h||(i.h=i.i())}(this.u?this.u:zs),this.g.onreadystatechange=Xe(this.La,this);try{this.G=!0,this.g.open(e,String(i),!0),this.G=!1}catch(c){return void us(this,c)}if(i=n||"",n=new Map(this.headers),o)if(Object.getPrototypeOf(o)===Object.prototype)for(var u in o)n.set(u,o[u]);else{if("function"!=typeof o.keys||"function"!=typeof o.get)throw Error("Unknown input type for opt_headers: "+String(o));for(const c of o.keys())n.set(c,o.get(c))}o=Array.from(n.keys()).find(c=>"content-type"==c.toLowerCase()),u=re.FormData&&i instanceof re.FormData,!(0<=ke(oo,e))||o||u||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[c,p]of n)this.g.setRequestHeader(c,p);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Jo(this),0<this.B&&((this.L=function ao(i){return Pt&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Xe(this.ua,this)):this.A=Ct(this.ua,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(c){us(this,c)}},_e.ua=function(){typeof Le<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,mn(this,"timeout"),this.abort(8))},_e.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,mn(this,"complete"),mn(this,"abort"),Po(this))},_e.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Po(this,!0)),dn.$.N.call(this)},_e.La=function(){this.s||(this.G||this.v||this.l?Eo(this):this.kb())},_e.kb=function(){Eo(this)},_e.isActive=function(){return!!this.g},_e.da=function(){try{return 2<kr(this)?this.g.status:-1}catch{return-1}},_e.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},_e.Wa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),Ii(e)}},_e.Ia=function(){return this.m},_e.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(_e=Sa.prototype).ra=8,_e.H=1,_e.Na=function(i){if(this.m)if(this.m=null,1==this.H){if(!i){this.W=Math.floor(1e5*Math.random()),i=this.W++;const u=new ci(this,this.l,i);let c=this.s;if(this.U&&(c?(c=kn(c),nr(c,this.U)):c=this.U),null!==this.o||this.O||(u.I=c,c=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){var o=this.j[n];if(void 0===(o="__data__"in o.map&&"string"==typeof(o=o.map.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=n;break e}if(4096===e||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=gn(this,u,e),Ln(n=Jr(this.I),"RID",i),Ln(n,"CVER",22),this.F&&Ln(n,"X-HTTP-Session-Id",this.F),Bt(this,n),c&&(this.O?e="headers="+encodeURIComponent(String(Xo(c)))+"&"+e:this.o&&uo(n,this.o,c)),Ei(this.i,u),this.bb&&Ln(n,"TYPE","init"),this.P?(Ln(n,"$req",e),Ln(n,"SID","null"),u.aa=!0,Ri(u,n,null)):Ri(u,n,e),this.H=2}}else 3==this.H&&(i?Ie(this,i):0==this.j.length||Hr(this.i)||Ie(this))},_e.Ma=function(){if(this.u=null,lo(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var i=2*this.S;this.l.info("BP detection timer enabled: "+i),this.B=li(Xe(this.jb,this),i)}},_e.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,xn(10),j(this),lo(this))},_e.ib=function(){null!=this.v&&(this.v=null,j(this),Gi(this),xn(19))},_e.pb=function(i){i?(this.l.info("Successfully pinged google.com"),xn(2)):(this.l.info("Failed to ping google.com"),xn(1))},_e.isActive=function(){return!!this.h&&this.h.isActive(this)},(_e=ea.prototype).Ba=function(){},_e.Aa=function(){},_e.za=function(){},_e.ya=function(){},_e.isActive=function(){return!0},_e.Va=function(){},si.prototype.g=function(i,e){return new Ur(i,e)},nt(Ur,Vn),Ur.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var i=this.g,e=this.l,n=this.h||void 0;xn(0),i.Y=e,i.na=n||{},i.G=i.aa,i.I=Mo(i,null,i.Y),M(i)},Ur.prototype.close=function(){fa(this.g)},Ur.prototype.u=function(i){var e=this.g;if("string"==typeof i){var n={};n.__data__=i,i=n}else this.v&&((n={}).__data__=qr(i),i=n);e.j.push(new class{constructor(i,e){this.g=i,this.map=e}}(e.fb++,i)),3==e.H&&M(e)},Ur.prototype.N=function(){this.g.h=null,delete this.j,fa(this.g),delete this.g,Ur.$.N.call(this)},nt(No,mo),nt(ks,eo),nt(Ds,ea),Ds.prototype.Ba=function(){mn(this.g,"a")},Ds.prototype.Aa=function(i){mn(this.g,new No(i))},Ds.prototype.za=function(i){mn(this.g,new ks)},Ds.prototype.ya=function(){mn(this.g,"b")},nt(ls,function ta(){this.blockSize=-1}),ls.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},ls.prototype.j=function(i,e){void 0===e&&(e=i.length);for(var n=e-this.blockSize,o=this.m,u=this.h,c=0;c<e;){if(0==u)for(;c<=n;)na(this,i,c),c+=this.blockSize;if("string"==typeof i){for(;c<e;)if(o[u++]=i.charCodeAt(c++),u==this.blockSize){na(this,o),u=0;break}}else for(;c<e;)if(o[u++]=i[c++],u==this.blockSize){na(this,o),u=0;break}}this.h=u,this.i+=e},ls.prototype.l=function(){var i=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);i[0]=128;for(var e=1;e<i.length-8;++e)i[e]=0;var n=8*this.i;for(e=i.length-8;e<i.length;++e)i[e]=255&n,n/=256;for(this.j(i),i=Array(16),e=n=0;4>e;++e)for(var o=0;32>o;o+=8)i[n++]=this.g[e]>>>o&255;return i};var ra={};function Ki(i){return-128<=i&&128>i?function ar(i,e){var n=ra;return Object.prototype.hasOwnProperty.call(n,i)?n[i]:n[i]=e(i)}(i,function(e){return new wr([0|e],0>e?-1:0)}):new wr([0|i],0>i?-1:0)}function Ti(i){if(isNaN(i)||!isFinite(i))return pa;if(0>i)return Xi(Ti(-i));for(var e=[],n=1,o=0;i>=n;o++)e[o]=i/n|0,n*=xo;return new wr(e,0)}var xo=4294967296,pa=Ki(0),ba=Ki(1),vt=Ki(16777216);function Fs(i){if(0!=i.h)return!1;for(var e=0;e<i.g.length;e++)if(0!=i.g[e])return!1;return!0}function Ls(i){return-1==i.h}function Xi(i){for(var e=i.g.length,n=[],o=0;o<e;o++)n[o]=~i.g[o];return new wr(n,~i.h).add(ba)}function Go(i,e){return i.add(Xi(e))}function ko(i,e){for(;(65535&i[e])!=i[e];)i[e+1]+=i[e]>>>16,i[e]&=65535,e++}function ia(i,e){this.g=i,this.h=e}function co(i,e){if(Fs(e))throw Error("division by zero");if(Fs(i))return new ia(pa,pa);if(Ls(i))return e=co(Xi(i),e),new ia(Xi(e.g),Xi(e.h));if(Ls(e))return e=co(i,Xi(e)),new ia(Xi(e.g),e.h);if(30<i.g.length){if(Ls(i)||Ls(e))throw Error("slowDivide_ only works with positive integers.");for(var n=ba,o=e;0>=o.X(i);)n=Ra(n),o=Ra(o);var u=gs(n,1),c=gs(o,1);for(o=gs(o,2),n=gs(n,2);!Fs(o);){var p=c.add(o);0>=p.X(i)&&(u=u.add(n),c=p),o=gs(o,1),n=gs(n,1)}return e=Go(i,u.R(e)),new ia(u,e)}for(u=pa;0<=i.X(e);){for(n=Math.max(1,Math.floor(i.ea()/e.ea())),o=48>=(o=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,o-48),p=(c=Ti(n)).R(e);Ls(p)||0<p.X(i);)p=(c=Ti(n-=o)).R(e);Fs(c)&&(c=ba),u=u.add(c),i=Go(i,p)}return new ia(u,i)}function Ra(i){for(var e=i.g.length+1,n=[],o=0;o<e;o++)n[o]=i.D(o)<<1|i.D(o-1)>>>31;return new wr(n,i.h)}function gs(i,e){var n=e>>5;e%=32;for(var o=i.g.length-n,u=[],c=0;c<o;c++)u[c]=0<e?i.D(c+n)>>>e|i.D(c+n+1)<<32-e:i.D(c+n);return new wr(u,i.h)}(_e=wr.prototype).ea=function(){if(Ls(this))return-Xi(this).ea();for(var i=0,e=1,n=0;n<this.g.length;n++){var o=this.D(n);i+=(0<=o?o:xo+o)*e,e*=xo}return i},_e.toString=function(i){if(2>(i=i||10)||36<i)throw Error("radix out of range: "+i);if(Fs(this))return"0";if(Ls(this))return"-"+Xi(this).toString(i);for(var e=Ti(Math.pow(i,6)),n=this,o="";;){var u=co(n,e).g,c=((0<(n=Go(n,u.R(e))).g.length?n.g[0]:n.h)>>>0).toString(i);if(Fs(n=u))return c+o;for(;6>c.length;)c="0"+c;o=c+o}},_e.D=function(i){return 0>i?0:i<this.g.length?this.g[i]:this.h},_e.X=function(i){return Ls(i=Go(this,i))?-1:Fs(i)?0:1},_e.abs=function(){return Ls(this)?Xi(this):this},_e.add=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],o=0,u=0;u<=e;u++){var c=o+(65535&this.D(u))+(65535&i.D(u)),p=(c>>>16)+(this.D(u)>>>16)+(i.D(u)>>>16);o=p>>>16,n[u]=(p&=65535)<<16|(c&=65535)}return new wr(n,-2147483648&n[n.length-1]?-1:0)},_e.R=function(i){if(Fs(this)||Fs(i))return pa;if(Ls(this))return Ls(i)?Xi(this).R(Xi(i)):Xi(Xi(this).R(i));if(Ls(i))return Xi(this.R(Xi(i)));if(0>this.X(vt)&&0>i.X(vt))return Ti(this.ea()*i.ea());for(var e=this.g.length+i.g.length,n=[],o=0;o<2*e;o++)n[o]=0;for(o=0;o<this.g.length;o++)for(var u=0;u<i.g.length;u++){var c=this.D(o)>>>16,p=65535&this.D(o),A=i.D(u)>>>16,P=65535&i.D(u);n[2*o+2*u]+=p*P,ko(n,2*o+2*u),n[2*o+2*u+1]+=c*P,ko(n,2*o+2*u+1),n[2*o+2*u+1]+=p*A,ko(n,2*o+2*u+1),n[2*o+2*u+2]+=c*A,ko(n,2*o+2*u+2)}for(o=0;o<e;o++)n[o]=n[2*o+1]<<16|n[2*o];for(o=e;o<2*e;o++)n[o]=0;return new wr(n,0)},_e.gb=function(i){return co(this,i).h},_e.and=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],o=0;o<e;o++)n[o]=this.D(o)&i.D(o);return new wr(n,this.h&i.h)},_e.or=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],o=0;o<e;o++)n[o]=this.D(o)|i.D(o);return new wr(n,this.h|i.h)},_e.xor=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],o=0;o<e;o++)n[o]=this.D(o)^i.D(o);return new wr(n,this.h^i.h)},si.prototype.createWebChannel=si.prototype.g,Ur.prototype.send=Ur.prototype.u,Ur.prototype.open=Ur.prototype.m,Ur.prototype.close=Ur.prototype.close,vs.NO_ERROR=0,vs.TIMEOUT=8,vs.HTTP_ERROR=6,Fn.COMPLETE="complete",Rs.EventType=Fi,Fi.OPEN="a",Fi.CLOSE="b",Fi.ERROR="c",Fi.MESSAGE="d",Vn.prototype.listen=Vn.prototype.O,dn.prototype.listenOnce=dn.prototype.P,dn.prototype.getLastError=dn.prototype.Sa,dn.prototype.getLastErrorCode=dn.prototype.Ia,dn.prototype.getStatus=dn.prototype.da,dn.prototype.getResponseJson=dn.prototype.Wa,dn.prototype.getResponseText=dn.prototype.ja,dn.prototype.send=dn.prototype.ha,dn.prototype.setWithCredentials=dn.prototype.Oa,ls.prototype.digest=ls.prototype.l,ls.prototype.reset=ls.prototype.reset,ls.prototype.update=ls.prototype.j,wr.prototype.add=wr.prototype.add,wr.prototype.multiply=wr.prototype.R,wr.prototype.modulo=wr.prototype.gb,wr.prototype.compare=wr.prototype.X,wr.prototype.toNumber=wr.prototype.ea,wr.prototype.toString=wr.prototype.toString,wr.prototype.getBits=wr.prototype.D,wr.fromNumber=Ti,wr.fromString=function Oo(i,e){if(0==i.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==i.charAt(0))return Xi(Oo(i.substring(1),e));if(0<=i.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Ti(Math.pow(e,8)),o=pa,u=0;u<i.length;u+=8){var c=Math.min(8,i.length-u),p=parseInt(i.substring(u,u+c),e);8>c?(c=Ti(Math.pow(e,c)),o=o.R(c).add(Ti(p))):o=(o=o.R(n)).add(Ti(p))}return o};var hu=Ae.createWebChannelTransport=function(){return new si},D=Ae.getStatEventTarget=function(){return Sn()},K=Ae.ErrorCode=vs,k=Ae.EventType=Fn,W=Ae.Event=Qt,de=Ae.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},ot=(Ae.FetchXmlHttpFactory=qs,Ae.WebChannel=Rs),jt=Ae.XhrIo=dn,Tn=Ae.Md5=ls,dr=Ae.Integer=wr;const _r="@firebase/firestore";class Yt{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Yt.UNAUTHENTICATED=new Yt(null),Yt.GOOGLE_CREDENTIALS=new Yt("google-credentials-uid"),Yt.FIRST_PARTY=new Yt("first-party-uid"),Yt.MOCK_USER=new Yt("mock-user");let hr="10.9.0";const _n=new Ee.Yd("@firebase/firestore");function br(){return _n.logLevel}function ms(i){_n.setLogLevel(i)}function at(i,...e){if(_n.logLevel<=Ee.in.DEBUG){const n=e.map(es);_n.debug(`Firestore (${hr}): ${i}`,...n)}}function yr(i,...e){if(_n.logLevel<=Ee.in.ERROR){const n=e.map(es);_n.error(`Firestore (${hr}): ${i}`,...n)}}function xr(i,...e){if(_n.logLevel<=Ee.in.WARN){const n=e.map(es);_n.warn(`Firestore (${hr}): ${i}`,...n)}}function es(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch{return i}}function At(i="Unexpected state"){const e=`FIRESTORE (${hr}) INTERNAL ASSERTION FAILED: `+i;throw yr(e),new Error(e)}function qt(i,e){i||At()}function Sl(i,e){i||At()}function pt(i,e){return i}const Qe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ft extends ge.ZR{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Cr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class fu{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class $u{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Yt.UNAUTHENTICATED))}shutdown(){}}class Mi{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Vs{constructor(e){this.t=e,this.currentUser=Yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var o=this;let u=this.i;const c=B=>this.i!==u?(u=this.i,n(B)):Promise.resolve();let p=new Cr;this.o=()=>{this.i++,this.currentUser=this.u(),p.resolve(),p=new Cr,e.enqueueRetryable(()=>c(this.currentUser))};const A=()=>{const B=p;e.enqueueRetryable((0,d.Z)(function*(){yield B.promise,yield c(o.currentUser)}))},P=B=>{at("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=B,this.auth.addAuthTokenListener(this.o),A()};this.t.onInit(B=>P(B)),setTimeout(()=>{if(!this.auth){const B=this.t.getImmediate({optional:!0});B?P(B):(at("FirebaseAuthCredentialsProvider","Auth not yet detected"),p.resolve(),p=new Cr)}},0),A()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(o=>this.i!==e?(at("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(qt("string"==typeof o.accessToken),new fu(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return qt(null===e||"string"==typeof e),new Yt(e)}}class bl{constructor(e,n,o){this.l=e,this.h=n,this.P=o,this.type="FirstParty",this.user=Yt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Pa{constructor(e,n,o){this.l=e,this.h=n,this.P=o}getToken(){return Promise.resolve(new bl(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Yt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ja{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _s{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const o=c=>{null!=c.error&&at("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const p=c.token!==this.R;return this.R=c.token,at("FirebaseAppCheckTokenProvider",`Received ${p?"new":"existing"} token.`),p?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>o(c))};const u=c=>{at("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.appCheck.addTokenListener(this.o)};this.A.onInit(c=>u(c)),setTimeout(()=>{if(!this.appCheck){const c=this.A.getImmediate({optional:!0});c?u(c):at("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(qt("string"==typeof n.token),this.R=n.token,new ja(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function mc(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let o=0;o<i;o++)n[o]=Math.floor(256*Math.random());return n}class pu{static newId(){const n=62*Math.floor(256/62);let o="";for(;o.length<20;){const u=mc(40);for(let c=0;c<u.length;++c)o.length<20&&u[c]<n&&(o+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(u[c]%62))}return o}}function bn(i,e){return i<e?-1:i>e?1:0}function Wo(i,e,n){return i.length===e.length&&i.every((o,u)=>n(o,e[u]))}function gu(i){return i+"\0"}class Gt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ft(Qe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ft(Qe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ft(Qe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ft(Qe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Gt.fromMillis(Date.now())}static fromDate(e){return Gt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*n));return new Gt(n,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?bn(this.nanoseconds,e.nanoseconds):bn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class en{constructor(e){this.timestamp=e}static fromTimestamp(e){return new en(e)}static min(){return new en(new Gt(0,0))}static max(){return new en(new Gt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Cs{constructor(e,n,o){void 0===n?n=0:n>e.length&&At(),void 0===o?o=e.length-n:o>e.length-n&&At(),this.segments=e,this.offset=n,this.len=o}get length(){return this.len}isEqual(e){return 0===Cs.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Cs?e.forEach(o=>{n.push(o)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,o=this.limit();n<o;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const o=Math.min(e.length,n.length);for(let u=0;u<o;u++){const c=e.get(u),p=n.get(u);if(c<p)return-1;if(c>p)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ir extends Cs{construct(e,n,o){return new ir(e,n,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const o of e){if(o.indexOf("//")>=0)throw new ft(Qe.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);n.push(...o.split("/").filter(u=>u.length>0))}return new ir(n)}static emptyPath(){return new ir([])}}const $a=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Yr extends Cs{construct(e,n,o){return new Yr(e,n,o)}static isValidIdentifier(e){return $a.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Yr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Yr(["__name__"])}static fromServerFormat(e){const n=[];let o="",u=0;const c=()=>{if(0===o.length)throw new ft(Qe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(o),o=""};let p=!1;for(;u<e.length;){const A=e[u];if("\\"===A){if(u+1===e.length)throw new ft(Qe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const P=e[u+1];if("\\"!==P&&"."!==P&&"`"!==P)throw new ft(Qe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=P,u+=2}else"`"===A?(p=!p,u++):"."!==A||p?(o+=A,u++):(c(),u++)}if(c(),p)throw new ft(Qe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Yr(n)}static emptyPath(){return new Yr([])}}class Ft{constructor(e){this.path=e}static fromPath(e){return new Ft(ir.fromString(e))}static fromName(e){return new Ft(ir.fromString(e).popFirst(5))}static empty(){return new Ft(ir.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ir.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return ir.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ft(new ir(e.slice()))}}class Ks{constructor(e,n,o,u){this.indexId=e,this.collectionGroup=n,this.fields=o,this.indexState=u}}function V(i){return i.fields.find(e=>2===e.kind)}function g(i){return i.fields.filter(e=>2!==e.kind)}Ks.UNKNOWN_ID=-1;class b{constructor(e,n){this.fieldPath=e,this.kind=n}}class H{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new H(0,Ue.min())}}function he(i,e){const n=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,u=en.fromTimestamp(1e9===o?new Gt(n+1,0):new Gt(n,o));return new Ue(u,Ft.empty(),e)}function ye(i){return new Ue(i.readTime,i.key,-1)}class Ue{constructor(e,n,o){this.readTime=e,this.documentKey=n,this.largestBatchId=o}static min(){return new Ue(en.min(),Ft.empty(),-1)}static max(){return new Ue(en.max(),Ft.empty(),-1)}}function ze(i,e){let n=i.readTime.compareTo(e.readTime);return 0!==n?n:(n=Ft.comparator(i.documentKey,e.documentKey),0!==n?n:bn(i.largestBatchId,e.largestBatchId))}const xt="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kt{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ln(i){return Dn.apply(this,arguments)}function Dn(){return Dn=(0,d.Z)(function*(i){if(i.code!==Qe.FAILED_PRECONDITION||i.message!==xt)throw i;at("LocalStore","Unexpectedly lost primary lease")}),Dn.apply(this,arguments)}class Te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&At(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Te((o,u)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(o,u)},this.catchCallback=c=>{this.wrapFailure(n,c).next(o,u)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Te?n:Te.resolve(n)}catch(n){return Te.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Te.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Te.reject(n)}static resolve(e){return new Te((n,o)=>{n(e)})}static reject(e){return new Te((n,o)=>{o(e)})}static waitFor(e){return new Te((n,o)=>{let u=0,c=0,p=!1;e.forEach(A=>{++u,A.next(()=>{++c,p&&c===u&&n()},P=>o(P))}),p=!0,c===u&&n()})}static or(e){let n=Te.resolve(!1);for(const o of e)n=n.next(u=>u?Te.resolve(u):o());return n}static forEach(e,n){const o=[];return e.forEach((u,c)=>{o.push(n.call(this,u,c))}),this.waitFor(o)}static mapArray(e,n){return new Te((o,u)=>{const c=e.length,p=new Array(c);let A=0;for(let P=0;P<c;P++){const B=P;n(e[B]).next(Q=>{p[B]=Q,++A,A===c&&o(p)},Q=>u(Q))}})}static doWhile(e,n){return new Te((o,u)=>{const c=()=>{!0===e()?n().next(()=>{c()},u):o()};c()})}}class Cn{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Cr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Kn(e,n.error)):this.V.resolve()},this.transaction.onerror=o=>{const u=Ni(o.target.error);this.V.reject(new Kn(e,u))}}static open(e,n,o,u){try{return new Cn(n,e.transaction(u,o))}catch(c){throw new Kn(n,c)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(at("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const n=this.transaction.objectStore(e);return new Wr(n)}}class sr{constructor(e,n,o){this.name=e,this.version=n,this.p=o,12.2===sr.S((0,ge.z$)())&&yr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return at("SimpleDb","Removing database:",e),zr(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,ge.hl)())return!1;if(sr.C())return!0;const e=(0,ge.z$)(),n=sr.S(e),o=0<n&&n<10,u=sr.v(e),c=0<u&&u<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||c)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static v(e){const n=e.match(/Android ([\d.]+)/i),o=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(o)}O(e){var n=this;return(0,d.Z)(function*(){return n.db||(at("SimpleDb","Opening database:",n.name),n.db=yield new Promise((o,u)=>{const c=indexedDB.open(n.name,n.version);c.onsuccess=p=>{o(p.target.result)},c.onblocked=()=>{u(new Kn(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},c.onerror=p=>{const A=p.target.error;u("VersionError"===A.name?new ft(Qe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===A.name?new ft(Qe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+A):new Kn(e,A))},c.onupgradeneeded=p=>{at("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',p.oldVersion),n.p.N(p.target.result,c.transaction,p.oldVersion,n.version).next(()=>{at("SimpleDb","Database upgrade to version "+n.version+" complete")})}})),n.L&&(n.db.onversionchange=o=>n.L(o)),n.db})()}B(e){this.L=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,o,u){var c=this;return(0,d.Z)(function*(){const p="readonly"===n;let A=0;for(;;){++A;try{c.db=yield c.O(e);const P=Cn.open(c.db,e,p?"readonly":"readwrite",o),B=u(P).next(Q=>(P.g(),Q)).catch(Q=>(P.abort(Q),Te.reject(Q))).toPromise();return B.catch(()=>{}),yield P.m,B}catch(P){const B=P,Q="FirebaseError"!==B.name&&A<3;if(at("SimpleDb","Transaction failed with error:",B.message,"Retrying:",Q),c.close(),!Q)return Promise.reject(B)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class fi{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return zr(this.k.delete())}}class Kn extends ft{constructor(e,n){super(Qe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function fr(i){return"IndexedDbTransactionError"===i.name}class Wr{constructor(e){this.store=e}put(e,n){let o;return void 0!==n?(at("SimpleDb","PUT",this.store.name,e,n),o=this.store.put(n,e)):(at("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),zr(o)}add(e){return at("SimpleDb","ADD",this.store.name,e,e),zr(this.store.add(e))}get(e){return zr(this.store.get(e)).next(n=>(void 0===n&&(n=null),at("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return at("SimpleDb","DELETE",this.store.name,e),zr(this.store.delete(e))}count(){return at("SimpleDb","COUNT",this.store.name),zr(this.store.count())}W(e,n){const o=this.options(e,n),u=o.index?this.store.index(o.index):this.store;if("function"==typeof u.getAll){const c=u.getAll(o.range);return new Te((p,A)=>{c.onerror=P=>{A(P.target.error)},c.onsuccess=P=>{p(P.target.result)}})}{const c=this.cursor(o),p=[];return this.G(c,(A,P)=>{p.push(P)}).next(()=>p)}}j(e,n){const o=this.store.getAll(e,null===n?void 0:n);return new Te((u,c)=>{o.onerror=p=>{c(p.target.error)},o.onsuccess=p=>{u(p.target.result)}})}H(e,n){at("SimpleDb","DELETE ALL",this.store.name);const o=this.options(e,n);o.J=!1;const u=this.cursor(o);return this.G(u,(c,p,A)=>A.delete())}Y(e,n){let o;n?o=e:(o={},n=e);const u=this.cursor(o);return this.G(u,n)}Z(e){const n=this.cursor({});return new Te((o,u)=>{n.onerror=c=>{const p=Ni(c.target.error);u(p)},n.onsuccess=c=>{const p=c.target.result;p?e(p.primaryKey,p.value).next(A=>{A?p.continue():o()}):o()}})}G(e,n){const o=[];return new Te((u,c)=>{e.onerror=p=>{c(p.target.error)},e.onsuccess=p=>{const A=p.target.result;if(!A)return void u();const P=new fi(A),B=n(A.primaryKey,A.value,P);if(B instanceof Te){const Q=B.catch(ie=>(P.done(),Te.reject(ie)));o.push(Q)}P.isDone?u():null===P.$?A.continue():A.continue(P.$)}}).next(()=>Te.waitFor(o))}options(e,n){let o;return void 0!==e&&("string"==typeof e?o=e:n=e),{index:o,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const o=this.store.index(e.index);return e.J?o.openKeyCursor(e.range,n):o.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function zr(i){return new Te((e,n)=>{i.onsuccess=o=>{e(o.target.result)},i.onerror=o=>{const u=Ni(o.target.error);n(u)}})}let Di=!1;function Ni(i){const e=sr.S((0,ge.z$)());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(n)>=0){const o=new ft("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Di||(Di=!0,setTimeout(()=>{throw o},0)),o}}return i}class Io{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){var n=this;at("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,d.Z)(function*(){n.task=null;try{at("IndexBackfiller",`Documents written: ${yield n.X.te()}`)}catch(o){fr(o)?at("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",o):yield ln(o)}yield n.ee(6e4)}))}}class wo{constructor(e,n){this.localStore=e,this.persistence=n}te(e=50){var n=this;return(0,d.Z)(function*(){return n.persistence.runTransaction("Backfill Indexes","readwrite-primary",o=>n.ne(o,e))})()}ne(e,n){const o=new Set;let u=n,c=!0;return Te.doWhile(()=>!0===c&&u>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(p=>{if(null!==p&&!o.has(p))return at("IndexBackfiller",`Processing collection: ${p}`),this.re(e,p,u).next(A=>{u-=A,o.add(p)});c=!1})).next(()=>n-u)}re(e,n,o){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(u=>this.localStore.localDocuments.getNextDocuments(e,n,u,o).next(c=>{const p=c.changes;return this.localStore.indexManager.updateIndexEntries(e,p).next(()=>this.ie(u,c)).next(A=>(at("IndexBackfiller",`Updating offset: ${A}`),this.localStore.indexManager.updateCollectionGroup(e,n,A))).next(()=>p.size)}))}ie(e,n){let o=e;return n.changes.forEach((u,c)=>{const p=ye(c);ze(p,o)>0&&(o=p)}),new Ue(o.readTime,o.documentKey,Math.max(n.batchId,e.largestBatchId))}}let Oi=(()=>{class i{constructor(n,o){this.previousValue=n,o&&(o.sequenceNumberHandler=u=>this.se(u),this.oe=u=>o.writeSequenceNumber(u))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.oe&&this.oe(n),n}}return i._e=-1,i})();function Fo(i){return null==i}function ho(i){return 0===i&&1/i==-1/0}function I(i){return"number"==typeof i&&Number.isInteger(i)&&!ho(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}function S(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=C(e)),e=E(i.get(n),e);return C(e)}function E(i,e){let n=e;const o=i.length;for(let u=0;u<o;u++){const c=i.charAt(u);switch(c){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=c}}return n}function C(i){return i+"\x01\x01"}function O(i){const e=i.length;if(qt(e>=2),2===e)return qt("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),ir.emptyPath();const n=e-2,o=[];let u="";for(let c=0;c<e;){const p=i.indexOf("\x01",c);switch((p<0||p>n)&&At(),i.charAt(p+1)){case"\x01":const A=i.substring(c,p);let P;0===u.length?P=A:(u+=A,P=u,u=""),o.push(P);break;case"\x10":u+=i.substring(c,p),u+="\0";break;case"\x11":u+=i.substring(c,p+1);break;default:At()}c=p+2}return new ir(o)}const q=["userId","batchId"];function ae(i,e){return[i,S(e)]}function He(i,e,n){return[i,S(e),n]}const We={},Tt=["prefixPath","collectionGroup","readTime","documentId"],An=["prefixPath","collectionGroup","documentId"],Rn=["collectionGroup","readTime","prefixPath","documentId"],Pn=["canonicalId","targetId"],ts=["targetId","path"],zn=["path","targetId"],Zs=["collectionId","parent"],As=["indexId","uid"],To=["uid","sequenceNumber"],Ha=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],hh=["indexId","uid","orderedDocumentKey"],fh=["userId","collectionPath","documentId"],_c=["userId","collectionPath","largestBatchId"],ga=["userId","collectionGroup","largestBatchId"],ph=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Hu=[...ph,"documentOverlays"],Rl=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],mu=Rl,ad=[...mu,"indexConfiguration","indexState","indexEntries"];class zu extends kt{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}}function Zi(i,e){const n=pt(i);return sr.M(n.ae,e)}function yc(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function Lo(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function za(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class pi{constructor(e,n){this.comparator=e,this.root=n||ns.EMPTY}insert(e,n){return new pi(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ns.BLACK,null,null))}remove(e){return new pi(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ns.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const o=this.comparator(e,n.key);if(0===o)return n.value;o<0?n=n.left:o>0&&(n=n.right)}return null}indexOf(e){let n=0,o=this.root;for(;!o.isEmpty();){const u=this.comparator(e,o.key);if(0===u)return n+o.left.size;u<0?o=o.left:(n+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,o)=>(e(n,o),!1))}toString(){const e=[];return this.inorderTraversal((n,o)=>(e.push(`${n}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Na(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Na(this.root,e,this.comparator,!1)}getReverseIterator(){return new Na(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Na(this.root,e,this.comparator,!0)}}class Na{constructor(e,n,o,u){this.isReverse=u,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?o(e.key,n):1,n&&u&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(0===c){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ns{constructor(e,n,o,u,c){this.key=e,this.value=n,this.color=o??ns.RED,this.left=u??ns.EMPTY,this.right=c??ns.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,o,u,c){return new ns(e??this.key,n??this.value,o??this.color,u??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,o){let u=this;const c=o(e,u.key);return u=c<0?u.copy(null,null,null,u.left.insert(e,n,o),null):0===c?u.copy(null,n,null,null,null):u.copy(null,null,null,null,u.right.insert(e,n,o)),u.fixUp()}removeMin(){if(this.left.isEmpty())return ns.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let o,u=this;if(n(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,n),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===n(e,u.key)){if(u.right.isEmpty())return ns.EMPTY;o=u.right.min(),u=u.copy(o.key,o.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,n))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ns.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ns.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw At();const e=this.left.check();if(e!==this.right.check())throw At();return e+(this.isRed()?0:1)}}ns.EMPTY=null,ns.RED=!0,ns.BLACK=!1,ns.EMPTY=new class{constructor(){this.size=0}get key(){throw At()}get value(){throw At()}get color(){throw At()}get left(){throw At()}get right(){throw At()}copy(e,n,o,u,c){return this}insert(e,n,o){return new ns(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class oi{constructor(e){this.comparator=e,this.data=new pi(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,o)=>(e(n),!1))}forEachInRange(e,n){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const u=o.getNext();if(this.comparator(u.key,e[1])>=0)return;n(u.key)}}forEachWhile(e,n){let o;for(o=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new gh(this.data.getIterator())}getIteratorFrom(e){return new gh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(o=>{n=n.add(o)}),n}isEqual(e){if(!(e instanceof oi)||this.size!==e.size)return!1;const n=this.data.getIterator(),o=e.data.getIterator();for(;n.hasNext();){const u=n.getNext().key,c=o.getNext().key;if(0!==this.comparator(u,c))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new oi(this.comparator);return n.data=e,n}}class gh{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Gu(i){return i.hasNext()?i.getNext():void 0}class fo{constructor(e){this.fields=e,e.sort(Yr.comparator)}static empty(){return new fo([])}unionWith(e){let n=new oi(Yr.comparator);for(const o of this.fields)n=n.add(o);for(const o of e)n=n.add(o);return new fo(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Wo(this.fields,e.fields,(n,o)=>n.isEqual(o))}}class mh extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}function ud(){return typeof atob<"u"}class Bi{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(u){try{return atob(u)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new mh("Invalid base64 string: "+c):c}}(e);return new Bi(n)}static fromUint8Array(e){const n=function(u){let c="";for(let p=0;p<u.length;++p)c+=String.fromCharCode(u[p]);return c}(e);return new Bi(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const o=new Uint8Array(n.length);for(let u=0;u<n.length;u++)o[u]=n.charCodeAt(u);return o}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return bn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Bi.EMPTY_BYTE_STRING=new Bi("");const ld=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qo(i){if(qt(!!i),"string"==typeof i){let e=0;const n=ld.exec(i);if(qt(!!n),n[1]){let u=n[1];u=(u+"000000000").substr(0,9),e=Number(u)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:gi(i.seconds),nanos:gi(i.nanos)}}function gi(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function Ko(i){return"string"==typeof i?Bi.fromBase64String(i):Bi.fromUint8Array(i)}function Pl(i){var e,n;return"server_timestamp"===(null===(n=((null===(e=i?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function _u(i){const e=i.mapValue.fields.__previous_value__;return Pl(e)?_u(e):e}function Wu(i){const e=qo(i.mapValue.fields.__local_write_time__.timestampValue);return new Gt(e.seconds,e.nanos)}class Ml{constructor(e,n,o,u,c,p,A,P,B){this.databaseId=e,this.appId=n,this.persistenceKey=o,this.host=u,this.ssl=c,this.forceLongPolling=p,this.autoDetectLongPolling=A,this.longPollingOptions=P,this.useFetchStreams=B}}class Us{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Us("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Us&&e.projectId===this.projectId&&e.database===this.database}}const Ga={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Oa={nullValue:"NULL_VALUE"};function Zo(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Pl(i)?4:qu(i)?9007199254740991:10:At()}function Vo(i,e){if(i===e)return!0;const n=Zo(i);if(n!==Zo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Wu(i).isEqual(Wu(e));case 3:return function(u,c){if("string"==typeof u.timestampValue&&"string"==typeof c.timestampValue&&u.timestampValue.length===c.timestampValue.length)return u.timestampValue===c.timestampValue;const p=qo(u.timestampValue),A=qo(c.timestampValue);return p.seconds===A.seconds&&p.nanos===A.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return c=e,Ko(i.bytesValue).isEqual(Ko(c.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(u,c){return gi(u.geoPointValue.latitude)===gi(c.geoPointValue.latitude)&&gi(u.geoPointValue.longitude)===gi(c.geoPointValue.longitude)}(i,e);case 2:return function(u,c){if("integerValue"in u&&"integerValue"in c)return gi(u.integerValue)===gi(c.integerValue);if("doubleValue"in u&&"doubleValue"in c){const p=gi(u.doubleValue),A=gi(c.doubleValue);return p===A?ho(p)===ho(A):isNaN(p)&&isNaN(A)}return!1}(i,e);case 9:return Wo(i.arrayValue.values||[],e.arrayValue.values||[],Vo);case 10:return function(u,c){const p=u.mapValue.fields||{},A=c.mapValue.fields||{};if(yc(p)!==yc(A))return!1;for(const P in p)if(p.hasOwnProperty(P)&&(void 0===A[P]||!Vo(p[P],A[P])))return!1;return!0}(i,e);default:return At()}var c}function Wa(i,e){return void 0!==(i.values||[]).find(n=>Vo(n,e))}function sa(i,e){if(i===e)return 0;const n=Zo(i),o=Zo(e);if(n!==o)return bn(n,o);switch(n){case 0:case 9007199254740991:return 0;case 1:return bn(i.booleanValue,e.booleanValue);case 2:return function(c,p){const A=gi(c.integerValue||c.doubleValue),P=gi(p.integerValue||p.doubleValue);return A<P?-1:A>P?1:A===P?0:isNaN(A)?isNaN(P)?0:-1:1}(i,e);case 3:return cd(i.timestampValue,e.timestampValue);case 4:return cd(Wu(i),Wu(e));case 5:return bn(i.stringValue,e.stringValue);case 6:return function(c,p){const A=Ko(c),P=Ko(p);return A.compareTo(P)}(i.bytesValue,e.bytesValue);case 7:return function(c,p){const A=c.split("/"),P=p.split("/");for(let B=0;B<A.length&&B<P.length;B++){const Q=bn(A[B],P[B]);if(0!==Q)return Q}return bn(A.length,P.length)}(i.referenceValue,e.referenceValue);case 8:return function(c,p){const A=bn(gi(c.latitude),gi(p.latitude));return 0!==A?A:bn(gi(c.longitude),gi(p.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(c,p){const A=c.values||[],P=p.values||[];for(let B=0;B<A.length&&B<P.length;++B){const Q=sa(A[B],P[B]);if(Q)return Q}return bn(A.length,P.length)}(i.arrayValue,e.arrayValue);case 10:return function(c,p){if(c===Ga.mapValue&&p===Ga.mapValue)return 0;if(c===Ga.mapValue)return 1;if(p===Ga.mapValue)return-1;const A=c.fields||{},P=Object.keys(A),B=p.fields||{},Q=Object.keys(B);P.sort(),Q.sort();for(let ie=0;ie<P.length&&ie<Q.length;++ie){const Re=bn(P[ie],Q[ie]);if(0!==Re)return Re;const Ze=sa(A[P[ie]],B[Q[ie]]);if(0!==Ze)return Ze}return bn(P.length,Q.length)}(i.mapValue,e.mapValue);default:throw At()}}function cd(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return bn(i,e);const n=qo(i),o=qo(e),u=bn(n.seconds,o.seconds);return 0!==u?u:bn(n.nanos,o.nanos)}function qa(i){return vc(i)}function vc(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(n){const o=qo(n);return`time(${o.seconds},${o.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?Ko(i.bytesValue).toBase64():"referenceValue"in i?Ft.fromName(i.referenceValue).toString():"geoPointValue"in i?function(n){return`geo(${n.latitude},${n.longitude})`}(i.geoPointValue):"arrayValue"in i?function(n){let o="[",u=!0;for(const c of n.values||[])u?u=!1:o+=",",o+=vc(c);return o+"]"}(i.arrayValue):"mapValue"in i?function(n){const o=Object.keys(n.fields||{}).sort();let u="{",c=!0;for(const p of o)c?c=!1:u+=",",u+=`${p}:${vc(n.fields[p])}`;return u+"}"}(i.mapValue):At()}function ma(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function dd(i){return!!i&&"integerValue"in i}function Ka(i){return!!i&&"arrayValue"in i}function _a(i){return!!i&&"nullValue"in i}function _h(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Ol(i){return!!i&&"mapValue"in i}function Za(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Lo(i.mapValue.fields,(n,o)=>e.mapValue.fields[n]=Za(o)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Za(i.arrayValue.values[n]);return e}return Object.assign({},i)}function qu(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function hd(i){return"nullValue"in i?Oa:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?ma(Us.empty(),Ft.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:At()}function Bs(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?ma(Us.empty(),Ft.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?Ga:At()}function Ec(i,e){const n=sa(i.value,e.value);return 0!==n?n:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function Ic(i,e){const n=sa(i.value,e.value);return 0!==n?n:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class rs{constructor(e){this.value=e}static empty(){return new rs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let o=0;o<e.length-1;++o)if(n=(n.mapValue.fields||{})[e.get(o)],!Ol(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Za(n)}setAll(e){let n=Yr.emptyPath(),o={},u=[];e.forEach((p,A)=>{if(!n.isImmediateParentOf(A)){const P=this.getFieldsMap(n);this.applyChanges(P,o,u),o={},u=[],n=A.popLast()}p?o[A.lastSegment()]=Za(p):u.push(A.lastSegment())});const c=this.getFieldsMap(n);this.applyChanges(c,o,u)}delete(e){const n=this.field(e.popLast());Ol(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Vo(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let o=0;o<e.length;++o){let u=n.mapValue.fields[e.get(o)];Ol(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},n.mapValue.fields[e.get(o)]=u),n=u}return n.mapValue.fields}applyChanges(e,n,o){Lo(n,(u,c)=>e[u]=c);for(const u of o)delete e[u]}clone(){return new rs(Za(this.value))}}function yh(i){const e=[];return Lo(i.fields,(n,o)=>{const u=new Yr([n]);if(Ol(o)){const c=yh(o.mapValue).fields;if(0===c.length)e.push(u);else for(const p of c)e.push(u.child(p))}else e.push(u)}),new fo(e)}class ai{constructor(e,n,o,u,c,p,A){this.key=e,this.documentType=n,this.version=o,this.readTime=u,this.createTime=c,this.data=p,this.documentState=A}static newInvalidDocument(e){return new ai(e,0,en.min(),en.min(),en.min(),rs.empty(),0)}static newFoundDocument(e,n,o,u){return new ai(e,1,n,en.min(),o,u,0)}static newNoDocument(e,n){return new ai(e,2,n,en.min(),en.min(),rs.empty(),0)}static newUnknownDocument(e,n){return new ai(e,3,n,en.min(),en.min(),rs.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(en.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=rs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=rs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=en.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ai&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ai(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class oa{constructor(e,n){this.position=e,this.inclusive=n}}function Qa(i,e,n){let o=0;for(let u=0;u<i.position.length;u++){const c=e[u],p=i.position[u];if(o=c.field.isKeyField()?Ft.comparator(Ft.fromName(p.referenceValue),n.key):sa(p,n.data.field(c.field)),"desc"===c.dir&&(o*=-1),0!==o)break}return o}function yu(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!Vo(i.position[n],e.position[n]))return!1;return!0}class aa{constructor(e,n="asc"){this.field=e,this.dir=n}}function wc(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class Tc{}class or extends Tc{constructor(e,n,o){super(),this.field=e,this.op=n,this.value=o}static create(e,n,o){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,o):new Wf(e,n,o):"array-contains"===n?new xl(e,o):"in"===n?new Dh(e,o):"not-in"===n?new Do(e,o):"array-contains-any"===n?new Ku(e,o):new or(e,n,o)}static createKeyFieldInFilter(e,n,o){return"in"===n?new qf(e,o):new ys(e,o)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(sa(n,this.value)):null!==n&&Zo(this.value)===Zo(n)&&this.matchesComparison(sa(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return At()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Xr extends Tc{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new Xr(e,n)}matches(e){return Ya(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Ya(i){return"and"===i.op}function vh(i){return"or"===i.op}function Eh(i){return Ih(i)&&Ya(i)}function Ih(i){for(const e of i.filters)if(e instanceof Xr)return!1;return!0}function wh(i){if(i instanceof or)return i.field.canonicalString()+i.op.toString()+qa(i.value);if(Eh(i))return i.filters.map(e=>wh(e)).join(",");{const e=i.filters.map(n=>wh(n)).join(",");return`${i.op}(${e})`}}function Dc(i,e){return i instanceof or?(o=i,(u=e)instanceof or&&o.op===u.op&&o.field.isEqual(u.field)&&Vo(o.value,u.value)):i instanceof Xr?function(o,u){return u instanceof Xr&&o.op===u.op&&o.filters.length===u.filters.length&&o.filters.reduce((c,p,A)=>c&&Dc(p,u.filters[A]),!0)}(i,e):void At();var o,u}function Gf(i,e){const n=i.filters.concat(e);return Xr.create(n,i.op)}function vu(i){return i instanceof or?`${(n=i).field.canonicalString()} ${n.op} ${qa(n.value)}`:i instanceof Xr?function(n){return n.op.toString()+" {"+n.getFilters().map(vu).join(" ,")+"}"}(i):"Filter";var n}class Wf extends or{constructor(e,n,o){super(e,n,o),this.key=Ft.fromName(o.referenceValue)}matches(e){const n=Ft.comparator(e.key,this.key);return this.matchesComparison(n)}}class qf extends or{constructor(e,n){super(e,"in",n),this.keys=Th(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class ys extends or{constructor(e,n){super(e,"not-in",n),this.keys=Th(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Th(i,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(o=>Ft.fromName(o.referenceValue))}class xl extends or{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ka(n)&&Wa(n.arrayValue,this.value)}}class Dh extends or{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&Wa(this.value.arrayValue,n)}}class Do extends or{constructor(e,n){super(e,"not-in",n)}matches(e){if(Wa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!Wa(this.value.arrayValue,n)}}class Ku extends or{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ka(n)||!n.arrayValue.values)&&n.arrayValue.values.some(o=>Wa(this.value.arrayValue,o))}}class Ch{constructor(e,n=null,o=[],u=[],c=null,p=null,A=null){this.path=e,this.collectionGroup=n,this.orderBy=o,this.filters=u,this.limit=c,this.startAt=p,this.endAt=A,this.ce=null}}function Zu(i,e=null,n=[],o=[],u=null,c=null,p=null){return new Ch(i,e,n,o,u,c,p)}function ua(i){const e=pt(i);if(null===e.ce){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(o=>wh(o)).join(","),n+="|ob:",n+=e.orderBy.map(o=>{return(c=o).field.canonicalString()+c.dir;var c}).join(","),Fo(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(o=>qa(o)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(o=>qa(o)).join(",")),e.ce=n}return e.ce}function kl(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!wc(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!Dc(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!yu(i.startAt,e.startAt)&&yu(i.endAt,e.endAt)}function Cc(i){return Ft.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function Ac(i,e){return i.filters.filter(n=>n instanceof or&&n.field.isEqual(e))}function Kf(i,e,n){let o=Oa,u=!0;for(const c of Ac(i,e)){let p=Oa,A=!0;switch(c.op){case"<":case"<=":p=hd(c.value);break;case"==":case"in":case">=":p=c.value;break;case">":p=c.value,A=!1;break;case"!=":case"not-in":p=Oa}Ec({value:o,inclusive:u},{value:p,inclusive:A})<0&&(o=p,u=A)}if(null!==n)for(let c=0;c<i.orderBy.length;++c)if(i.orderBy[c].field.isEqual(e)){const p=n.position[c];Ec({value:o,inclusive:u},{value:p,inclusive:n.inclusive})<0&&(o=p,u=n.inclusive);break}return{value:o,inclusive:u}}function Co(i,e,n){let o=Ga,u=!0;for(const c of Ac(i,e)){let p=Ga,A=!0;switch(c.op){case">=":case">":p=Bs(c.value),A=!1;break;case"==":case"in":case"<=":p=c.value;break;case"<":p=c.value,A=!1;break;case"!=":case"not-in":p=Ga}Ic({value:o,inclusive:u},{value:p,inclusive:A})>0&&(o=p,u=A)}if(null!==n)for(let c=0;c<i.orderBy.length;++c)if(i.orderBy[c].field.isEqual(e)){const p=n.position[c];Ic({value:o,inclusive:u},{value:p,inclusive:n.inclusive})>0&&(o=p,u=n.inclusive);break}return{value:o,inclusive:u}}class la{constructor(e,n=null,o=[],u=[],c=null,p="F",A=null,P=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=o,this.filters=u,this.limit=c,this.limitType=p,this.startAt=A,this.endAt=P,this.le=null,this.he=null,this.Pe=null}}function Eu(i,e,n,o,u,c,p,A){return new la(i,e,n,o,u,c,p,A)}function Iu(i){return new la(i)}function Fl(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function fd(i){return null!==i.collectionGroup}function Ja(i){const e=pt(i);if(null===e.le){e.le=[];const n=new Set;for(const c of e.explicitOrderBy)e.le.push(c),n.add(c.field.canonicalString());const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(p){let A=new oi(Yr.comparator);return p.filters.forEach(P=>{P.getFlattenedFilters().forEach(B=>{B.isInequality()&&(A=A.add(B.field))})}),A})(e).forEach(c=>{n.has(c.canonicalString())||c.isKeyField()||e.le.push(new aa(c,o))}),n.has(Yr.keyField().canonicalString())||e.le.push(new aa(Yr.keyField(),o))}return e.le}function po(i){const e=pt(i);return e.he||(e.he=function pd(i,e){if("F"===i.limitType)return Zu(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(u=>new aa(u.field,"desc"===u.dir?"asc":"desc"));const n=i.endAt?new oa(i.endAt.position,i.endAt.inclusive):null,o=i.startAt?new oa(i.startAt.position,i.startAt.inclusive):null;return Zu(i.path,i.collectionGroup,e,i.filters,i.limit,n,o)}}(e,Ja(i))),e.he}function gd(i,e){const n=i.filters.concat([e]);return new la(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function Qu(i,e,n){return new la(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function wu(i,e){return kl(po(i),po(e))&&i.limitType===e.limitType}function Sc(i){return`${ua(po(i))}|lt:${i.limitType}`}function Xa(i){return`Query(target=${function(n){let o=n.path.canonicalString();return null!==n.collectionGroup&&(o+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(o+=`, filters: [${n.filters.map(u=>vu(u)).join(", ")}]`),Fo(n.limit)||(o+=", limit: "+n.limit),n.orderBy.length>0&&(o+=`, orderBy: [${n.orderBy.map(u=>{return`${(p=u).field.canonicalString()} (${p.dir})`;var p}).join(", ")}]`),n.startAt&&(o+=", startAt: ",o+=n.startAt.inclusive?"b:":"a:",o+=n.startAt.position.map(u=>qa(u)).join(",")),n.endAt&&(o+=", endAt: ",o+=n.endAt.inclusive?"a:":"b:",o+=n.endAt.position.map(u=>qa(u)).join(",")),`Target(${o})`}(po(i))}; limitType=${i.limitType})`}function xa(i,e){return e.isFoundDocument()&&function(o,u){const c=u.key.path;return null!==o.collectionGroup?u.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(c):Ft.isDocumentKey(o.path)?o.path.isEqual(c):o.path.isImmediateParentOf(c)}(i,e)&&function(o,u){for(const c of Ja(o))if(!c.field.isKeyField()&&null===u.data.field(c.field))return!1;return!0}(i,e)&&function(o,u){for(const c of o.filters)if(!c.matches(u))return!1;return!0}(i,e)&&(u=e,!((o=i).startAt&&!function(p,A,P){const B=Qa(p,A,P);return p.inclusive?B<=0:B<0}(o.startAt,Ja(o),u)||o.endAt&&!function(p,A,P){const B=Qa(p,A,P);return p.inclusive?B>=0:B>0}(o.endAt,Ja(o),u)));var o,u}function Ll(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Yu(i){return(e,n)=>{let o=!1;for(const u of Ja(i)){const c=Ah(u,e,n);if(0!==c)return c;o=o||u.field.isKeyField()}return 0}}function Ah(i,e,n){const o=i.field.isKeyField()?Ft.comparator(e.key,n.key):function(c,p,A){const P=p.data.field(c),B=A.data.field(c);return null!==P&&null!==B?sa(P,B):At()}(i.field,e,n);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return At()}}class ya{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),o=this.inner[n];if(void 0!==o)for(const[u,c]of o)if(this.equalsFn(u,e))return c}has(e){return void 0!==this.get(e)}set(e,n){const o=this.mapKeyFn(e),u=this.inner[o];if(void 0===u)return this.inner[o]=[[e,n]],void this.innerSize++;for(let c=0;c<u.length;c++)if(this.equalsFn(u[c][0],e))return void(u[c]=[e,n]);u.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),o=this.inner[n];if(void 0===o)return!1;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return 1===o.length?delete this.inner[n]:o.splice(u,1),this.innerSize--,!0;return!1}forEach(e){Lo(this.inner,(n,o)=>{for(const[u,c]of o)e(u,c)})}isEmpty(){return za(this.inner)}size(){return this.innerSize}}const md=new pi(Ft.comparator);function js(){return md}const _d=new pi(Ft.comparator);function Vl(...i){let e=_d;for(const n of i)e=e.insert(n.key,n);return e}function yd(i){let e=_d;return i.forEach((n,o)=>e=e.insert(n,o.overlayedDocument)),e}function go(){return Bl()}function Ul(){return Bl()}function Bl(){return new ya(i=>i.toString(),(i,e)=>i.isEqual(e))}const v=new pi(Ft.comparator),f=new oi(Ft.comparator);function m(...i){let e=f;for(const n of i)e=e.add(n);return e}const T=new oi(bn);function z(){return T}function te(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ho(e)?"-0":e}}function Ne(i){return{integerValue:""+i}}function Je(i,e){return I(e)?Ne(e):te(i,e)}class mt{constructor(){this._=void 0}}function rn(i,e,n){return i instanceof cs?function(u,c){const p={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:u.seconds,nanos:u.nanoseconds}}}};return c&&Pl(c)&&(c=_u(c)),c&&(p.fields.__previous_value__=c),{mapValue:p}}(n,e):i instanceof Uo?jl(i,e):i instanceof eu?Ju(i,e):function(u,c){const p=Tr(u,c),A=Sh(p)+Sh(u.Ie);return dd(p)&&dd(u.Ie)?Ne(A):te(u.serializer,A)}(i,e)}function hn(i,e,n){return i instanceof Uo?jl(i,e):i instanceof eu?Ju(i,e):n}function Tr(i,e){return i instanceof Xu?dd(o=e)||(c=o)&&"doubleValue"in c?e:{integerValue:0}:null;var o,c}class cs extends mt{}class Uo extends mt{constructor(e){super(),this.elements=e}}function jl(i,e){const n=el(e);for(const o of i.elements)n.some(u=>Vo(u,o))||n.push(o);return{arrayValue:{values:n}}}class eu extends mt{constructor(e){super(),this.elements=e}}function Ju(i,e){let n=el(e);for(const o of i.elements)n=n.filter(u=>!Vo(u,o));return{arrayValue:{values:n}}}class Xu extends mt{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function Sh(i){return gi(i.integerValue||i.doubleValue)}function el(i){return Ka(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class $l{constructor(e,n){this.field=e,this.transform=n}}class bh{constructor(e,n){this.version=e,this.transformResults=n}}class xi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new xi}static exists(e){return new xi(void 0,e)}static updateTime(e){return new xi(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function vd(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class tl{}function Hl(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new Tu(i.key,xi.none()):new ka(i.key,i.data,xi.none());{const n=i.data,o=rs.empty();let u=new oi(Yr.comparator);for(let c of e.fields)if(!u.has(c)){let p=n.field(c);null===p&&c.length>1&&(c=c.popLast(),p=n.field(c)),null===p?o.delete(c):o.set(c,p),u=u.add(c)}return new tu(i.key,o,new fo(u.toArray()),xi.none())}}function Rh(i,e,n){i instanceof ka?function(u,c,p){const A=u.value.clone(),P=Ed(u.fieldTransforms,c,p.transformResults);A.setAll(P),c.convertToFoundDocument(p.version,A).setHasCommittedMutations()}(i,e,n):i instanceof tu?function(u,c,p){if(!vd(u.precondition,c))return void c.convertToUnknownDocument(p.version);const A=Ed(u.fieldTransforms,c,p.transformResults),P=c.data;P.setAll(Yf(u)),P.setAll(A),c.convertToFoundDocument(p.version,P).setHasCommittedMutations()}(i,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function bc(i,e,n,o){return i instanceof ka?function(c,p,A,P){if(!vd(c.precondition,p))return A;const B=c.value.clone(),Q=Id(c.fieldTransforms,P,p);return B.setAll(Q),p.convertToFoundDocument(p.version,B).setHasLocalMutations(),null}(i,e,n,o):i instanceof tu?function(c,p,A,P){if(!vd(c.precondition,p))return A;const B=Id(c.fieldTransforms,P,p),Q=p.data;return Q.setAll(Yf(c)),Q.setAll(B),p.convertToFoundDocument(p.version,Q).setHasLocalMutations(),null===A?null:A.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(ie=>ie.field))}(i,e,n,o):(A=n,vd(i.precondition,p=e)?(p.convertToNoDocument(p.version).setHasLocalMutations(),null):A);var p,A}function lm(i,e){let n=null;for(const o of i.fieldTransforms){const u=e.data.field(o.field),c=Tr(o.transform,u||null);null!=c&&(null===n&&(n=rs.empty()),n.set(o.field,c))}return n||null}function Qf(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(u=e.fieldTransforms,!!(void 0===(o=i.fieldTransforms)&&void 0===u||o&&u&&Wo(o,u,(c,p)=>function Zf(i,e){return i.field.isEqual(e.field)&&(u=e.transform,(o=i.transform)instanceof Uo&&u instanceof Uo||o instanceof eu&&u instanceof eu?Wo(o.elements,u.elements,Vo):o instanceof Xu&&u instanceof Xu?Vo(o.Ie,u.Ie):o instanceof cs&&u instanceof cs);var o,u}(c,p))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var o,u}class ka extends tl{constructor(e,n,o,u=[]){super(),this.key=e,this.value=n,this.precondition=o,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class tu extends tl{constructor(e,n,o,u,c=[]){super(),this.key=e,this.data=n,this.fieldMask=o,this.precondition=u,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function Yf(i){const e=new Map;return i.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const o=i.data.field(n);e.set(n,o)}}),e}function Ed(i,e,n){const o=new Map;qt(i.length===n.length);for(let u=0;u<n.length;u++){const c=i[u],p=c.transform,A=e.data.field(c.field);o.set(c.field,hn(p,A,n[u]))}return o}function Id(i,e,n){const o=new Map;for(const u of i){const c=u.transform,p=n.data.field(u.field);o.set(u.field,rn(c,p,e))}return o}class Tu extends tl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Jf extends tl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Xf{constructor(e,n,o,u){this.batchId=e,this.localWriteTime=n,this.baseMutations=o,this.mutations=u}applyToRemoteDocument(e,n){const o=n.mutationResults;for(let u=0;u<this.mutations.length;u++){const c=this.mutations[u];c.key.isEqual(e.key)&&Rh(c,e,o[u])}}applyToLocalView(e,n){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(n=bc(o,e,n,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(n=bc(o,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const o=Ul();return this.mutations.forEach(u=>{const c=e.get(u.key),p=c.overlayedDocument;let A=this.applyToLocalView(p,c.mutatedFields);A=n.has(u.key)?null:A;const P=Hl(p,A);null!==P&&o.set(u.key,P),p.isValidDocument()||p.convertToNoDocument(en.min())}),o}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),m())}isEqual(e){return this.batchId===e.batchId&&Wo(this.mutations,e.mutations,(n,o)=>Qf(n,o))&&Wo(this.baseMutations,e.baseMutations,(n,o)=>Qf(n,o))}}class ep{constructor(e,n,o,u){this.batch=e,this.commitVersion=n,this.mutationResults=o,this.docVersions=u}static from(e,n,o){qt(e.mutations.length===o.length);let u=v;const c=e.mutations;for(let p=0;p<c.length;p++)u=u.insert(c[p].key,o[p].version);return new ep(e,n,o,u)}}class Ph{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ny{constructor(e,n){this.count=e,this.unchangedNames=n}}var Ss,Br;function np(i){switch(i){default:return At();case Qe.CANCELLED:case Qe.UNKNOWN:case Qe.DEADLINE_EXCEEDED:case Qe.RESOURCE_EXHAUSTED:case Qe.INTERNAL:case Qe.UNAVAILABLE:case Qe.UNAUTHENTICATED:return!1;case Qe.INVALID_ARGUMENT:case Qe.NOT_FOUND:case Qe.ALREADY_EXISTS:case Qe.PERMISSION_DENIED:case Qe.FAILED_PRECONDITION:case Qe.ABORTED:case Qe.OUT_OF_RANGE:case Qe.UNIMPLEMENTED:case Qe.DATA_LOSS:return!0}}function cm(i){if(void 0===i)return yr("GRPC error has no .code"),Qe.UNKNOWN;switch(i){case Ss.OK:return Qe.OK;case Ss.CANCELLED:return Qe.CANCELLED;case Ss.UNKNOWN:return Qe.UNKNOWN;case Ss.DEADLINE_EXCEEDED:return Qe.DEADLINE_EXCEEDED;case Ss.RESOURCE_EXHAUSTED:return Qe.RESOURCE_EXHAUSTED;case Ss.INTERNAL:return Qe.INTERNAL;case Ss.UNAVAILABLE:return Qe.UNAVAILABLE;case Ss.UNAUTHENTICATED:return Qe.UNAUTHENTICATED;case Ss.INVALID_ARGUMENT:return Qe.INVALID_ARGUMENT;case Ss.NOT_FOUND:return Qe.NOT_FOUND;case Ss.ALREADY_EXISTS:return Qe.ALREADY_EXISTS;case Ss.PERMISSION_DENIED:return Qe.PERMISSION_DENIED;case Ss.FAILED_PRECONDITION:return Qe.FAILED_PRECONDITION;case Ss.ABORTED:return Qe.ABORTED;case Ss.OUT_OF_RANGE:return Qe.OUT_OF_RANGE;case Ss.UNIMPLEMENTED:return Qe.UNIMPLEMENTED;case Ss.DATA_LOSS:return Qe.DATA_LOSS;default:return At()}}(Br=Ss||(Ss={}))[Br.OK=0]="OK",Br[Br.CANCELLED=1]="CANCELLED",Br[Br.UNKNOWN=2]="UNKNOWN",Br[Br.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Br[Br.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Br[Br.NOT_FOUND=5]="NOT_FOUND",Br[Br.ALREADY_EXISTS=6]="ALREADY_EXISTS",Br[Br.PERMISSION_DENIED=7]="PERMISSION_DENIED",Br[Br.UNAUTHENTICATED=16]="UNAUTHENTICATED",Br[Br.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Br[Br.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Br[Br.ABORTED=10]="ABORTED",Br[Br.OUT_OF_RANGE=11]="OUT_OF_RANGE",Br[Br.UNIMPLEMENTED=12]="UNIMPLEMENTED",Br[Br.INTERNAL=13]="INTERNAL",Br[Br.UNAVAILABLE=14]="UNAVAILABLE",Br[Br.DATA_LOSS=15]="DATA_LOSS";function Bo(){return new TextEncoder}const rp=new dr([4294967295,4294967295],0);function ip(i){const e=Bo().encode(i),n=new Tn;return n.update(e),new Uint8Array(n.digest())}function Nh(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),o=e.getUint32(4,!0),u=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new dr([n,o],0),new dr([u,c],0)]}class Qs{constructor(e,n,o){if(this.bitmap=e,this.padding=n,this.hashCount=o,n<0||n>=8)throw new Du(`Invalid padding: ${n}`);if(o<0)throw new Du(`Invalid hash count: ${o}`);if(e.length>0&&0===this.hashCount)throw new Du(`Invalid hash count: ${o}`);if(0===e.length&&0!==n)throw new Du(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=dr.fromNumber(this.Te)}de(e,n,o){let u=e.add(n.multiply(dr.fromNumber(o)));return 1===u.compare(rp)&&(u=new dr([u.getBits(0),u.getBits(1)],0)),u.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const n=ip(e),[o,u]=Nh(n);for(let c=0;c<this.hashCount;c++){const p=this.de(o,u,c);if(!this.Ae(p))return!1}return!0}static create(e,n,o){const u=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),p=new Qs(c,u,n);return o.forEach(A=>p.insert(A)),p}insert(e){if(0===this.Te)return;const n=ip(e),[o,u]=Nh(n);for(let c=0;c<this.hashCount;c++){const p=this.de(o,u,c);this.Re(p)}}Re(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class Du extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Rc{constructor(e,n,o,u,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=o,this.documentUpdates=u,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,o){const u=new Map;return u.set(e,Pc.createSynthesizedTargetChangeForCurrentChange(e,n,o)),new Rc(en.min(),u,new pi(bn),js(),m())}}class Pc{constructor(e,n,o,u,c){this.resumeToken=e,this.current=n,this.addedDocuments=o,this.modifiedDocuments=u,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,o){return new Pc(o,n,m(),m(),m())}}class Oh{constructor(e,n,o,u){this.Ve=e,this.removedTargetIds=n,this.key=o,this.me=u}}class sp{constructor(e,n){this.targetId=e,this.fe=n}}class dm{constructor(e,n,o=Bi.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=n,this.resumeToken=o,this.cause=u}}class op{constructor(){this.ge=0,this.pe=hm(),this.ye=Bi.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=m(),n=m(),o=m();return this.pe.forEach((u,c)=>{switch(c){case 0:e=e.add(u);break;case 2:n=n.add(u);break;case 1:o=o.add(u);break;default:At()}}),new Pc(this.ye,this.we,e,n,o)}Fe(){this.Se=!1,this.pe=hm()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,qt(this.ge>=0)}Le(){this.Se=!0,this.we=!0}}class Oy{constructor(e){this.Be=e,this.ke=new Map,this.qe=js(),this.Qe=ap(),this.Ke=new pi(bn)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const o=this.ze(n);switch(e.state){case 0:this.je(n)&&o.Ce(e.resumeToken);break;case 1:o.Ne(),o.be||o.Fe(),o.Ce(e.resumeToken);break;case 2:o.Ne(),o.be||this.removeTarget(n);break;case 3:this.je(n)&&(o.Le(),o.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),o.Ce(e.resumeToken));break;default:At()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((o,u)=>{this.je(u)&&n(u)})}Je(e){const n=e.targetId,o=e.fe.count,u=this.Ye(n);if(u){const c=u.target;if(Cc(c))if(0===o){const p=new Ft(c.path);this.We(n,p,ai.newNoDocument(p,en.min()))}else qt(1===o);else{const p=this.Ze(n);if(p!==o){const A=this.Xe(e),P=A?this.et(A,e,p):1;0!==P&&(this.He(n),this.Ke=this.Ke.insert(n,2===P?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:o="",padding:u=0},hashCount:c=0}=n;let p,A;try{p=Ko(o).toUint8Array()}catch(P){if(P instanceof mh)return xr("Decoding the base64 bloom filter in existence filter failed ("+P.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw P}try{A=new Qs(p,u,c)}catch(P){return xr(P instanceof Du?"BloomFilter error: ":"Applying bloom filter failed: ",P),null}return 0===A.Te?null:A}et(e,n,o){return n.fe.count===o-this.rt(e,n.targetId)?0:2}rt(e,n){const o=this.Be.getRemoteKeysForTarget(n);let u=0;return o.forEach(c=>{const p=this.Be.nt(),A=`projects/${p.projectId}/databases/${p.database}/documents/${c.path.canonicalString()}`;e.mightContain(A)||(this.We(n,c,null),u++)}),u}it(e){const n=new Map;this.ke.forEach((c,p)=>{const A=this.Ye(p);if(A){if(c.current&&Cc(A.target)){const P=new Ft(A.target.path);null!==this.qe.get(P)||this.st(p,P)||this.We(p,P,ai.newNoDocument(P,e))}c.De&&(n.set(p,c.ve()),c.Fe())}});let o=m();this.Qe.forEach((c,p)=>{let A=!0;p.forEachWhile(P=>{const B=this.Ye(P);return!B||"TargetPurposeLimboResolution"===B.purpose||(A=!1,!1)}),A&&(o=o.add(c))}),this.qe.forEach((c,p)=>p.setReadTime(e));const u=new Rc(e,n,this.Ke,this.qe,o);return this.qe=js(),this.Qe=ap(),this.Ke=new pi(bn),u}Ue(e,n){if(!this.je(e))return;const o=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,o),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,o){if(!this.je(e))return;const u=this.ze(e);this.st(e,n)?u.Me(n,1):u.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),o&&(this.qe=this.qe.insert(n,o))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new op,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new oi(bn),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=null!==this.Ye(e);return n||at("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Be._t(e)}He(e){this.ke.set(e,new op),this.Be.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Be.getRemoteKeysForTarget(e).has(n)}}function ap(){return new pi(Ft.comparator)}function hm(){return new pi(Ft.comparator)}const xy={asc:"ASCENDING",desc:"DESCENDING"},up={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},lp={and:"AND",or:"OR"};class ky{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function zl(i,e){return i.useProto3Json||Fo(e)?e:{value:e}}function Mc(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function fm(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function pm(i,e){return Mc(i,e.toTimestamp())}function ds(i){return qt(!!i),en.fromTimestamp(function(n){const o=qo(n);return new Gt(o.seconds,o.nanos)}(i))}function xh(i,e){return nl(i,e).canonicalString()}function nl(i,e){const n=(u=i,new ir(["projects",u.projectId,"databases",u.database])).child("documents");var u;return void 0===e?n:n.child(e)}function wd(i){const e=ir.fromString(i);return qt(fp(e)),e}function Nc(i,e){return xh(i.databaseId,e.path)}function va(i,e){const n=wd(e);if(n.get(1)!==i.databaseId.projectId)throw new ft(Qe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new ft(Qe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new Ft(mm(n))}function Td(i,e){return xh(i.databaseId,e)}function gm(i){const e=wd(i);return 4===e.length?ir.emptyPath():mm(e)}function cp(i){return new ir(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function mm(i){return qt(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function _m(i,e,n){return{name:Nc(i,e),fields:n.value.mapValue.fields}}function ym(i,e,n){const o=va(i,e.name),u=ds(e.updateTime),c=e.createTime?ds(e.createTime):en.min(),p=new rs({mapValue:{fields:e.fields}}),A=ai.newFoundDocument(o,u,c,p);return n&&A.setHasCommittedMutations(),n?A.setHasCommittedMutations():A}function rl(i,e){let n;if(e instanceof ka)n={update:_m(i,e.key,e.value)};else if(e instanceof Tu)n={delete:Nc(i,e.key)};else if(e instanceof tu)n={update:_m(i,e.key,e.data),updateMask:Cm(e.fieldMask)};else{if(!(e instanceof Jf))return At();n={verify:Nc(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(o=>function(c,p){const A=p.transform;if(A instanceof cs)return{fieldPath:p.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(A instanceof Uo)return{fieldPath:p.field.canonicalString(),appendMissingElements:{values:A.elements}};if(A instanceof eu)return{fieldPath:p.field.canonicalString(),removeAllFromArray:{values:A.elements}};if(A instanceof Xu)return{fieldPath:p.field.canonicalString(),increment:A.Ie};throw At()}(0,o))),e.precondition.isNone||(n.currentDocument=void 0!==(c=e.precondition).updateTime?{updateTime:pm(i,c.updateTime)}:void 0!==c.exists?{exists:c.exists}:At()),n;var c}function Dd(i,e){const n=e.currentDocument?void 0!==(c=e.currentDocument).updateTime?xi.updateTime(ds(c.updateTime)):void 0!==c.exists?xi.exists(c.exists):xi.none():xi.none(),o=e.updateTransforms?e.updateTransforms.map(u=>function(p,A){let P=null;"setToServerValue"in A?(qt("REQUEST_TIME"===A.setToServerValue),P=new cs):"appendMissingElements"in A?P=new Uo(A.appendMissingElements.values||[]):"removeAllFromArray"in A?P=new eu(A.removeAllFromArray.values||[]):"increment"in A?P=new Xu(p,A.increment):At();const B=Yr.fromServerFormat(A.fieldPath);return new $l(B,P)}(i,u)):[];var c;if(e.update){const u=va(i,e.update.name),c=new rs({mapValue:{fields:e.update.fields}});if(e.updateMask){const p=new fo((e.updateMask.fieldPaths||[]).map(Q=>Yr.fromServerFormat(Q)));return new tu(u,c,p,n,o)}return new ka(u,c,n,o)}if(e.delete){const u=va(i,e.delete);return new Tu(u,n)}if(e.verify){const u=va(i,e.verify);return new Jf(u,n)}return At()}function Em(i,e){return{documents:[Td(i,e.path)]}}function hp(i,e){const n={structuredQuery:{}},o=e.path;let u;null!==e.collectionGroup?(u=o,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(u=o.popLast(),n.structuredQuery.from=[{collectionId:o.lastSegment()}]),n.parent=Td(i,u);const c=function(B){if(0!==B.length)return Dm(Xr.create(B,"and"))}(e.filters);c&&(n.structuredQuery.where=c);const p=function(B){if(0!==B.length)return B.map(Q=>{return{field:Gl((Re=Q).field),direction:wm(Re.dir)};var Re})}(e.orderBy);p&&(n.structuredQuery.orderBy=p);const A=zl(i,e.limit);return null!==A&&(n.structuredQuery.limit=A),e.startAt&&(n.structuredQuery.startAt={before:(B=e.startAt).inclusive,values:B.position}),e.endAt&&(n.structuredQuery.endAt=function(B){return{before:!B.inclusive,values:B.position}}(e.endAt)),{ut:n,parent:u};var B}function kh(i){let e=gm(i.parent);const n=i.structuredQuery,o=n.from?n.from.length:0;let u=null;if(o>0){qt(1===o);const Q=n.from[0];Q.allDescendants?u=Q.collectionId:e=e.child(Q.collectionId)}let c=[];n.where&&(c=function(ie){const Re=il(ie);return Re instanceof Xr&&Eh(Re)?Re.getFilters():[Re]}(n.where));let p=[];n.orderBy&&(p=n.orderBy.map(Re=>{return new aa(Cu((bt=Re).field),function(Ut){switch(Ut){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(bt.direction));var bt}));let A=null;n.limit&&(A=function(ie){let Re;return Re="object"==typeof ie?ie.value:ie,Fo(Re)?null:Re}(n.limit));let P=null;var ie;n.startAt&&(P=new oa((ie=n.startAt).values||[],!!ie.before));let B=null;return n.endAt&&(B=function(ie){return new oa(ie.values||[],!ie.before)}(n.endAt)),Eu(e,u,p,c,A,"F",P,B)}function il(i){return void 0!==i.unaryFilter?function(n){switch(n.unaryFilter.op){case"IS_NAN":const o=Cu(n.unaryFilter.field);return or.create(o,"==",{doubleValue:NaN});case"IS_NULL":const u=Cu(n.unaryFilter.field);return or.create(u,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Cu(n.unaryFilter.field);return or.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const p=Cu(n.unaryFilter.field);return or.create(p,"!=",{nullValue:"NULL_VALUE"});default:return At()}}(i):void 0!==i.fieldFilter?or.create(Cu((n=i).fieldFilter.field),function(u){switch(u){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return At()}}(n.fieldFilter.op),n.fieldFilter.value):void 0!==i.compositeFilter?function(n){return Xr.create(n.compositeFilter.filters.map(o=>il(o)),function(u){switch(u){case"AND":return"and";case"OR":return"or";default:return At()}}(n.compositeFilter.op))}(i):At();var n}function wm(i){return xy[i]}function Tm(i){return up[i]}function Ly(i){return lp[i]}function Gl(i){return{fieldPath:i.canonicalString()}}function Cu(i){return Yr.fromServerFormat(i.fieldPath)}function Dm(i){return i instanceof or?function(n){if("=="===n.op){if(_h(n.value))return{unaryFilter:{field:Gl(n.field),op:"IS_NAN"}};if(_a(n.value))return{unaryFilter:{field:Gl(n.field),op:"IS_NULL"}}}else if("!="===n.op){if(_h(n.value))return{unaryFilter:{field:Gl(n.field),op:"IS_NOT_NAN"}};if(_a(n.value))return{unaryFilter:{field:Gl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gl(n.field),op:Tm(n.op),value:n.value}}}(i):i instanceof Xr?function(n){const o=n.getFilters().map(u=>Dm(u));return 1===o.length?o[0]:{compositeFilter:{op:Ly(n.op),filters:o}}}(i):At()}function Cm(i){const e=[];return i.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function fp(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}class nu{constructor(e,n,o,u,c=en.min(),p=en.min(),A=Bi.EMPTY_BYTE_STRING,P=null){this.target=e,this.targetId=n,this.purpose=o,this.sequenceNumber=u,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=p,this.resumeToken=A,this.expectedCount=P}withSequenceNumber(e){return new nu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new nu(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new nu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new nu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Fh{constructor(e){this.ct=e}}function Cd(i,e){const n=e.key,o={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:sl(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())o.document={name:Nc(c=i.ct,(p=e).key),fields:p.data.value.mapValue.fields,updateTime:Mc(c,p.version.toTimestamp()),createTime:Mc(c,p.createTime.toTimestamp())};else if(e.isNoDocument())o.noDocument={path:n.path.toArray(),readTime:ol(e.version)};else{if(!e.isUnknownDocument())return At();o.unknownDocument={path:n.path.toArray(),version:ol(e.version)}}var c,p;return o}function sl(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function ol(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Au(i){const e=new Gt(i.seconds,i.nanoseconds);return en.fromTimestamp(e)}function ru(i,e){const n=(e.baseMutations||[]).map(c=>Dd(i.ct,c));for(let c=0;c<e.mutations.length-1;++c)c+1<e.mutations.length&&void 0!==e.mutations[c+1].transform&&(e.mutations[c].updateTransforms=e.mutations[c+1].transform.fieldTransforms,e.mutations.splice(c+1,1),++c);const o=e.mutations.map(c=>Dd(i.ct,c)),u=Gt.fromMillis(e.localWriteTimeMs);return new Xf(e.batchId,u,n,o)}function Oc(i){const e=Au(i.readTime),n=void 0!==i.lastLimboFreeSnapshotVersion?Au(i.lastLimboFreeSnapshotVersion):en.min();let o;return o=void 0!==i.query.documents?(qt(1===(c=i.query).documents.length),po(Iu(gm(c.documents[0])))):function(c){return po(kh(c))}(i.query),new nu(o,i.targetId,"TargetPurposeListen",i.lastListenSequenceNumber,e,n,Bi.fromBase64String(i.resumeToken));var c}function Lh(i,e){const n=ol(e.snapshotVersion),o=ol(e.lastLimboFreeSnapshotVersion);let u;u=Cc(e.target)?Em(i.ct,e.target):hp(i.ct,e.target).ut;const c=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ua(e.target),readTime:n,resumeToken:c,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:u}}function Wl(i){const e=kh({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?Qu(e,e.limit,"L"):e}function pp(i,e){return new Ph(e.largestBatchId,Dd(i.ct,e.overlayMutation))}function gp(i,e){const n=e.path.lastSegment();return[i,S(e.path.popLast()),n]}function Sm(i,e,n,o){return{indexId:i,uid:e,sequenceNumber:n,readTime:ol(o.readTime),documentKey:S(o.documentKey.path),largestBatchId:o.largestBatchId}}class Vy{getBundleMetadata(e,n){return bm(e).get(n).next(o=>{if(o)return{id:(c=o).bundleId,createTime:Au(c.createTime),version:c.version};var c})}saveBundleMetadata(e,n){return bm(e).put({bundleId:(u=n).id,createTime:ol(ds(u.createTime)),version:u.version});var u}getNamedQuery(e,n){return mp(e).get(n).next(o=>{if(o)return{name:(c=o).name,query:Wl(c.bundledQuery),readTime:Au(c.readTime)};var c})}saveNamedQuery(e,n){return mp(e).put({name:(u=n).name,readTime:ol(ds(u.readTime)),bundledQuery:u.bundledQuery});var u}}function bm(i){return Zi(i,"bundles")}function mp(i){return Zi(i,"namedQueries")}class Ad{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){return new Ad(e,n.uid||"")}getOverlay(e,n){return al(e).get(gp(this.userId,n)).next(o=>o?pp(this.serializer,o):null)}getOverlays(e,n){const o=go();return Te.forEach(n,u=>this.getOverlay(e,u).next(c=>{null!==c&&o.set(u,c)})).next(()=>o)}saveOverlays(e,n,o){const u=[];return o.forEach((c,p)=>{const A=new Ph(n,p);u.push(this.ht(e,A))}),Te.waitFor(u)}removeOverlaysForBatchId(e,n,o){const u=new Set;n.forEach(p=>u.add(S(p.getCollectionPath())));const c=[];return u.forEach(p=>{const A=IDBKeyRange.bound([this.userId,p,o],[this.userId,p,o+1],!1,!0);c.push(al(e).H("collectionPathOverlayIndex",A))}),Te.waitFor(c)}getOverlaysForCollection(e,n,o){const u=go(),c=S(n),p=IDBKeyRange.bound([this.userId,c,o],[this.userId,c,Number.POSITIVE_INFINITY],!0);return al(e).W("collectionPathOverlayIndex",p).next(A=>{for(const P of A){const B=pp(this.serializer,P);u.set(B.getKey(),B)}return u})}getOverlaysForCollectionGroup(e,n,o,u){const c=go();let p;const A=IDBKeyRange.bound([this.userId,n,o],[this.userId,n,Number.POSITIVE_INFINITY],!0);return al(e).Y({index:"collectionGroupOverlayIndex",range:A},(P,B,Q)=>{const ie=pp(this.serializer,B);c.size()<u||ie.largestBatchId===p?(c.set(ie.getKey(),ie),p=ie.largestBatchId):Q.done()}).next(()=>c)}ht(e,n){return al(e).put(function(u,c,p){const[A,P,B]=gp(c,p.mutation.key);return{userId:c,collectionPath:P,documentId:B,collectionGroup:p.mutation.key.getCollectionGroup(),largestBatchId:p.largestBatchId,overlayMutation:rl(u.ct,p.mutation)}}(this.serializer,this.userId,n))}}function al(i){return Zi(i,"documentOverlays")}class Su{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(gi(e.integerValue));else if("doubleValue"in e){const o=gi(e.doubleValue);isNaN(o)?this.Et(n,13):(this.Et(n,15),ho(o)?n.dt(0):n.dt(o))}else if("timestampValue"in e){const o=e.timestampValue;this.Et(n,20),"string"==typeof o?n.At(o):(n.At(`${o.seconds||""}`),n.dt(o.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(Ko(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){const o=e.geoPointValue;this.Et(n,45),n.dt(o.latitude||0),n.dt(o.longitude||0)}else"mapValue"in e?qu(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):At()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){const o=e.fields||{};this.Et(n,55);for(const u of Object.keys(o))this.Rt(u,n),this.It(o[u],n)}wt(e,n){const o=e.values||[];this.Et(n,50);for(const u of o)this.It(u,n)}gt(e,n){this.Et(n,37),Ft.fromName(e).path.forEach(o=>{this.Et(n,60),this.St(o,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}}function xc(i){if(0===i)return 8;let e=0;return!(i>>4)&&(e+=4,i<<=4),!(i>>6)&&(e+=2,i<<=2),!(i>>7)&&(e+=1),e}function Rm(i){const e=64-function(o){let u=0;for(let c=0;c<8;++c){const p=xc(255&o[c]);if(u+=p,8!==p)break}return u}(i);return Math.ceil(e/8)}Su.bt=new Su;class Uy{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const n=e[Symbol.iterator]();let o=n.next();for(;!o.done;)this.Ct(o.value),o=n.next();this.vt()}Ft(e){const n=e[Symbol.iterator]();let o=n.next();for(;!o.done;)this.Mt(o.value),o=n.next();this.xt()}Ot(e){for(const n of e){const o=n.charCodeAt(0);if(o<128)this.Ct(o);else if(o<2048)this.Ct(960|o>>>6),this.Ct(128|63&o);else if(n<"\ud800"||"\udbff"<n)this.Ct(480|o>>>12),this.Ct(128|63&o>>>6),this.Ct(128|63&o);else{const u=n.codePointAt(0);this.Ct(240|u>>>18),this.Ct(128|63&u>>>12),this.Ct(128|63&u>>>6),this.Ct(128|63&u)}}this.vt()}Nt(e){for(const n of e){const o=n.charCodeAt(0);if(o<128)this.Mt(o);else if(o<2048)this.Mt(960|o>>>6),this.Mt(128|63&o);else if(n<"\ud800"||"\udbff"<n)this.Mt(480|o>>>12),this.Mt(128|63&o>>>6),this.Mt(128|63&o);else{const u=n.codePointAt(0);this.Mt(240|u>>>18),this.Mt(128|63&u>>>12),this.Mt(128|63&u>>>6),this.Mt(128|63&u)}}this.xt()}Lt(e){const n=this.Bt(e),o=Rm(n);this.kt(1+o),this.buffer[this.position++]=255&o;for(let u=n.length-o;u<n.length;++u)this.buffer[this.position++]=255&n[u]}qt(e){const n=this.Bt(e),o=Rm(n);this.kt(1+o),this.buffer[this.position++]=~(255&o);for(let u=n.length-o;u<n.length;++u)this.buffer[this.position++]=~(255&n[u])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){const n=function(c){const p=new DataView(new ArrayBuffer(8));return p.setFloat64(0,c,!1),new Uint8Array(p.buffer)}(e),o=0!=(128&n[0]);n[0]^=o?255:128;for(let u=1;u<n.length;++u)n[u]^=o?255:0;return n}Ct(e){const n=255&e;0===n?(this.Kt(0),this.Kt(255)):255===n?(this.Kt(255),this.Kt(0)):this.Kt(n)}Mt(e){const n=255&e;0===n?(this.Ut(0),this.Ut(255)):255===n?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const n=e+this.position;if(n<=this.buffer.length)return;let o=2*this.buffer.length;o<n&&(o=n);const u=new Uint8Array(o);u.set(this.buffer),this.buffer=u}}class UE{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}}class By{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class ql{constructor(){this.Gt=new Uy,this.zt=new UE(this.Gt),this.jt=new By(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class Kl{constructor(e,n,o,u){this.indexId=e,this.documentKey=n,this.arrayValue=o,this.directionalValue=u}Jt(){const e=this.directionalValue.length,n=0===e||255===this.directionalValue[e-1]?e+1:e,o=new Uint8Array(n);return o.set(this.directionalValue,0),n!==e?o.set([0],this.directionalValue.length):++o[o.length-1],new Kl(this.indexId,this.documentKey,this.arrayValue,o)}}function ca(i,e){let n=i.indexId-e.indexId;return 0!==n?n:(n=Sd(i.arrayValue,e.arrayValue),0!==n?n:(n=Sd(i.directionalValue,e.directionalValue),0!==n?n:Ft.comparator(i.documentKey,e.documentKey)))}function Sd(i,e){for(let n=0;n<i.length&&n<e.length;++n){const o=i[n]-e[n];if(0!==o)return o}return i.length-e.length}class Vh{constructor(e){this.Yt=new oi((n,o)=>Yr.comparator(n.field,o.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const n of e.filters){const o=n;o.isInequality()?this.Yt=this.Yt.add(o):this.Xt.push(o)}}get en(){return this.Yt.size>1}tn(e){if(qt(e.collectionGroup===this.collectionId),this.en)return!1;const n=V(e);if(void 0!==n&&!this.nn(n))return!1;const o=g(e);let u=new Set,c=0,p=0;for(;c<o.length&&this.nn(o[c]);++c)u=u.add(o[c].fieldPath.canonicalString());if(c===o.length)return!0;if(this.Yt.size>0){const A=this.Yt.getIterator().getNext();if(!u.has(A.field.canonicalString())){const P=o[c];if(!this.rn(A,P)||!this.sn(this.Zt[p++],P))return!1}++c}for(;c<o.length;++c)if(p>=this.Zt.length||!this.sn(this.Zt[p++],o[c]))return!1;return!0}on(){if(this.en)return null;let e=new oi(Yr.comparator);const n=[];for(const o of this.Xt)if(!o.field.isKeyField())if("array-contains"===o.op||"array-contains-any"===o.op)n.push(new b(o.field,2));else{if(e.has(o.field))continue;e=e.add(o.field),n.push(new b(o.field,0))}for(const o of this.Zt)o.field.isKeyField()||e.has(o.field)||(e=e.add(o.field),n.push(new b(o.field,"asc"===o.dir?0:1)));return new Ks(Ks.UNKNOWN_ID,this.collectionId,n,H.empty())}nn(e){for(const n of this.Xt)if(this.rn(n,e))return!0;return!1}rn(e,n){return!(void 0===e||!e.field.isEqual(n.fieldPath))&&2===n.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(0===n.kind&&"asc"===e.dir||1===n.kind&&"desc"===e.dir)}}function _p(i){var e,n;if(qt(i instanceof or||i instanceof Xr),i instanceof or){if(i instanceof Dh){const u=(null===(n=null===(e=i.value.arrayValue)||void 0===e?void 0:e.values)||void 0===n?void 0:n.map(c=>or.create(i.field,"==",c)))||[];return Xr.create(u,"or")}return i}const o=i.filters.map(u=>_p(u));return Xr.create(o,i.op)}function Pm(i){if(0===i.getFilters().length)return[];const e=yp(_p(i));return qt(Mm(e)),Uh(e)||bu(e)?[e]:e.getFilters()}function Uh(i){return i instanceof or}function bu(i){return i instanceof Xr&&Eh(i)}function Mm(i){return Uh(i)||bu(i)||function(n){if(n instanceof Xr&&vh(n)){for(const o of n.getFilters())if(!Uh(o)&&!bu(o))return!1;return!0}return!1}(i)}function yp(i){if(qt(i instanceof or||i instanceof Xr),i instanceof or)return i;if(1===i.filters.length)return yp(i.filters[0]);const e=i.filters.map(o=>yp(o));let n=Xr.create(e,i.op);return n=Bh(n),Mm(n)?n:(qt(n instanceof Xr),qt(Ya(n)),qt(n.filters.length>1),n.filters.reduce((o,u)=>vp(o,u)))}function vp(i,e){let n;return qt(i instanceof or||i instanceof Xr),qt(e instanceof or||e instanceof Xr),n=i instanceof or?e instanceof or?Xr.create([i,e],"and"):Nm(i,e):e instanceof or?Nm(e,i):function(u,c){if(qt(u.filters.length>0&&c.filters.length>0),Ya(u)&&Ya(c))return Gf(u,c.getFilters());const p=vh(u)?u:c,A=vh(u)?c:u,P=p.filters.map(B=>vp(B,A));return Xr.create(P,"or")}(i,e),Bh(n)}function Nm(i,e){if(Ya(e))return Gf(e,i.getFilters());{const n=e.filters.map(o=>vp(i,o));return Xr.create(n,"or")}}function Bh(i){if(qt(i instanceof or||i instanceof Xr),i instanceof or)return i;const e=i.getFilters();if(1===e.length)return Bh(e[0]);if(Ih(i))return i;const n=e.map(u=>Bh(u)),o=[];return n.forEach(u=>{u instanceof or?o.push(u):u instanceof Xr&&(u.op===i.op?o.push(...u.filters):o.push(u))}),1===o.length?o[0]:Xr.create(o,i.op)}class Ru{constructor(){this._n=new ul}addToCollectionParentIndex(e,n){return this._n.add(n),Te.resolve()}getCollectionParents(e,n){return Te.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return Te.resolve()}deleteFieldIndex(e,n){return Te.resolve()}deleteAllFieldIndexes(e){return Te.resolve()}createTargetIndexes(e,n){return Te.resolve()}getDocumentsMatchingTarget(e,n){return Te.resolve(null)}getIndexType(e,n){return Te.resolve(0)}getFieldIndexes(e,n){return Te.resolve([])}getNextCollectionGroupToUpdate(e){return Te.resolve(null)}getMinOffset(e,n){return Te.resolve(Ue.min())}getMinOffsetFromCollectionGroup(e,n){return Te.resolve(Ue.min())}updateCollectionGroup(e,n,o){return Te.resolve()}updateIndexEntries(e,n){return Te.resolve()}}class ul{constructor(){this.index={}}add(e){const n=e.lastSegment(),o=e.popLast(),u=this.index[n]||new oi(ir.comparator),c=!u.has(o);return this.index[n]=u.add(o),c}has(e){const n=e.lastSegment(),o=e.popLast(),u=this.index[n];return u&&u.has(o)}getEntries(e){return(this.index[e]||new oi(ir.comparator)).toArray()}}const jh=new Uint8Array(0);class jy{constructor(e,n){this.databaseId=n,this.an=new ul,this.un=new ya(o=>ua(o),(o,u)=>kl(o,u)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.an.has(n)){const o=n.lastSegment(),u=n.popLast();e.addOnCommittedListener(()=>{this.an.add(n)});const c={collectionId:o,parent:S(u)};return Om(e).put(c)}return Te.resolve()}getCollectionParents(e,n){const o=[],u=IDBKeyRange.bound([n,""],[gu(n),""],!1,!0);return Om(e).W(u).next(c=>{for(const p of c){if(p.collectionId!==n)break;o.push(O(p.parent))}return o})}addFieldIndex(e,n){const o=bd(e),u={indexId:(A=n).indexId,collectionGroup:A.collectionGroup,fields:A.fields.map(P=>[P.fieldPath.canonicalString(),P.kind])};var A;delete u.indexId;const c=o.add(u);if(n.indexState){const p=Fc(e);return c.next(A=>{p.put(Sm(A,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return c.next()}deleteFieldIndex(e,n){const o=bd(e),u=Fc(e),c=kc(e);return o.delete(n.indexId).next(()=>u.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>c.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=bd(e),o=kc(e),u=Fc(e);return n.H().next(()=>o.H()).next(()=>u.H())}createTargetIndexes(e,n){return Te.forEach(this.cn(n),o=>this.getIndexType(e,o).next(u=>{if(0===u||1===u){const c=new Vh(o).on();if(null!=c)return this.addFieldIndex(e,c)}}))}getDocumentsMatchingTarget(e,n){const o=kc(e);let u=!0;const c=new Map;return Te.forEach(this.cn(n),p=>this.ln(e,p).next(A=>{u&&(u=!!A),c.set(p,A)})).next(()=>{if(u){let p=m();const A=[];return Te.forEach(c,(P,B)=>{var fn;at("IndexedDbIndexManager",`Using index ${fn=P,`id=${fn.indexId}|cg=${fn.collectionGroup}|f=${fn.fields.map(gr=>`${gr.fieldPath}:${gr.kind}`).join(",")}`} to execute ${ua(n)}`);const Q=function(fn,gr){const Ci=V(gr);if(void 0===Ci)return null;for(const ti of Ac(fn,Ci.fieldPath))switch(ti.op){case"array-contains-any":return ti.value.arrayValue.values||[];case"array-contains":return[ti.value]}return null}(B,P),ie=function(fn,gr){const Ci=new Map;for(const ti of g(gr))for(const Hs of Ac(fn,ti.fieldPath))switch(Hs.op){case"==":case"in":Ci.set(ti.fieldPath.canonicalString(),Hs.value);break;case"not-in":case"!=":return Ci.set(ti.fieldPath.canonicalString(),Hs.value),Array.from(Ci.values())}return null}(B,P),Re=function(fn,gr){const Ci=[];let ti=!0;for(const Hs of g(gr)){const da=0===Hs.kind?Kf(fn,Hs.fieldPath,fn.startAt):Co(fn,Hs.fieldPath,fn.startAt);Ci.push(da.value),ti&&(ti=da.inclusive)}return new oa(Ci,ti)}(B,P),Ze=function(fn,gr){const Ci=[];let ti=!0;for(const Hs of g(gr)){const da=0===Hs.kind?Co(fn,Hs.fieldPath,fn.endAt):Kf(fn,Hs.fieldPath,fn.endAt);Ci.push(da.value),ti&&(ti=da.inclusive)}return new oa(Ci,ti)}(B,P),bt=this.hn(P,B,Re),Ht=this.hn(P,B,Ze),Ut=this.Pn(P,B,ie),yn=this.In(P.indexId,Q,bt,Re.inclusive,Ht,Ze.inclusive,Ut);return Te.forEach(yn,Qn=>o.j(Qn,n.limit).next(fn=>{fn.forEach(gr=>{const Ci=Ft.fromSegments(gr.documentKey);p.has(Ci)||(p=p.add(Ci),A.push(Ci))})}))}).next(()=>A)}return Te.resolve(null)})}cn(e){let n=this.un.get(e);return n||(n=0===e.filters.length?[e]:Pm(Xr.create(e.filters,"and")).map(o=>Zu(e.path,e.collectionGroup,e.orderBy,o.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}In(e,n,o,u,c,p,A){const P=(null!=n?n.length:1)*Math.max(o.length,c.length),B=P/(null!=n?n.length:1),Q=[];for(let ie=0;ie<P;++ie){const Re=n?this.Tn(n[ie/B]):jh,Ze=this.En(e,Re,o[ie%B],u),bt=this.dn(e,Re,c[ie%B],p),Ht=A.map(Ut=>this.En(e,Re,Ut,!0));Q.push(...this.createRange(Ze,bt,Ht))}return Q}En(e,n,o,u){const c=new Kl(e,Ft.empty(),n,o);return u?c:c.Jt()}dn(e,n,o,u){const c=new Kl(e,Ft.empty(),n,o);return u?c.Jt():c}ln(e,n){const o=new Vh(n),u=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,u).next(c=>{let p=null;for(const A of c)o.tn(A)&&(!p||A.fields.length>p.fields.length)&&(p=A);return p})}getIndexType(e,n){let o=2;const u=this.cn(n);return Te.forEach(u,c=>this.ln(e,c).next(p=>{p?0!==o&&p.fields.length<function(P){let B=new oi(Yr.comparator),Q=!1;for(const ie of P.filters)for(const Re of ie.getFlattenedFilters())Re.field.isKeyField()||("array-contains"===Re.op||"array-contains-any"===Re.op?Q=!0:B=B.add(Re.field));for(const ie of P.orderBy)ie.field.isKeyField()||(B=B.add(ie.field));return B.size+(Q?1:0)}(c)&&(o=1):o=0})).next(()=>null!==n.limit&&u.length>1&&2===o?1:o)}An(e,n){const o=new ql;for(const u of g(e)){const c=n.data.field(u.fieldPath);if(null==c)return null;const p=o.Ht(u.kind);Su.bt.Pt(c,p)}return o.Wt()}Tn(e){const n=new ql;return Su.bt.Pt(e,n.Ht(0)),n.Wt()}Rn(e,n){const o=new ql;return Su.bt.Pt(ma(this.databaseId,n),o.Ht(function(c){const p=g(c);return 0===p.length?0:p[p.length-1].kind}(e))),o.Wt()}Pn(e,n,o){if(null===o)return[];let u=[];u.push(new ql);let c=0;for(const p of g(e)){const A=o[c++];for(const P of u)if(this.Vn(n,p.fieldPath)&&Ka(A))u=this.mn(u,p,A);else{const B=P.Ht(p.kind);Su.bt.Pt(A,B)}}return this.fn(u)}hn(e,n,o){return this.Pn(e,n,o.position)}fn(e){const n=[];for(let o=0;o<e.length;++o)n[o]=e[o].Wt();return n}mn(e,n,o){const u=[...e],c=[];for(const p of o.arrayValue.values||[])for(const A of u){const P=new ql;P.seed(A.Wt()),Su.bt.Pt(p,P.Ht(n.kind)),c.push(P)}return c}Vn(e,n){return!!e.filters.find(o=>o instanceof or&&o.field.isEqual(n)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(e,n){const o=bd(e),u=Fc(e);return(n?o.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):o.W()).next(c=>{const p=[];return Te.forEach(c,A=>u.get([A.indexId,this.uid]).next(P=>{p.push(function(Q,ie){const Re=ie?new H(ie.sequenceNumber,new Ue(Au(ie.readTime),new Ft(O(ie.documentKey)),ie.largestBatchId)):H.empty(),Ze=Q.fields.map(([bt,Ht])=>new b(Yr.fromServerFormat(bt),Ht));return new Ks(Q.indexId,Q.collectionGroup,Ze,Re)}(A,P))})).next(()=>p)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>0===n.length?null:(n.sort((o,u)=>{const c=o.indexState.sequenceNumber-u.indexState.sequenceNumber;return 0!==c?c:bn(o.collectionGroup,u.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,o){const u=bd(e),c=Fc(e);return this.gn(e).next(p=>u.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(A=>Te.forEach(A,P=>c.put(Sm(P.indexId,this.uid,p,o)))))}updateIndexEntries(e,n){const o=new Map;return Te.forEach(n,(u,c)=>{const p=o.get(u.collectionGroup);return(p?Te.resolve(p):this.getFieldIndexes(e,u.collectionGroup)).next(A=>(o.set(u.collectionGroup,A),Te.forEach(A,P=>this.pn(e,u,P).next(B=>{const Q=this.yn(c,P);return B.isEqual(Q)?Te.resolve():this.wn(e,c,P,B,Q)}))))})}Sn(e,n,o,u){return kc(e).put({indexId:u.indexId,uid:this.uid,arrayValue:u.arrayValue,directionalValue:u.directionalValue,orderedDocumentKey:this.Rn(o,n.key),documentKey:n.key.path.toArray()})}bn(e,n,o,u){return kc(e).delete([u.indexId,this.uid,u.arrayValue,u.directionalValue,this.Rn(o,n.key),n.key.path.toArray()])}pn(e,n,o){const u=kc(e);let c=new oi(ca);return u.Y({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.Rn(o,n)])},(p,A)=>{c=c.add(new Kl(o.indexId,n,A.arrayValue,A.directionalValue))}).next(()=>c)}yn(e,n){let o=new oi(ca);const u=this.An(n,e);if(null==u)return o;const c=V(n);if(null!=c){const p=e.data.field(c.fieldPath);if(Ka(p))for(const A of p.arrayValue.values||[])o=o.add(new Kl(n.indexId,e.key,this.Tn(A),u))}else o=o.add(new Kl(n.indexId,e.key,jh,u));return o}wn(e,n,o,u,c){at("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const p=[];return function(P,B,Q,ie,Re){const Ze=P.getIterator(),bt=B.getIterator();let Ht=Gu(Ze),Ut=Gu(bt);for(;Ht||Ut;){let yn=!1,Qn=!1;if(Ht&&Ut){const fn=Q(Ht,Ut);fn<0?Qn=!0:fn>0&&(yn=!0)}else null!=Ht?Qn=!0:yn=!0;yn?(ie(Ut),Ut=Gu(bt)):Qn?(Re(Ht),Ht=Gu(Ze)):(Ht=Gu(Ze),Ut=Gu(bt))}}(u,c,ca,A=>{p.push(this.Sn(e,n,o,A))},A=>{p.push(this.bn(e,n,o,A))}),Te.waitFor(p)}gn(e){let n=1;return Fc(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,u,c)=>{c.done(),n=u.sequenceNumber+1}).next(()=>n)}createRange(e,n,o){o=o.sort((p,A)=>ca(p,A)).filter((p,A,P)=>!A||0!==ca(p,P[A-1]));const u=[];u.push(e);for(const p of o){const A=ca(p,e),P=ca(p,n);if(0===A)u[0]=e.Jt();else if(A>0&&P<0)u.push(p),u.push(p.Jt());else if(P>0)break}u.push(n);const c=[];for(let p=0;p<u.length;p+=2){if(this.Dn(u[p],u[p+1]))return[];c.push(IDBKeyRange.bound([u[p].indexId,this.uid,u[p].arrayValue,u[p].directionalValue,jh,[]],[u[p+1].indexId,this.uid,u[p+1].arrayValue,u[p+1].directionalValue,jh,[]]))}return c}Dn(e,n){return ca(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(Ep)}getMinOffset(e,n){return Te.mapArray(this.cn(n),o=>this.ln(e,o).next(u=>u||At())).next(Ep)}}function Om(i){return Zi(i,"collectionParents")}function kc(i){return Zi(i,"indexEntries")}function bd(i){return Zi(i,"indexConfiguration")}function Fc(i){return Zi(i,"indexState")}function Ep(i){qt(0!==i.length);let e=i[0].indexState.offset,n=e.largestBatchId;for(let o=1;o<i.length;o++){const u=i[o].indexState.offset;ze(u,e)<0&&(e=u),n<u.largestBatchId&&(n=u.largestBatchId)}return new Ue(e.readTime,e.documentKey,n)}const xm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ao{constructor(e,n,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=o}static withCacheSize(e){return new Ao(e,Ao.DEFAULT_COLLECTION_PERCENTILE,Ao.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function km(i,e,n){const o=i.store("mutations"),u=i.store("documentMutations"),c=[],p=IDBKeyRange.only(n.batchId);let A=0;const P=o.Y({range:p},(Q,ie,Re)=>(A++,Re.delete()));c.push(P.next(()=>{qt(1===A)}));const B=[];for(const Q of n.mutations){const ie=He(e,Q.key.path,n.batchId);c.push(u.delete(ie)),B.push(Q.key)}return Te.waitFor(c).next(()=>B)}function $h(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw At();e=i.noDocument}return JSON.stringify(e).length}Ao.DEFAULT_COLLECTION_PERCENTILE=10,Ao.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ao.DEFAULT=new Ao(41943040,Ao.DEFAULT_COLLECTION_PERCENTILE,Ao.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ao.DISABLED=new Ao(-1,0,0);class Zl{constructor(e,n,o,u){this.userId=e,this.serializer=n,this.indexManager=o,this.referenceDelegate=u,this.Cn={}}static lt(e,n,o,u){qt(""!==e.uid);const c=e.isAuthenticated()?e.uid:"";return new Zl(c,n,o,u)}checkEmpty(e){let n=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ea(e).Y({index:"userMutationsIndex",range:o},(u,c,p)=>{n=!1,p.done()}).next(()=>n)}addMutationBatch(e,n,o,u){const c=Ql(e),p=Ea(e);return p.add({}).next(A=>{qt("number"==typeof A);const P=new Xf(A,n,o,u),B=function(Ze,bt,Ht){const Ut=Ht.baseMutations.map(Qn=>rl(Ze.ct,Qn)),yn=Ht.mutations.map(Qn=>rl(Ze.ct,Qn));return{userId:bt,batchId:Ht.batchId,localWriteTimeMs:Ht.localWriteTime.toMillis(),baseMutations:Ut,mutations:yn}}(this.serializer,this.userId,P),Q=[];let ie=new oi((Re,Ze)=>bn(Re.canonicalString(),Ze.canonicalString()));for(const Re of u){const Ze=He(this.userId,Re.key.path,A);ie=ie.add(Re.key.path.popLast()),Q.push(p.put(B)),Q.push(c.put(Ze,We))}return ie.forEach(Re=>{Q.push(this.indexManager.addToCollectionParentIndex(e,Re))}),e.addOnCommittedListener(()=>{this.Cn[A]=P.keys()}),Te.waitFor(Q).next(()=>P)})}lookupMutationBatch(e,n){return Ea(e).get(n).next(o=>o?(qt(o.userId===this.userId),ru(this.serializer,o)):null)}vn(e,n){return this.Cn[n]?Te.resolve(this.Cn[n]):this.lookupMutationBatch(e,n).next(o=>{if(o){const u=o.keys();return this.Cn[n]=u,u}return null})}getNextMutationBatchAfterBatchId(e,n){const o=n+1,u=IDBKeyRange.lowerBound([this.userId,o]);let c=null;return Ea(e).Y({index:"userMutationsIndex",range:u},(p,A,P)=>{A.userId===this.userId&&(qt(A.batchId>=o),c=ru(this.serializer,A)),P.done()}).next(()=>c)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return Ea(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(u,c,p)=>{o=c.batchId,p.done()}).next(()=>o)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ea(e).W("userMutationsIndex",n).next(o=>o.map(u=>ru(this.serializer,u)))}getAllMutationBatchesAffectingDocumentKey(e,n){const o=ae(this.userId,n.path),u=IDBKeyRange.lowerBound(o),c=[];return Ql(e).Y({range:u},(p,A,P)=>{const[B,Q,ie]=p,Re=O(Q);if(B===this.userId&&n.path.isEqual(Re))return Ea(e).get(ie).next(Ze=>{if(!Ze)throw At();qt(Ze.userId===this.userId),c.push(ru(this.serializer,Ze))});P.done()}).next(()=>c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let o=new oi(bn);const u=[];return n.forEach(c=>{const p=ae(this.userId,c.path),A=IDBKeyRange.lowerBound(p),P=Ql(e).Y({range:A},(B,Q,ie)=>{const[Re,Ze,bt]=B,Ht=O(Ze);Re===this.userId&&c.path.isEqual(Ht)?o=o.add(bt):ie.done()});u.push(P)}),Te.waitFor(u).next(()=>this.Fn(e,o))}getAllMutationBatchesAffectingQuery(e,n){const o=n.path,u=o.length+1,c=ae(this.userId,o),p=IDBKeyRange.lowerBound(c);let A=new oi(bn);return Ql(e).Y({range:p},(P,B,Q)=>{const[ie,Re,Ze]=P,bt=O(Re);ie===this.userId&&o.isPrefixOf(bt)?bt.length===u&&(A=A.add(Ze)):Q.done()}).next(()=>this.Fn(e,A))}Fn(e,n){const o=[],u=[];return n.forEach(c=>{u.push(Ea(e).get(c).next(p=>{if(null===p)throw At();qt(p.userId===this.userId),o.push(ru(this.serializer,p))}))}),Te.waitFor(u).next(()=>o)}removeMutationBatch(e,n){return km(e.ae,this.userId,n).next(o=>(e.addOnCommittedListener(()=>{this.Mn(n.batchId)}),Te.forEach(o,u=>this.referenceDelegate.markPotentiallyOrphaned(e,u))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return Te.resolve();const o=IDBKeyRange.lowerBound([this.userId]),u=[];return Ql(e).Y({range:o},(c,p,A)=>{if(c[0]===this.userId){const P=O(c[1]);u.push(P)}else A.done()}).next(()=>{qt(0===u.length)})})}containsKey(e,n){return iu(e,this.userId,n)}xn(e){return Ip(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function iu(i,e,n){const o=ae(e,n.path),u=o[1],c=IDBKeyRange.lowerBound(o);let p=!1;return Ql(i).Y({range:c,J:!0},(A,P,B)=>{const[Q,ie,Re]=A;Q===e&&ie===u&&(p=!0),B.done()}).next(()=>p)}function Ea(i){return Zi(i,"mutations")}function Ql(i){return Zi(i,"documentMutations")}function Ip(i){return Zi(i,"mutationQueues")}class ll{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new ll(0)}static Ln(){return new ll(-1)}}class BE{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{const o=new ll(n.highestTargetId);return n.highestTargetId=o.next(),this.kn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>en.fromTimestamp(new Gt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,o){return this.Bn(e).next(u=>(u.highestListenSequenceNumber=n,o&&(u.lastRemoteSnapshotVersion=o.toTimestamp()),n>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=n),this.kn(e,u)))}addTargetData(e,n){return this.qn(e,n).next(()=>this.Bn(e).next(o=>(o.targetCount+=1,this.Qn(n,o),this.kn(e,o))))}updateTargetData(e,n){return this.qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Rd(e).delete(n.targetId)).next(()=>this.Bn(e)).next(o=>(qt(o.targetCount>0),o.targetCount-=1,this.kn(e,o)))}removeTargets(e,n,o){let u=0;const c=[];return Rd(e).Y((p,A)=>{const P=Oc(A);P.sequenceNumber<=n&&null===o.get(P.targetId)&&(u++,c.push(this.removeTargetData(e,P)))}).next(()=>Te.waitFor(c)).next(()=>u)}forEachTarget(e,n){return Rd(e).Y((o,u)=>{const c=Oc(u);n(c)})}Bn(e){return $y(e).get("targetGlobalKey").next(n=>(qt(null!==n),n))}kn(e,n){return $y(e).put("targetGlobalKey",n)}qn(e,n){return Rd(e).put(Lh(this.serializer,n))}Qn(e,n){let o=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,o=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,o=!0),o}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){const o=ua(n),u=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let c=null;return Rd(e).Y({range:u,index:"queryTargetsIndex"},(p,A,P)=>{const B=Oc(A);kl(n,B.target)&&(c=B,P.done())}).next(()=>c)}addMatchingKeys(e,n,o){const u=[],c=su(e);return n.forEach(p=>{const A=S(p.path);u.push(c.put({targetId:o,path:A})),u.push(this.referenceDelegate.addReference(e,o,p))}),Te.waitFor(u)}removeMatchingKeys(e,n,o){const u=su(e);return Te.forEach(n,c=>{const p=S(c.path);return Te.waitFor([u.delete([o,p]),this.referenceDelegate.removeReference(e,o,c)])})}removeMatchingKeysForTargetId(e,n){const o=su(e),u=IDBKeyRange.bound([n],[n+1],!1,!0);return o.delete(u)}getMatchingKeysForTargetId(e,n){const o=IDBKeyRange.bound([n],[n+1],!1,!0),u=su(e);let c=m();return u.Y({range:o,J:!0},(p,A,P)=>{const B=O(p[1]),Q=new Ft(B);c=c.add(Q)}).next(()=>c)}containsKey(e,n){const o=S(n.path),u=IDBKeyRange.bound([o],[gu(o)],!1,!0);let c=0;return su(e).Y({index:"documentTargetsIndex",J:!0,range:u},([p,A],P,B)=>{0!==p&&(c++,B.done())}).next(()=>c>0)}_t(e,n){return Rd(e).get(n).next(o=>o?Oc(o):null)}}function Rd(i){return Zi(i,"targets")}function $y(i){return Zi(i,"targetGlobal")}function su(i){return Zi(i,"targetDocuments")}function Hh([i,e],[n,o]){const u=bn(i,n);return 0===u?bn(e,o):u}class jE{constructor(e){this.Kn=e,this.buffer=new oi(Hh),this.$n=0}Un(){return++this.$n}Wn(e){const n=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(n);else{const o=this.buffer.last();Hh(n,o)<0&&(this.buffer=this.buffer.delete(o).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Hy{constructor(e,n,o){this.garbageCollector=e,this.asyncQueue=n,this.localStore=o,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){var n=this;at("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,d.Z)(function*(){n.Gn=null;try{yield n.localStore.collectGarbage(n.garbageCollector)}catch(o){fr(o)?at("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield ln(o)}yield n.zn(3e5)}))}}class Fm{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.Hn(e).next(o=>Math.floor(n/100*o))}nthSequenceNumber(e,n){if(0===n)return Te.resolve(Oi._e);const o=new jE(n);return this.jn.forEachTarget(e,u=>o.Wn(u.sequenceNumber)).next(()=>this.jn.Jn(e,u=>o.Wn(u))).next(()=>o.maxValue)}removeTargets(e,n,o){return this.jn.removeTargets(e,n,o)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(at("LruGarbageCollector","Garbage collection skipped; disabled"),Te.resolve(xm)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(at("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),xm):this.Yn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,n){let o,u,c,p,A,P,B;const Q=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(ie=>(ie>this.params.maximumSequenceNumbersToCollect?(at("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${ie}`),u=this.params.maximumSequenceNumbersToCollect):u=ie,p=Date.now(),this.nthSequenceNumber(e,u))).next(ie=>(o=ie,A=Date.now(),this.removeTargets(e,o,n))).next(ie=>(c=ie,P=Date.now(),this.removeOrphanedDocuments(e,o))).next(ie=>(B=Date.now(),br()<=Ee.in.DEBUG&&at("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${p-Q}ms\n\tDetermined least recently used ${u} in `+(A-p)+`ms\n\tRemoved ${c} targets in `+(P-A)+`ms\n\tRemoved ${ie} documents in `+(B-P)+`ms\nTotal Duration: ${B-Q}ms`),Te.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:c,documentsRemoved:ie})))}}class zy{constructor(e,n){this.db=e,this.garbageCollector=function Lm(i,e){return new Fm(i,e)}(this,n)}Hn(e){const n=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(o=>n.next(u=>o+u))}Zn(e){let n=0;return this.Jn(e,o=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Jn(e,n){return this.Xn(e,(o,u)=>n(u))}addReference(e,n,o){return zh(e,o)}removeReference(e,n,o){return zh(e,o)}removeTargets(e,n,o){return this.db.getTargetCache().removeTargets(e,n,o)}markPotentiallyOrphaned(e,n){return zh(e,n)}er(e,n){return function(u,c){let p=!1;return Ip(u).Z(A=>iu(u,A,c).next(P=>(P&&(p=!0),Te.resolve(!P)))).next(()=>p)}(e,n)}removeOrphanedDocuments(e,n){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[];let c=0;return this.Xn(e,(p,A)=>{if(A<=n){const P=this.er(e,p).next(B=>{if(!B)return c++,o.getEntry(e,p).next(()=>(o.removeEntry(p,en.min()),su(e).delete([0,S(p.path)])))});u.push(P)}}).next(()=>Te.waitFor(u)).next(()=>o.apply(e)).next(()=>c)}removeTarget(e,n){const o=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)}updateLimboDocument(e,n){return zh(e,n)}Xn(e,n){const o=su(e);let u,c=Oi._e;return o.Y({index:"documentTargetsIndex"},([p,A],{path:P,sequenceNumber:B})=>{0===p?(c!==Oi._e&&n(new Ft(O(u)),c),c=B,u=P):c=Oi._e}).next(()=>{c!==Oi._e&&n(new Ft(O(u)),c)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function zh(i,e){return su(i).put((u=i.currentSequenceNumber,{targetId:0,path:S(e.path),sequenceNumber:u}));var u}class Vm{constructor(){this.changes=new ya(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ai.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const o=this.changes.get(n);return void 0!==o?Te.resolve(o):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Um{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,o){return Yl(e).put(o)}removeEntry(e,n,o){return Yl(e).delete(function(c,p){const A=c.path.toArray();return[A.slice(0,A.length-2),A[A.length-2],sl(p),A[A.length-1]]}(n,o))}updateMetadata(e,n){return this.getMetadata(e).next(o=>(o.byteSize+=n,this.tr(e,o)))}getEntry(e,n){let o=ai.newInvalidDocument(n);return Yl(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Fa(n))},(u,c)=>{o=this.nr(n,c)}).next(()=>o)}rr(e,n){let o={size:0,document:ai.newInvalidDocument(n)};return Yl(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Fa(n))},(u,c)=>{o={document:this.nr(n,c),size:$h(c)}}).next(()=>o)}getEntries(e,n){let o=js();return this.ir(e,n,(u,c)=>{const p=this.nr(u,c);o=o.insert(u,p)}).next(()=>o)}sr(e,n){let o=js(),u=new pi(Ft.comparator);return this.ir(e,n,(c,p)=>{const A=this.nr(c,p);o=o.insert(c,A),u=u.insert(c,$h(p))}).next(()=>({documents:o,_r:u}))}ir(e,n,o){if(n.isEmpty())return Te.resolve();let u=new oi(jm);n.forEach(P=>u=u.add(P));const c=IDBKeyRange.bound(Fa(u.first()),Fa(u.last())),p=u.getIterator();let A=p.getNext();return Yl(e).Y({index:"documentKeyIndex",range:c},(P,B,Q)=>{const ie=Ft.fromSegments([...B.prefixPath,B.collectionGroup,B.documentId]);for(;A&&jm(A,ie)<0;)o(A,null),A=p.getNext();A&&A.isEqual(ie)&&(o(A,B),A=p.hasNext()?p.getNext():null),A?Q.U(Fa(A)):Q.done()}).next(()=>{for(;A;)o(A,null),A=p.hasNext()?p.getNext():null})}getDocumentsMatchingQuery(e,n,o,u,c){const p=n.path,A=[p.popLast().toArray(),p.lastSegment(),sl(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],P=[p.popLast().toArray(),p.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Yl(e).W(IDBKeyRange.bound(A,P,!0)).next(B=>{c?.incrementDocumentReadCount(B.length);let Q=js();for(const ie of B){const Re=this.nr(Ft.fromSegments(ie.prefixPath.concat(ie.collectionGroup,ie.documentId)),ie);Re.isFoundDocument()&&(xa(n,Re)||u.has(Re.key))&&(Q=Q.insert(Re.key,Re))}return Q})}getAllFromCollectionGroup(e,n,o,u){let c=js();const p=wp(n,o),A=wp(n,Ue.max());return Yl(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(p,A,!0)},(P,B,Q)=>{const ie=this.nr(Ft.fromSegments(B.prefixPath.concat(B.collectionGroup,B.documentId)),B);c=c.insert(ie.key,ie),c.size===u&&Q.done()}).next(()=>c)}newChangeBuffer(e){return new Bm(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return Gh(e).get("remoteDocumentGlobalKey").next(n=>(qt(!!n),n))}tr(e,n){return Gh(e).put("remoteDocumentGlobalKey",n)}nr(e,n){if(n){const o=function Am(i,e){let n;if(e.document)n=ym(i.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const o=Ft.fromSegments(e.noDocument.path),u=Au(e.noDocument.readTime);n=ai.newNoDocument(o,u),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return At();{const o=Ft.fromSegments(e.unknownDocument.path),u=Au(e.unknownDocument.version);n=ai.newUnknownDocument(o,u)}}return e.readTime&&n.setReadTime(function(u){const c=new Gt(u[0],u[1]);return en.fromTimestamp(c)}(e.readTime)),n}(this.serializer,n);if(!o.isNoDocument()||!o.version.isEqual(en.min()))return o}return ai.newInvalidDocument(e)}}function Pd(i){return new Um(i)}class Bm extends Vm{constructor(e,n){super(),this.ar=e,this.trackRemovals=n,this.ur=new ya(o=>o.toString(),(o,u)=>o.isEqual(u))}applyChanges(e){const n=[];let o=0,u=new oi((c,p)=>bn(c.canonicalString(),p.canonicalString()));return this.changes.forEach((c,p)=>{const A=this.ur.get(c);if(n.push(this.ar.removeEntry(e,c,A.readTime)),p.isValidDocument()){const P=Cd(this.ar.serializer,p);u=u.add(c.path.popLast());const B=$h(P);o+=B-A.size,n.push(this.ar.addEntry(e,c,P))}else if(o-=A.size,this.trackRemovals){const P=Cd(this.ar.serializer,p.convertToNoDocument(en.min()));n.push(this.ar.addEntry(e,c,P))}}),u.forEach(c=>{n.push(this.ar.indexManager.addToCollectionParentIndex(e,c))}),n.push(this.ar.updateMetadata(e,o)),Te.waitFor(n)}getFromCache(e,n){return this.ar.rr(e,n).next(o=>(this.ur.set(n,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(e,n){return this.ar.sr(e,n).next(({documents:o,_r:u})=>(u.forEach((c,p)=>{this.ur.set(c,{size:p,readTime:o.get(c).readTime})}),o))}}function Gh(i){return Zi(i,"remoteDocumentGlobal")}function Yl(i){return Zi(i,"remoteDocumentsV14")}function Fa(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function wp(i,e){const n=e.documentKey.path.toArray();return[i,sl(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function jm(i,e){const n=i.path.toArray(),o=e.path.toArray();let u=0;for(let c=0;c<n.length-2&&c<o.length-2;++c)if(u=bn(n[c],o[c]),u)return u;return u=bn(n.length,o.length),u||(u=bn(n[n.length-2],o[o.length-2]),u||bn(n[n.length-1],o[o.length-1]))}class Tp{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class Dp{constructor(e,n,o,u){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=o,this.indexManager=u}getDocument(e,n){let o=null;return this.documentOverlayCache.getOverlay(e,n).next(u=>(o=u,this.remoteDocumentCache.getEntry(e,n))).next(u=>(null!==o&&bc(o.mutation,u,fo.empty(),Gt.now()),u))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(o=>this.getLocalViewOfDocuments(e,o,m()).next(()=>o))}getLocalViewOfDocuments(e,n,o=m()){const u=go();return this.populateOverlays(e,u,n).next(()=>this.computeViews(e,n,u,o).next(c=>{let p=Vl();return c.forEach((A,P)=>{p=p.insert(A,P.overlayedDocument)}),p}))}getOverlayedDocuments(e,n){const o=go();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,m()))}populateOverlays(e,n,o){const u=[];return o.forEach(c=>{n.has(c)||u.push(c)}),this.documentOverlayCache.getOverlays(e,u).next(c=>{c.forEach((p,A)=>{n.set(p,A)})})}computeViews(e,n,o,u){let c=js();const p=Bl(),A=Bl();return n.forEach((P,B)=>{const Q=o.get(B.key);u.has(B.key)&&(void 0===Q||Q.mutation instanceof tu)?c=c.insert(B.key,B):void 0!==Q?(p.set(B.key,Q.mutation.getFieldMask()),bc(Q.mutation,B,Q.mutation.getFieldMask(),Gt.now())):p.set(B.key,fo.empty())}),this.recalculateAndSaveOverlays(e,c).next(P=>(P.forEach((B,Q)=>p.set(B,Q)),n.forEach((B,Q)=>{var ie;return A.set(B,new Tp(Q,null!==(ie=p.get(B))&&void 0!==ie?ie:null))}),A))}recalculateAndSaveOverlays(e,n){const o=Bl();let u=new pi((p,A)=>p-A),c=m();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(p=>{for(const A of p)A.keys().forEach(P=>{const B=n.get(P);if(null===B)return;let Q=o.get(P)||fo.empty();Q=A.applyToLocalView(B,Q),o.set(P,Q);const ie=(u.get(A.batchId)||m()).add(P);u=u.insert(A.batchId,ie)})}).next(()=>{const p=[],A=u.getReverseIterator();for(;A.hasNext();){const P=A.getNext(),B=P.key,Q=P.value,ie=Ul();Q.forEach(Re=>{if(!c.has(Re)){const Ze=Hl(n.get(Re),o.get(Re));null!==Ze&&ie.set(Re,Ze),c=c.add(Re)}}),p.push(this.documentOverlayCache.saveOverlays(e,B,ie))}return Te.waitFor(p)}).next(()=>o)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(o=>this.recalculateAndSaveOverlays(e,o))}getDocumentsMatchingQuery(e,n,o,u){return Ft.isDocumentKey((p=n).path)&&null===p.collectionGroup&&0===p.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):fd(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,o,u):this.getDocumentsMatchingCollectionQuery(e,n,o,u);var p}getNextDocuments(e,n,o,u){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,o,u).next(c=>{const p=u-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,o.largestBatchId,u-c.size):Te.resolve(go());let A=-1,P=c;return p.next(B=>Te.forEach(B,(Q,ie)=>(A<ie.largestBatchId&&(A=ie.largestBatchId),c.get(Q)?Te.resolve():this.remoteDocumentCache.getEntry(e,Q).next(Re=>{P=P.insert(Q,Re)}))).next(()=>this.populateOverlays(e,B,c)).next(()=>this.computeViews(e,P,B,m())).next(Q=>({batchId:A,changes:yd(Q)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ft(n)).next(o=>{let u=Vl();return o.isFoundDocument()&&(u=u.insert(o.key,o)),u})}getDocumentsMatchingCollectionGroupQuery(e,n,o,u){const c=n.collectionGroup;let p=Vl();return this.indexManager.getCollectionParents(e,c).next(A=>Te.forEach(A,P=>{const B=(ie=n,Re=P.child(c),new la(Re,null,ie.explicitOrderBy.slice(),ie.filters.slice(),ie.limit,ie.limitType,ie.startAt,ie.endAt));var ie,Re;return this.getDocumentsMatchingCollectionQuery(e,B,o,u).next(Q=>{Q.forEach((ie,Re)=>{p=p.insert(ie,Re)})})}).next(()=>p))}getDocumentsMatchingCollectionQuery(e,n,o,u){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,o.largestBatchId).next(p=>(c=p,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,o,c,u))).next(p=>{c.forEach((P,B)=>{const Q=B.getKey();null===p.get(Q)&&(p=p.insert(Q,ai.newInvalidDocument(Q)))});let A=Vl();return p.forEach((P,B)=>{const Q=c.get(P);void 0!==Q&&bc(Q.mutation,B,fo.empty(),Gt.now()),xa(n,B)&&(A=A.insert(P,B))}),A})}}class Gy{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return Te.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,{id:(u=n).id,version:u.version,createTime:ds(u.createTime)}),Te.resolve();var u}getNamedQuery(e,n){return Te.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,{name:(u=n).name,query:Wl(u.bundledQuery),readTime:ds(u.readTime)}),Te.resolve();var u}}class Wy{constructor(){this.overlays=new pi(Ft.comparator),this.hr=new Map}getOverlay(e,n){return Te.resolve(this.overlays.get(n))}getOverlays(e,n){const o=go();return Te.forEach(n,u=>this.getOverlay(e,u).next(c=>{null!==c&&o.set(u,c)})).next(()=>o)}saveOverlays(e,n,o){return o.forEach((u,c)=>{this.ht(e,n,c)}),Te.resolve()}removeOverlaysForBatchId(e,n,o){const u=this.hr.get(o);return void 0!==u&&(u.forEach(c=>this.overlays=this.overlays.remove(c)),this.hr.delete(o)),Te.resolve()}getOverlaysForCollection(e,n,o){const u=go(),c=n.length+1,p=new Ft(n.child("")),A=this.overlays.getIteratorFrom(p);for(;A.hasNext();){const P=A.getNext().value,B=P.getKey();if(!n.isPrefixOf(B.path))break;B.path.length===c&&P.largestBatchId>o&&u.set(P.getKey(),P)}return Te.resolve(u)}getOverlaysForCollectionGroup(e,n,o,u){let c=new pi((B,Q)=>B-Q);const p=this.overlays.getIterator();for(;p.hasNext();){const B=p.getNext().value;if(B.getKey().getCollectionGroup()===n&&B.largestBatchId>o){let Q=c.get(B.largestBatchId);null===Q&&(Q=go(),c=c.insert(B.largestBatchId,Q)),Q.set(B.getKey(),B)}}const A=go(),P=c.getIterator();for(;P.hasNext()&&(P.getNext().value.forEach((B,Q)=>A.set(B,Q)),!(A.size()>=u)););return Te.resolve(A)}ht(e,n,o){const u=this.overlays.get(o.key);if(null!==u){const p=this.hr.get(u.largestBatchId).delete(o.key);this.hr.set(u.largestBatchId,p)}this.overlays=this.overlays.insert(o.key,new Ph(n,o));let c=this.hr.get(n);void 0===c&&(c=m(),this.hr.set(n,c)),this.hr.set(n,c.add(o.key))}}class Cp{constructor(){this.Pr=new oi(Ys.Ir),this.Tr=new oi(Ys.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const o=new Ys(e,n);this.Pr=this.Pr.add(o),this.Tr=this.Tr.add(o)}dr(e,n){e.forEach(o=>this.addReference(o,n))}removeReference(e,n){this.Ar(new Ys(e,n))}Rr(e,n){e.forEach(o=>this.removeReference(o,n))}Vr(e){const n=new Ft(new ir([])),o=new Ys(n,e),u=new Ys(n,e+1),c=[];return this.Tr.forEachInRange([o,u],p=>{this.Ar(p),c.push(p.key)}),c}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new Ft(new ir([])),o=new Ys(n,e),u=new Ys(n,e+1);let c=m();return this.Tr.forEachInRange([o,u],p=>{c=c.add(p.key)}),c}containsKey(e){const n=new Ys(e,0),o=this.Pr.firstAfterOrEqual(n);return null!==o&&e.isEqual(o.key)}}class Ys{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return Ft.comparator(e.key,n.key)||bn(e.pr,n.pr)}static Er(e,n){return bn(e.pr,n.pr)||Ft.comparator(e.key,n.key)}}class $m{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new oi(Ys.Ir)}checkEmpty(e){return Te.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,o,u){const c=this.yr;this.yr++;const p=new Xf(c,n,o,u);this.mutationQueue.push(p);for(const A of u)this.wr=this.wr.add(new Ys(A.key,c)),this.indexManager.addToCollectionParentIndex(e,A.key.path.popLast());return Te.resolve(p)}lookupMutationBatch(e,n){return Te.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const u=this.br(n+1),c=u<0?0:u;return Te.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return Te.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return Te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const o=new Ys(n,0),u=new Ys(n,Number.POSITIVE_INFINITY),c=[];return this.wr.forEachInRange([o,u],p=>{const A=this.Sr(p.pr);c.push(A)}),Te.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let o=new oi(bn);return n.forEach(u=>{const c=new Ys(u,0),p=new Ys(u,Number.POSITIVE_INFINITY);this.wr.forEachInRange([c,p],A=>{o=o.add(A.pr)})}),Te.resolve(this.Dr(o))}getAllMutationBatchesAffectingQuery(e,n){const o=n.path,u=o.length+1;let c=o;Ft.isDocumentKey(c)||(c=c.child(""));const p=new Ys(new Ft(c),0);let A=new oi(bn);return this.wr.forEachWhile(P=>{const B=P.key.path;return!!o.isPrefixOf(B)&&(B.length===u&&(A=A.add(P.pr)),!0)},p),Te.resolve(this.Dr(A))}Dr(e){const n=[];return e.forEach(o=>{const u=this.Sr(o);null!==u&&n.push(u)}),n}removeMutationBatch(e,n){qt(0===this.Cr(n.batchId,"removed")),this.mutationQueue.shift();let o=this.wr;return Te.forEach(n.mutations,u=>{const c=new Ys(u.key,n.batchId);return o=o.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)}).next(()=>{this.wr=o})}Mn(e){}containsKey(e,n){const o=new Ys(n,0),u=this.wr.firstAfterOrEqual(o);return Te.resolve(n.isEqual(u&&u.key))}performConsistencyCheck(e){return Te.resolve()}Cr(e,n){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class $E{constructor(e){this.vr=e,this.docs=new pi(Ft.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const o=n.key,u=this.docs.get(o),c=u?u.size:0,p=this.vr(n);return this.docs=this.docs.insert(o,{document:n.mutableCopy(),size:p}),this.size+=p-c,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const o=this.docs.get(n);return Te.resolve(o?o.document.mutableCopy():ai.newInvalidDocument(n))}getEntries(e,n){let o=js();return n.forEach(u=>{const c=this.docs.get(u);o=o.insert(u,c?c.document.mutableCopy():ai.newInvalidDocument(u))}),Te.resolve(o)}getDocumentsMatchingQuery(e,n,o,u){let c=js();const p=n.path,A=new Ft(p.child("")),P=this.docs.getIteratorFrom(A);for(;P.hasNext();){const{key:B,value:{document:Q}}=P.getNext();if(!p.isPrefixOf(B.path))break;B.path.length>p.length+1||ze(ye(Q),o)<=0||(u.has(Q.key)||xa(n,Q))&&(c=c.insert(Q.key,Q.mutableCopy()))}return Te.resolve(c)}getAllFromCollectionGroup(e,n,o,u){At()}Fr(e,n){return Te.forEach(this.docs,o=>n(o))}newChangeBuffer(e){return new HE(this)}getSize(e){return Te.resolve(this.size)}}class HE extends Vm{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((o,u)=>{u.isValidDocument()?n.push(this.ar.addEntry(e,u)):this.ar.removeEntry(o)}),Te.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}class Md{constructor(e){this.persistence=e,this.Mr=new ya(n=>ua(n),kl),this.lastRemoteSnapshotVersion=en.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Cp,this.targetCount=0,this.Lr=ll.Nn()}forEachTarget(e,n){return this.Mr.forEach((o,u)=>n(u)),Te.resolve()}getLastRemoteSnapshotVersion(e){return Te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Te.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),Te.resolve(this.highestTargetId)}setTargetsMetadata(e,n,o){return o&&(this.lastRemoteSnapshotVersion=o),n>this.Or&&(this.Or=n),Te.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Lr=new ll(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,Te.resolve()}updateTargetData(e,n){return this.qn(n),Te.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,Te.resolve()}removeTargets(e,n,o){let u=0;const c=[];return this.Mr.forEach((p,A)=>{A.sequenceNumber<=n&&null===o.get(A.targetId)&&(this.Mr.delete(p),c.push(this.removeMatchingKeysForTargetId(e,A.targetId)),u++)}),Te.waitFor(c).next(()=>u)}getTargetCount(e){return Te.resolve(this.targetCount)}getTargetData(e,n){const o=this.Mr.get(n)||null;return Te.resolve(o)}addMatchingKeys(e,n,o){return this.Nr.dr(n,o),Te.resolve()}removeMatchingKeys(e,n,o){this.Nr.Rr(n,o);const u=this.persistence.referenceDelegate,c=[];return u&&n.forEach(p=>{c.push(u.markPotentiallyOrphaned(e,p))}),Te.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),Te.resolve()}getMatchingKeysForTargetId(e,n){const o=this.Nr.gr(n);return Te.resolve(o)}containsKey(e,n){return Te.resolve(this.Nr.containsKey(n))}}class Jl{constructor(e,n){this.Br={},this.overlays={},this.kr=new Oi(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Md(this),this.indexManager=new Ru,this.remoteDocumentCache=new $E(o=>this.referenceDelegate.Kr(o)),this.serializer=new Fh(n),this.$r=new Gy(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Wy,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let o=this.Br[e.toKey()];return o||(o=new $m(n,this.referenceDelegate),this.Br[e.toKey()]=o),o}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,o){at("MemoryPersistence","Starting transaction:",e);const u=new Hm(this.kr.next());return this.referenceDelegate.Ur(),o(u).next(c=>this.referenceDelegate.Wr(u).next(()=>c)).toPromise().then(c=>(u.raiseOnCommittedEvent(),c))}Gr(e,n){return Te.or(Object.values(this.Br).map(o=>()=>o.containsKey(e,n)))}}class Hm extends kt{constructor(e){super(),this.currentSequenceNumber=e}}class Nd{constructor(e){this.persistence=e,this.zr=new Cp,this.jr=null}static Hr(e){return new Nd(e)}get Jr(){if(this.jr)return this.jr;throw At()}addReference(e,n,o){return this.zr.addReference(o,n),this.Jr.delete(o.toString()),Te.resolve()}removeReference(e,n,o){return this.zr.removeReference(o,n),this.Jr.add(o.toString()),Te.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),Te.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(u=>this.Jr.add(u.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,n.targetId).next(u=>{u.forEach(c=>this.Jr.add(c.toString()))}).next(()=>o.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Te.forEach(this.Jr,o=>{const u=Ft.fromPath(o);return this.Yr(e,u).next(c=>{c||n.removeEntry(u,en.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(o=>{o?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return Te.or([()=>Te.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}class Ap{constructor(e){this.serializer=e}N(e,n,o,u){const c=new Cn("createOrUpgrade",n);var P;o<1&&u>=1&&(e.createObjectStore("owner"),(P=e).createObjectStore("mutationQueues",{keyPath:"userId"}),P.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",q,{unique:!0}),P.createObjectStore("documentMutations"),zm(e),function(P){P.createObjectStore("remoteDocuments")}(e));let p=Te.resolve();return o<3&&u>=3&&(0!==o&&(function(P){P.deleteObjectStore("targetDocuments"),P.deleteObjectStore("targets"),P.deleteObjectStore("targetGlobal")}(e),zm(e)),p=p.next(()=>function(P){const B=P.store("targetGlobal"),Q={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:en.min().toTimestamp(),targetCount:0};return B.put("targetGlobalKey",Q)}(c))),o<4&&u>=4&&(0!==o&&(p=p.next(()=>function(P,B){return B.store("mutations").W().next(Q=>{P.deleteObjectStore("mutations"),P.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",q,{unique:!0});const ie=B.store("mutations"),Re=Q.map(Ze=>ie.put(Ze));return Te.waitFor(Re)})}(e,c))),p=p.next(()=>{!function(P){P.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),o<5&&u>=5&&(p=p.next(()=>this.Xr(c))),o<6&&u>=6&&(p=p.next(()=>(function(P){P.createObjectStore("remoteDocumentGlobal")}(e),this.ei(c)))),o<7&&u>=7&&(p=p.next(()=>this.ti(c))),o<8&&u>=8&&(p=p.next(()=>this.ni(e,c))),o<9&&u>=9&&(p=p.next(()=>{!function(P){P.objectStoreNames.contains("remoteDocumentChanges")&&P.deleteObjectStore("remoteDocumentChanges")}(e)})),o<10&&u>=10&&(p=p.next(()=>this.ri(c))),o<11&&u>=11&&(p=p.next(()=>{(function(P){P.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(P){P.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),o<12&&u>=12&&(p=p.next(()=>{!function(P){const B=P.createObjectStore("documentOverlays",{keyPath:fh});B.createIndex("collectionPathOverlayIndex",_c,{unique:!1}),B.createIndex("collectionGroupOverlayIndex",ga,{unique:!1})}(e)})),o<13&&u>=13&&(p=p.next(()=>function(P){const B=P.createObjectStore("remoteDocumentsV14",{keyPath:Tt});B.createIndex("documentKeyIndex",An),B.createIndex("collectionGroupIndex",Rn)}(e)).next(()=>this.ii(e,c)).next(()=>e.deleteObjectStore("remoteDocuments"))),o<14&&u>=14&&(p=p.next(()=>this.si(e,c))),o<15&&u>=15&&(p=p.next(()=>function(P){P.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),P.createObjectStore("indexState",{keyPath:As}).createIndex("sequenceNumberIndex",To,{unique:!1}),P.createObjectStore("indexEntries",{keyPath:Ha}).createIndex("documentKeyIndex",hh,{unique:!1})}(e))),p}ei(e){let n=0;return e.store("remoteDocuments").Y((o,u)=>{n+=$h(u)}).next(()=>{const o={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}Xr(e){const n=e.store("mutationQueues"),o=e.store("mutations");return n.W().next(u=>Te.forEach(u,c=>{const p=IDBKeyRange.bound([c.userId,-1],[c.userId,c.lastAcknowledgedBatchId]);return o.W("userMutationsIndex",p).next(A=>Te.forEach(A,P=>{qt(P.userId===c.userId);const B=ru(this.serializer,P);return km(e,c.userId,B).next(()=>{})}))}))}ti(e){const n=e.store("targetDocuments"),o=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(u=>{const c=[];return o.Y((p,A)=>{const P=new ir(p),B=[0,S(P)];c.push(n.get(B).next(Q=>Q?Te.resolve():n.put({targetId:0,path:S(P),sequenceNumber:u.highestListenSequenceNumber})))}).next(()=>Te.waitFor(c))})}ni(e,n){e.createObjectStore("collectionParents",{keyPath:Zs});const o=n.store("collectionParents"),u=new ul,c=p=>{if(u.add(p)){const A=p.lastSegment(),P=p.popLast();return o.put({collectionId:A,parent:S(P)})}};return n.store("remoteDocuments").Y({J:!0},(p,A)=>{const P=new ir(p);return c(P.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([p,A,P],B)=>{const Q=O(A);return c(Q.popLast())}))}ri(e){const n=e.store("targets");return n.Y((o,u)=>{const c=Oc(u),p=Lh(this.serializer,c);return n.put(p)})}ii(e,n){const o=n.store("remoteDocuments"),u=[];return o.Y((c,p)=>{const A=n.store("remoteDocumentsV14"),P=(ie=p,ie.document?new Ft(ir.fromString(ie.document.name).popFirst(5)):ie.noDocument?Ft.fromSegments(ie.noDocument.path):ie.unknownDocument?Ft.fromSegments(ie.unknownDocument.path):At()).path.toArray(),B={prefixPath:P.slice(0,P.length-2),collectionGroup:P[P.length-2],documentId:P[P.length-1],readTime:p.readTime||[0,0],unknownDocument:p.unknownDocument,noDocument:p.noDocument,document:p.document,hasCommittedMutations:!!p.hasCommittedMutations};var ie;u.push(A.put(B))}).next(()=>Te.waitFor(u))}si(e,n){const o=n.store("mutations"),u=Pd(this.serializer),c=new Jl(Nd.Hr,this.serializer.ct);return o.W().next(p=>{const A=new Map;return p.forEach(P=>{var B;let Q=null!==(B=A.get(P.userId))&&void 0!==B?B:m();ru(this.serializer,P).keys().forEach(ie=>Q=Q.add(ie)),A.set(P.userId,Q)}),Te.forEach(A,(P,B)=>{const Q=new Yt(B),ie=Ad.lt(this.serializer,Q),Re=c.getIndexManager(Q),Ze=Zl.lt(Q,this.serializer,Re,c.referenceDelegate);return new Dp(u,Ze,ie,Re).recalculateAndSaveOverlaysForDocumentKeys(new zu(n,Oi._e),P).next()})})}}function zm(i){i.createObjectStore("targetDocuments",{keyPath:ts}).createIndex("documentTargetsIndex",zn,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Pn,{unique:!0}),i.createObjectStore("targetGlobal")}const Wh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class qh{constructor(e,n,o,u,c,p,A,P,B,Q,ie=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=o,this.oi=c,this.window=p,this.document=A,this._i=B,this.ai=Q,this.ui=ie,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=Re=>Promise.resolve(),!qh.D())throw new ft(Qe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new zy(this,u),this.Ti=n+"main",this.serializer=new Fh(P),this.Ei=new sr(this.Ti,this.ui,new Ap(this.serializer)),this.Qr=new BE(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Pd(this.serializer),this.$r=new Vy,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===Q&&yr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ft(Qe.FAILED_PRECONDITION,Wh);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new Oi(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){var n=this;return this.Ii=function(){var o=(0,d.Z)(function*(u){if(n.started)return e(u)});return function(u){return o.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.B(function(){var n=(0,d.Z)(function*(o){null===o.newVersion&&(yield e())});return function(o){return n.apply(this,arguments)}}())}setNetworkEnabled(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((0,d.Z)(function*(){n.started&&(yield n.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Sp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(n=>{n||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(n=>this.isPrimary&&!n?this.yi(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(fr(e))return at("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return at("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return cl(e).get("owner").next(n=>Te.resolve(this.Si(n)))}bi(e){return Sp(e).delete(this.clientId)}Di(){var e=this;return(0,d.Z)(function*(){if(e.isPrimary&&!e.Ci(e.Pi,18e5)){e.Pi=Date.now();const n=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const u=Zi(o,"clientMetadata");return u.W().next(c=>{const p=e.vi(c,18e5),A=c.filter(P=>-1===p.indexOf(P));return Te.forEach(A,P=>u.delete(P.clientId)).next(()=>A)})}).catch(()=>[]);if(e.di)for(const o of n)e.di.removeItem(e.Fi(o.clientId))}})()}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?Te.resolve(!0):cl(e).get("owner").next(n=>{if(null!==n&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)){if(this.Si(n)&&this.networkEnabled)return!0;if(!this.Si(n)){if(!n.allowTabSynchronization)throw new ft(Qe.FAILED_PRECONDITION,Wh);return!1}}return!(!this.networkEnabled||!this.inForeground)||Sp(e).W().next(o=>void 0===this.vi(o,5e3).find(u=>!(this.clientId===u.clientId||!(!this.networkEnabled&&u.networkEnabled||!this.inForeground&&u.inForeground&&this.networkEnabled===u.networkEnabled))))}).next(n=>(this.isPrimary!==n&&at("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){var e=this;return(0,d.Z)(function*(){e.qr=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Oi(),e.Ni(),yield e.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],n=>{const o=new zu(n,Oi._e);return e.yi(o).next(()=>e.bi(o))}),e.Ei.close(),e.Li()})()}vi(e,n){return e.filter(o=>this.Ci(o.updateTimeMs,n)&&!this.Mi(o.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>Sp(e).W().next(n=>this.vi(n,18e5).map(o=>o.clientId)))}get started(){return this.qr}getMutationQueue(e,n){return Zl.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new jy(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Ad.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,n,o){at("IndexedDbPersistence","Starting transaction:",e);const u="readonly"===n?"readonly":"readwrite",c=15===(P=this.ui)?ad:14===P?mu:13===P?Rl:12===P?Hu:11===P?ph:void At();var P;let p;return this.Ei.runTransaction(e,u,c,A=>(p=new zu(A,this.kr?this.kr.next():Oi._e),"readwrite-primary"===n?this.gi(p).next(P=>!!P||this.pi(p)).next(P=>{if(!P)throw yr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new ft(Qe.FAILED_PRECONDITION,xt);return o(p)}).next(P=>this.wi(p).next(()=>P)):this.ki(p).next(()=>o(p)))).then(A=>(p.raiseOnCommittedEvent(),A))}ki(e){return cl(e).get("owner").next(n=>{if(null!==n&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)&&!this.Si(n)&&!(this.ai||this.allowTabSynchronization&&n.allowTabSynchronization))throw new ft(Qe.FAILED_PRECONDITION,Wh)})}wi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return cl(e).put("owner",n)}static D(){return sr.D()}yi(e){const n=cl(e);return n.get("owner").next(o=>this.Si(o)?(at("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Te.resolve())}Ci(e,n){const o=Date.now();return!(e<o-n||e>o&&(yr(`Detected an update time that is in the future: ${e} > ${o}`),1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const n=/(?:Version|Mobile)\/1[456]/;(0,ge.G6)()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var n;try{const o=null!==(null===(n=this.di)||void 0===n?void 0:n.getItem(this.Fi(e)));return at("IndexedDbPersistence",`Client '${e}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return yr("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){yr("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function cl(i){return Zi(i,"owner")}function Sp(i){return Zi(i,"clientMetadata")}function Od(i,e){let n=i.projectId;return i.isDefaultDatabase||(n+="."+i.database),"firestore/"+e+"/"+n+"/"}class bp{constructor(e,n,o,u){this.targetId=e,this.fromCache=n,this.qi=o,this.Qi=u}static Ki(e,n){let o=m(),u=m();for(const c of n.docChanges)switch(c.type){case 0:o=o.add(c.doc.key);break;case 1:u=u.add(c.doc.key)}return new bp(e,n.fromCache,o,u)}}class Rp{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Pp{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=(0,ge.G6)()?8:sr.v((0,ge.z$)())>0?6:4}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,o,u){const c={result:null};return this.ji(e,n).next(p=>{c.result=p}).next(()=>{if(!c.result)return this.Hi(e,n,u,o).next(p=>{c.result=p})}).next(()=>{if(c.result)return;const p=new Rp;return this.Ji(e,n,p).next(A=>{if(c.result=A,this.Ui)return this.Yi(e,n,p,A.size)})}).next(()=>c.result)}Yi(e,n,o,u){return o.documentReadCount<this.Wi?(br()<=Ee.in.DEBUG&&at("QueryEngine","SDK will not create cache indexes for query:",Xa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Te.resolve()):(br()<=Ee.in.DEBUG&&at("QueryEngine","Query:",Xa(n),"scans",o.documentReadCount,"local documents and returns",u,"documents as results."),o.documentReadCount>this.Gi*u?(br()<=Ee.in.DEBUG&&at("QueryEngine","The SDK decides to create cache indexes for query:",Xa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,po(n))):Te.resolve())}ji(e,n){if(Fl(n))return Te.resolve(null);let o=po(n);return this.indexManager.getIndexType(e,o).next(u=>0===u?null:(null!==n.limit&&1===u&&(n=Qu(n,null,"F"),o=po(n)),this.indexManager.getDocumentsMatchingTarget(e,o).next(c=>{const p=m(...c);return this.zi.getDocuments(e,p).next(A=>this.indexManager.getMinOffset(e,o).next(P=>{const B=this.Zi(n,A);return this.Xi(n,B,p,P.readTime)?this.ji(e,Qu(n,null,"F")):this.es(e,B,n,P)}))})))}Hi(e,n,o,u){return Fl(n)||u.isEqual(en.min())?Te.resolve(null):this.zi.getDocuments(e,o).next(c=>{const p=this.Zi(n,c);return this.Xi(n,p,o,u)?Te.resolve(null):(br()<=Ee.in.DEBUG&&at("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),Xa(n)),this.es(e,p,n,he(u,-1)).next(A=>A))})}Zi(e,n){let o=new oi(Yu(e));return n.forEach((u,c)=>{xa(e,c)&&(o=o.add(c))}),o}Xi(e,n,o,u){if(null===e.limit)return!1;if(o.size!==n.size)return!0;const c="F"===e.limitType?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(u)>0)}Ji(e,n,o){return br()<=Ee.in.DEBUG&&at("QueryEngine","Using full collection scan to execute query:",Xa(n)),this.zi.getDocumentsMatchingQuery(e,n,Ue.min(),o)}es(e,n,o,u){return this.zi.getDocumentsMatchingQuery(e,o,u).next(c=>(n.forEach(p=>{c=c.insert(p.key,p)}),c))}}class Gm{constructor(e,n,o,u){this.persistence=e,this.ts=n,this.serializer=u,this.ns=new pi(bn),this.rs=new ya(c=>ua(c),kl),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(o)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Dp(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function dl(i,e,n,o){return new Gm(i,e,n,o)}function Wm(i,e){return xd.apply(this,arguments)}function xd(){return xd=(0,d.Z)(function*(i,e){const n=pt(i);return yield n.persistence.runTransaction("Handle user change","readonly",o=>{let u;return n.mutationQueue.getAllMutationBatches(o).next(c=>(u=c,n._s(e),n.mutationQueue.getAllMutationBatches(o))).next(c=>{const p=[],A=[];let P=m();for(const B of u){p.push(B.batchId);for(const Q of B.mutations)P=P.add(Q.key)}for(const B of c){A.push(B.batchId);for(const Q of B.mutations)P=P.add(Q.key)}return n.localDocuments.getDocuments(o,P).next(B=>({us:B,removedBatchIds:p,addedBatchIds:A}))})})}),xd.apply(this,arguments)}function qm(i){const e=pt(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function kd(i,e,n){let o=m(),u=m();return n.forEach(c=>o=o.add(c)),e.getEntries(i,o).next(c=>{let p=js();return n.forEach((A,P)=>{const B=c.get(A);P.isFoundDocument()!==B.isFoundDocument()&&(u=u.add(A)),P.isNoDocument()&&P.version.isEqual(en.min())?(e.removeEntry(A,P.readTime),p=p.insert(A,P)):!B.isValidDocument()||P.version.compareTo(B.version)>0||0===P.version.compareTo(B.version)&&B.hasPendingWrites?(e.addEntry(P),p=p.insert(A,P)):at("LocalStore","Ignoring outdated watch update for ",A,". Current version:",B.version," Watch version:",P.version)}),{cs:p,ls:u}})}function ou(i,e){const n=pt(i);return n.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(o,e)))}function La(i,e){const n=pt(i);return n.persistence.runTransaction("Allocate target","readwrite",o=>{let u;return n.Qr.getTargetData(o,e).next(c=>c?(u=c,Te.resolve(u)):n.Qr.allocateTargetId(o).next(p=>(u=new nu(e,p,"TargetPurposeListen",o.currentSequenceNumber),n.Qr.addTargetData(o,u).next(()=>u))))}).then(o=>{const u=n.ns.get(o.targetId);return(null===u||o.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(n.ns=n.ns.insert(o.targetId,o),n.rs.set(e,o.targetId)),o})}function hl(i,e,n){return Np.apply(this,arguments)}function Np(){return Np=(0,d.Z)(function*(i,e,n){const o=pt(i),u=o.ns.get(e),c=n?"readwrite":"readwrite-primary";try{n||(yield o.persistence.runTransaction("Release target",c,p=>o.persistence.referenceDelegate.removeTarget(p,u)))}catch(p){if(!fr(p))throw p;at("LocalStore",`Failed to update sequence numbers for target ${e}: ${p}`)}o.ns=o.ns.remove(e),o.rs.delete(u.target)}),Np.apply(this,arguments)}function Zh(i,e,n){const o=pt(i);let u=en.min(),c=m();return o.persistence.runTransaction("Execute query","readwrite",p=>function(P,B,Q){const ie=pt(P),Re=ie.rs.get(Q);return void 0!==Re?Te.resolve(ie.ns.get(Re)):ie.Qr.getTargetData(B,Q)}(o,p,po(e)).next(A=>{if(A)return u=A.lastLimboFreeSnapshotVersion,o.Qr.getMatchingKeysForTargetId(p,A.targetId).next(P=>{c=P})}).next(()=>o.ts.getDocumentsMatchingQuery(p,e,n?u:en.min(),n?c:m())).next(A=>(Km(o,Ll(e),A),{documents:A,hs:c})))}function Op(i,e){const n=pt(i),o=pt(n.Qr),u=n.ns.get(e);return u?Promise.resolve(u.target):n.persistence.runTransaction("Get target data","readonly",c=>o._t(c,e).next(p=>p?p.target:null))}function Xl(i,e){const n=pt(i),o=n.ss.get(e)||en.min();return n.persistence.runTransaction("Get new document changes","readonly",u=>n.os.getAllFromCollectionGroup(u,e,he(o,-1),Number.MAX_SAFE_INTEGER)).then(u=>(Km(n,e,u),u))}function Km(i,e,n){let o=i.ss.get(e)||en.min();n.forEach((u,c)=>{c.readTime.compareTo(o)>0&&(o=c.readTime)}),i.ss.set(e,o)}function xp(){return xp=(0,d.Z)(function*(i,e,n,o){const u=pt(i);let c=m(),p=js();for(const B of n){const Q=e.Ps(B.metadata.name);B.document&&(c=c.add(Q));const ie=e.Is(B);ie.setReadTime(e.Ts(B.metadata.readTime)),p=p.insert(Q,ie)}const A=u.os.newChangeBuffer({trackRemovals:!0}),P=yield La(u,(Q=o,po(Iu(ir.fromString(`__bundle__/docs/${Q}`)))));var Q;return u.persistence.runTransaction("Apply bundle documents","readwrite",B=>kd(B,A,p).next(Q=>(A.apply(B),Q)).next(Q=>u.Qr.removeMatchingKeysForTargetId(B,P.targetId).next(()=>u.Qr.addMatchingKeys(B,c,P.targetId)).next(()=>u.localDocuments.getLocalViewOfDocuments(B,Q.cs,Q.ls)).next(()=>Q.cs)))}),xp.apply(this,arguments)}function kp(i,e){return Qh.apply(this,arguments)}function Qh(){return Qh=(0,d.Z)(function*(i,e,n=m()){const o=yield La(i,po(Wl(e.bundledQuery))),u=pt(i);return u.persistence.runTransaction("Save named query","readwrite",c=>{const p=ds(e.readTime);if(o.snapshotVersion.compareTo(p)>=0)return u.$r.saveNamedQuery(c,e);const A=o.withResumeToken(Bi.EMPTY_BYTE_STRING,p);return u.ns=u.ns.insert(A.targetId,A),u.Qr.updateTargetData(c,A).next(()=>u.Qr.removeMatchingKeysForTargetId(c,o.targetId)).next(()=>u.Qr.addMatchingKeys(c,n,o.targetId)).next(()=>u.$r.saveNamedQuery(c,e))})}),Qh.apply(this,arguments)}function Zm(i,e){return`firestore_clients_${i}_${e}`}function Fp(i,e,n){let o=`firestore_mutations_${i}_${n}`;return e.isAuthenticated()&&(o+=`_${e.uid}`),o}function Fd(i,e){return`firestore_targets_${i}_${e}`}class Lp{constructor(e,n,o,u){this.user=e,this.batchId=n,this.state=o,this.error=u}static Es(e,n,o){const u=JSON.parse(o);let c,p="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return p&&u.error&&(p="string"==typeof u.error.message&&"string"==typeof u.error.code,p&&(c=new ft(u.error.code,u.error.message))),p?new Lp(e,n,u.state,c):(yr("SharedClientState",`Failed to parse mutation state for ID '${n}': ${o}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ld{constructor(e,n,o){this.targetId=e,this.state=n,this.error=o}static Es(e,n){const o=JSON.parse(n);let u,c="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return c&&o.error&&(c="string"==typeof o.error.message&&"string"==typeof o.error.code,c&&(u=new ft(o.error.code,o.error.message))),c?new Ld(e,o.state,u):(yr("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Yh{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Es(e,n){const o=JSON.parse(n);let u="object"==typeof o&&o.activeTargetIds instanceof Array,c=z();for(let p=0;u&&p<o.activeTargetIds.length;++p)u=I(o.activeTargetIds[p]),c=c.add(o.activeTargetIds[p]);return u?new Yh(e,c):(yr("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class Vp{constructor(e,n){this.clientId=e,this.onlineState=n}static Es(e){const n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new Vp(n.clientId,n.onlineState):(yr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Qm{constructor(){this.activeTargetIds=z()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ym{constructor(e,n,o,u,c){this.window=e,this.oi=n,this.persistenceKey=o,this.Vs=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new pi(bn),this.started=!1,this.ys=[];const p=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=c,this.ws=Zm(this.persistenceKey,this.Vs),this.Ss=`firestore_sequence_number_${this.persistenceKey}`,this.ps=this.ps.insert(this.Vs,new Qm),this.bs=new RegExp(`^firestore_clients_${p}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${p}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${p}_(\\d+)$`),this.vs=`firestore_online_state_${this.persistenceKey}`,this.Fs=function(P){return`firestore_bundle_loaded_v2_${P}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,d.Z)(function*(){const n=yield e.syncEngine.Bi();for(const u of n){if(u===e.Vs)continue;const c=e.getItem(Zm(e.persistenceKey,u));if(c){const p=Yh.Es(u,c);p&&(e.ps=e.ps.insert(p.clientId,p))}}e.Ms();const o=e.storage.getItem(e.vs);if(o){const u=e.xs(o);u&&e.Os(u)}for(const u of e.ys)e.gs(u);e.ys=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let n=!1;return this.ps.forEach((o,u)=>{u.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,n,o){this.Ls(e,n,o),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(Fd(this.persistenceKey,e));if(o){const u=Ld.Es(e,o);u&&(n=u.state)}}return this.ks.As(e),this.Ms(),n}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Fd(this.persistenceKey,e))}updateQueryState(e,n,o){this.qs(e,n,o)}handleUserChange(e,n,o){n.forEach(u=>{this.Bs(u)}),this.currentUser=e,o.forEach(u=>{this.addPendingMutation(u)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return at("SharedClientState","READ",e,n),n}setItem(e,n){at("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){at("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){var n=this;const o=e;if(o.storageArea===this.storage){if(at("SharedClientState","EVENT",o.key,o.newValue),o.key===this.ws)return void yr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((0,d.Z)(function*(){if(n.started){if(null!==o.key)if(n.bs.test(o.key)){if(null==o.newValue){const u=n.$s(o.key);return n.Us(u,null)}{const u=n.Ws(o.key,o.newValue);if(u)return n.Us(u.clientId,u)}}else if(n.Ds.test(o.key)){if(null!==o.newValue){const u=n.Gs(o.key,o.newValue);if(u)return n.zs(u)}}else if(n.Cs.test(o.key)){if(null!==o.newValue){const u=n.js(o.key,o.newValue);if(u)return n.Hs(u)}}else if(o.key===n.vs){if(null!==o.newValue){const u=n.xs(o.newValue);if(u)return n.Os(u)}}else if(o.key===n.Ss){const u=function(p){let A=Oi._e;if(null!=p)try{const P=JSON.parse(p);qt("number"==typeof P),A=P}catch(P){yr("SharedClientState","Failed to read sequence number from WebStorage",P)}return A}(o.newValue);u!==Oi._e&&n.sequenceNumberHandler(u)}else if(o.key===n.Fs){const u=n.Js(o.newValue);yield Promise.all(u.map(c=>n.syncEngine.Ys(c)))}}else n.ys.push(o)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,n,o){const u=new Lp(this.currentUser,e,n,o),c=Fp(this.persistenceKey,this.currentUser,e);this.setItem(c,u.ds())}Bs(e){const n=Fp(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Qs(e){this.storage.setItem(this.vs,JSON.stringify({clientId:this.Vs,onlineState:e}))}qs(e,n,o){const u=Fd(this.persistenceKey,e),c=new Ld(e,n,o);this.setItem(u,c.ds())}Ks(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Fs,n)}$s(e){const n=this.bs.exec(e);return n?n[1]:null}Ws(e,n){const o=this.$s(e);return Yh.Es(o,n)}Gs(e,n){const o=this.Ds.exec(e),u=Number(o[1]);return Lp.Es(new Yt(void 0!==o[2]?o[2]:null),u,n)}js(e,n){const o=this.Cs.exec(e),u=Number(o[1]);return Ld.Es(u,n)}xs(e){return Vp.Es(e)}Js(e){return JSON.parse(e)}zs(e){var n=this;return(0,d.Z)(function*(){if(e.user.uid===n.currentUser.uid)return n.syncEngine.Zs(e.batchId,e.state,e.error);at("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,n){const o=n?this.ps.insert(e,n):this.ps.remove(e),u=this.Ns(this.ps),c=this.Ns(o),p=[],A=[];return c.forEach(P=>{u.has(P)||p.push(P)}),u.forEach(P=>{c.has(P)||A.push(P)}),this.syncEngine.eo(p,A).then(()=>{this.ps=o})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let n=z();return e.forEach((o,u)=>{n=n.unionWith(u.activeTargetIds)}),n}}class Vd{constructor(){this.no=new Qm,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,o){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,o){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Qm,Promise.resolve()}handleUserChange(e,n,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Ky{io(e){}shutdown(){}}class Jh{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){at("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){at("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Vc=null;function fl(){return null===Vc?Vc=268435456+Math.round(2147483648*Math.random()):Vc++,"0x"+Vc.toString(16)}const Up={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Bp{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}const bs="WebChannelConnection";class Xh extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const o=n.ssl?"https":"http",u=encodeURIComponent(this.databaseId.projectId),c=encodeURIComponent(this.databaseId.database);this.fo=o+"://"+n.host,this.po=`projects/${u}/databases/${c}`,this.yo="(default)"===this.databaseId.database?`project_id=${u}`:`project_id=${u}&database_id=${c}`}get wo(){return!1}So(n,o,u,c,p){const A=fl(),P=this.bo(n,o.toUriEncodedString());at("RestConnection",`Sending RPC '${n}' ${A}:`,P,u);const B={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(B,c,p),this.Co(n,P,B,u).then(Q=>(at("RestConnection",`Received RPC '${n}' ${A}: `,Q),Q),Q=>{throw xr("RestConnection",`RPC '${n}' ${A} failed with error: `,Q,"url: ",P,"request:",u),Q})}vo(n,o,u,c,p,A){return this.So(n,o,u,c,p)}Do(n,o,u){n["X-Goog-Api-Client"]="gl-js/ fire/"+hr,n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),o&&o.headers.forEach((c,p)=>n[p]=c),u&&u.headers.forEach((c,p)=>n[p]=c)}bo(n,o){return`${this.fo}/v1/${o}:${Up[n]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,o,u){const c=fl();return new Promise((p,A)=>{const P=new jt;P.setWithCredentials(!0),P.listenOnce(k.COMPLETE,()=>{try{switch(P.getLastErrorCode()){case K.NO_ERROR:const Q=P.getResponseJson();at(bs,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(Q)),p(Q);break;case K.TIMEOUT:at(bs,`RPC '${e}' ${c} timed out`),A(new ft(Qe.DEADLINE_EXCEEDED,"Request time out"));break;case K.HTTP_ERROR:const ie=P.getStatus();if(at(bs,`RPC '${e}' ${c} failed with status:`,ie,"response text:",P.getResponseText()),ie>0){let Re=P.getResponseJson();Array.isArray(Re)&&(Re=Re[0]);const Ze=Re?.error;if(Ze&&Ze.status&&Ze.message){const bt=function(Ut){const yn=Ut.toLowerCase().replace(/_/g,"-");return Object.values(Qe).indexOf(yn)>=0?yn:Qe.UNKNOWN}(Ze.status);A(new ft(bt,Ze.message))}else A(new ft(Qe.UNKNOWN,"Server responded with status "+P.getStatus()))}else A(new ft(Qe.UNAVAILABLE,"Connection failed."));break;default:At()}}finally{at(bs,`RPC '${e}' ${c} completed.`)}});const B=JSON.stringify(u);at(bs,`RPC '${e}' ${c} sending request:`,u),P.send(n,"POST",B,o,15)})}Fo(e,n,o){const u=fl(),c=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],p=hu(),A=D(),P={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},B=this.longPollingOptions.timeoutSeconds;void 0!==B&&(P.longPollingTimeout=Math.round(1e3*B)),this.useFetchStreams&&(P.useFetchStreams=!0),this.Do(P.initMessageHeaders,n,o),P.encodeInitMessageHeaders=!0;const Q=c.join("");at(bs,`Creating RPC '${e}' stream ${u}: ${Q}`,P);const ie=p.createWebChannel(Q,P);let Re=!1,Ze=!1;const bt=new Bp({lo:Ut=>{Ze?at(bs,`Not sending because RPC '${e}' stream ${u} is closed:`,Ut):(Re||(at(bs,`Opening RPC '${e}' stream ${u} transport.`),ie.open(),Re=!0),at(bs,`RPC '${e}' stream ${u} sending:`,Ut),ie.send(Ut))},ho:()=>ie.close()}),Ht=(Ut,yn,Qn)=>{Ut.listen(yn,fn=>{try{Qn(fn)}catch(gr){setTimeout(()=>{throw gr},0)}})};return Ht(ie,ot.EventType.OPEN,()=>{Ze||at(bs,`RPC '${e}' stream ${u} transport opened.`)}),Ht(ie,ot.EventType.CLOSE,()=>{Ze||(Ze=!0,at(bs,`RPC '${e}' stream ${u} transport closed`),bt.Vo())}),Ht(ie,ot.EventType.ERROR,Ut=>{Ze||(Ze=!0,xr(bs,`RPC '${e}' stream ${u} transport errored:`,Ut),bt.Vo(new ft(Qe.UNAVAILABLE,"The operation could not be completed")))}),Ht(ie,ot.EventType.MESSAGE,Ut=>{var yn;if(!Ze){const Qn=Ut.data[0];qt(!!Qn);const gr=Qn.error||(null===(yn=Qn[0])||void 0===yn?void 0:yn.error);if(gr){at(bs,`RPC '${e}' stream ${u} received error:`,gr);const Ci=gr.status;let ti=function(eI){const Lf=Ss[eI];if(void 0!==Lf)return cm(Lf)}(Ci),Hs=gr.message;void 0===ti&&(ti=Qe.INTERNAL,Hs="Unknown error status: "+Ci+" with message "+gr.message),Ze=!0,bt.Vo(new ft(ti,Hs)),ie.close()}else at(bs,`RPC '${e}' stream ${u} received:`,Qn),bt.mo(Qn)}}),Ht(A,W.STAT_EVENT,Ut=>{Ut.stat===de.PROXY?at(bs,`RPC '${e}' stream ${u} detected buffering proxy`):Ut.stat===de.NOPROXY&&at(bs,`RPC '${e}' stream ${u} detected no buffering proxy`)}),setTimeout(()=>{bt.Ro()},0),bt}}function ec(){return typeof window<"u"?window:null}function Uc(){return typeof document<"u"?document:null}function tc(i){return new ky(i,!0)}class Bc{constructor(e,n,o=1e3,u=1.5,c=6e4){this.oi=e,this.timerId=n,this.Mo=o,this.xo=u,this.Oo=c,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const n=Math.floor(this.No+this.Qo()),o=Math.max(0,Date.now()-this.Bo),u=Math.max(0,n-o);u>0&&at("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${o} ms ago)`),this.Lo=this.oi.enqueueAfterDelay(this.timerId,u,()=>(this.Bo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Lo&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){null!==this.Lo&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}}class Zy{constructor(e,n,o,u,c,p,A,P){this.oi=e,this.$o=o,this.Uo=u,this.connection=c,this.authCredentialsProvider=p,this.appCheckCredentialsProvider=A,this.listener=P,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new Bc(e,n)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}stop(){var e=this;return(0,d.Z)(function*(){e.Ho()&&(yield e.close(0))})()}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}e_(){var e=this;return(0,d.Z)(function*(){if(e.Jo())return e.close(0)})()}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(e,n){var o=this;return(0,d.Z)(function*(){o.n_(),o.r_(),o.jo.cancel(),o.Wo++,4!==e?o.jo.reset():n&&n.code===Qe.RESOURCE_EXHAUSTED?(yr(n.toString()),yr("Using maximum backoff delay to prevent overloading the backend."),o.jo.ko()):n&&n.code===Qe.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.i_(),o.stream.close(),o.stream=null),o.state=e,yield o.listener.To(n)})()}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,u])=>{this.Wo===n&&this.o_(o,u)},o=>{e(()=>{const u=new ft(Qe.UNKNOWN,"Fetching auth token failed: "+o.message);return this.__(u)})})}o_(e,n){const o=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{o(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(u=>{o(()=>this.__(u))}),this.stream.onMessage(u=>{o(()=>this.onMessage(u))})}Yo(){var e=this;this.state=5,this.jo.qo((0,d.Z)(function*(){e.state=0,e.start()}))}__(e){return at("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(at("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class jp extends Zy{constructor(e,n,o,u,c,p){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,o,u,p),this.serializer=c}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();const n=function vm(i,e){let n;if("targetChange"in e){const o="NO_CHANGE"===(B=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===B?1:"REMOVE"===B?2:"CURRENT"===B?3:"RESET"===B?4:At(),u=e.targetChange.targetIds||[],c=function(B,Q){return B.useProto3Json?(qt(void 0===Q||"string"==typeof Q),Bi.fromBase64String(Q||"")):(qt(void 0===Q||Q instanceof Uint8Array),Bi.fromUint8Array(Q||new Uint8Array))}(i,e.targetChange.resumeToken),p=e.targetChange.cause,A=p&&function(B){const Q=void 0===B.code?Qe.UNKNOWN:cm(B.code);return new ft(Q,B.message||"")}(p);n=new dm(o,u,c,A||null)}else if("documentChange"in e){const o=e.documentChange,u=va(i,o.document.name),c=ds(o.document.updateTime),p=o.document.createTime?ds(o.document.createTime):en.min(),A=new rs({mapValue:{fields:o.document.fields}}),P=ai.newFoundDocument(u,c,p,A);n=new Oh(o.targetIds||[],o.removedTargetIds||[],P.key,P)}else if("documentDelete"in e){const o=e.documentDelete,u=va(i,o.document),c=o.readTime?ds(o.readTime):en.min(),p=ai.newNoDocument(u,c);n=new Oh([],o.removedTargetIds||[],p.key,p)}else if("documentRemove"in e){const o=e.documentRemove,u=va(i,o.document);n=new Oh([],o.removedTargetIds||[],u,null)}else{if(!("filter"in e))return At();{const o=e.filter,{count:u=0,unchangedNames:c}=o,p=new Ny(u,c);n=new sp(o.targetId,p)}}var B;return n}(this.serializer,e),o=function(c){if(!("targetChange"in c))return en.min();const p=c.targetChange;return p.targetIds&&p.targetIds.length?en.min():p.readTime?ds(p.readTime):en.min()}(e);return this.listener.u_(n,o)}c_(e){const n={};n.database=cp(this.serializer),n.addTarget=function(c,p){let A;const P=p.target;if(A=Cc(P)?{documents:Em(c,P)}:{query:hp(c,P).ut},A.targetId=p.targetId,p.resumeToken.approximateByteSize()>0){A.resumeToken=fm(c,p.resumeToken);const B=zl(c,p.expectedCount);null!==B&&(A.expectedCount=B)}else if(p.snapshotVersion.compareTo(en.min())>0){A.readTime=Mc(c,p.snapshotVersion.toTimestamp());const B=zl(c,p.expectedCount);null!==B&&(A.expectedCount=B)}return A}(this.serializer,e);const o=function Im(i,e){const n=function(u){switch(u){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return At()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);o&&(n.labels=o),this.t_(n)}l_(e){const n={};n.database=cp(this.serializer),n.removeTarget=e,this.t_(n)}}class Ud extends Zy{constructor(e,n,o,u,c,p){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,o,u,p),this.serializer=c,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(qt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const n=function dp(i,e){return i&&i.length>0?(qt(void 0!==e),i.map(n=>function(u,c){let p=ds(u.updateTime?u.updateTime:c);return p.isEqual(en.min())&&(p=ds(c)),new bh(p,u.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),o=ds(e.commitTime);return this.listener.T_(o,n)}return qt(!e.writeResults||0===e.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=cp(this.serializer),this.t_(e)}I_(e){const n={streamToken:this.lastStreamToken,writes:e.map(o=>rl(this.serializer,o))};this.t_(n)}}class Qy extends class{}{constructor(e,n,o,u){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=o,this.serializer=u,this.A_=!1}R_(){if(this.A_)throw new ft(Qe.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,o,u){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,p])=>this.connection.So(e,nl(n,o),u,c,p)).catch(c=>{throw"FirebaseError"===c.name?(c.code===Qe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ft(Qe.UNKNOWN,c.toString())})}vo(e,n,o,u,c){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([p,A])=>this.connection.vo(e,nl(n,o),u,p,A,c)).catch(p=>{throw"FirebaseError"===p.name?(p.code===Qe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),p):new ft(Qe.UNKNOWN,p.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class Yy{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,"Online"===e&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(yr(n),this.g_=!1):at("OnlineStateTracker",n)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class Hp{constructor(e,n,o,u,c){var p=this;this.localStore=e,this.datastore=n,this.asyncQueue=o,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=c,this.M_.io(A=>{o.enqueueAndForget((0,d.Z)(function*(){var P;Va(p)&&(at("RemoteStore","Restarting streams for network reachability change."),yield(P=(0,d.Z)(function*(Q){const ie=pt(Q);ie.v_.add(4),yield $c(ie),ie.x_.set("Unknown"),ie.v_.delete(4),yield jc(ie)}),function B(Q){return P.apply(this,arguments)})(p))}))}),this.x_=new Yy(o,u)}}function jc(i){return zp.apply(this,arguments)}function zp(){return zp=(0,d.Z)(function*(i){if(Va(i))for(const e of i.F_)yield e(!0)}),zp.apply(this,arguments)}function $c(i){return Xm.apply(this,arguments)}function Xm(){return Xm=(0,d.Z)(function*(i){for(const e of i.F_)yield e(!1)}),Xm.apply(this,arguments)}function ef(i,e){const n=pt(i);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),jd(n)?tf(n):zd(n).Jo()&&Bd(n,e))}function Pu(i,e){const n=pt(i),o=zd(n);n.C_.delete(e),o.Jo()&&e_(n,e),0===n.C_.size&&(o.Jo()?o.Xo():Va(n)&&n.x_.set("Unknown"))}function Bd(i,e){if(i.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(en.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}zd(i).c_(e)}function e_(i,e){i.O_.Oe(e),zd(i).l_(e)}function tf(i){i.O_=new Oy({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>i.C_.get(e)||null,nt:()=>i.datastore.serializer.databaseId}),zd(i).start(),i.x_.p_()}function jd(i){return Va(i)&&!zd(i).Ho()&&i.C_.size>0}function Va(i){return 0===pt(i).v_.size}function t_(i){i.O_=void 0}function n_(i){return Gp.apply(this,arguments)}function Gp(){return Gp=(0,d.Z)(function*(i){i.C_.forEach((e,n)=>{Bd(i,e)})}),Gp.apply(this,arguments)}function r_(i,e){return i_.apply(this,arguments)}function i_(){return i_=(0,d.Z)(function*(i,e){t_(i),jd(i)?(i.x_.S_(e),tf(i)):i.x_.set("Unknown")}),i_.apply(this,arguments)}function Jy(i,e,n){return Hc.apply(this,arguments)}function Hc(){return Hc=(0,d.Z)(function*(i,e,n){if(i.x_.set("Online"),e instanceof dm&&2===e.state&&e.cause)try{yield(o=(0,d.Z)(function*(c,p){const A=p.cause;for(const P of p.targetIds)c.C_.has(P)&&(yield c.remoteSyncer.rejectListen(P,A),c.C_.delete(P),c.O_.removeTarget(P))}),function u(c,p){return o.apply(this,arguments)})(i,e)}catch(o){at("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),yield nf(i,o)}else if(e instanceof Oh?i.O_.$e(e):e instanceof sp?i.O_.Je(e):i.O_.Ge(e),!n.isEqual(en.min()))try{const o=yield qm(i.localStore);n.compareTo(o)>=0&&(yield function(c,p){const A=c.O_.it(p);return A.targetChanges.forEach((P,B)=>{if(P.resumeToken.approximateByteSize()>0){const Q=c.C_.get(B);Q&&c.C_.set(B,Q.withResumeToken(P.resumeToken,p))}}),A.targetMismatches.forEach((P,B)=>{const Q=c.C_.get(P);if(!Q)return;c.C_.set(P,Q.withResumeToken(Bi.EMPTY_BYTE_STRING,Q.snapshotVersion)),e_(c,P);const ie=new nu(Q.target,P,B,Q.sequenceNumber);Bd(c,ie)}),c.remoteSyncer.applyRemoteEvent(A)}(i,n))}catch(o){at("RemoteStore","Failed to raise snapshot:",o),yield nf(i,o)}var o}),Hc.apply(this,arguments)}function nf(i,e,n){return pl.apply(this,arguments)}function pl(){return pl=(0,d.Z)(function*(i,e,n){if(!fr(e))throw e;i.v_.add(1),yield $c(i),i.x_.set("Offline"),n||(n=()=>qm(i.localStore)),i.asyncQueue.enqueueRetryable((0,d.Z)(function*(){at("RemoteStore","Retrying IndexedDB access"),yield n(),i.v_.delete(1),yield jc(i)}))}),pl.apply(this,arguments)}function zc(i,e){return e().catch(n=>nf(i,n,e))}function Gc(i){return rf.apply(this,arguments)}function rf(){return rf=(0,d.Z)(function*(i){const e=pt(i),n=Mu(e);let o=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;Xy(e);)try{const u=yield ou(e.localStore,o);if(null===u){0===e.D_.length&&n.Xo();break}o=u.batchId,ev(e,u)}catch(u){yield nf(e,u)}s_(e)&&Wp(e)}),rf.apply(this,arguments)}function Xy(i){return Va(i)&&i.D_.length<10}function ev(i,e){i.D_.push(e);const n=Mu(i);n.Jo()&&n.P_&&n.I_(e.mutations)}function s_(i){return Va(i)&&!Mu(i).Ho()&&i.D_.length>0}function Wp(i){Mu(i).start()}function o_(i){return $d.apply(this,arguments)}function $d(){return $d=(0,d.Z)(function*(i){Mu(i).d_()}),$d.apply(this,arguments)}function zE(i){return Hd.apply(this,arguments)}function Hd(){return Hd=(0,d.Z)(function*(i){const e=Mu(i);for(const n of i.D_)e.I_(n.mutations)}),Hd.apply(this,arguments)}function a_(i,e,n){return qp.apply(this,arguments)}function qp(){return qp=(0,d.Z)(function*(i,e,n){const o=i.D_.shift(),u=ep.from(o,e,n);yield zc(i,()=>i.remoteSyncer.applySuccessfulWrite(u)),yield Gc(i)}),qp.apply(this,arguments)}function tv(i,e){return sf.apply(this,arguments)}function sf(){return sf=(0,d.Z)(function*(i,e){var n;e&&Mu(i).P_&&(yield(n=(0,d.Z)(function*(u,c){if(np(A=c.code)&&A!==Qe.ABORTED){const p=u.D_.shift();Mu(u).Zo(),yield zc(u,()=>u.remoteSyncer.rejectFailedWrite(p.batchId,c)),yield Gc(u)}var A}),function o(u,c){return n.apply(this,arguments)})(i,e)),s_(i)&&Wp(i)}),sf.apply(this,arguments)}function u_(i,e){return af.apply(this,arguments)}function af(){return af=(0,d.Z)(function*(i,e){const n=pt(i);n.asyncQueue.verifyOperationInProgress(),at("RemoteStore","RemoteStore received new credentials");const o=Va(n);n.v_.add(3),yield $c(n),o&&n.x_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),yield jc(n)}),af.apply(this,arguments)}function Kp(i,e){return Zp.apply(this,arguments)}function Zp(){return Zp=(0,d.Z)(function*(i,e){const n=pt(i);e?(n.v_.delete(2),yield jc(n)):e||(n.v_.add(2),yield $c(n),n.x_.set("Unknown"))}),Zp.apply(this,arguments)}function zd(i){return i.N_||(i.N_=function(n,o,u){const c=pt(n);return c.R_(),new jp(o,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,u)}(i.datastore,i.asyncQueue,{Po:n_.bind(null,i),To:r_.bind(null,i),u_:Jy.bind(null,i)}),i.F_.push(function(){var e=(0,d.Z)(function*(n){n?(i.N_.Zo(),jd(i)?tf(i):i.x_.set("Unknown")):(yield i.N_.stop(),t_(i))});return function(n){return e.apply(this,arguments)}}())),i.N_}function Mu(i){return i.L_||(i.L_=function(n,o,u){const c=pt(n);return c.R_(),new Ud(o,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,u)}(i.datastore,i.asyncQueue,{Po:o_.bind(null,i),To:tv.bind(null,i),E_:zE.bind(null,i),T_:a_.bind(null,i)}),i.F_.push(function(){var e=(0,d.Z)(function*(n){n?(i.L_.Zo(),yield Gc(i)):(yield i.L_.stop(),i.D_.length>0&&(at("RemoteStore",`Stopping write stream with ${i.D_.length} pending writes`),i.D_=[]))});return function(n){return e.apply(this,arguments)}}())),i.L_}class uf{constructor(e,n,o,u,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=o,this.op=u,this.removalCallback=c,this.deferred=new Cr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(p=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,o,u,c){const p=Date.now()+o,A=new uf(e,n,p,u,c);return A.start(o),A}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ft(Qe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function So(i,e){if(yr("AsyncQueue",`${e}: ${i}`),fr(i))return new ft(Qe.UNAVAILABLE,`${e}: ${i}`);throw i}class nc{constructor(e){this.comparator=e?(n,o)=>e(n,o)||Ft.comparator(n.key,o.key):(n,o)=>Ft.comparator(n.key,o.key),this.keyedMap=Vl(),this.sortedSet=new pi(this.comparator)}static emptySet(e){return new nc(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,o)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof nc)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;n.hasNext();){const u=n.getNext().key,c=o.getNext().key;if(!u.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const o=new nc;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=n,o}}class nv{constructor(){this.B_=new pi(Ft.comparator)}track(e){const n=e.doc.key,o=this.B_.get(n);o?0!==e.type&&3===o.type?this.B_=this.B_.insert(n,e):3===e.type&&1!==o.type?this.B_=this.B_.insert(n,{type:o.type,doc:e.doc}):2===e.type&&2===o.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):2===e.type&&0===o.type?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):1===e.type&&0===o.type?this.B_=this.B_.remove(n):1===e.type&&2===o.type?this.B_=this.B_.insert(n,{type:1,doc:o.doc}):0===e.type&&1===o.type?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):At():this.B_=this.B_.insert(n,e)}k_(){const e=[];return this.B_.inorderTraversal((n,o)=>{e.push(o)}),e}}class gl{constructor(e,n,o,u,c,p,A,P,B){this.query=e,this.docs=n,this.oldDocs=o,this.docChanges=u,this.mutatedKeys=c,this.fromCache=p,this.syncStateChanged=A,this.excludesMetadataChanges=P,this.hasCachedResults=B}static fromInitialDocuments(e,n,o,u,c){const p=[];return n.forEach(A=>{p.push({type:0,doc:A})}),new gl(e,n,nc.emptySet(n),p,o,u,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,o=e.docChanges;if(n.length!==o.length)return!1;for(let u=0;u<n.length;u++)if(n[u].type!==o[u].type||!n[u].doc.isEqual(o[u].doc))return!1;return!0}}class ml{constructor(){this.q_=void 0,this.Q_=[]}K_(){return this.Q_.some(e=>e.U_())}}class Qp{constructor(){this.queries=new ya(e=>Sc(e),wu),this.onlineState="Unknown",this.W_=new Set}}function Yp(i,e){return l_.apply(this,arguments)}function l_(){return l_=(0,d.Z)(function*(i,e){const n=pt(i);let o=3;const u=e.query;let c=n.queries.get(u);c?!c.K_()&&e.U_()&&(o=2):(c=new ml,o=e.U_()?0:1);try{switch(o){case 0:c.q_=yield n.onListen(u,!0);break;case 1:c.q_=yield n.onListen(u,!1);break;case 2:yield n.onFirstRemoteStoreListen(u)}}catch(p){const A=So(p,`Initialization of query '${Xa(e.query)}' failed`);return void e.onError(A)}n.queries.set(u,c),c.Q_.push(e),e.G_(n.onlineState),c.q_&&e.z_(c.q_)&&Xp(n)}),l_.apply(this,arguments)}function Jp(i,e){return Gd.apply(this,arguments)}function Gd(){return Gd=(0,d.Z)(function*(i,e){const n=pt(i),o=e.query;let u=3;const c=n.queries.get(o);if(c){const p=c.Q_.indexOf(e);p>=0&&(c.Q_.splice(p,1),0===c.Q_.length?u=e.U_()?0:1:!c.K_()&&e.U_()&&(u=2))}switch(u){case 0:return n.queries.delete(o),n.onUnlisten(o,!0);case 1:return n.queries.delete(o),n.onUnlisten(o,!1);case 2:return n.onLastRemoteStoreUnlisten(o);default:return}}),Gd.apply(this,arguments)}function au(i,e){const n=pt(i);let o=!1;for(const u of e){const p=n.queries.get(u.query);if(p){for(const A of p.Q_)A.z_(u)&&(o=!0);p.q_=u}}o&&Xp(n)}function c_(i,e,n){const o=pt(i),u=o.queries.get(e);if(u)for(const c of u.Q_)c.onError(n);o.queries.delete(e)}function Xp(i){i.W_.forEach(e=>{e.next()})}var d_,$s;($s=d_||(d_={})).j_="default",$s.Cache="cache";class eg{constructor(e,n,o){this.query=e,this.H_=n,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=o||{}}z_(e){if(!this.options.includeMetadataChanges){const o=[];for(const u of e.docChanges)3!==u.type&&o.push(u);e=new gl(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.J_?this.Z_(e)&&(this.H_.next(e),n=!0):this.X_(e,this.onlineState)&&(this.ea(e),n=!0),this.Y_=e,n}onError(e){this.H_.error(e)}G_(e){this.onlineState=e;let n=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,e)&&(this.ea(this.Y_),n=!0),n}X_(e,n){return!e.fromCache||!this.U_()||(!this.options.ta||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}Z_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Y_&&this.Y_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}ea(e){e=gl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.J_=!0,this.H_.next(e)}U_(){return this.options.source!==d_.Cache}}class tg{constructor(e,n){this.na=e,this.byteLength=n}ra(){return"metadata"in this.na}}class h_{constructor(e){this.serializer=e}Ps(e){return va(this.serializer,e)}Is(e){return e.metadata.exists?ym(this.serializer,e.document,!1):ai.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return ds(e)}}class rv{constructor(e,n,o){this.ia=e,this.localStore=n,this.serializer=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=lf(e)}sa(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.na.namedQuery)this.queries.push(e.na.namedQuery);else if(e.na.documentMetadata){this.documents.push({metadata:e.na.documentMetadata}),e.na.documentMetadata.exists||++n;const o=ir.fromString(e.na.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else e.na.document&&(this.documents[this.documents.length-1].document=e.na.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}oa(e){const n=new Map,o=new h_(this.serializer);for(const u of e)if(u.metadata.queries){const c=o.Ps(u.metadata.name);for(const p of u.metadata.queries){const A=(n.get(p)||m()).add(c);n.set(p,A)}}return n}complete(){var e=this;return(0,d.Z)(function*(){const n=yield function qy(i,e,n,o){return xp.apply(this,arguments)}(e.localStore,new h_(e.serializer),e.documents,e.ia.id),o=e.oa(e.documents);for(const u of e.queries)yield kp(e.localStore,u,o.get(u.name));return e.progress.taskState="Success",{progress:e.progress,_a:e.collectionGroups,aa:n}})()}}function lf(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class ng{constructor(e){this.key=e}}class rg{constructor(e){this.key=e}}class f_{constructor(e,n){this.query=e,this.ua=n,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=m(),this.mutatedKeys=m(),this.ha=Yu(e),this.Pa=new nc(this.ha)}get Ia(){return this.ua}Ta(e,n){const o=n?n.Ea:new nv,u=n?n.Pa:this.Pa;let c=n?n.mutatedKeys:this.mutatedKeys,p=u,A=!1;const P="F"===this.query.limitType&&u.size===this.query.limit?u.last():null,B="L"===this.query.limitType&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal((Q,ie)=>{const Re=u.get(Q),Ze=xa(this.query,ie)?ie:null,bt=!!Re&&this.mutatedKeys.has(Re.key),Ht=!!Ze&&(Ze.hasLocalMutations||this.mutatedKeys.has(Ze.key)&&Ze.hasCommittedMutations);let Ut=!1;Re&&Ze?Re.data.isEqual(Ze.data)?bt!==Ht&&(o.track({type:3,doc:Ze}),Ut=!0):this.da(Re,Ze)||(o.track({type:2,doc:Ze}),Ut=!0,(P&&this.ha(Ze,P)>0||B&&this.ha(Ze,B)<0)&&(A=!0)):!Re&&Ze?(o.track({type:0,doc:Ze}),Ut=!0):Re&&!Ze&&(o.track({type:1,doc:Re}),Ut=!0,(P||B)&&(A=!0)),Ut&&(Ze?(p=p.add(Ze),c=Ht?c.add(Q):c.delete(Q)):(p=p.delete(Q),c=c.delete(Q)))}),null!==this.query.limit)for(;p.size>this.query.limit;){const Q="F"===this.query.limitType?p.last():p.first();p=p.delete(Q.key),c=c.delete(Q.key),o.track({type:1,doc:Q})}return{Pa:p,Ea:o,Xi:A,mutatedKeys:c}}da(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,o,u){const c=this.Pa;this.Pa=e.Pa,this.mutatedKeys=e.mutatedKeys;const p=e.Ea.k_();p.sort((Q,ie)=>function(Ze,bt){const Ht=Ut=>{switch(Ut){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return At()}};return Ht(Ze)-Ht(bt)}(Q.type,ie.type)||this.ha(Q.doc,ie.doc)),this.Aa(o),u=null!=u&&u;const A=n&&!u?this.Ra():[],P=0===this.la.size&&this.current&&!u?1:0,B=P!==this.ca;return this.ca=P,0!==p.length||B?{snapshot:new gl(this.query,e.Pa,c,p,e.mutatedKeys,0===P,B,!1,!!o&&o.resumeToken.approximateByteSize()>0),Va:A}:{Va:A}}G_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new nv,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}ma(e){return!this.ua.has(e)&&!!this.Pa.has(e)&&!this.Pa.get(e).hasLocalMutations}Aa(e){e&&(e.addedDocuments.forEach(n=>this.ua=this.ua.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ua=this.ua.delete(n)),this.current=e.current)}Ra(){if(!this.current)return[];const e=this.la;this.la=m(),this.Pa.forEach(o=>{this.ma(o.key)&&(this.la=this.la.add(o.key))});const n=[];return e.forEach(o=>{this.la.has(o)||n.push(new rg(o))}),this.la.forEach(o=>{e.has(o)||n.push(new ng(o))}),n}fa(e){this.ua=e.hs,this.la=m();const n=this.Ta(e.documents);return this.applyChanges(n,!0)}ga(){return gl.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,0===this.ca,this.hasCachedResults)}}class p_{constructor(e,n,o){this.query=e,this.targetId=n,this.view=o}}class g_{constructor(e){this.key=e,this.pa=!1}}class iv{constructor(e,n,o,u,c,p){this.localStore=e,this.remoteStore=n,this.eventManager=o,this.sharedClientState=u,this.currentUser=c,this.maxConcurrentLimboResolutions=p,this.ya={},this.wa=new ya(A=>Sc(A),wu),this.Sa=new Map,this.ba=new Set,this.Da=new pi(Ft.comparator),this.Ca=new Map,this.va=new Cp,this.Fa={},this.Ma=new Map,this.xa=ll.Ln(),this.onlineState="Unknown",this.Oa=void 0}get isPrimaryClient(){return!0===this.Oa}}function sv(i,e){return ig.apply(this,arguments)}function ig(){return ig=(0,d.Z)(function*(i,e,n=!0){const o=If(i);let u;const c=o.wa.get(e);return c?(o.sharedClientState.addLocalQueryTarget(c.targetId),u=c.view.ga()):u=yield uu(o,e,n,!0),u}),ig.apply(this,arguments)}function m_(i,e){return _l.apply(this,arguments)}function _l(){return _l=(0,d.Z)(function*(i,e){const n=If(i);yield uu(n,e,!0,!1)}),_l.apply(this,arguments)}function uu(i,e,n,o){return yl.apply(this,arguments)}function yl(){return yl=(0,d.Z)(function*(i,e,n,o){const u=yield La(i.localStore,po(e)),c=u.targetId,p=n?i.sharedClientState.addLocalQueryTarget(c):"not-current";let A;return o&&(A=yield sg(i,e,c,"current"===p,u.resumeToken)),i.isPrimaryClient&&n&&ef(i.remoteStore,u),A}),yl.apply(this,arguments)}function sg(i,e,n,o,u){return og.apply(this,arguments)}function og(){return og=(0,d.Z)(function*(i,e,n,o,u){i.Na=(ie,Re,Ze)=>{return(bt=(0,d.Z)(function*(Ut,yn,Qn,fn){let gr=yn.view.Ta(Qn);gr.Xi&&(gr=yield Zh(Ut.localStore,yn.query,!1).then(({documents:da})=>yn.view.Ta(da,gr)));const Ci=fn&&fn.targetChanges.get(yn.targetId),ti=fn&&null!=fn.targetMismatches.get(yn.targetId),Hs=yn.view.applyChanges(gr,Ut.isPrimaryClient,Ci,ti);return gf(Ut,yn.targetId,Hs.Va),Hs.snapshot}),function Ht(Ut,yn,Qn,fn){return bt.apply(this,arguments)})(i,ie,Re,Ze);var bt};const c=yield Zh(i.localStore,e,!0),p=new f_(e,c.hs),A=p.Ta(c.documents),P=Pc.createSynthesizedTargetChangeForCurrentChange(n,o&&"Offline"!==i.onlineState,u),B=p.applyChanges(A,i.isPrimaryClient,P);gf(i,n,B.Va);const Q=new p_(e,n,p);return i.wa.set(e,Q),i.Sa.has(n)?i.Sa.get(n).push(e):i.Sa.set(n,[e]),B.snapshot}),og.apply(this,arguments)}function __(i,e,n){return cf.apply(this,arguments)}function cf(){return cf=(0,d.Z)(function*(i,e,n){const o=pt(i),u=o.wa.get(e),c=o.Sa.get(u.targetId);if(c.length>1)return o.Sa.set(u.targetId,c.filter(p=>!wu(p,e))),void o.wa.delete(e);o.isPrimaryClient?(o.sharedClientState.removeLocalQueryTarget(u.targetId),o.sharedClientState.isActiveQueryTarget(u.targetId)||(yield hl(o.localStore,u.targetId,!1).then(()=>{o.sharedClientState.clearQueryState(u.targetId),n&&Pu(o.remoteStore,u.targetId),Nu(o,u.targetId)}).catch(ln))):(Nu(o,u.targetId),yield hl(o.localStore,u.targetId,!0))}),cf.apply(this,arguments)}function ag(i,e){return rc.apply(this,arguments)}function rc(){return rc=(0,d.Z)(function*(i,e){const n=pt(i),o=n.wa.get(e),u=n.Sa.get(o.targetId);n.isPrimaryClient&&1===u.length&&(n.sharedClientState.removeLocalQueryTarget(o.targetId),Pu(n.remoteStore,o.targetId))}),rc.apply(this,arguments)}function hf(){return hf=(0,d.Z)(function*(i,e,n){const o=_g(i);try{const u=yield function(p,A){const P=pt(p),B=Gt.now(),Q=A.reduce((Ze,bt)=>Ze.add(bt.key),m());let ie,Re;return P.persistence.runTransaction("Locally write mutations","readwrite",Ze=>{let bt=js(),Ht=m();return P.os.getEntries(Ze,Q).next(Ut=>{bt=Ut,bt.forEach((yn,Qn)=>{Qn.isValidDocument()||(Ht=Ht.add(yn))})}).next(()=>P.localDocuments.getOverlayedDocuments(Ze,bt)).next(Ut=>{ie=Ut;const yn=[];for(const Qn of A){const fn=lm(Qn,ie.get(Qn.key).overlayedDocument);null!=fn&&yn.push(new tu(Qn.key,fn,yh(fn.value.mapValue),xi.exists(!0)))}return P.mutationQueue.addMutationBatch(Ze,B,yn,A)}).next(Ut=>{Re=Ut;const yn=Ut.applyToLocalDocumentSet(ie,Ht);return P.documentOverlayCache.saveOverlays(Ze,Ut.batchId,yn)})}).then(()=>({batchId:Re.batchId,changes:yd(ie)}))}(o.localStore,e);o.sharedClientState.addPendingMutation(u.batchId),function(p,A,P){let B=p.Fa[p.currentUser.toKey()];B||(B=new pi(bn)),B=B.insert(A,P),p.Fa[p.currentUser.toKey()]=B}(o,u.batchId,n),yield lu(o,u.changes),yield Gc(o.remoteStore)}catch(u){const c=So(u,"Failed to persist write");n.reject(c)}}),hf.apply(this,arguments)}function ug(i,e){return lg.apply(this,arguments)}function lg(){return lg=(0,d.Z)(function*(i,e){const n=pt(i);try{const o=yield function Mp(i,e){const n=pt(i),o=e.snapshotVersion;let u=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const p=n.os.newChangeBuffer({trackRemovals:!0});u=n.ns;const A=[];e.targetChanges.forEach((Q,ie)=>{const Re=u.get(ie);if(!Re)return;A.push(n.Qr.removeMatchingKeys(c,Q.removedDocuments,ie).next(()=>n.Qr.addMatchingKeys(c,Q.addedDocuments,ie)));let Ze=Re.withSequenceNumber(c.currentSequenceNumber);var Ht,Ut,yn;null!==e.targetMismatches.get(ie)?Ze=Ze.withResumeToken(Bi.EMPTY_BYTE_STRING,en.min()).withLastLimboFreeSnapshotVersion(en.min()):Q.resumeToken.approximateByteSize()>0&&(Ze=Ze.withResumeToken(Q.resumeToken,o)),u=u.insert(ie,Ze),Ut=Ze,yn=Q,(0===(Ht=Re).resumeToken.approximateByteSize()||Ut.snapshotVersion.toMicroseconds()-Ht.snapshotVersion.toMicroseconds()>=3e8||yn.addedDocuments.size+yn.modifiedDocuments.size+yn.removedDocuments.size>0)&&A.push(n.Qr.updateTargetData(c,Ze))});let P=js(),B=m();if(e.documentUpdates.forEach(Q=>{e.resolvedLimboDocuments.has(Q)&&A.push(n.persistence.referenceDelegate.updateLimboDocument(c,Q))}),A.push(kd(c,p,e.documentUpdates).next(Q=>{P=Q.cs,B=Q.ls})),!o.isEqual(en.min())){const Q=n.Qr.getLastRemoteSnapshotVersion(c).next(ie=>n.Qr.setTargetsMetadata(c,c.currentSequenceNumber,o));A.push(Q)}return Te.waitFor(A).next(()=>p.apply(c)).next(()=>n.localDocuments.getLocalViewOfDocuments(c,P,B)).next(()=>P)}).then(c=>(n.ns=u,c))}(n.localStore,e);e.targetChanges.forEach((u,c)=>{const p=n.Ca.get(c);p&&(qt(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?p.pa=!0:u.modifiedDocuments.size>0?qt(p.pa):u.removedDocuments.size>0&&(qt(p.pa),p.pa=!1))}),yield lu(n,o,e)}catch(o){yield ln(o)}}),lg.apply(this,arguments)}function y_(i,e,n){const o=pt(i);if(o.isPrimaryClient&&0===n||!o.isPrimaryClient&&1===n){const u=[];o.wa.forEach((c,p)=>{const A=p.view.G_(e);A.snapshot&&u.push(A.snapshot)}),function(p,A){const P=pt(p);P.onlineState=A;let B=!1;P.queries.forEach((Q,ie)=>{for(const Re of ie.Q_)Re.G_(A)&&(B=!0)}),B&&Xp(P)}(o.eventManager,e),u.length&&o.ya.u_(u),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}function ov(i,e,n){return cg.apply(this,arguments)}function cg(){return cg=(0,d.Z)(function*(i,e,n){const o=pt(i);o.sharedClientState.updateQueryState(e,"rejected",n);const u=o.Ca.get(e),c=u&&u.key;if(c){let p=new pi(Ft.comparator);p=p.insert(c,ai.newNoDocument(c,en.min()));const A=m().add(c),P=new Rc(en.min(),new Map,new pi(bn),p,A);yield ug(o,P),o.Da=o.Da.remove(c),o.Ca.delete(e),mf(o)}else yield hl(o.localStore,e,!1).then(()=>Nu(o,e,n)).catch(ln)}),cg.apply(this,arguments)}function v_(i,e){return E_.apply(this,arguments)}function E_(){return E_=(0,d.Z)(function*(i,e){const n=pt(i),o=e.batch.batchId;try{const u=yield function Kh(i,e){const n=pt(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const u=e.batch.keys(),c=n.os.newChangeBuffer({trackRemovals:!0});return function(A,P,B,Q){const ie=B.batch,Re=ie.keys();let Ze=Te.resolve();return Re.forEach(bt=>{Ze=Ze.next(()=>Q.getEntry(P,bt)).next(Ht=>{const Ut=B.docVersions.get(bt);qt(null!==Ut),Ht.version.compareTo(Ut)<0&&(ie.applyToRemoteDocument(Ht,B),Ht.isValidDocument()&&(Ht.setReadTime(B.commitVersion),Q.addEntry(Ht)))})}),Ze.next(()=>A.mutationQueue.removeMutationBatch(P,ie))}(n,o,e,c).next(()=>c.apply(o)).next(()=>n.mutationQueue.performConsistencyCheck(o)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(o,u,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,function(A){let P=m();for(let B=0;B<A.mutationResults.length;++B)A.mutationResults[B].transformResults.length>0&&(P=P.add(A.batch.mutations[B].key));return P}(e))).next(()=>n.localDocuments.getDocuments(o,u))})}(n.localStore,e);w_(n,o,null),pf(n,o),n.sharedClientState.updateMutationState(o,"acknowledged"),yield lu(n,u)}catch(u){yield ln(u)}}),E_.apply(this,arguments)}function av(i,e,n){return I_.apply(this,arguments)}function I_(){return I_=(0,d.Z)(function*(i,e,n){const o=pt(i);try{const u=yield function(p,A){const P=pt(p);return P.persistence.runTransaction("Reject batch","readwrite-primary",B=>{let Q;return P.mutationQueue.lookupMutationBatch(B,A).next(ie=>(qt(null!==ie),Q=ie.keys(),P.mutationQueue.removeMutationBatch(B,ie))).next(()=>P.mutationQueue.performConsistencyCheck(B)).next(()=>P.documentOverlayCache.removeOverlaysForBatchId(B,Q,A)).next(()=>P.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(B,Q)).next(()=>P.localDocuments.getDocuments(B,Q))})}(o.localStore,e);w_(o,e,n),pf(o,e),o.sharedClientState.updateMutationState(e,"rejected",n),yield lu(o,u)}catch(u){yield ln(u)}}),I_.apply(this,arguments)}function ff(){return ff=(0,d.Z)(function*(i,e){const n=pt(i);Va(n.remoteStore)||at("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(p){const A=pt(p);return A.persistence.runTransaction("Get highest unacknowledged batch id","readonly",P=>A.mutationQueue.getHighestUnacknowledgedBatchId(P))}(n.localStore);if(-1===o)return void e.resolve();const u=n.Ma.get(o)||[];u.push(e),n.Ma.set(o,u)}catch(o){const u=So(o,"Initialization of waitForPendingWrites() operation failed");e.reject(u)}}),ff.apply(this,arguments)}function pf(i,e){(i.Ma.get(e)||[]).forEach(n=>{n.resolve()}),i.Ma.delete(e)}function w_(i,e,n){const o=pt(i);let u=o.Fa[o.currentUser.toKey()];if(u){const c=u.get(e);c&&(n?c.reject(n):c.resolve(),u=u.remove(e)),o.Fa[o.currentUser.toKey()]=u}}function Nu(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const o of i.Sa.get(e))i.wa.delete(o),n&&i.ya.La(o,n);i.Sa.delete(e),i.isPrimaryClient&&i.va.Vr(e).forEach(o=>{i.va.containsKey(o)||dg(i,o)})}function dg(i,e){i.ba.delete(e.path.canonicalString());const n=i.Da.get(e);null!==n&&(Pu(i.remoteStore,n),i.Da=i.Da.remove(e),i.Ca.delete(n),mf(i))}function gf(i,e,n){for(const o of n)o instanceof ng?(i.va.addReference(o.key,e),uv(i,o)):o instanceof rg?(at("SyncEngine","Document no longer in limbo: "+o.key),i.va.removeReference(o.key,e),i.va.containsKey(o.key)||dg(i,o.key)):At()}function uv(i,e){const n=e.key,o=n.path.canonicalString();i.Da.get(n)||i.ba.has(o)||(at("SyncEngine","New document in limbo: "+n),i.ba.add(o),mf(i))}function mf(i){for(;i.ba.size>0&&i.Da.size<i.maxConcurrentLimboResolutions;){const e=i.ba.values().next().value;i.ba.delete(e);const n=new Ft(ir.fromString(e)),o=i.xa.next();i.Ca.set(o,new g_(n)),i.Da=i.Da.insert(n,o),ef(i.remoteStore,new nu(po(Iu(n.path)),o,"TargetPurposeLimboResolution",Oi._e))}}function lu(i,e,n){return Zn.apply(this,arguments)}function Zn(){return Zn=(0,d.Z)(function*(i,e,n){const o=pt(i),u=[],c=[],p=[];var A;o.wa.isEmpty()||(o.wa.forEach((A,P)=>{p.push(o.Na(P,e,n).then(B=>{if((B||n)&&o.isPrimaryClient&&o.sharedClientState.updateQueryState(P.targetId,B?.fromCache?"not-current":"current"),B){u.push(B);const Q=bp.Ki(P.targetId,B);c.push(Q)}}))}),yield Promise.all(p),o.ya.u_(u),yield(A=(0,d.Z)(function*(B,Q){const ie=pt(B);try{yield ie.persistence.runTransaction("notifyLocalViewChanges","readwrite",Re=>Te.forEach(Q,Ze=>Te.forEach(Ze.qi,bt=>ie.persistence.referenceDelegate.addReference(Re,Ze.targetId,bt)).next(()=>Te.forEach(Ze.Qi,bt=>ie.persistence.referenceDelegate.removeReference(Re,Ze.targetId,bt)))))}catch(Re){if(!fr(Re))throw Re;at("LocalStore","Failed to update sequence numbers: "+Re)}for(const Re of Q){const Ze=Re.targetId;if(!Re.fromCache){const bt=ie.ns.get(Ze),Ut=bt.withLastLimboFreeSnapshotVersion(bt.snapshotVersion);ie.ns=ie.ns.insert(Ze,Ut)}}}),function P(B,Q){return A.apply(this,arguments)})(o.localStore,c))}),Zn.apply(this,arguments)}function T_(i,e){return _f.apply(this,arguments)}function _f(){return _f=(0,d.Z)(function*(i,e){const n=pt(i);if(!n.currentUser.isEqual(e)){at("SyncEngine","User change. New user:",e.toKey());const o=yield Wm(n.localStore,e);n.currentUser=e,(c=n).Ma.forEach(A=>{A.forEach(P=>{P.reject(new ft(Qe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),c.Ma.clear(),n.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),yield lu(n,o.us)}var c}),_f.apply(this,arguments)}function Wc(i,e){const n=pt(i),o=n.Ca.get(e);if(o&&o.pa)return m().add(o.key);{let u=m();const c=n.Sa.get(e);if(!c)return u;for(const p of c){const A=n.wa.get(p);u=u.unionWith(A.view.Ia)}return u}}function D_(i,e){return hg.apply(this,arguments)}function hg(){return hg=(0,d.Z)(function*(i,e){const n=pt(i),o=yield Zh(n.localStore,e.query,!0),u=e.view.fa(o);return n.isPrimaryClient&&gf(n,e.targetId,u.Va),u}),hg.apply(this,arguments)}function yf(i,e){return vl.apply(this,arguments)}function vl(){return vl=(0,d.Z)(function*(i,e){const n=pt(i);return Xl(n.localStore,e).then(o=>lu(n,o))}),vl.apply(this,arguments)}function fg(i,e,n,o){return ic.apply(this,arguments)}function ic(){return ic=(0,d.Z)(function*(i,e,n,o){const u=pt(i),c=yield function(A,P){const B=pt(A),Q=pt(B.mutationQueue);return B.persistence.runTransaction("Lookup mutation documents","readonly",ie=>Q.vn(ie,P).next(Re=>Re?B.localDocuments.getDocuments(ie,Re):Te.resolve(null)))}(u.localStore,e);var P;null!==c?("pending"===n?yield Gc(u.remoteStore):"acknowledged"===n||"rejected"===n?(w_(u,e,o||null),pf(u,e),P=e,pt(pt(u.localStore).mutationQueue).Mn(P)):At(),yield lu(u,c)):at("SyncEngine","Cannot apply mutation batch with id: "+e)}),ic.apply(this,arguments)}function Wd(){return Wd=(0,d.Z)(function*(i,e){const n=pt(i);if(If(n),_g(n),!0===e&&!0!==n.Oa){const o=n.sharedClientState.getAllActiveQueryTargets(),u=yield vf(n,o.toArray());n.Oa=!0,yield Kp(n.remoteStore,!0);for(const c of u)ef(n.remoteStore,c)}else if(!1===e&&!1!==n.Oa){const o=[];let u=Promise.resolve();n.Sa.forEach((c,p)=>{n.sharedClientState.isLocalQueryTarget(p)?o.push(p):u=u.then(()=>(Nu(n,p),hl(n.localStore,p,!0))),Pu(n.remoteStore,p)}),yield u,yield vf(n,o),function(p){const A=pt(p);A.Ca.forEach((P,B)=>{Pu(A.remoteStore,B)}),A.va.mr(),A.Ca=new Map,A.Da=new pi(Ft.comparator)}(n),n.Oa=!1,yield Kp(n.remoteStore,!1)}}),Wd.apply(this,arguments)}function vf(i,e,n){return qd.apply(this,arguments)}function qd(){return qd=(0,d.Z)(function*(i,e,n){const o=pt(i),u=[],c=[];for(const p of e){let A;const P=o.Sa.get(p);if(P&&0!==P.length){A=yield La(o.localStore,po(P[0]));for(const B of P){const Q=o.wa.get(B),ie=yield D_(o,Q);ie.snapshot&&c.push(ie.snapshot)}}else{const B=yield Op(o.localStore,p);A=yield La(o.localStore,B),yield sg(o,pg(B),p,!1,A.resumeToken)}u.push(A)}return o.ya.u_(c),u}),qd.apply(this,arguments)}function pg(i){return Eu(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function gg(i){return n=pt(i).localStore,pt(pt(n).persistence).Bi();var n}function lv(i,e,n,o){return mg.apply(this,arguments)}function mg(){return mg=(0,d.Z)(function*(i,e,n,o){const u=pt(i);if(u.Oa)return void at("SyncEngine","Ignoring unexpected query state notification.");const c=u.Sa.get(e);if(c&&c.length>0)switch(n){case"current":case"not-current":{const p=yield Xl(u.localStore,Ll(c[0])),A=Rc.createSynthesizedRemoteEventForCurrentChange(e,"current"===n,Bi.EMPTY_BYTE_STRING);yield lu(u,p,A);break}case"rejected":yield hl(u.localStore,e,!0),Nu(u,e,o);break;default:At()}}),mg.apply(this,arguments)}function cv(i,e,n){return Ef.apply(this,arguments)}function Ef(){return Ef=(0,d.Z)(function*(i,e,n){const o=If(i);if(o.Oa){for(const u of e){if(o.Sa.has(u)&&o.sharedClientState.isActiveQueryTarget(u)){at("SyncEngine","Adding an already active target "+u);continue}const c=yield Op(o.localStore,u),p=yield La(o.localStore,c);yield sg(o,pg(c),p.targetId,!1,p.resumeToken),ef(o.remoteStore,p)}for(const u of n)o.Sa.has(u)&&(yield hl(o.localStore,u,!1).then(()=>{Pu(o.remoteStore,u),Nu(o,u)}).catch(ln))}}),Ef.apply(this,arguments)}function If(i){const e=pt(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=ug.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Wc.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ov.bind(null,e),e.ya.u_=au.bind(null,e.eventManager),e.ya.La=c_.bind(null,e.eventManager),e}function _g(i){const e=pt(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=v_.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=av.bind(null,e),e}class Kd{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return(0,d.Z)(function*(){n.serializer=tc(e.databaseInfo.databaseId),n.sharedClientState=n.createSharedClientState(e),n.persistence=n.createPersistence(e),yield n.persistence.start(),n.localStore=n.createLocalStore(e),n.gcScheduler=n.createGarbageCollectionScheduler(e,n.localStore),n.indexBackfillerScheduler=n.createIndexBackfillerScheduler(e,n.localStore)})()}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return dl(this.persistence,new Pp,e.initialUser,this.serializer)}createPersistence(e){return new Jl(Nd.Hr,this.serializer)}createSharedClientState(e){return new Vd}terminate(){var e=this;return(0,d.Z)(function*(){var n,o;null===(n=e.gcScheduler)||void 0===n||n.stop(),null===(o=e.indexBackfillerScheduler)||void 0===o||o.stop(),e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class wf extends Kd{constructor(e,n,o){super(),this.ka=e,this.cacheSizeBytes=n,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(e){var n=()=>super.initialize,o=this;return(0,d.Z)(function*(){yield n().call(o,e),yield o.ka.initialize(o,e),yield _g(o.ka.syncEngine),yield Gc(o.ka.remoteStore),yield o.persistence.fi(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(),o.indexBackfillerScheduler&&!o.indexBackfillerScheduler.started&&o.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return dl(this.persistence,new Pp,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){return new Hy(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const o=new wo(n,this.persistence);return new Io(e.asyncQueue,o)}createPersistence(e){const n=Od(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?Ao.withCacheSize(this.cacheSizeBytes):Ao.DEFAULT;return new qh(this.synchronizeTabs,n,e.clientId,o,e.asyncQueue,ec(),Uc(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Vd}}class S_ extends wf{constructor(e,n){super(e,n,!1),this.ka=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){var n=()=>super.initialize,o=this;return(0,d.Z)(function*(){yield n().call(o,e);const u=o.ka.syncEngine;o.sharedClientState instanceof Ym&&(o.sharedClientState.syncEngine={Zs:fg.bind(null,u),Xs:lv.bind(null,u),eo:cv.bind(null,u),Bi:gg.bind(null,u),Ys:yf.bind(null,u)},yield o.sharedClientState.start()),yield o.persistence.fi(function(){var c=(0,d.Z)(function*(p){yield function C_(i,e){return Wd.apply(this,arguments)}(o.ka.syncEngine,p),o.gcScheduler&&(p&&!o.gcScheduler.started?o.gcScheduler.start():p||o.gcScheduler.stop()),o.indexBackfillerScheduler&&(p&&!o.indexBackfillerScheduler.started?o.indexBackfillerScheduler.start():p||o.indexBackfillerScheduler.stop())});return function(p){return c.apply(this,arguments)}}())})()}createSharedClientState(e){const n=ec();if(!Ym.D(n))throw new ft(Qe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=Od(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Ym(n,e.asyncQueue,o,e.clientId,e.initialUser)}}class qc{initialize(e,n){var o=this;return(0,d.Z)(function*(){o.localStore||(o.localStore=e.localStore,o.sharedClientState=e.sharedClientState,o.datastore=o.createDatastore(n),o.remoteStore=o.createRemoteStore(n),o.eventManager=o.createEventManager(n),o.syncEngine=o.createSyncEngine(n,!e.synchronizeTabs),o.sharedClientState.onlineStateHandler=u=>y_(o.syncEngine,u,1),o.remoteStore.remoteSyncer.handleCredentialChange=T_.bind(null,o.syncEngine),yield Kp(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Qp}createDatastore(e){const n=tc(e.databaseInfo.databaseId),o=new Xh(e.databaseInfo);return new Qy(e.authCredentials,e.appCheckCredentials,o,n)}createRemoteStore(e){return o=this.localStore,u=this.datastore,c=e.asyncQueue,p=n=>y_(this.syncEngine,n,0),A=Jh.D()?new Jh:new Ky,new Hp(o,u,c,p,A);var o,u,c,p,A}createSyncEngine(e,n){return function(u,c,p,A,P,B,Q){const ie=new iv(u,c,p,A,P,B);return Q&&(ie.Oa=!0),ie}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){var e=this;return(0,d.Z)(function*(){var n,o;yield(o=(0,d.Z)(function*(c){const p=pt(c);at("RemoteStore","RemoteStore shutting down."),p.v_.add(5),yield $c(p),p.M_.shutdown(),p.x_.set("Unknown")}),function u(c){return o.apply(this,arguments)})(e.remoteStore),null===(n=e.datastore)||void 0===n||n.terminate()})()}}function Qo(i,e=10240){let n=0;return{read:()=>(0,d.Z)(function*(){if(n<i.byteLength){const o={value:i.slice(n,n+e),done:!1};return n+=e,o}return{done:!0}})(),cancel:()=>(0,d.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Tf{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.qa(this.observer.next,e)}error(e){this.observer.error?this.qa(this.observer.error,e):yr("Uncaught Error in snapshot listener:",e.toString())}Qa(){this.muted=!0}qa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class hv{constructor(e,n){this.Ka=e,this.serializer=n,this.metadata=new Cr,this.buffer=new Uint8Array,this.$a=new TextDecoder("utf-8"),this.Ua().then(o=>{o&&o.ra()?this.metadata.resolve(o.na.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(o?.na)}`))},o=>this.metadata.reject(o))}close(){return this.Ka.cancel()}getMetadata(){var e=this;return(0,d.Z)(function*(){return e.metadata.promise})()}Ba(){var e=this;return(0,d.Z)(function*(){return yield e.getMetadata(),e.Ua()})()}Ua(){var e=this;return(0,d.Z)(function*(){const n=yield e.Wa();if(null===n)return null;const o=e.$a.decode(n),u=Number(o);isNaN(u)&&e.Ga(`length string (${o}) is not valid number`);const c=yield e.za(u);return new tg(JSON.parse(c),n.length+u)})()}ja(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Wa(){var e=this;return(0,d.Z)(function*(){for(;e.ja()<0&&!(yield e.Ha()););if(0===e.buffer.length)return null;const n=e.ja();n<0&&e.Ga("Reached the end of bundle when a length string is expected.");const o=e.buffer.slice(0,n);return e.buffer=e.buffer.slice(n),o})()}za(e){var n=this;return(0,d.Z)(function*(){for(;n.buffer.length<e;)(yield n.Ha())&&n.Ga("Reached the end of bundle when more is expected.");const o=n.$a.decode(n.buffer.slice(0,e));return n.buffer=n.buffer.slice(e),o})()}Ga(e){throw this.Ka.cancel(),new Error(`Invalid bundle format: ${e}`)}Ha(){var e=this;return(0,d.Z)(function*(){const n=yield e.Ka.read();if(!n.done){const o=new Uint8Array(e.buffer.length+n.value.length);o.set(e.buffer),o.set(n.value,e.buffer.length),e.buffer=o}return n.done})()}}class WE{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var n=this;return(0,d.Z)(function*(){if(n.ensureCommitNotCalled(),n.mutations.length>0)throw n.lastTransactionError=new ft(Qe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),n.lastTransactionError;const o=yield(u=(0,d.Z)(function*(p,A){const P=pt(p),B={documents:A.map(Ze=>Nc(P.serializer,Ze))},Q=yield P.vo("BatchGetDocuments",P.serializer.databaseId,ir.emptyPath(),B,A.length),ie=new Map;Q.forEach(Ze=>{const bt=function Fy(i,e){return"found"in e?function(o,u){qt(!!u.found);const c=va(o,u.found.name),p=ds(u.found.updateTime),A=u.found.createTime?ds(u.found.createTime):en.min(),P=new rs({mapValue:{fields:u.found.fields}});return ai.newFoundDocument(c,p,A,P)}(i,e):"missing"in e?function(o,u){qt(!!u.missing),qt(!!u.readTime);const c=va(o,u.missing),p=ds(u.readTime);return ai.newNoDocument(c,p)}(i,e):At()}(P.serializer,Ze);ie.set(bt.key.toString(),bt)});const Re=[];return A.forEach(Ze=>{const bt=ie.get(Ze.toString());qt(!!bt),Re.push(bt)}),Re}),function c(p,A){return u.apply(this,arguments)})(n.datastore,e);var u;return o.forEach(u=>n.recordVersion(u)),o})()}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(o){this.lastTransactionError=o}this.writtenDocs.add(e.toString())}delete(e){this.write(new Tu(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,d.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const n=e.readVersions;var o;e.mutations.forEach(o=>{n.delete(o.key.toString())}),n.forEach((o,u)=>{const c=Ft.fromPath(u);e.mutations.push(new Jf(c,e.precondition(c)))}),yield(o=(0,d.Z)(function*(c,p){const A=pt(c),P={writes:p.map(B=>rl(A.serializer,B))};yield A.So("Commit",A.serializer.databaseId,ir.emptyPath(),P)}),function u(c,p){return o.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw At();n=en.min()}const o=this.readVersions.get(e.key.toString());if(o){if(!n.isEqual(o))throw new ft(Qe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(en.min())?xi.exists(!1):xi.updateTime(n):xi.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(en.min()))throw new ft(Qe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return xi.updateTime(n)}return xi.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class yg{constructor(e,n,o,u,c){this.asyncQueue=e,this.datastore=n,this.options=o,this.updateFunction=u,this.deferred=c,this.Ja=o.maxAttempts,this.jo=new Bc(this.asyncQueue,"transaction_retry")}Ya(){this.Ja-=1,this.Za()}Za(){var e=this;this.jo.qo((0,d.Z)(function*(){const n=new WE(e.datastore),o=e.Xa(n);o&&o.then(u=>{e.asyncQueue.enqueueAndForget(()=>n.commit().then(()=>{e.deferred.resolve(u)}).catch(c=>{e.eu(c)}))}).catch(u=>{e.eu(u)})}))}Xa(e){try{const n=this.updateFunction(e);return!Fo(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}eu(e){this.Ja>0&&this.tu(e)?(this.Ja-=1,this.asyncQueue.enqueueAndForget(()=>(this.Za(),Promise.resolve()))):this.deferred.reject(e)}tu(e){if("FirebaseError"===e.name){const n=e.code;return"aborted"===n||"failed-precondition"===n||"already-exists"===n||!np(n)}return!1}}class b_{constructor(e,n,o,u){var c=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=o,this.databaseInfo=u,this.user=Yt.UNAUTHENTICATED,this.clientId=pu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var p=(0,d.Z)(function*(A){at("FirestoreClient","Received user=",A.uid),yield c.authCredentialListener(A),c.user=A});return function(A){return p.apply(this,arguments)}}()),this.appCheckCredentials.start(o,p=>(at("FirestoreClient","Received new app check token=",p),this.appCheckCredentialListener(p,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ft(Qe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new Cr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,d.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(o){const u=So(o,"Failed to shutdown persistence");n.reject(u)}})),n.promise}}function Df(i,e){return vg.apply(this,arguments)}function vg(){return vg=(0,d.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),at("FirestoreClient","Initializing OfflineComponentProvider");const n=i.configuration;yield e.initialize(n);let o=n.initialUser;i.setCredentialChangeListener(function(){var u=(0,d.Z)(function*(c){o.isEqual(c)||(yield Wm(e.localStore,c),o=c)});return function(c){return u.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}),vg.apply(this,arguments)}function Eg(i,e){return Cf.apply(this,arguments)}function Cf(){return Cf=(0,d.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const n=yield Ig(i);at("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,i.configuration),i.setCredentialChangeListener(o=>u_(e.remoteStore,o)),i.setAppCheckTokenChangeListener((o,u)=>u_(e.remoteStore,u)),i._onlineComponents=e}),Cf.apply(this,arguments)}function R_(i){return"FirebaseError"===i.name?i.code===Qe.FAILED_PRECONDITION||i.code===Qe.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code}function Ig(i){return Zd.apply(this,arguments)}function Zd(){return Zd=(0,d.Z)(function*(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){at("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Df(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!R_(n))throw n;xr("Error using user provided cache. Falling back to memory cache: "+n),yield Df(i,new Kd)}}else at("FirestoreClient","Using default OfflineComponentProvider"),yield Df(i,new Kd);return i._offlineComponents}),Zd.apply(this,arguments)}function Af(i){return wg.apply(this,arguments)}function wg(){return wg=(0,d.Z)(function*(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(at("FirestoreClient","Using user provided OnlineComponentProvider"),yield Eg(i,i._uninitializedComponentsProvider._online)):(at("FirestoreClient","Using default OnlineComponentProvider"),yield Eg(i,new qc))),i._onlineComponents}),wg.apply(this,arguments)}function P_(i){return Ig(i).then(e=>e.persistence)}function Kc(i){return Ig(i).then(e=>e.localStore)}function M_(i){return Af(i).then(e=>e.remoteStore)}function Ia(i){return Af(i).then(e=>e.syncEngine)}function Zc(i){return bf.apply(this,arguments)}function bf(){return bf=(0,d.Z)(function*(i){const e=yield Af(i),n=e.eventManager;return n.onListen=sv.bind(null,e.syncEngine),n.onUnlisten=__.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=m_.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=ag.bind(null,e.syncEngine),n}),bf.apply(this,arguments)}function Qd(i,e,n={}){const o=new Cr;return i.asyncQueue.enqueueAndForget((0,d.Z)(function*(){return function(c,p,A,P,B){const Q=new Tf({next:Re=>{p.enqueueAndForget(()=>Jp(c,ie));const Ze=Re.docs.has(A);!Ze&&Re.fromCache?B.reject(new ft(Qe.UNAVAILABLE,"Failed to get document because the client is offline.")):Ze&&Re.fromCache&&P&&"server"===P.source?B.reject(new ft(Qe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):B.resolve(Re)},error:Re=>B.reject(Re)}),ie=new eg(Iu(A.path),Q,{includeMetadataChanges:!0,ta:!0});return Yp(c,ie)}(yield Zc(i),i.asyncQueue,e,n,o)})),o.promise}function pv(i,e,n={}){const o=new Cr;return i.asyncQueue.enqueueAndForget((0,d.Z)(function*(){return function(c,p,A,P,B){const Q=new Tf({next:Re=>{p.enqueueAndForget(()=>Jp(c,ie)),Re.fromCache&&"server"===P.source?B.reject(new ft(Qe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):B.resolve(Re)},error:Re=>B.reject(Re)}),ie=new eg(A,Q,{includeMetadataChanges:!0,ta:!0});return Yp(c,ie)}(yield Zc(i),i.asyncQueue,e,n,o)})),o.promise}function V_(i){const e={};return void 0!==i.timeoutSeconds&&(e.timeoutSeconds=i.timeoutSeconds),e}const U_=new Map;function Yd(i,e,n){if(!n)throw new ft(Qe.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function B_(i,e,n,o){if(!0===e&&!0===o)throw new ft(Qe.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function Cg(i){if(!Ft.isDocumentKey(i))throw new ft(Qe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function j_(i){if(Ft.isDocumentKey(i))throw new ft(Qe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function sc(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(o=i).constructor?o.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var o;return"function"==typeof i?"a function":At()}function pr(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new ft(Qe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=sc(i);throw new ft(Qe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}function Ag(i,e){if(e<=0)throw new ft(Qe.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class Jd{constructor(e){var n,o;if(void 0===e.host){if(void 0!==e.ssl)throw new ft(Qe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ft(Qe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}B_("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=V_(null!==(o=e.experimentalLongPollingOptions)&&void 0!==o?o:{}),function(c){if(void 0!==c.timeoutSeconds){if(isNaN(c.timeoutSeconds))throw new ft(Qe.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new ft(Qe.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new ft(Qe.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Rf{constructor(e,n,o,u){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=o,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jd({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ft(Qe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ft(Qe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jd(e),void 0!==e.credentials&&(this._authCredentials=function(o){if(!o)return new $u;switch(o.type){case"firstParty":return new Pa(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new ft(Qe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const o=U_.get(n);o&&(at("ComponentProvider","Removing Datastore"),U_.delete(n),o.terminate())}(this),Promise.resolve()}}function $_(i,e,n,o={}){var u;const c=(i=pr(i,Rf))._getSettings(),p=`${e}:${n}`;if("firestore.googleapis.com"!==c.host&&c.host!==p&&xr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},c),{host:p,ssl:!1})),o.mockUserToken){let A,P;if("string"==typeof o.mockUserToken)A=o.mockUserToken,P=Yt.MOCK_USER;else{A=(0,ge.Sg)(o.mockUserToken,null===(u=i._app)||void 0===u?void 0:u.options.projectId);const B=o.mockUserToken.sub||o.mockUserToken.user_id;if(!B)throw new ft(Qe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");P=new Yt(B)}i._authCredentials=new Mi(new fu(A,P))}}class Js{constructor(e,n,o){this.converter=n,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new Js(this.firestore,e,this._query)}}class is{constructor(e,n,o){this.converter=n,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new is(this.firestore,e,this._key)}}class cu extends Js{constructor(e,n,o){super(e,n,Iu(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new is(this.firestore,null,new Ft(e))}withConverter(e){return new cu(this.firestore,e,this._path)}}function gv(i,e,...n){if(i=(0,ge.m9)(i),Yd("collection","path",e),i instanceof Rf){const o=ir.fromString(e,...n);return j_(o),new cu(i,null,o)}{if(!(i instanceof is||i instanceof cu))throw new ft(Qe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(ir.fromString(e,...n));return j_(o),new cu(i.firestore,null,o)}}function H_(i,e){if(i=pr(i,Rf),Yd("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ft(Qe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Js(i,null,(o=e,new la(ir.emptyPath(),o)));var o}function Sg(i,e,...n){if(i=(0,ge.m9)(i),1===arguments.length&&(e=pu.newId()),Yd("doc","path",e),i instanceof Rf){const o=ir.fromString(e,...n);return Cg(o),new is(i,null,new Ft(o))}{if(!(i instanceof is||i instanceof cu))throw new ft(Qe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(ir.fromString(e,...n));return Cg(o),new is(i.firestore,i instanceof cu?i.converter:null,new Ft(o))}}function Xd(i,e){return i=(0,ge.m9)(i),e=(0,ge.m9)(e),(i instanceof is||i instanceof cu)&&(e instanceof is||e instanceof cu)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function bg(i,e){return i=(0,ge.m9)(i),e=(0,ge.m9)(e),i instanceof Js&&e instanceof Js&&i.firestore===e.firestore&&wu(i._query,e._query)&&i.converter===e.converter}class z_{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new Bc(this,"async_queue_retry"),this.cu=()=>{const n=Uc();n&&at("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};const e=Uc();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.lu(),this.hu(e)}enterRestrictedMode(e){if(!this.iu){this.iu=!0,this.au=e||!1;const n=Uc();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.cu)}}enqueue(e){if(this.lu(),this.iu)return new Promise(()=>{});const n=new Cr;return this.hu(()=>this.iu&&this.au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ru.push(e),this.Pu()))}Pu(){var e=this;return(0,d.Z)(function*(){if(0!==e.ru.length){try{yield e.ru[0](),e.ru.shift(),e.jo.reset()}catch(n){if(!fr(n))throw n;at("AsyncQueue","Operation failed with retryable error: "+n)}e.ru.length>0&&e.jo.qo(()=>e.Pu())}})()}hu(e){const n=this.nu.then(()=>(this._u=!0,e().catch(o=>{throw this.ou=o,this._u=!1,yr("INTERNAL UNHANDLED ERROR: ",function(p){let A=p.message||"";return p.stack&&(A=p.stack.includes(p.message)?p.stack:p.message+"\n"+p.stack),A}(o)),o}).then(o=>(this._u=!1,o))));return this.nu=n,n}enqueueAfterDelay(e,n,o){this.lu(),this.uu.indexOf(e)>-1&&(n=0);const u=uf.createAndSchedule(this,e,n,o,c=>this.Iu(c));return this.su.push(u),u}lu(){this.ou&&At()}verifyOperationInProgress(){}Tu(){var e=this;return(0,d.Z)(function*(){let n;do{n=e.nu,yield n}while(n!==e.nu)})()}Eu(e){for(const n of this.su)if(n.timerId===e)return!0;return!1}du(e){return this.Tu().then(()=>{this.su.sort((n,o)=>n.targetTimeMs-o.targetTimeMs);for(const n of this.su)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.Tu()})}Au(e){this.uu.push(e)}Iu(e){const n=this.su.indexOf(e);this.su.splice(n,1)}}function Pf(i){return function(n,o){if("object"!=typeof n||null===n)return!1;const u=n;for(const c of["next","error","complete"])if(c in u&&"function"==typeof u[c])return!0;return!1}(i)}class mv{constructor(){this._progressObserver={},this._taskCompletionResolver=new Cr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,o){this._progressObserver={next:e,error:n,complete:o}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}const _v=-1;class ei extends Rf{constructor(e,n,o,u){super(e,n,o,u),this.type="firestore",this._queue=new z_,this._persistenceKey=u?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||G_(this),this._firestoreClient.terminate()}}function yv(i,e){const n="object"==typeof i?i:(0,ee.getApp)(),o="string"==typeof i?i:e||"(default)",u=(0,ee._getProvider)(n,"firestore").getImmediate({identifier:o});if(!u._initialized){const c=(0,ge.P0)("firestore");c&&$_(u,...c)}return u}function hs(i){return i._firestoreClient||G_(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function G_(i){var e,n,o;const u=i._freezeSettings(),c=(P=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new Ml(i._databaseId,P,i._persistenceKey,(Q=u).host,Q.ssl,Q.experimentalForceLongPolling,Q.experimentalAutoDetectLongPolling,V_(Q.experimentalLongPollingOptions),Q.useFetchStreams));var P,Q;i._firestoreClient=new b_(i._authCredentials,i._appCheckCredentials,i._queue,c),null!==(n=u.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(o=u.localCache)&&void 0!==o&&o._onlineComponentProvider&&(i._firestoreClient._uninitializedComponentsProvider={_offlineKind:u.localCache.kind,_offline:u.localCache._offlineComponentProvider,_online:u.localCache._onlineComponentProvider})}function vv(i,e){K_(i=pr(i,ei));const n=hs(i);if(n._uninitializedComponentsProvider)throw new ft(Qe.FAILED_PRECONDITION,"SDK cache is already specified.");xr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const o=i._freezeSettings(),u=new qc;return W_(n,u,new wf(u,o.cacheSizeBytes,e?.forceOwnership))}function Ev(i){K_(i=pr(i,ei));const e=hs(i);if(e._uninitializedComponentsProvider)throw new ft(Qe.FAILED_PRECONDITION,"SDK cache is already specified.");xr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=i._freezeSettings(),o=new qc;return W_(e,o,new S_(o,n.cacheSizeBytes))}function W_(i,e,n){const o=new Cr;return i.asyncQueue.enqueue((0,d.Z)(function*(){try{yield Df(i,n),yield Eg(i,e),o.resolve()}catch(u){const c=u;if(!R_(c))throw c;xr("Error enabling indexeddb cache. Falling back to memory cache: "+c),o.reject(c)}})).then(()=>o.promise)}function Iv(i){if(i._initialized&&!i._terminated)throw new ft(Qe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Cr;return i._queue.enqueueAndForgetEvenWhileRestricted((0,d.Z)(function*(){try{yield(n=(0,d.Z)(function*(u){if(!sr.D())return Promise.resolve();const c=u+"main";yield sr.delete(c)}),function o(u){return n.apply(this,arguments)})(Od(i._databaseId,i._persistenceKey)),e.resolve()}catch(n){e.reject(n)}var n})),e.promise}function q_(i){return function(n){const o=new Cr;return n.asyncQueue.enqueueAndForget((0,d.Z)(function*(){return function GE(i,e){return ff.apply(this,arguments)}(yield Ia(n),o)})),o.promise}(hs(i=pr(i,ei)))}function Rg(i){return function fv(i){return i.asyncQueue.enqueue((0,d.Z)(function*(){const e=yield P_(i),n=yield M_(i);return e.setNetworkEnabled(!0),function(u){const c=pt(u);return c.v_.delete(0),jc(c)}(n)}))}(hs(i=pr(i,ei)))}function wv(i){return function N_(i){return i.asyncQueue.enqueue((0,d.Z)(function*(){const e=yield P_(i),n=yield M_(i);return e.setNetworkEnabled(!1),(o=(0,d.Z)(function*(c){const p=pt(c);p.v_.add(0),yield $c(p),p.x_.set("Offline")}),function u(c){return o.apply(this,arguments)})(n);var o}))}(hs(i=pr(i,ei)))}function Tv(i,e){const n=hs(i=pr(i,ei)),o=new mv;return function k_(i,e,n,o){const u=function(p,A){let P;return P="string"==typeof p?Bo().encode(p):p,Q=function(Q,ie){if(Q instanceof Uint8Array)return Qo(Q,void 0);if(Q instanceof ArrayBuffer)return Qo(new Uint8Array(Q),void 0);if(Q instanceof ReadableStream)return Q.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(P),new hv(Q,A);var Q}(n,tc(e));i.asyncQueue.enqueueAndForget((0,d.Z)(function*(){!function dv(i,e,n){const o=pt(i);var u;(u=(0,d.Z)(function*(p,A,P){try{const B=yield A.getMetadata();if(yield function(bt,Ht){const Ut=pt(bt),yn=ds(Ht.createTime);return Ut.persistence.runTransaction("hasNewerBundle","readonly",Qn=>Ut.$r.getBundleMetadata(Qn,Ht.id)).then(Qn=>!!Qn&&Qn.createTime.compareTo(yn)>=0)}(p.localStore,B))return yield A.close(),P._completeWith({taskState:"Success",documentsLoaded:(bt=B).totalDocuments,bytesLoaded:bt.totalBytes,totalDocuments:bt.totalDocuments,totalBytes:bt.totalBytes}),Promise.resolve(new Set);P._updateProgress(lf(B));const Q=new rv(B,p.localStore,A.serializer);let ie=yield A.Ba();for(;ie;){const Ze=yield Q.sa(ie);Ze&&P._updateProgress(Ze),ie=yield A.Ba()}const Re=yield Q.complete();return yield lu(p,Re.aa,void 0),yield function(bt,Ht){const Ut=pt(bt);return Ut.persistence.runTransaction("Save bundle","readwrite",yn=>Ut.$r.saveBundleMetadata(yn,Ht))}(p.localStore,B),P._completeWith(Re.progress),Promise.resolve(Re._a)}catch(B){return xr("SyncEngine",`Loading bundle failed with ${B}`),P._failWith(B),Promise.resolve(new Set)}var bt}),function c(p,A,P){return u.apply(this,arguments)})(o,e,n).then(u=>{o.sharedClientState.notifyBundleLoaded(u)})}(yield Ia(i),u,o)}))}(n,i._databaseId,e,o),o}function Dv(i,e){return function F_(i,e){return i.asyncQueue.enqueue((0,d.Z)(function*(){return function(o,u){const c=pt(o);return c.persistence.runTransaction("Get named query","readonly",p=>c.$r.getNamedQuery(p,u))}(yield Kc(i),e)}))}(hs(i=pr(i,ei)),e).then(n=>n?new Js(i,null,n.query):null)}function K_(i){if(i._initialized||i._terminated)throw new ft(Qe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class El{constructor(e){this._byteString=e}static fromBase64String(e){try{return new El(Bi.fromBase64String(e))}catch(n){throw new ft(Qe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new El(Bi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Il{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new ft(Qe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class wl{constructor(e){this._methodName=e}}class Mf{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ft(Qe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ft(Qe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return bn(this._lat,e._lat)||bn(this._long,e._long)}}const KE=/^__.*__$/;class Z_{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return null!==this.fieldMask?new tu(e,this.data,this.fieldMask,n,this.fieldTransforms):new ka(e,this.data,n,this.fieldTransforms)}}class Mg{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return new tu(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Sv(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw At()}}class oc{constructor(e,n,o,u,c,p){this.settings=e,this.databaseId=n,this.serializer=o,this.ignoreUndefinedProperties=u,void 0===c&&this.Ru(),this.fieldTransforms=c||[],this.fieldMask=p||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}mu(e){return new oc(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}fu(e){var n;const o=null===(n=this.path)||void 0===n?void 0:n.child(e),u=this.mu({path:o,gu:!1});return u.pu(e),u}yu(e){var n;const o=null===(n=this.path)||void 0===n?void 0:n.child(e),u=this.mu({path:o,gu:!1});return u.Ru(),u}wu(e){return this.mu({path:void 0,gu:!0})}Su(e){return Fu(e,this.settings.methodName,this.settings.bu||!1,this.path,this.settings.Du)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}Ru(){if(this.path)for(let e=0;e<this.path.length;e++)this.pu(this.path.get(e))}pu(e){if(0===e.length)throw this.Su("Document fields must not be empty");if(Sv(this.Vu)&&KE.test(e))throw this.Su('Document fields cannot begin and end with "__"')}}class bv{constructor(e,n,o){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=o||tc(e)}Cu(e,n,o,u=!1){return new oc({Vu:e,methodName:n,Du:o,path:Yr.emptyPath(),gu:!1,bu:u},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ac(i){const e=i._freezeSettings(),n=tc(i._databaseId);return new bv(i._databaseId,!!e.ignoreUndefinedProperties,n)}function Qc(i,e,n,o,u,c={}){const p=i.Cu(c.merge||c.mergeFields?2:0,e,n,u);Tl("Data must be an object, but it was:",p,o);const A=cc(o,p);let P,B;if(c.merge)P=new fo(p.fieldMask),B=p.fieldTransforms;else if(c.mergeFields){const Q=[];for(const ie of c.mergeFields){const Re=du(e,ie,n);if(!p.contains(Re))throw new ft(Qe.INVALID_ARGUMENT,`Field '${Re}' is specified in your field mask but missing from your input data.`);Ng(Q,Re)||Q.push(Re)}P=new fo(Q),B=p.fieldTransforms.filter(ie=>P.covers(ie.field))}else P=null,B=p.fieldTransforms;return new Z_(new rs(A),P,B)}class th extends wl{_toFieldTransform(e){if(2!==e.Vu)throw e.Su(1===e.Vu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof th}}function Ua(i,e,n){return new oc({Vu:3,Du:e.settings.Du,methodName:i._methodName,gu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class uc extends wl{_toFieldTransform(e){return new $l(e.path,new cs)}isEqual(e){return e instanceof uc}}class Xs extends wl{constructor(e,n){super(e),this.vu=n}_toFieldTransform(e){const n=Ua(this,e,!0),o=this.vu.map(c=>wa(c,n)),u=new Uo(o);return new $l(e.path,u)}isEqual(e){return e instanceof Xs&&(0,ge.vZ)(this.vu,e.vu)}}class xu extends wl{constructor(e,n){super(e),this.vu=n}_toFieldTransform(e){const n=Ua(this,e,!0),o=this.vu.map(c=>wa(c,n)),u=new eu(o);return new $l(e.path,u)}isEqual(e){return e instanceof xu&&(0,ge.vZ)(this.vu,e.vu)}}class Yc extends wl{constructor(e,n){super(e),this.Fu=n}_toFieldTransform(e){const n=new Xu(e.serializer,Je(e.serializer,this.Fu));return new $l(e.path,n)}isEqual(e){return e instanceof Yc&&this.Fu===e.Fu}}function Yo(i,e,n,o){const u=i.Cu(1,e,n);Tl("Data must be an object, but it was:",u,o);const c=[],p=rs.empty();Lo(o,(P,B)=>{const Q=ku(e,P,n);B=(0,ge.m9)(B);const ie=u.yu(Q);if(B instanceof th)c.push(Q);else{const Re=wa(B,ie);null!=Re&&(c.push(Q),p.set(Q,Re))}});const A=new fo(c);return new Mg(p,A,u.fieldTransforms)}function nh(i,e,n,o,u,c){const p=i.Cu(1,e,n),A=[du(e,o,n)],P=[u];if(c.length%2!=0)throw new ft(Qe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Re=0;Re<c.length;Re+=2)A.push(du(e,c[Re])),P.push(c[Re+1]);const B=[],Q=rs.empty();for(let Re=A.length-1;Re>=0;--Re)if(!Ng(B,A[Re])){const Ze=A[Re];let bt=P[Re];bt=(0,ge.m9)(bt);const Ht=p.yu(Ze);if(bt instanceof th)B.push(Ze);else{const Ut=wa(bt,Ht);null!=Ut&&(B.push(Ze),Q.set(Ze,Ut))}}const ie=new fo(B);return new Mg(Q,ie,p.fieldTransforms)}function lc(i,e,n,o=!1){return wa(n,i.Cu(o?4:3,e))}function wa(i,e){if(dc(i=(0,ge.m9)(i)))return Tl("Unsupported field value:",e,i),cc(i,e);if(i instanceof wl)return function(o,u){if(!Sv(u.Vu))throw u.Su(`${o._methodName}() can only be used with update() and set()`);if(!u.path)throw u.Su(`${o._methodName}() is not currently supported inside arrays`);const c=o._toFieldTransform(u);c&&u.fieldTransforms.push(c)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.gu&&4!==e.Vu)throw e.Su("Nested arrays are not supported");return function(o,u){const c=[];let p=0;for(const A of o){let P=wa(A,u.wu(p));null==P&&(P={nullValue:"NULL_VALUE"}),c.push(P),p++}return{arrayValue:{values:c}}}(i,e)}return function(o,u){if(null===(o=(0,ge.m9)(o)))return{nullValue:"NULL_VALUE"};if("number"==typeof o)return Je(u.serializer,o);if("boolean"==typeof o)return{booleanValue:o};if("string"==typeof o)return{stringValue:o};if(o instanceof Date){const c=Gt.fromDate(o);return{timestampValue:Mc(u.serializer,c)}}if(o instanceof Gt){const c=new Gt(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:Mc(u.serializer,c)}}if(o instanceof Mf)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof El)return{bytesValue:fm(u.serializer,o._byteString)};if(o instanceof is){const c=u.databaseId,p=o.firestore._databaseId;if(!p.isEqual(c))throw u.Su(`Document reference is for database ${p.projectId}/${p.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:xh(o.firestore._databaseId||u.databaseId,o._key.path)}}throw u.Su(`Unsupported field value: ${sc(o)}`)}(i,e)}function cc(i,e){const n={};return za(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Lo(i,(o,u)=>{const c=wa(u,e.fu(o));null!=c&&(n[o]=c)}),{mapValue:{fields:n}}}function dc(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Gt||i instanceof Mf||i instanceof El||i instanceof is||i instanceof wl)}function Tl(i,e,n){if(!dc(n)||"object"!=typeof(u=n)||null===u||Object.getPrototypeOf(u)!==Object.prototype&&null!==Object.getPrototypeOf(u)){const o=sc(n);throw e.Su("an object"===o?i+" a custom object":i+" "+o)}var u}function du(i,e,n){if((e=(0,ge.m9)(e))instanceof Il)return e._internalPath;if("string"==typeof e)return ku(i,e);throw Fu("Field path arguments must be of type string or ",i,!1,void 0,n)}const Jc=new RegExp("[~\\*/\\[\\]]");function ku(i,e,n){if(e.search(Jc)>=0)throw Fu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new Il(...e.split("."))._internalPath}catch{throw Fu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function Fu(i,e,n,o,u){const c=o&&!o.isEmpty(),p=void 0!==u;let A=`Function ${e}() called with invalid data`;n&&(A+=" (via `toFirestore()`)"),A+=". ";let P="";return(c||p)&&(P+=" (found",c&&(P+=` in field ${o}`),p&&(P+=` in document ${u}`),P+=")"),new ft(Qe.INVALID_ARGUMENT,A+i+P)}function Ng(i,e){return i.some(n=>n.isEqual(e))}class Xc{constructor(e,n,o,u,c){this._firestore=e,this._userDataWriter=n,this._key=o,this._document=u,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new is(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Q_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(rh("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class Q_ extends Xc{data(){return super.data()}}function rh(i,e){return"string"==typeof e?ku(i,e):e instanceof Il?e._internalPath:e._delegate._internalPath}function Og(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new ft(Qe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Nf{}class ed extends Nf{}function Y_(i,e,...n){let o=[];e instanceof Nf&&o.push(e),o=o.concat(n),function(c){const p=c.filter(P=>P instanceof nd).length,A=c.filter(P=>P instanceof td).length;if(p>1||p>0&&A>0)throw new ft(Qe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(o);for(const u of o)i=u._apply(i);return i}class td extends ed{constructor(e,n,o){super(),this._field=e,this._op=n,this._value=o,this.type="where"}static _create(e,n,o){return new td(e,n,o)}_apply(e){const n=this._parse(e);return Ug(e._query,n),new Js(e.firestore,e.converter,gd(e._query,n))}_parse(e){const n=ac(e.firestore);return function(c,p,A,P,B,Q,ie){let Re;if(B.isKeyField()){if("array-contains"===Q||"array-contains-any"===Q)throw new ft(Qe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${Q}' queries on documentId().`);if("in"===Q||"not-in"===Q){id(ie,Q);const Ze=[];for(const bt of ie)Ze.push(Vg(P,c,bt));Re={arrayValue:{values:Ze}}}else Re=Vg(P,c,ie)}else"in"!==Q&&"not-in"!==Q&&"array-contains-any"!==Q||id(ie,Q),Re=lc(A,"where",ie,"in"===Q||"not-in"===Q);return or.create(B,Q,Re)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}function xg(i,e,n){const o=e,u=rh("where",i);return td._create(u,o,n)}class nd extends Nf{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new nd(e,n)}_parse(e){const n=this._queryConstraints.map(o=>o._parse(e)).filter(o=>o.getFilters().length>0);return 1===n.length?n[0]:Xr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(u,c){let p=u;const A=c.getFlattenedFilters();for(const P of A)Ug(p,P),p=gd(p,P)}(e._query,n),new Js(e.firestore,e.converter,gd(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class kg extends ed{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new kg(e,n)}_apply(e){const n=function(u,c,p){if(null!==u.startAt)throw new ft(Qe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==u.endAt)throw new ft(Qe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new aa(c,p)}(e._query,this._field,this._direction);return new Js(e.firestore,e.converter,function(u,c){const p=u.explicitOrderBy.concat([c]);return new la(u.path,u.collectionGroup,p,u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(e._query,n))}}function Rv(i,e="asc"){const n=e,o=rh("orderBy",i);return kg._create(o,n)}class Fg extends ed{constructor(e,n,o){super(),this.type=e,this._limit=n,this._limitType=o}static _create(e,n,o){return new Fg(e,n,o)}_apply(e){return new Js(e.firestore,e.converter,Qu(e._query,this._limit,this._limitType))}}function Pv(i){return Ag("limit",i),Fg._create("limit",i,"F")}function ZE(i){return Ag("limitToLast",i),Fg._create("limitToLast",i,"L")}class Of extends ed{constructor(e,n,o){super(),this.type=e,this._docOrFields=n,this._inclusive=o}static _create(e,n,o){return new Of(e,n,o)}_apply(e){const n=sh(e,this.type,this._docOrFields,this._inclusive);return new Js(e.firestore,e.converter,(c=n,new la((u=e._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,c,u.endAt)));var u,c}}function Mv(...i){return Of._create("startAt",i,!0)}function Nv(...i){return Of._create("startAfter",i,!1)}class rd extends ed{constructor(e,n,o){super(),this.type=e,this._docOrFields=n,this._inclusive=o}static _create(e,n,o){return new rd(e,n,o)}_apply(e){const n=sh(e,this.type,this._docOrFields,this._inclusive);return new Js(e.firestore,e.converter,(c=n,new la((u=e._query).path,u.collectionGroup,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,c)));var u,c}}function ih(...i){return rd._create("endBefore",i,!1)}function Lg(...i){return rd._create("endAt",i,!0)}function sh(i,e,n,o){if(n[0]=(0,ge.m9)(n[0]),n[0]instanceof Xc)return function(c,p,A,P,B){if(!P)throw new ft(Qe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${A}().`);const Q=[];for(const ie of Ja(c))if(ie.field.isKeyField())Q.push(ma(p,P.key));else{const Re=P.data.field(ie.field);if(Pl(Re))throw new ft(Qe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+ie.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Re){const Ze=ie.field.canonicalString();throw new ft(Qe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Ze}' (used as the orderBy) does not exist.`)}Q.push(Re)}return new oa(Q,B)}(i._query,i.firestore._databaseId,e,n[0]._document,o);{const u=ac(i.firestore);return function(p,A,P,B,Q,ie){const Re=p.explicitOrderBy;if(Q.length>Re.length)throw new ft(Qe.INVALID_ARGUMENT,`Too many arguments provided to ${B}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Ze=[];for(let bt=0;bt<Q.length;bt++){const Ht=Q[bt];if(Re[bt].field.isKeyField()){if("string"!=typeof Ht)throw new ft(Qe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${B}(), but got a ${typeof Ht}`);if(!fd(p)&&-1!==Ht.indexOf("/"))throw new ft(Qe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${B}() must be a plain document ID, but '${Ht}' contains a slash.`);const Ut=p.path.child(ir.fromString(Ht));if(!Ft.isDocumentKey(Ut))throw new ft(Qe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${B}() must result in a valid document path, but '${Ut}' is not because it contains an odd number of segments.`);const yn=new Ft(Ut);Ze.push(ma(A,yn))}else{const Ut=lc(P,B,Ht);Ze.push(Ut)}}return new oa(Ze,ie)}(i._query,i.firestore._databaseId,u,e,n,o)}}function Vg(i,e,n){if("string"==typeof(n=(0,ge.m9)(n))){if(""===n)throw new ft(Qe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!fd(e)&&-1!==n.indexOf("/"))throw new ft(Qe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const o=e.path.child(ir.fromString(n));if(!Ft.isDocumentKey(o))throw new ft(Qe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return ma(i,new Ft(o))}if(n instanceof is)return ma(i,n._key);throw new ft(Qe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${sc(n)}.`)}function id(i,e){if(!Array.isArray(i)||0===i.length)throw new ft(Qe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Ug(i,e){const n=function(u,c){for(const p of u)for(const A of p.getFlattenedFilters())if(c.indexOf(A.op)>=0)return A.op;return null}(i.filters,function(u){switch(u){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new ft(Qe.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class hc{convertValue(e,n="none"){switch(Zo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ko(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw At()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const o={};return Lo(e,(u,c)=>{o[u]=this.convertValue(c,n)}),o}convertGeoPoint(e){return new Mf(gi(e.latitude),gi(e.longitude))}convertArray(e,n){return(e.values||[]).map(o=>this.convertValue(o,n))}convertServerTimestamp(e,n){switch(n){case"previous":const o=_u(e);return null==o?null:this.convertValue(o,n);case"estimate":return this.convertTimestamp(Wu(e));default:return null}}convertTimestamp(e){const n=qo(e);return new Gt(n.seconds,n.nanos)}convertDocumentKey(e,n){const o=ir.fromString(e);qt(fp(o));const u=new Us(o.get(1),o.get(3)),c=new Ft(o.popFirst(5));return u.isEqual(n)||yr(`Document ${c} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}function xf(i,e,n){let o;return o=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,o}class Ov extends hc{constructor(e){super(),this.firestore=e}convertBytes(e){return new El(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new is(this.firestore,null,n)}}class sd{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fc extends Xc{constructor(e,n,o,u,c,p){super(e,n,o,u,p),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new oh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const o=this._document.data.field(rh("DocumentSnapshot.get",e));if(null!==o)return this._userDataWriter.convertValue(o,n.serverTimestamps)}}}class oh extends fc{data(e={}){return super.data(e)}}class Lu{constructor(e,n,o,u){this._firestore=e,this._userDataWriter=n,this._snapshot=u,this.metadata=new sd(u.hasPendingWrites,u.fromCache),this.query=o}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(o=>{e.call(n,new oh(this._firestore,this._userDataWriter,o.key,o,new sd(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ft(Qe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(u,c){if(u._snapshot.oldDocs.isEmpty()){let p=0;return u._snapshot.docChanges.map(A=>({type:"added",doc:new oh(u._firestore,u._userDataWriter,A.doc.key,A.doc,new sd(u._snapshot.mutatedKeys.has(A.doc.key),u._snapshot.fromCache),u.query.converter),oldIndex:-1,newIndex:p++}))}{let p=u._snapshot.oldDocs;return u._snapshot.docChanges.filter(A=>c||3!==A.type).map(A=>{const P=new oh(u._firestore,u._userDataWriter,A.doc.key,A.doc,new sd(u._snapshot.mutatedKeys.has(A.doc.key),u._snapshot.fromCache),u.query.converter);let B=-1,Q=-1;return 0!==A.type&&(B=p.indexOf(A.doc.key),p=p.delete(A.doc.key)),1!==A.type&&(p=p.add(A.doc),Q=p.indexOf(A.doc.key)),{type:xv(A.type),doc:P,oldIndex:B,newIndex:Q}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function xv(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return At()}}function X_(i,e){return i instanceof fc&&e instanceof fc?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof Lu&&e instanceof Lu&&i._firestore===e._firestore&&bg(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}function kv(i){i=pr(i,is);const e=pr(i.firestore,ei);return Qd(hs(e),i._key).then(n=>ah(e,i,n))}class Dl extends hc{constructor(e){super(),this.firestore=e}convertBytes(e){return new El(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new is(this.firestore,null,n)}}function ey(i){i=pr(i,is);const e=pr(i.firestore,ei),n=hs(e),o=new Dl(e);return function O_(i,e){const n=new Cr;return i.asyncQueue.enqueueAndForget((0,d.Z)(function*(){return(o=(0,d.Z)(function*(c,p,A){try{const P=yield function(Q,ie){const Re=pt(Q);return Re.persistence.runTransaction("read document","readonly",Ze=>Re.localDocuments.getDocument(Ze,ie))}(c,p);P.isFoundDocument()?A.resolve(P):P.isNoDocument()?A.resolve(null):A.reject(new ft(Qe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(P){const B=So(P,`Failed to get document '${p} from cache`);A.reject(B)}}),function u(c,p,A){return o.apply(this,arguments)})(yield Kc(i),e,n);var o})),n.promise}(n,i._key).then(u=>new fc(e,o,i._key,u,new sd(null!==u&&u.hasLocalMutations,!0),i.converter))}function ty(i){i=pr(i,is);const e=pr(i.firestore,ei);return Qd(hs(e),i._key,{source:"server"}).then(n=>ah(e,i,n))}function ny(i){i=pr(i,Js);const e=pr(i.firestore,ei),n=hs(e),o=new Dl(e);return Og(i._query),pv(n,i._query).then(u=>new Lu(e,o,i,u))}function Fv(i){i=pr(i,Js);const e=pr(i.firestore,ei),n=hs(e),o=new Dl(e);return function Tg(i,e){const n=new Cr;return i.asyncQueue.enqueueAndForget((0,d.Z)(function*(){return(o=(0,d.Z)(function*(c,p,A){try{const P=yield Zh(c,p,!0),B=new f_(p,P.hs),Q=B.Ta(P.documents),ie=B.applyChanges(Q,!1);A.resolve(ie.snapshot)}catch(P){const B=So(P,`Failed to execute query '${p} against cache`);A.reject(B)}}),function u(c,p,A){return o.apply(this,arguments)})(yield Kc(i),e,n);var o})),n.promise}(n,i._query).then(u=>new Lu(e,o,i,u))}function Lv(i){i=pr(i,Js);const e=pr(i.firestore,ei),n=hs(e),o=new Dl(e);return pv(n,i._query,{source:"server"}).then(u=>new Lu(e,o,i,u))}function Vv(i,e,n){i=pr(i,is);const o=pr(i.firestore,ei),u=xf(i.converter,e,n);return Vu(o,[Qc(ac(o),"setDoc",i._key,u,null!==i.converter,n).toMutation(i._key,xi.none())])}function ry(i,e,n,...o){i=pr(i,is);const u=pr(i.firestore,ei),c=ac(u);let p;return p="string"==typeof(e=(0,ge.m9)(e))||e instanceof Il?nh(c,"updateDoc",i._key,e,n,o):Yo(c,"updateDoc",i._key,e),Vu(u,[p.toMutation(i._key,xi.exists(!0))])}function Hg(i){return Vu(pr(i.firestore,ei),[new Tu(i._key,xi.none())])}function zg(i,e){const n=pr(i.firestore,ei),o=Sg(i),u=xf(i.converter,e);return Vu(n,[Qc(ac(i.firestore),"addDoc",o._key,u,null!==i.converter,{}).toMutation(o._key,xi.exists(!1))]).then(()=>o)}function Uv(i,...e){var n,o,u;i=(0,ge.m9)(i);let c={includeMetadataChanges:!1,source:"default"},p=0;"object"!=typeof e[p]||Pf(e[p])||(c=e[p],p++);const A={includeMetadataChanges:c.includeMetadataChanges,source:c.source};if(Pf(e[p])){const ie=e[p];e[p]=null===(n=ie.next)||void 0===n?void 0:n.bind(ie),e[p+1]=null===(o=ie.error)||void 0===o?void 0:o.bind(ie),e[p+2]=null===(u=ie.complete)||void 0===u?void 0:u.bind(ie)}let P,B,Q;if(i instanceof is)B=pr(i.firestore,ei),Q=Iu(i._key.path),P={next:ie=>{e[p]&&e[p](ah(B,i,ie))},error:e[p+1],complete:e[p+2]};else{const ie=pr(i,Js);B=pr(ie.firestore,ei),Q=ie._query;const Re=new Dl(B);P={next:Ze=>{e[p]&&e[p](new Lu(B,Re,ie,Ze))},error:e[p+1],complete:e[p+2]},Og(i._query)}return function(Re,Ze,bt,Ht){const Ut=new Tf(Ht),yn=new eg(Ze,Ut,bt);return Re.asyncQueue.enqueueAndForget((0,d.Z)(function*(){return Yp(yield Zc(Re),yn)})),()=>{Ut.Qa(),Re.asyncQueue.enqueueAndForget((0,d.Z)(function*(){return Jp(yield Zc(Re),yn)}))}}(hs(B),Q,A,P)}function kf(i,e){return function x_(i,e){const n=new Tf(e);return i.asyncQueue.enqueueAndForget((0,d.Z)(function*(){return u=yield Zc(i),c=n,pt(u).W_.add(c),void c.next();var u,c})),()=>{n.Qa(),i.asyncQueue.enqueueAndForget((0,d.Z)(function*(){return u=yield Zc(i),c=n,void pt(u).W_.delete(c);var u,c}))}}(hs(i=pr(i,ei)),Pf(e)?e:{next:e})}function Vu(i,e){return function(o,u){const c=new Cr;return o.asyncQueue.enqueueAndForget((0,d.Z)(function*(){return function df(i,e,n){return hf.apply(this,arguments)}(yield Ia(o),u,c)})),c.promise}(hs(i),e)}function ah(i,e,n){const o=n.docs.get(e._key),u=new Dl(i);return new fc(i,u,e._key,o,new sd(n.hasPendingWrites,n.fromCache),e.converter)}const ay={maxAttempts:5};class uy{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=ac(e)}set(e,n,o){this._verifyNotCommitted();const u=Uu(e,this._firestore),c=xf(u.converter,n,o),p=Qc(this._dataReader,"WriteBatch.set",u._key,c,null!==u.converter,o);return this._mutations.push(p.toMutation(u._key,xi.none())),this}update(e,n,o,...u){this._verifyNotCommitted();const c=Uu(e,this._firestore);let p;return p="string"==typeof(n=(0,ge.m9)(n))||n instanceof Il?nh(this._dataReader,"WriteBatch.update",c._key,n,o,u):Yo(this._dataReader,"WriteBatch.update",c._key,n),this._mutations.push(p.toMutation(c._key,xi.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Uu(e,this._firestore);return this._mutations=this._mutations.concat(new Tu(n._key,xi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ft(Qe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Uu(i,e){if((i=(0,ge.m9)(i)).firestore!==e)throw new ft(Qe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class ly extends class{constructor(n,o){this._firestore=n,this._transaction=o,this._dataReader=ac(n)}get(n){const o=Uu(n,this._firestore),u=new Ov(this._firestore);return this._transaction.lookup([o._key]).then(c=>{if(!c||1!==c.length)return At();const p=c[0];if(p.isFoundDocument())return new Xc(this._firestore,u,p.key,p,o.converter);if(p.isNoDocument())return new Xc(this._firestore,u,o._key,null,o.converter);throw At()})}set(n,o,u){const c=Uu(n,this._firestore),p=xf(c.converter,o,u),A=Qc(this._dataReader,"Transaction.set",c._key,p,null!==c.converter,u);return this._transaction.set(c._key,A),this}update(n,o,u,...c){const p=Uu(n,this._firestore);let A;return A="string"==typeof(o=(0,ge.m9)(o))||o instanceof Il?nh(this._dataReader,"Transaction.update",p._key,o,u,c):Yo(this._dataReader,"Transaction.update",p._key,o),this._transaction.update(p._key,A),this}delete(n){const o=Uu(n,this._firestore);return this._transaction.delete(o._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Uu(e,this._firestore),o=new Dl(this._firestore);return super.get(e).then(u=>new fc(this._firestore,o,n._key,u._document,new sd(!1,!1),n.converter))}}function cy(i,e,n){i=pr(i,ei);const o=Object.assign(Object.assign({},ay),n);return function(c){if(c.maxAttempts<1)throw new ft(Qe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(o),function(c,p,A){const P=new Cr;return c.asyncQueue.enqueueAndForget((0,d.Z)(function*(){const B=yield function Sf(i){return Af(i).then(e=>e.datastore)}(c);new yg(c.asyncQueue,B,A,p,P).Ya()})),P.promise}(hs(i),u=>e(new ly(i,u)),o)}function dy(){return new th("deleteField")}function Wv(){return new uc("serverTimestamp")}function hy(...i){return new Xs("arrayUnion",i)}function fy(...i){return new xu("arrayRemove",i)}function Kg(i){return new Yc("increment",i)}!function(e,n=!0){hr=ee.SDK_VERSION,(0,ee._registerComponent)(new J.wA("firestore",(o,{instanceIdentifier:u,options:c})=>{const p=o.getProvider("app").getImmediate(),A=new ei(new Vs(o.getProvider("auth-internal")),new _s(o.getProvider("app-check-internal")),function(B,Q){if(!Object.prototype.hasOwnProperty.apply(B.options,["projectId"]))throw new ft(Qe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Us(B.options.projectId,Q)}(p,u),p);return c=Object.assign({useFetchStreams:n},c),A._setSettings(c),A},"PUBLIC").setMultipleInstances(!0)),(0,ee.registerVersion)(_r,"4.5.0",e),(0,ee.registerVersion)(_r,"4.5.0","esm2017")}()},9058:(Mt,Ve,F)=>{F.d(Ve,{BH:()=>ke,G6:()=>wt,L:()=>Le,LL:()=>lt,P0:()=>nt,Pz:()=>Be,Sg:()=>xe,UG:()=>ct,ZB:()=>Se,ZR:()=>Ke,aH:()=>se,b$:()=>un,eu:()=>Pe,hl:()=>Ce,jU:()=>It,m9:()=>mr,ne:()=>qn,pd:()=>Xt,r3:()=>Rt,ru:()=>zt,tV:()=>re,uI:()=>ce,vZ:()=>kn,w1:()=>ar,xO:()=>Gn,xb:()=>wn,z$:()=>tt,zd:()=>Kt});const Ee=function(ve){const Y=[];let U=0;for(let x=0;x<ve.length;x++){let N=ve.charCodeAt(x);N<128?Y[U++]=N:N<2048?(Y[U++]=N>>6|192,Y[U++]=63&N|128):55296==(64512&N)&&x+1<ve.length&&56320==(64512&ve.charCodeAt(x+1))?(N=65536+((1023&N)<<10)+(1023&ve.charCodeAt(++x)),Y[U++]=N>>18|240,Y[U++]=N>>12&63|128,Y[U++]=N>>6&63|128,Y[U++]=63&N|128):(Y[U++]=N>>12|224,Y[U++]=N>>6&63|128,Y[U++]=63&N|128)}return Y},ne={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(ve,Y){if(!Array.isArray(ve))throw Error("encodeByteArray takes an array as a parameter");this.init_();const U=Y?this.byteToCharMapWebSafe_:this.byteToCharMap_,x=[];for(let N=0;N<ve.length;N+=3){const oe=ve[N],be=N+1<ve.length,rt=be?ve[N+1]:0,dt=N+2<ve.length,Ct=dt?ve[N+2]:0;let On=(15&rt)<<2|Ct>>6,we=63&Ct;dt||(we=64,be||(On=64)),x.push(U[oe>>2],U[(3&oe)<<4|rt>>4],U[On],U[we])}return x.join("")},encodeString(ve,Y){return this.HAS_NATIVE_SUPPORT&&!Y?btoa(ve):this.encodeByteArray(Ee(ve),Y)},decodeString(ve,Y){return this.HAS_NATIVE_SUPPORT&&!Y?atob(ve):function(ve){const Y=[];let U=0,x=0;for(;U<ve.length;){const N=ve[U++];if(N<128)Y[x++]=String.fromCharCode(N);else if(N>191&&N<224){const oe=ve[U++];Y[x++]=String.fromCharCode((31&N)<<6|63&oe)}else if(N>239&&N<365){const dt=((7&N)<<18|(63&ve[U++])<<12|(63&ve[U++])<<6|63&ve[U++])-65536;Y[x++]=String.fromCharCode(55296+(dt>>10)),Y[x++]=String.fromCharCode(56320+(1023&dt))}else{const oe=ve[U++],be=ve[U++];Y[x++]=String.fromCharCode((15&N)<<12|(63&oe)<<6|63&be)}}return Y.join("")}(this.decodeStringToByteArray(ve,Y))},decodeStringToByteArray(ve,Y){this.init_();const U=Y?this.charToByteMapWebSafe_:this.charToByteMap_,x=[];for(let N=0;N<ve.length;){const oe=U[ve.charAt(N++)],rt=N<ve.length?U[ve.charAt(N)]:0;++N;const Ct=N<ve.length?U[ve.charAt(N)]:64;++N;const Zt=N<ve.length?U[ve.charAt(N)]:64;if(++N,null==oe||null==rt||null==Ct||null==Zt)throw new Ae;x.push(oe<<2|rt>>4),64!==Ct&&(x.push(rt<<4&240|Ct>>2),64!==Zt&&x.push(Ct<<6&192|Zt))}return x},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let ve=0;ve<this.ENCODED_VALS.length;ve++)this.byteToCharMap_[ve]=this.ENCODED_VALS.charAt(ve),this.charToByteMap_[this.byteToCharMap_[ve]]=ve,this.byteToCharMapWebSafe_[ve]=this.ENCODED_VALS_WEBSAFE.charAt(ve),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ve]]=ve,ve>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ve)]=ve,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ve)]=ve)}}};class Ae extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Le=function(ve){return function(ve){const Y=Ee(ve);return ne.encodeByteArray(Y,!0)}(ve).replace(/\./g,"")},re=function(ve){try{return ne.decodeString(ve,!0)}catch(Y){console.error("base64Decode failed: ",Y)}return null};function Se(ve,Y){if(!(Y instanceof Object))return Y;switch(Y.constructor){case Date:return new Date(Y.getTime());case Object:void 0===ve&&(ve={});break;case Array:ve=[];break;default:return Y}for(const U in Y)!Y.hasOwnProperty(U)||!et(U)||(ve[U]=Se(ve[U],Y[U]));return ve}function et(ve){return"__proto__"!==ve}const Xe=()=>{try{return function qe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const ve=process.env.__FIREBASE_DEFAULTS__;return ve?JSON.parse(ve):void 0})()||(()=>{if(typeof document>"u")return;let ve;try{ve=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const Y=ve&&re(ve[1]);return Y&&JSON.parse(Y)})()}catch(ve){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${ve}`)}},nt=ve=>{const Y=(ve=>{var Y,U;return null===(U=null===(Y=Xe())||void 0===Y?void 0:Y.emulatorHosts)||void 0===U?void 0:U[ve]})(ve);if(!Y)return;const U=Y.lastIndexOf(":");if(U<=0||U+1===Y.length)throw new Error(`Invalid host ${Y} with no separate hostname and port!`);const x=parseInt(Y.substring(U+1),10);return"["===Y[0]?[Y.substring(1,U-1),x]:[Y.substring(0,U),x]},se=()=>{var ve;return null===(ve=Xe())||void 0===ve?void 0:ve.config},Be=ve=>{var Y;return null===(Y=Xe())||void 0===Y?void 0:Y[`_${ve}`]};class ke{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Y,U)=>{this.resolve=Y,this.reject=U})}wrapCallback(Y){return(U,x)=>{U?this.reject(U):this.resolve(x),"function"==typeof Y&&(this.promise.catch(()=>{}),1===Y.length?Y(U):Y(U,x))}}}function xe(ve,Y){if(ve.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const x=Y||"demo-project",N=ve.iat||0,oe=ve.sub||ve.user_id;if(!oe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const be=Object.assign({iss:`https://securetoken.google.com/${x}`,aud:x,iat:N,exp:N+3600,auth_time:N,sub:oe,user_id:oe,firebase:{sign_in_provider:"custom",identities:{}}},ve);return[Le(JSON.stringify({alg:"none",type:"JWT"})),Le(JSON.stringify(be)),""].join(".")}function tt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ce(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(tt())}function ct(){var ve;const Y=null===(ve=Xe())||void 0===ve?void 0:ve.forceEnvironment;if("node"===Y)return!0;if("browser"===Y)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function It(){return"object"==typeof self&&self.self===self}function zt(){const ve="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ve&&void 0!==ve.id}function un(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ar(){const ve=tt();return ve.indexOf("MSIE ")>=0||ve.indexOf("Trident/")>=0}function wt(){return!ct()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ce(){try{return"object"==typeof indexedDB}catch{return!1}}function Pe(){return new Promise((ve,Y)=>{try{let U=!0;const x="validate-browser-context-for-indexeddb-analytics-module",N=self.indexedDB.open(x);N.onsuccess=()=>{N.result.close(),U||self.indexedDB.deleteDatabase(x),ve(!0)},N.onupgradeneeded=()=>{U=!1},N.onerror=()=>{var oe;Y((null===(oe=N.error)||void 0===oe?void 0:oe.message)||"")}}catch(U){Y(U)}})}class Ke extends Error{constructor(Y,U,x){super(U),this.code=Y,this.customData=x,this.name="FirebaseError",Object.setPrototypeOf(this,Ke.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,lt.prototype.create)}}class lt{constructor(Y,U,x){this.service=Y,this.serviceName=U,this.errors=x}create(Y,...U){const x=U[0]||{},N=`${this.service}/${Y}`,oe=this.errors[Y],be=oe?function Et(ve,Y){return ve.replace(yt,(U,x)=>{const N=Y[x];return null!=N?String(N):`<${x}?>`})}(oe,x):"Error";return new Ke(N,`${this.serviceName}: ${be} (${N}).`,x)}}const yt=/\{\$([^}]+)}/g;function Rt(ve,Y){return Object.prototype.hasOwnProperty.call(ve,Y)}function wn(ve){for(const Y in ve)if(Object.prototype.hasOwnProperty.call(ve,Y))return!1;return!0}function kn(ve,Y){if(ve===Y)return!0;const U=Object.keys(ve),x=Object.keys(Y);for(const N of U){if(!x.includes(N))return!1;const oe=ve[N],be=Y[N];if(Un(oe)&&Un(be)){if(!kn(oe,be))return!1}else if(oe!==be)return!1}for(const N of x)if(!U.includes(N))return!1;return!0}function Un(ve){return null!==ve&&"object"==typeof ve}function Gn(ve){const Y=[];for(const[U,x]of Object.entries(ve))Array.isArray(x)?x.forEach(N=>{Y.push(encodeURIComponent(U)+"="+encodeURIComponent(N))}):Y.push(encodeURIComponent(U)+"="+encodeURIComponent(x));return Y.length?"&"+Y.join("&"):""}function Kt(ve){const Y={};return ve.replace(/^\?/,"").split("&").forEach(x=>{if(x){const[N,oe]=x.split("=");Y[decodeURIComponent(N)]=decodeURIComponent(oe)}}),Y}function Xt(ve){const Y=ve.indexOf("?");if(!Y)return"";const U=ve.indexOf("#",Y);return ve.substring(Y,U>0?U:void 0)}function qn(ve,Y){const U=new ur(ve,Y);return U.subscribe.bind(U)}class ur{constructor(Y,U){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=U,this.task.then(()=>{Y(this)}).catch(x=>{this.error(x)})}next(Y){this.forEachObserver(U=>{U.next(Y)})}error(Y){this.forEachObserver(U=>{U.error(Y)}),this.close(Y)}complete(){this.forEachObserver(Y=>{Y.complete()}),this.close()}subscribe(Y,U,x){let N;if(void 0===Y&&void 0===U&&void 0===x)throw new Error("Missing Observer.");N=function vn(ve,Y){if("object"!=typeof ve||null===ve)return!1;for(const U of Y)if(U in ve&&"function"==typeof ve[U])return!0;return!1}(Y,["next","error","complete"])?Y:{next:Y,error:U,complete:x},void 0===N.next&&(N.next=vr),void 0===N.error&&(N.error=vr),void 0===N.complete&&(N.complete=vr);const oe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?N.error(this.finalError):N.complete()}catch{}}),this.observers.push(N),oe}unsubscribeOne(Y){void 0===this.observers||void 0===this.observers[Y]||(delete this.observers[Y],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Y){if(!this.finalized)for(let U=0;U<this.observers.length;U++)this.sendOne(U,Y)}sendOne(Y,U){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Y])try{U(this.observers[Y])}catch(x){typeof console<"u"&&console.error&&console.error(x)}})}close(Y){this.finalized||(this.finalized=!0,void 0!==Y&&(this.finalError=Y),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vr(){}function mr(ve){return ve&&ve._delegate?ve._delegate:ve}},5546:(Mt,Ve,F)=>{F.d(Ve,{q:()=>ee});var d=F(5879);let ee=(()=>{class J{static#e=this.\u0275fac=function(ne){return new(ne||J)};static#t=this.\u0275cmp=d.Xpm({type:J,selectors:[["app-error"]],decls:2,vars:0,template:function(ne,Ae){1&ne&&(d.TgZ(0,"p"),d._uU(1,"error works!"),d.qZA())}})}return J})()},6585:(Mt,Ve,F)=>{F.d(Ve,{T:()=>ge});var d=F(5861),ee=F(7142),J=F(5879),Ee=F(7213);let ge=(()=>{class ne{constructor(_e){this.autenticador=_e,this.usuarioActual=null}registro(_e,Le){var re=this;return(0,d.Z)(function*(){try{const ue=yield re.autenticador.createUserWithEmailAndPassword(_e,Le);return ue.user?.sendEmailVerification(),ue}catch(ue){return ue.code}})()}login(_e,Le){var re=this;return(0,d.Z)(function*(){try{return yield re.autenticador.signInWithEmailAndPassword(_e,Le)}catch(ue){return ue.code}})()}loginConGoogle(_e,Le){var re=this;return(0,d.Z)(function*(){try{return yield re.autenticador.signInWithPopup(new ee.Z.auth.GoogleAuthProvider)}catch(ue){return console.log("Error en google con google",ue),!1}})()}obtenerUsuarioLogueado(){return this.autenticador.authState}cerrarSesion(){return this.autenticador.signOut()}static#e=this.\u0275fac=function(Le){return new(Le||ne)(J.LFG(Ee.zQ))};static#t=this.\u0275prov=J.Yz7({token:ne,factory:ne.\u0275fac,providedIn:"root"})}return ne})()},6298:(Mt,Ve,F)=>{var d=F(6593),ee=F(7045),J=F(5546),Ee=F(5861),ge=F(4036),ne=F(5879),Ae=F(6585);const re=[{path:"",redirectTo:"principal",pathMatch:"full"},{path:"sesiones",loadChildren:()=>F.e(517).then(F.bind(F,517)).then(V=>V.SesionesModule),canActivate:[(()=>{class V{constructor(_,b){var $=this;this.autenticador=_,this.router=b,this.canActivate=(0,Ee.Z)(function*(){const H=$.autenticador.obtenerUsuarioLogueado();return $.autenticador.usuarioActual=yield(0,ge.z)(H),null==$.autenticador.usuarioActual||($.router.navigateByUrl("principal/home"),!1)})}static#e=this.\u0275fac=function(b){return new(b||V)(ne.LFG(Ae.T),ne.LFG(ee.F0))};static#t=this.\u0275prov=ne.Yz7({token:V,factory:V.\u0275fac,providedIn:"root"})}return V})()]},{path:"principal",loadChildren:()=>F.e(167).then(F.bind(F,167)).then(V=>V.PrincipalModule)},{path:"repartidores",loadChildren:()=>F.e(858).then(F.bind(F,1858)).then(V=>V.RepartidoresModule),canActivate:[(()=>{class V{constructor(_,b){var $=this;this.autenticador=_,this.router=b,this.canActivate=(0,Ee.Z)(function*(){const H=$.autenticador.obtenerUsuarioLogueado();return $.autenticador.usuarioActual=yield(0,ge.z)(H),null!=$.autenticador.usuarioActual||($.router.navigateByUrl("principal/home"),!1)})}static#e=this.\u0275fac=function(b){return new(b||V)(ne.LFG(Ae.T),ne.LFG(ee.F0))};static#t=this.\u0275prov=ne.Yz7({token:V,factory:V.\u0275fac,providedIn:"root"})}return V})()]},{path:"error",component:J.q},{path:"**",redirectTo:"error"}];let ue=(()=>{class V{static#e=this.\u0275fac=function(b){return new(b||V)};static#t=this.\u0275mod=ne.oAB({type:V});static#n=this.\u0275inj=ne.cJS({imports:[ee.Bz.forRoot(re),ee.Bz]})}return V})();var Se=F(8672);let et=(()=>{class V{constructor(){this.title="primer-parcial-fernandez-mariano"}static#e=this.\u0275fac=function(b){return new(b||V)};static#t=this.\u0275cmp=ne.Xpm({type:V,selectors:[["app-root"]],decls:11,vars:0,consts:[["lang","es"],["charset","UTF-8"],["name","viewport","content","width=device-width, initial-scale=1.0"],["bdColor","rgba(51,51,51,0.8)","size","medium","color","#fff","template","<img src='assets/spinner.gif' width='64' height='64'/>"],[2,"font-size","20px","color","white"]],template:function(b,$){1&b&&(ne.TgZ(0,"html",0)(1,"head"),ne._UZ(2,"meta",1)(3,"meta",2),ne.TgZ(4,"title"),ne._uU(5,"Document"),ne.qZA()(),ne.TgZ(6,"body")(7,"ngx-spinner",3)(8,"p",4),ne._uU(9,"Cargando..."),ne.qZA()(),ne._UZ(10,"router-outlet"),ne.qZA()())},dependencies:[ee.lC,Se.Ro]})}return V})();var qe=F(6825);function it(V){return new ne.vHH(3e3,!1)}function wn(V){switch(V.length){case 0:return new qe.ZN;case 1:return V[0];default:return new qe.ZE(V)}}function tr(V,g,_=new Map,b=new Map){const $=[],H=[];let he=-1,ye=null;if(g.forEach(Ue=>{const ze=Ue.get("offset"),xt=ze==he,kt=xt&&ye||new Map;Ue.forEach((ln,Dn)=>{let Te=Dn,Cn=ln;if("offset"!==Dn)switch(Te=V.normalizePropertyName(Te,$),Cn){case qe.k1:Cn=_.get(Dn);break;case qe.l3:Cn=b.get(Dn);break;default:Cn=V.normalizeStyleValue(Dn,Te,Cn,$)}kt.set(Te,Cn)}),xt||H.push(kt),ye=kt,he=ze}),$.length)throw function Ke(V){return new ne.vHH(3502,!1)}();return H}function kn(V,g,_,b){switch(g){case"start":V.onStart(()=>b(_&&Un(_,"start",V)));break;case"done":V.onDone(()=>b(_&&Un(_,"done",V)));break;case"destroy":V.onDestroy(()=>b(_&&Un(_,"destroy",V)))}}function Un(V,g,_){const H=nr(V.element,V.triggerName,V.fromState,V.toState,g||V.phaseName,_.totalTime??V.totalTime,!!_.disabled),he=V._data;return null!=he&&(H._data=he),H}function nr(V,g,_,b,$="",H=0,he){return{element:V,triggerName:g,fromState:_,toState:b,phaseName:$,totalTime:H,disabled:!!he}}function Gn(V,g,_){let b=V.get(g);return b||V.set(g,b=_),b}function Kt(V){const g=V.indexOf(":");return[V.substring(1,g),V.slice(g+1)]}const Xt=(()=>typeof document>"u"?null:document.documentElement)();function tn(V){const g=V.parentNode||V.host||null;return g===Xt?null:g}let ur=null,ui=!1;function $t(V,g){for(;g;){if(g===V)return!0;g=tn(g)}return!1}function Si(V,g,_){if(_)return Array.from(V.querySelectorAll(g));const b=V.querySelector(g);return b?[b]:[]}let sn=(()=>{class V{validateStyleProperty(_){return function vn(V){ur||(ur=function ss(){return typeof document<"u"?document.body:null}()||{},ui=!!ur.style&&"WebkitAppearance"in ur.style);let g=!0;return ur.style&&!function qn(V){return"ebkit"==V.substring(1,6)}(V)&&(g=V in ur.style,!g&&ui&&(g="Webkit"+V.charAt(0).toUpperCase()+V.slice(1)in ur.style)),g}(_)}matchesElement(_,b){return!1}containsElement(_,b){return $t(_,b)}getParentElement(_){return tn(_)}query(_,b,$){return Si(_,b,$)}computeStyle(_,b,$){return $||""}animate(_,b,$,H,he,ye=[],Ue){return new qe.ZN($,H)}static#e=this.\u0275fac=function(b){return new(b||V)};static#t=this.\u0275prov=ne.Yz7({token:V,factory:V.\u0275fac})}return V})(),Fr=(()=>{class V{static#e=this.NOOP=new sn}return V})();const bi=1e3,rr="ng-enter",qr="ng-leave",Sr="ng-trigger",Rr=".ng-trigger",Pr="ng-animating",jr=".ng-animating";function mr(V){if("number"==typeof V)return V;const g=V.match(/^(-?[\.\d]+)(m?s)/);return!g||g.length<2?0:ve(parseFloat(g[1]),g[2])}function ve(V,g){return"s"===g?V*bi:V}function Y(V,g,_){return V.hasOwnProperty("duration")?V:function U(V,g,_){let $,H=0,he="";if("string"==typeof V){const ye=V.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===ye)return g.push(it()),{duration:0,delay:0,easing:""};$=ve(parseFloat(ye[1]),ye[2]);const Ue=ye[3];null!=Ue&&(H=ve(parseFloat(Ue),ye[4]));const ze=ye[5];ze&&(he=ze)}else $=V;if(!_){let ye=!1,Ue=g.length;$<0&&(g.push(function gt(){return new ne.vHH(3100,!1)}()),ye=!0),H<0&&(g.push(function Xe(){return new ne.vHH(3101,!1)}()),ye=!0),ye&&g.splice(Ue,0,it())}return{duration:$,delay:H,easing:he}}(V,g,_)}function x(V,g={}){return Object.keys(V).forEach(_=>{g[_]=V[_]}),g}function N(V){const g=new Map;return Object.keys(V).forEach(_=>{g.set(_,V[_])}),g}function rt(V,g=new Map,_){if(_)for(let[b,$]of _)g.set(b,$);for(let[b,$]of V)g.set(b,$);return g}function dt(V,g,_){g.forEach((b,$)=>{const H=pe($);_&&!_.has($)&&_.set($,V.style[H]),V.style[H]=b})}function Ct(V,g){g.forEach((_,b)=>{const $=pe(b);V.style[$]=""})}function St(V){return Array.isArray(V)?1==V.length?V[0]:(0,qe.vP)(V):V}const On=new RegExp("{{\\s*(.+?)\\s*}}","g");function we(V){let g=[];if("string"==typeof V){let _;for(;_=On.exec(V);)g.push(_[1]);On.lastIndex=0}return g}function me(V,g,_){const b=V.toString(),$=b.replace(On,(H,he)=>{let ye=g[he];return null==ye&&(_.push(function nt(V){return new ne.vHH(3003,!1)}()),ye=""),ye.toString()});return $==b?V:$}function De(V){const g=[];let _=V.next();for(;!_.done;)g.push(_.value),_=V.next();return g}const fe=/-+([a-z0-9])/g;function pe(V){return V.replace(fe,(...g)=>g[1].toUpperCase())}function st(V,g,_){switch(g.type){case 7:return V.visitTrigger(g,_);case 0:return V.visitState(g,_);case 1:return V.visitTransition(g,_);case 2:return V.visitSequence(g,_);case 3:return V.visitGroup(g,_);case 4:return V.visitAnimate(g,_);case 5:return V.visitKeyframes(g,_);case 6:return V.visitStyle(g,_);case 8:return V.visitReference(g,_);case 9:return V.visitAnimateChild(g,_);case 10:return V.visitAnimateRef(g,_);case 11:return V.visitQuery(g,_);case 12:return V.visitStagger(g,_);default:throw function se(V){return new ne.vHH(3004,!1)}()}}function Qt(V,g){return window.getComputedStyle(V)[g]}const lr="*";function li(V,g){const _=[];return"string"==typeof V?V.split(/\s*,\s*/).forEach(b=>function vs(V,g,_){if(":"==V[0]){const Ue=function Fn(V,g){switch(V){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(_,b)=>parseFloat(b)>parseFloat(_);case":decrement":return(_,b)=>parseFloat(b)<parseFloat(_);default:return g.push(function Ce(V){return new ne.vHH(3016,!1)}()),"* => *"}}(V,_);if("function"==typeof Ue)return void g.push(Ue);V=Ue}const b=V.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==b||b.length<4)return _.push(function wt(V){return new ne.vHH(3015,!1)}()),g;const $=b[1],H=b[2],he=b[3];g.push(Rs($,he));"<"==H[0]&&!($==lr&&he==lr)&&g.push(Rs(he,$))}(b,_,g)):_.push(V),_}const Kr=new Set(["true","1"]),ni=new Set(["false","0"]);function Rs(V,g){const _=Kr.has(V)||ni.has(V),b=Kr.has(g)||ni.has(g);return($,H)=>{let he=V==lr||V==$,ye=g==lr||g==H;return!he&&_&&"boolean"==typeof $&&(he=$?Kr.has(V):ni.has(V)),!ye&&b&&"boolean"==typeof H&&(ye=H?Kr.has(g):ni.has(g)),he&&ye}}const mo=new RegExp("s*:selfs*,?","g");function eo(V,g,_,b){return new Nr(V).build(g,_,b)}class Nr{constructor(g){this._driver=g}build(g,_,b){const $=new Es(_);return this._resetContextStyleTimingState($),st(this,St(g),$)}_resetContextStyleTimingState(g){g.currentQuerySelector="",g.collectedStyles=new Map,g.collectedStyles.set("",new Map),g.currentTime=0}visitTrigger(g,_){let b=_.queryCount=0,$=_.depCount=0;const H=[],he=[];return"@"==g.name.charAt(0)&&_.errors.push(function ke(){return new ne.vHH(3006,!1)}()),g.definitions.forEach(ye=>{if(this._resetContextStyleTimingState(_),0==ye.type){const Ue=ye,ze=Ue.name;ze.toString().split(/\s*,\s*/).forEach(xt=>{Ue.name=xt,H.push(this.visitState(Ue,_))}),Ue.name=ze}else if(1==ye.type){const Ue=this.visitTransition(ye,_);b+=Ue.queryCount,$+=Ue.depCount,he.push(Ue)}else _.errors.push(function xe(){return new ne.vHH(3007,!1)}())}),{type:7,name:g.name,states:H,transitions:he,queryCount:b,depCount:$,options:null}}visitState(g,_){const b=this.visitStyle(g.styles,_),$=g.options&&g.options.params||null;if(b.containsDynamicStyles){const H=new Set,he=$||{};b.styles.forEach(ye=>{ye instanceof Map&&ye.forEach(Ue=>{we(Ue).forEach(ze=>{he.hasOwnProperty(ze)||H.add(ze)})})}),H.size&&(De(H.values()),_.errors.push(function tt(V,g){return new ne.vHH(3008,!1)}()))}return{type:0,name:g.name,style:b,options:$?{params:$}:null}}visitTransition(g,_){_.queryCount=0,_.depCount=0;const b=st(this,St(g.animation),_);return{type:1,matchers:li(g.expr,_.errors),animation:b,queryCount:_.queryCount,depCount:_.depCount,options:Ri(g.options)}}visitSequence(g,_){return{type:2,steps:g.steps.map(b=>st(this,b,_)),options:Ri(g.options)}}visitGroup(g,_){const b=_.currentTime;let $=0;const H=g.steps.map(he=>{_.currentTime=b;const ye=st(this,he,_);return $=Math.max($,_.currentTime),ye});return _.currentTime=$,{type:3,steps:H,options:Ri(g.options)}}visitAnimate(g,_){const b=function Ps(V,g){if(V.hasOwnProperty("duration"))return V;if("number"==typeof V)return Ms(Y(V,g).duration,0,"");const _=V;if(_.split(/\s+/).some(H=>"{"==H.charAt(0)&&"{"==H.charAt(1))){const H=Ms(0,0,"");return H.dynamic=!0,H.strValue=_,H}const $=Y(_,g);return Ms($.duration,$.delay,$.easing)}(g.timings,_.errors);_.currentAnimateTimings=b;let $,H=g.styles?g.styles:(0,qe.oB)({});if(5==H.type)$=this.visitKeyframes(H,_);else{let he=g.styles,ye=!1;if(!he){ye=!0;const ze={};b.easing&&(ze.easing=b.easing),he=(0,qe.oB)(ze)}_.currentTime+=b.duration+b.delay;const Ue=this.visitStyle(he,_);Ue.isEmptyStep=ye,$=Ue}return _.currentAnimateTimings=null,{type:4,timings:b,style:$,options:null}}visitStyle(g,_){const b=this._makeStyleAst(g,_);return this._validateStyleAst(b,_),b}_makeStyleAst(g,_){const b=[],$=Array.isArray(g.styles)?g.styles:[g.styles];for(let ye of $)"string"==typeof ye?ye===qe.l3?b.push(ye):_.errors.push(new ne.vHH(3002,!1)):b.push(N(ye));let H=!1,he=null;return b.forEach(ye=>{if(ye instanceof Map&&(ye.has("easing")&&(he=ye.get("easing"),ye.delete("easing")),!H))for(let Ue of ye.values())if(Ue.toString().indexOf("{{")>=0){H=!0;break}}),{type:6,styles:b,easing:he,offset:g.offset,containsDynamicStyles:H,options:null}}_validateStyleAst(g,_){const b=_.currentAnimateTimings;let $=_.currentTime,H=_.currentTime;b&&H>0&&(H-=b.duration+b.delay),g.styles.forEach(he=>{"string"!=typeof he&&he.forEach((ye,Ue)=>{const ze=_.collectedStyles.get(_.currentQuerySelector),xt=ze.get(Ue);let kt=!0;xt&&(H!=$&&H>=xt.startTime&&$<=xt.endTime&&(_.errors.push(function It(V,g,_,b,$){return new ne.vHH(3010,!1)}()),kt=!1),H=xt.startTime),kt&&ze.set(Ue,{startTime:H,endTime:$}),_.options&&function Zt(V,g,_){const b=g.params||{},$=we(V);$.length&&$.forEach(H=>{b.hasOwnProperty(H)||_.push(function Lt(V){return new ne.vHH(3001,!1)}())})}(ye,_.options,_.errors)})})}visitKeyframes(g,_){const b={type:5,styles:[],options:null};if(!_.currentAnimateTimings)return _.errors.push(function zt(){return new ne.vHH(3011,!1)}()),b;let H=0;const he=[];let ye=!1,Ue=!1,ze=0;const xt=g.steps.map(fi=>{const Kn=this._makeStyleAst(fi,_);let fr=null!=Kn.offset?Kn.offset:function Qi(V){if("string"==typeof V)return null;let g=null;if(Array.isArray(V))V.forEach(_=>{if(_ instanceof Map&&_.has("offset")){const b=_;g=parseFloat(b.get("offset")),b.delete("offset")}});else if(V instanceof Map&&V.has("offset")){const _=V;g=parseFloat(_.get("offset")),_.delete("offset")}return g}(Kn.styles),Wr=0;return null!=fr&&(H++,Wr=Kn.offset=fr),Ue=Ue||Wr<0||Wr>1,ye=ye||Wr<ze,ze=Wr,he.push(Wr),Kn});Ue&&_.errors.push(function un(){return new ne.vHH(3012,!1)}()),ye&&_.errors.push(function pn(){return new ne.vHH(3200,!1)}());const kt=g.steps.length;let ln=0;H>0&&H<kt?_.errors.push(function ar(){return new ne.vHH(3202,!1)}()):0==H&&(ln=1/(kt-1));const Dn=kt-1,Te=_.currentTime,Cn=_.currentAnimateTimings,sr=Cn.duration;return xt.forEach((fi,Kn)=>{const fr=ln>0?Kn==Dn?1:ln*Kn:he[Kn],Wr=fr*sr;_.currentTime=Te+Cn.delay+Wr,Cn.duration=Wr,this._validateStyleAst(fi,_),fi.offset=fr,b.styles.push(fi)}),b}visitReference(g,_){return{type:8,animation:st(this,St(g.animation),_),options:Ri(g.options)}}visitAnimateChild(g,_){return _.depCount++,{type:9,options:Ri(g.options)}}visitAnimateRef(g,_){return{type:10,animation:this.visitReference(g.animation,_),options:Ri(g.options)}}visitQuery(g,_){const b=_.currentQuerySelector,$=g.options||{};_.queryCount++,_.currentQuery=g;const[H,he]=function ci(V){const g=!!V.split(/\s*,\s*/).find(_=>":self"==_);return g&&(V=V.replace(mo,"")),V=V.replace(/@\*/g,Rr).replace(/@\w+/g,_=>Rr+"-"+_.slice(1)).replace(/:animating/g,jr),[V,g]}(g.selector);_.currentQuerySelector=b.length?b+" "+H:H,Gn(_.collectedStyles,_.currentQuerySelector,new Map);const ye=st(this,St(g.animation),_);return _.currentQuery=null,_.currentQuerySelector=b,{type:11,selector:H,limit:$.limit||0,optional:!!$.optional,includeSelf:he,animation:ye,originalSelector:g.selector,options:Ri(g.options)}}visitStagger(g,_){_.currentQuery||_.errors.push(function Nt(){return new ne.vHH(3013,!1)}());const b="full"===g.timings?{duration:0,delay:0,easing:"full"}:Y(g.timings,_.errors,!0);return{type:12,animation:st(this,St(g.animation),_),timings:b,options:null}}}class Es{constructor(g){this.errors=g,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Ri(V){return V?(V=x(V)).params&&(V.params=function Gs(V){return V?x(V):null}(V.params)):V={},V}function Ms(V,g,_){return{duration:V,delay:g,easing:_}}function jo(V,g,_,b,$,H,he=null,ye=!1){return{type:1,element:V,keyframes:g,preStyleProps:_,postStyleProps:b,duration:$,delay:H,totalTime:$+H,easing:he,subTimeline:ye}}class mi{constructor(){this._map=new Map}get(g){return this._map.get(g)||[]}append(g,_){let b=this._map.get(g);b||this._map.set(g,b=[]),b.push(..._)}has(g){return this._map.has(g)}clear(){this._map.clear()}}const $o=new RegExp(":enter","g"),_o=new RegExp(":leave","g");function ji(V,g,_,b,$,H=new Map,he=new Map,ye,Ue,ze=[]){return(new yo).buildKeyframes(V,g,_,b,$,H,he,ye,Ue,ze)}class yo{buildKeyframes(g,_,b,$,H,he,ye,Ue,ze,xt=[]){ze=ze||new mi;const kt=new ro(g,_,ze,$,H,xt,[]);kt.options=Ue;const ln=Ue.delay?mr(Ue.delay):0;kt.currentTimeline.delayNextStep(ln),kt.currentTimeline.setStyles([he],null,kt.errors,Ue),st(this,b,kt);const Dn=kt.timelines.filter(Te=>Te.containsAnimation());if(Dn.length&&ye.size){let Te;for(let Cn=Dn.length-1;Cn>=0;Cn--){const sr=Dn[Cn];if(sr.element===_){Te=sr;break}}Te&&!Te.allowOnlyTimelineStyles()&&Te.setStyles([ye],null,kt.errors,Ue)}return Dn.length?Dn.map(Te=>Te.buildKeyframes()):[jo(_,[],[],[],0,ln,"",!1)]}visitTrigger(g,_){}visitState(g,_){}visitTransition(g,_){}visitAnimateChild(g,_){const b=_.subInstructions.get(_.element);if(b){const $=_.createSubContext(g.options),H=_.currentTimeline.currentTime,he=this._visitSubInstructions(b,$,$.options);H!=he&&_.transformIntoNewTimeline(he)}_.previousNode=g}visitAnimateRef(g,_){const b=_.createSubContext(g.options);b.transformIntoNewTimeline(),this._applyAnimationRefDelays([g.options,g.animation.options],_,b),this.visitReference(g.animation,b),_.transformIntoNewTimeline(b.currentTimeline.currentTime),_.previousNode=g}_applyAnimationRefDelays(g,_,b){for(const $ of g){const H=$?.delay;if(H){const he="number"==typeof H?H:mr(me(H,$?.params??{},_.errors));b.delayNextStep(he)}}}_visitSubInstructions(g,_,b){let H=_.currentTimeline.currentTime;const he=null!=b.duration?mr(b.duration):null,ye=null!=b.delay?mr(b.delay):null;return 0!==he&&g.forEach(Ue=>{const ze=_.appendInstructionToTimeline(Ue,he,ye);H=Math.max(H,ze.duration+ze.delay)}),H}visitReference(g,_){_.updateOptions(g.options,!0),st(this,g.animation,_),_.previousNode=g}visitSequence(g,_){const b=_.subContextCount;let $=_;const H=g.options;if(H&&(H.params||H.delay)&&($=_.createSubContext(H),$.transformIntoNewTimeline(),null!=H.delay)){6==$.previousNode.type&&($.currentTimeline.snapshotCurrentStyles(),$.previousNode=os);const he=mr(H.delay);$.delayNextStep(he)}g.steps.length&&(g.steps.forEach(he=>st(this,he,$)),$.currentTimeline.applyStylesToKeyframe(),$.subContextCount>b&&$.transformIntoNewTimeline()),_.previousNode=g}visitGroup(g,_){const b=[];let $=_.currentTimeline.currentTime;const H=g.options&&g.options.delay?mr(g.options.delay):0;g.steps.forEach(he=>{const ye=_.createSubContext(g.options);H&&ye.delayNextStep(H),st(this,he,ye),$=Math.max($,ye.currentTimeline.currentTime),b.push(ye.currentTimeline)}),b.forEach(he=>_.currentTimeline.mergeTimelineCollectedStyles(he)),_.transformIntoNewTimeline($),_.previousNode=g}_visitTiming(g,_){if(g.dynamic){const b=g.strValue;return Y(_.params?me(b,_.params,_.errors):b,_.errors)}return{duration:g.duration,delay:g.delay,easing:g.easing}}visitAnimate(g,_){const b=_.currentAnimateTimings=this._visitTiming(g.timings,_),$=_.currentTimeline;b.delay&&(_.incrementTime(b.delay),$.snapshotCurrentStyles());const H=g.style;5==H.type?this.visitKeyframes(H,_):(_.incrementTime(b.duration),this.visitStyle(H,_),$.applyStylesToKeyframe()),_.currentAnimateTimings=null,_.previousNode=g}visitStyle(g,_){const b=_.currentTimeline,$=_.currentAnimateTimings;!$&&b.hasCurrentStyleProperties()&&b.forwardFrame();const H=$&&$.easing||g.easing;g.isEmptyStep?b.applyEmptyStep(H):b.setStyles(g.styles,H,_.errors,_.options),_.previousNode=g}visitKeyframes(g,_){const b=_.currentAnimateTimings,$=_.currentTimeline.duration,H=b.duration,ye=_.createSubContext().currentTimeline;ye.easing=b.easing,g.styles.forEach(Ue=>{ye.forwardTime((Ue.offset||0)*H),ye.setStyles(Ue.styles,Ue.easing,_.errors,_.options),ye.applyStylesToKeyframe()}),_.currentTimeline.mergeTimelineCollectedStyles(ye),_.transformIntoNewTimeline($+H),_.previousNode=g}visitQuery(g,_){const b=_.currentTimeline.currentTime,$=g.options||{},H=$.delay?mr($.delay):0;H&&(6===_.previousNode.type||0==b&&_.currentTimeline.hasCurrentStyleProperties())&&(_.currentTimeline.snapshotCurrentStyles(),_.previousNode=os);let he=b;const ye=_.invokeQuery(g.selector,g.originalSelector,g.limit,g.includeSelf,!!$.optional,_.errors);_.currentQueryTotal=ye.length;let Ue=null;ye.forEach((ze,xt)=>{_.currentQueryIndex=xt;const kt=_.createSubContext(g.options,ze);H&&kt.delayNextStep(H),ze===_.element&&(Ue=kt.currentTimeline),st(this,g.animation,kt),kt.currentTimeline.applyStylesToKeyframe(),he=Math.max(he,kt.currentTimeline.currentTime)}),_.currentQueryIndex=0,_.currentQueryTotal=0,_.transformIntoNewTimeline(he),Ue&&(_.currentTimeline.mergeTimelineCollectedStyles(Ue),_.currentTimeline.snapshotCurrentStyles()),_.previousNode=g}visitStagger(g,_){const b=_.parentContext,$=_.currentTimeline,H=g.timings,he=Math.abs(H.duration),ye=he*(_.currentQueryTotal-1);let Ue=he*_.currentQueryIndex;switch(H.duration<0?"reverse":H.easing){case"reverse":Ue=ye-Ue;break;case"full":Ue=b.currentStaggerTime}const xt=_.currentTimeline;Ue&&xt.delayNextStep(Ue);const kt=xt.currentTime;st(this,g.animation,_),_.previousNode=g,b.currentStaggerTime=$.currentTime-kt+($.startTime-b.currentTimeline.startTime)}}const os={};class ro{constructor(g,_,b,$,H,he,ye,Ue){this._driver=g,this.element=_,this.subInstructions=b,this._enterClassName=$,this._leaveClassName=H,this.errors=he,this.timelines=ye,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=os,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=Ue||new Yi(this._driver,_,0),ye.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(g,_){if(!g)return;const b=g;let $=this.options;null!=b.duration&&($.duration=mr(b.duration)),null!=b.delay&&($.delay=mr(b.delay));const H=b.params;if(H){let he=$.params;he||(he=this.options.params={}),Object.keys(H).forEach(ye=>{(!_||!he.hasOwnProperty(ye))&&(he[ye]=me(H[ye],he,this.errors))})}}_copyOptions(){const g={};if(this.options){const _=this.options.params;if(_){const b=g.params={};Object.keys(_).forEach($=>{b[$]=_[$]})}}return g}createSubContext(g=null,_,b){const $=_||this.element,H=new ro(this._driver,$,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork($,b||0));return H.previousNode=this.previousNode,H.currentAnimateTimings=this.currentAnimateTimings,H.options=this._copyOptions(),H.updateOptions(g),H.currentQueryIndex=this.currentQueryIndex,H.currentQueryTotal=this.currentQueryTotal,H.parentContext=this,this.subContextCount++,H}transformIntoNewTimeline(g){return this.previousNode=os,this.currentTimeline=this.currentTimeline.fork(this.element,g),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(g,_,b){const $={duration:_??g.duration,delay:this.currentTimeline.currentTime+(b??0)+g.delay,easing:""},H=new Hn(this._driver,g.element,g.keyframes,g.preStyleProps,g.postStyleProps,$,g.stretchStartingKeyframe);return this.timelines.push(H),$}incrementTime(g){this.currentTimeline.forwardTime(this.currentTimeline.duration+g)}delayNextStep(g){g>0&&this.currentTimeline.delayNextStep(g)}invokeQuery(g,_,b,$,H,he){let ye=[];if($&&ye.push(this.element),g.length>0){g=(g=g.replace($o,"."+this._enterClassName)).replace(_o,"."+this._leaveClassName);let ze=this._driver.query(this.element,g,1!=b);0!==b&&(ze=b<0?ze.slice(ze.length+b,ze.length):ze.slice(0,b)),ye.push(...ze)}return!H&&0==ye.length&&he.push(function Pt(V){return new ne.vHH(3014,!1)}()),ye}}class Yi{constructor(g,_,b,$){this._driver=g,this.element=_,this.startTime=b,this._elementTimelineStylesLookup=$,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(_),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(_,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(g){const _=1===this._keyframes.size&&this._pendingStyles.size;this.duration||_?(this.forwardTime(this.currentTime+g),_&&this.snapshotCurrentStyles()):this.startTime+=g}fork(g,_){return this.applyStylesToKeyframe(),new Yi(this._driver,g,_||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(g){this.applyStylesToKeyframe(),this.duration=g,this._loadKeyframe()}_updateStyle(g,_){this._localTimelineStyles.set(g,_),this._globalTimelineStyles.set(g,_),this._styleSummary.set(g,{time:this.currentTime,value:_})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(g){g&&this._previousKeyframe.set("easing",g);for(let[_,b]of this._globalTimelineStyles)this._backFill.set(_,b||qe.l3),this._currentKeyframe.set(_,qe.l3);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(g,_,b,$){_&&this._previousKeyframe.set("easing",_);const H=$&&$.params||{},he=function Vr(V,g){const _=new Map;let b;return V.forEach($=>{if("*"===$){b=b||g.keys();for(let H of b)_.set(H,qe.l3)}else rt($,_)}),_}(g,this._globalTimelineStyles);for(let[ye,Ue]of he){const ze=me(Ue,H,b);this._pendingStyles.set(ye,ze),this._localTimelineStyles.has(ye)||this._backFill.set(ye,this._globalTimelineStyles.get(ye)??qe.l3),this._updateStyle(ye,ze)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((g,_)=>{this._currentKeyframe.set(_,g)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((g,_)=>{this._currentKeyframe.has(_)||this._currentKeyframe.set(_,g)}))}snapshotCurrentStyles(){for(let[g,_]of this._localTimelineStyles)this._pendingStyles.set(g,_),this._updateStyle(g,_)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const g=[];for(let _ in this._currentKeyframe)g.push(_);return g}mergeTimelineCollectedStyles(g){g._styleSummary.forEach((_,b)=>{const $=this._styleSummary.get(b);(!$||_.time>$.time)&&this._updateStyle(b,_.value)})}buildKeyframes(){this.applyStylesToKeyframe();const g=new Set,_=new Set,b=1===this._keyframes.size&&0===this.duration;let $=[];this._keyframes.forEach((ye,Ue)=>{const ze=rt(ye,new Map,this._backFill);ze.forEach((xt,kt)=>{xt===qe.k1?g.add(kt):xt===qe.l3&&_.add(kt)}),b||ze.set("offset",Ue/this.duration),$.push(ze)});const H=g.size?De(g.values()):[],he=_.size?De(_.values()):[];if(b){const ye=$[0],Ue=new Map(ye);ye.set("offset",0),Ue.set("offset",1),$=[ye,Ue]}return jo(this.element,$,H,he,this.duration,this.startTime,this.easing,!1)}}class Hn extends Yi{constructor(g,_,b,$,H,he,ye=!1){super(g,_,he.delay),this.keyframes=b,this.preStyleProps=$,this.postStyleProps=H,this._stretchStartingKeyframe=ye,this.timings={duration:he.duration,delay:he.delay,easing:he.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let g=this.keyframes,{delay:_,duration:b,easing:$}=this.timings;if(this._stretchStartingKeyframe&&_){const H=[],he=b+_,ye=_/he,Ue=rt(g[0]);Ue.set("offset",0),H.push(Ue);const ze=rt(g[0]);ze.set("offset",ri(ye)),H.push(ze);const xt=g.length-1;for(let kt=1;kt<=xt;kt++){let ln=rt(g[kt]);const Dn=ln.get("offset");ln.set("offset",ri((_+Dn*b)/he)),H.push(ln)}b=he,_=0,$="",g=H}return jo(this.element,g,this.preStyleProps,this.postStyleProps,b,_,$,!0)}}function ri(V,g=3){const _=Math.pow(10,g-1);return Math.round(V*_)/_}class Zr{}const io=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Ln extends Zr{normalizePropertyName(g,_){return pe(g)}normalizeStyleValue(g,_,b,$){let H="";const he=b.toString().trim();if(io.has(_)&&0!==b&&"0"!==b)if("number"==typeof b)H="px";else{const ye=b.match(/^[+-]?[\d\.]+([a-z]*)$/);ye&&0==ye[1].length&&$.push(function Be(V,g){return new ne.vHH(3005,!1)}())}return he+H}}function Li(V,g,_,b,$,H,he,ye,Ue,ze,xt,kt,ln){return{type:0,element:V,triggerName:g,isRemovalTransition:$,fromState:_,fromStyles:H,toState:b,toStyles:he,timelines:ye,queriedElements:Ue,preStyleProps:ze,postStyleProps:xt,totalTime:kt,errors:ln}}const $i={};class Er{constructor(g,_,b){this._triggerName=g,this.ast=_,this._stateStyles=b}match(g,_,b,$){return function cn(V,g,_,b,$){return V.some(H=>H(g,_,b,$))}(this.ast.matchers,g,_,b,$)}buildStyles(g,_,b){let $=this._stateStyles.get("*");return void 0!==g&&($=this._stateStyles.get(g?.toString())||$),$?$.buildStyles(_,b):new Map}build(g,_,b,$,H,he,ye,Ue,ze,xt){const kt=[],ln=this.ast.options&&this.ast.options.params||$i,Te=this.buildStyles(b,ye&&ye.params||$i,kt),Cn=Ue&&Ue.params||$i,sr=this.buildStyles($,Cn,kt),fi=new Set,Kn=new Map,fr=new Map,Wr="void"===$,zr={params:cr(Cn,ln),delay:this.ast.options?.delay},Di=xt?[]:ji(g,_,this.ast.animation,H,he,Te,sr,zr,ze,kt);let Ni=0;if(Di.forEach(wo=>{Ni=Math.max(wo.duration+wo.delay,Ni)}),kt.length)return Li(_,this._triggerName,b,$,Wr,Te,sr,[],[],Kn,fr,Ni,kt);Di.forEach(wo=>{const Oi=wo.element,Fo=Gn(Kn,Oi,new Set);wo.preStyleProps.forEach(I=>Fo.add(I));const ho=Gn(fr,Oi,new Set);wo.postStyleProps.forEach(I=>ho.add(I)),Oi!==_&&fi.add(Oi)});const Io=De(fi.values());return Li(_,this._triggerName,b,$,Wr,Te,sr,Di,Io,Kn,fr,Ni)}}function cr(V,g){const _=x(g);for(const b in V)V.hasOwnProperty(b)&&null!=V[b]&&(_[b]=V[b]);return _}class Hi{constructor(g,_,b){this.styles=g,this.defaultParams=_,this.normalizer=b}buildStyles(g,_){const b=new Map,$=x(this.defaultParams);return Object.keys(g).forEach(H=>{const he=g[H];null!==he&&($[H]=he)}),this.styles.styles.forEach(H=>{"string"!=typeof H&&H.forEach((he,ye)=>{he&&(he=me(he,$,_));const Ue=this.normalizer.normalizePropertyName(ye,_);he=this.normalizer.normalizeStyleValue(ye,Ue,he,_),b.set(ye,he)})}),b}}class di{constructor(g,_,b){this.name=g,this.ast=_,this._normalizer=b,this.transitionFactories=[],this.states=new Map,_.states.forEach($=>{this.states.set($.name,new Hi($.style,$.options&&$.options.params||{},b))}),er(this.states,"true","1"),er(this.states,"false","0"),_.transitions.forEach($=>{this.transitionFactories.push(new Er(g,$,this.states))}),this.fallbackTransition=function Vi(V,g,_){return new Er(V,{type:1,animation:{type:2,steps:[],options:null},matchers:[(he,ye)=>!0],options:null,queryCount:0,depCount:0},g)}(g,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(g,_,b,$){return this.transitionFactories.find(he=>he.match(g,_,b,$))||null}matchStyles(g,_,b){return this.fallbackTransition.buildStyles(g,_,b)}}function er(V,g,_){V.has(g)?V.has(_)||V.set(_,V.get(g)):V.has(_)&&V.set(g,V.get(_))}const zi=new mi;class fs{constructor(g,_,b){this.bodyNode=g,this._driver=_,this._normalizer=b,this._animations=new Map,this._playersById=new Map,this.players=[]}register(g,_){const b=[],H=eo(this._driver,_,b,[]);if(b.length)throw function lt(V){return new ne.vHH(3503,!1)}();this._animations.set(g,H)}_buildPlayer(g,_,b){const $=g.element,H=tr(this._normalizer,g.keyframes,_,b);return this._driver.animate($,H,g.duration,g.delay,g.easing,[],!0)}create(g,_,b={}){const $=[],H=this._animations.get(g);let he;const ye=new Map;if(H?(he=ji(this._driver,_,H,rr,qr,new Map,new Map,b,zi,$),he.forEach(xt=>{const kt=Gn(ye,xt.element,new Map);xt.postStyleProps.forEach(ln=>kt.set(ln,null))})):($.push(function Et(){return new ne.vHH(3300,!1)}()),he=[]),$.length)throw function yt(V){return new ne.vHH(3504,!1)}();ye.forEach((xt,kt)=>{xt.forEach((ln,Dn)=>{xt.set(Dn,this._driver.computeStyle(kt,Dn,qe.l3))})});const ze=wn(he.map(xt=>{const kt=ye.get(xt.element);return this._buildPlayer(xt,new Map,kt)}));return this._playersById.set(g,ze),ze.onDestroy(()=>this.destroy(g)),this.players.push(ze),ze}destroy(g){const _=this._getPlayer(g);_.destroy(),this._playersById.delete(g);const b=this.players.indexOf(_);b>=0&&this.players.splice(b,1)}_getPlayer(g){const _=this._playersById.get(g);if(!_)throw function Mn(V){return new ne.vHH(3301,!1)}();return _}listen(g,_,b,$){const H=nr(_,"","","");return kn(this._getPlayer(g),b,H,$),()=>{}}command(g,_,b,$){if("register"==b)return void this.register(g,$[0]);if("create"==b)return void this.create(g,_,$[0]||{});const H=this._getPlayer(g);switch(b){case"play":H.play();break;case"pause":H.pause();break;case"reset":H.reset();break;case"restart":H.restart();break;case"finish":H.finish();break;case"init":H.init();break;case"setPosition":H.setPosition(parseFloat($[0]));break;case"destroy":this.destroy(g)}}}const an="ng-animate-queued",yi="ng-animate-disabled",Hr=[],Dr={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},vi={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ei="__ng_removed";class Ji{get params(){return this.options.params}constructor(g,_=""){this.namespaceId=_;const b=g&&g.hasOwnProperty("value");if(this.value=function qs(V){return V??null}(b?g.value:g),b){const H=x(g);delete H.value,this.options=H}else this.options={};this.options.params||(this.options.params={})}absorbOptions(g){const _=g.params;if(_){const b=this.options.params;Object.keys(_).forEach($=>{null==b[$]&&(b[$]=_[$])})}}}const Qr="void",ws=new Ji(Qr);class vo{constructor(g,_,b){this.id=g,this.hostElement=_,this._engine=b,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+g,Ii(_,this._hostClassName)}listen(g,_,b,$){if(!this._triggers.has(_))throw function Jt(V,g){return new ne.vHH(3302,!1)}();if(null==b||0==b.length)throw function Nn(V){return new ne.vHH(3303,!1)}();if(!function Ro(V){return"start"==V||"done"==V}(b))throw function on(V,g){return new ne.vHH(3400,!1)}();const H=Gn(this._elementListeners,g,[]),he={name:_,phase:b,callback:$};H.push(he);const ye=Gn(this._engine.statesByElement,g,new Map);return ye.has(_)||(Ii(g,Sr),Ii(g,Sr+"-"+_),ye.set(_,ws)),()=>{this._engine.afterFlush(()=>{const Ue=H.indexOf(he);Ue>=0&&H.splice(Ue,1),this._triggers.has(_)||ye.delete(_)})}}register(g,_){return!this._triggers.has(g)&&(this._triggers.set(g,_),!0)}_getTrigger(g){const _=this._triggers.get(g);if(!_)throw function $n(V){return new ne.vHH(3401,!1)}();return _}trigger(g,_,b,$=!0){const H=this._getTrigger(_),he=new Ws(this.id,_,g);let ye=this._engine.statesByElement.get(g);ye||(Ii(g,Sr),Ii(g,Sr+"-"+_),this._engine.statesByElement.set(g,ye=new Map));let Ue=ye.get(_);const ze=new Ji(b,this.id);if(!(b&&b.hasOwnProperty("value"))&&Ue&&ze.absorbOptions(Ue.options),ye.set(_,ze),Ue||(Ue=ws),ze.value!==Qr&&Ue.value===ze.value){if(!function ao(V,g){const _=Object.keys(V),b=Object.keys(g);if(_.length!=b.length)return!1;for(let $=0;$<_.length;$++){const H=_[$];if(!g.hasOwnProperty(H)||V[H]!==g[H])return!1}return!0}(Ue.params,ze.params)){const Cn=[],sr=H.matchStyles(Ue.value,Ue.params,Cn),fi=H.matchStyles(ze.value,ze.params,Cn);Cn.length?this._engine.reportError(Cn):this._engine.afterFlush(()=>{Ct(g,sr),dt(g,fi)})}return}const ln=Gn(this._engine.playersByElement,g,[]);ln.forEach(Cn=>{Cn.namespaceId==this.id&&Cn.triggerName==_&&Cn.queued&&Cn.destroy()});let Dn=H.matchTransition(Ue.value,ze.value,g,ze.params),Te=!1;if(!Dn){if(!$)return;Dn=H.fallbackTransition,Te=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:g,triggerName:_,transition:Dn,fromState:Ue,toState:ze,player:he,isFallbackTransition:Te}),Te||(Ii(g,an),he.onStart(()=>{dn(g,an)})),he.onDone(()=>{let Cn=this.players.indexOf(he);Cn>=0&&this.players.splice(Cn,1);const sr=this._engine.playersByElement.get(g);if(sr){let fi=sr.indexOf(he);fi>=0&&sr.splice(fi,1)}}),this.players.push(he),ln.push(he),he}deregister(g){this._triggers.delete(g),this._engine.statesByElement.forEach(_=>_.delete(g)),this._elementListeners.forEach((_,b)=>{this._elementListeners.set(b,_.filter($=>$.name!=g))})}clearElementCache(g){this._engine.statesByElement.delete(g),this._elementListeners.delete(g);const _=this._engine.playersByElement.get(g);_&&(_.forEach(b=>b.destroy()),this._engine.playersByElement.delete(g))}_signalRemovalForInnerTriggers(g,_){const b=this._engine.driver.query(g,Rr,!0);b.forEach($=>{if($[Ei])return;const H=this._engine.fetchNamespacesByElement($);H.size?H.forEach(he=>he.triggerLeaveAnimation($,_,!1,!0)):this.clearElementCache($)}),this._engine.afterFlushAnimationsDone(()=>b.forEach($=>this.clearElementCache($)))}triggerLeaveAnimation(g,_,b,$){const H=this._engine.statesByElement.get(g),he=new Map;if(H){const ye=[];if(H.forEach((Ue,ze)=>{if(he.set(ze,Ue.value),this._triggers.has(ze)){const xt=this.trigger(g,ze,Qr,$);xt&&ye.push(xt)}}),ye.length)return this._engine.markElementAsRemoved(this.id,g,!0,_,he),b&&wn(ye).onDone(()=>this._engine.processLeaveNode(g)),!0}return!1}prepareLeaveAnimationListeners(g){const _=this._elementListeners.get(g),b=this._engine.statesByElement.get(g);if(_&&b){const $=new Set;_.forEach(H=>{const he=H.name;if($.has(he))return;$.add(he);const Ue=this._triggers.get(he).fallbackTransition,ze=b.get(he)||ws,xt=new Ji(Qr),kt=new Ws(this.id,he,g);this._engine.totalQueuedPlayers++,this._queue.push({element:g,triggerName:he,transition:Ue,fromState:ze,toState:xt,player:kt,isFallbackTransition:!0})})}}removeNode(g,_){const b=this._engine;if(g.childElementCount&&this._signalRemovalForInnerTriggers(g,_),this.triggerLeaveAnimation(g,_,!0))return;let $=!1;if(b.totalAnimations){const H=b.players.length?b.playersByQueriedElement.get(g):[];if(H&&H.length)$=!0;else{let he=g;for(;he=he.parentNode;)if(b.statesByElement.get(he)){$=!0;break}}}if(this.prepareLeaveAnimationListeners(g),$)b.markElementAsRemoved(this.id,g,!1,_);else{const H=g[Ei];(!H||H===Dr)&&(b.afterFlush(()=>this.clearElementCache(g)),b.destroyInnerAnimations(g),b._onRemovalComplete(g,_))}}insertNode(g,_){Ii(g,this._hostClassName)}drainQueuedTransitions(g){const _=[];return this._queue.forEach(b=>{const $=b.player;if($.destroyed)return;const H=b.element,he=this._elementListeners.get(H);he&&he.forEach(ye=>{if(ye.name==b.triggerName){const Ue=nr(H,b.triggerName,b.fromState.value,b.toState.value);Ue._data=g,kn(b.player,ye.phase,Ue,ye.callback)}}),$.markedForDestroy?this._engine.afterFlush(()=>{$.destroy()}):_.push(b)}),this._queue=[],_.sort((b,$)=>{const H=b.transition.ast.depCount,he=$.transition.ast.depCount;return 0==H||0==he?H-he:this._engine.driver.containsElement(b.element,$.element)?1:-1})}destroy(g){this.players.forEach(_=>_.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,g)}}class jn{_onRemovalComplete(g,_){this.onRemovalComplete(g,_)}constructor(g,_,b){this.bodyNode=g,this.driver=_,this._normalizer=b,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=($,H)=>{}}get queuedPlayers(){const g=[];return this._namespaceList.forEach(_=>{_.players.forEach(b=>{b.queued&&g.push(b)})}),g}createNamespace(g,_){const b=new vo(g,_,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,_)?this._balanceNamespaceList(b,_):(this.newHostElements.set(_,b),this.collectEnterElement(_)),this._namespaceLookup[g]=b}_balanceNamespaceList(g,_){const b=this._namespaceList,$=this.namespacesByHostElement;if(b.length-1>=0){let he=!1,ye=this.driver.getParentElement(_);for(;ye;){const Ue=$.get(ye);if(Ue){const ze=b.indexOf(Ue);b.splice(ze+1,0,g),he=!0;break}ye=this.driver.getParentElement(ye)}he||b.unshift(g)}else b.push(g);return $.set(_,g),g}register(g,_){let b=this._namespaceLookup[g];return b||(b=this.createNamespace(g,_)),b}registerTrigger(g,_,b){let $=this._namespaceLookup[g];$&&$.register(_,b)&&this.totalAnimations++}destroy(g,_){g&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const b=this._fetchNamespace(g);this.namespacesByHostElement.delete(b.hostElement);const $=this._namespaceList.indexOf(b);$>=0&&this._namespaceList.splice($,1),b.destroy(_),delete this._namespaceLookup[g]}))}_fetchNamespace(g){return this._namespaceLookup[g]}fetchNamespacesByElement(g){const _=new Set,b=this.statesByElement.get(g);if(b)for(let $ of b.values())if($.namespaceId){const H=this._fetchNamespace($.namespaceId);H&&_.add(H)}return _}trigger(g,_,b,$){if(Gr(_)){const H=this._fetchNamespace(g);if(H)return H.trigger(_,b,$),!0}return!1}insertNode(g,_,b,$){if(!Gr(_))return;const H=_[Ei];if(H&&H.setForRemoval){H.setForRemoval=!1,H.setForMove=!0;const he=this.collectedLeaveElements.indexOf(_);he>=0&&this.collectedLeaveElements.splice(he,1)}if(g){const he=this._fetchNamespace(g);he&&he.insertNode(_,b)}$&&this.collectEnterElement(_)}collectEnterElement(g){this.collectedEnterElements.push(g)}markElementAsDisabled(g,_){_?this.disabledNodes.has(g)||(this.disabledNodes.add(g),Ii(g,yi)):this.disabledNodes.has(g)&&(this.disabledNodes.delete(g),dn(g,yi))}removeNode(g,_,b){if(Gr(_)){const $=g?this._fetchNamespace(g):null;$?$.removeNode(_,b):this.markElementAsRemoved(g,_,!1,b);const H=this.namespacesByHostElement.get(_);H&&H.id!==g&&H.removeNode(_,b)}else this._onRemovalComplete(_,b)}markElementAsRemoved(g,_,b,$,H){this.collectedLeaveElements.push(_),_[Ei]={namespaceId:g,setForRemoval:$,hasAnimation:b,removedBeforeQueried:!1,previousTriggersValues:H}}listen(g,_,b,$,H){return Gr(_)?this._fetchNamespace(g).listen(_,b,$,H):()=>{}}_buildInstruction(g,_,b,$,H){return g.transition.build(this.driver,g.element,g.fromState.value,g.toState.value,b,$,g.fromState.options,g.toState.options,_,H)}destroyInnerAnimations(g){let _=this.driver.query(g,Rr,!0);_.forEach(b=>this.destroyActiveAnimationsForElement(b)),0!=this.playersByQueriedElement.size&&(_=this.driver.query(g,jr,!0),_.forEach(b=>this.finishActiveQueriedAnimationOnElement(b)))}destroyActiveAnimationsForElement(g){const _=this.playersByElement.get(g);_&&_.forEach(b=>{b.queued?b.markedForDestroy=!0:b.destroy()})}finishActiveQueriedAnimationOnElement(g){const _=this.playersByQueriedElement.get(g);_&&_.forEach(b=>b.finish())}whenRenderingDone(){return new Promise(g=>{if(this.players.length)return wn(this.players).onDone(()=>g());g()})}processLeaveNode(g){const _=g[Ei];if(_&&_.setForRemoval){if(g[Ei]=Dr,_.namespaceId){this.destroyInnerAnimations(g);const b=this._fetchNamespace(_.namespaceId);b&&b.clearElementCache(g)}this._onRemovalComplete(g,_.setForRemoval)}g.classList?.contains(yi)&&this.markElementAsDisabled(g,!1),this.driver.query(g,".ng-animate-disabled",!0).forEach(b=>{this.markElementAsDisabled(b,!1)})}flush(g=-1){let _=[];if(this.newHostElements.size&&(this.newHostElements.forEach((b,$)=>this._balanceNamespaceList(b,$)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let b=0;b<this.collectedEnterElements.length;b++)Ii(this.collectedEnterElements[b],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const b=[];try{_=this._flushAnimations(b,g)}finally{for(let $=0;$<b.length;$++)b[$]()}}else for(let b=0;b<this.collectedLeaveElements.length;b++)this.processLeaveNode(this.collectedLeaveElements[b]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(b=>b()),this._flushFns=[],this._whenQuietFns.length){const b=this._whenQuietFns;this._whenQuietFns=[],_.length?wn(_).onDone(()=>{b.forEach($=>$())}):b.forEach($=>$())}}reportError(g){throw function In(V){return new ne.vHH(3402,!1)}()}_flushAnimations(g,_){const b=new mi,$=[],H=new Map,he=[],ye=new Map,Ue=new Map,ze=new Map,xt=new Set;this.disabledNodes.forEach(C=>{xt.add(C);const O=this.driver.query(C,".ng-animate-queued",!0);for(let q=0;q<O.length;q++)xt.add(O[q])});const kt=this.bodyNode,ln=Array.from(this.statesByElement.keys()),Dn=Or(ln,this.collectedEnterElements),Te=new Map;let Cn=0;Dn.forEach((C,O)=>{const q=rr+Cn++;Te.set(O,q),C.forEach(ae=>Ii(ae,q))});const sr=[],fi=new Set,Kn=new Set;for(let C=0;C<this.collectedLeaveElements.length;C++){const O=this.collectedLeaveElements[C],q=O[Ei];q&&q.setForRemoval&&(sr.push(O),fi.add(O),q.hasAnimation?this.driver.query(O,".ng-star-inserted",!0).forEach(ae=>fi.add(ae)):Kn.add(O))}const fr=new Map,Wr=Or(ln,Array.from(fi));Wr.forEach((C,O)=>{const q=qr+Cn++;fr.set(O,q),C.forEach(ae=>Ii(ae,q))}),g.push(()=>{Dn.forEach((C,O)=>{const q=Te.get(O);C.forEach(ae=>dn(ae,q))}),Wr.forEach((C,O)=>{const q=fr.get(O);C.forEach(ae=>dn(ae,q))}),sr.forEach(C=>{this.processLeaveNode(C)})});const zr=[],Di=[];for(let C=this._namespaceList.length-1;C>=0;C--)this._namespaceList[C].drainQueuedTransitions(_).forEach(q=>{const ae=q.player,He=q.element;if(zr.push(ae),this.collectedEnterElements.length){const zn=He[Ei];if(zn&&zn.setForMove){if(zn.previousTriggersValues&&zn.previousTriggersValues.has(q.triggerName)){const Zs=zn.previousTriggersValues.get(q.triggerName),As=this.statesByElement.get(q.element);if(As&&As.has(q.triggerName)){const To=As.get(q.triggerName);To.value=Zs,As.set(q.triggerName,To)}}return void ae.destroy()}}const We=!kt||!this.driver.containsElement(kt,He),Tt=fr.get(He),An=Te.get(He),Rn=this._buildInstruction(q,b,An,Tt,We);if(Rn.errors&&Rn.errors.length)return void Di.push(Rn);if(We)return ae.onStart(()=>Ct(He,Rn.fromStyles)),ae.onDestroy(()=>dt(He,Rn.toStyles)),void $.push(ae);if(q.isFallbackTransition)return ae.onStart(()=>Ct(He,Rn.fromStyles)),ae.onDestroy(()=>dt(He,Rn.toStyles)),void $.push(ae);const Pn=[];Rn.timelines.forEach(zn=>{zn.stretchStartingKeyframe=!0,this.disabledNodes.has(zn.element)||Pn.push(zn)}),Rn.timelines=Pn,b.append(He,Rn.timelines),he.push({instruction:Rn,player:ae,element:He}),Rn.queriedElements.forEach(zn=>Gn(ye,zn,[]).push(ae)),Rn.preStyleProps.forEach((zn,Zs)=>{if(zn.size){let As=Ue.get(Zs);As||Ue.set(Zs,As=new Set),zn.forEach((To,Ha)=>As.add(Ha))}}),Rn.postStyleProps.forEach((zn,Zs)=>{let As=ze.get(Zs);As||ze.set(Zs,As=new Set),zn.forEach((To,Ha)=>As.add(Ha))})});if(Di.length){const C=[];Di.forEach(O=>{C.push(function Rt(V,g){return new ne.vHH(3505,!1)}())}),zr.forEach(O=>O.destroy()),this.reportError(C)}const Ni=new Map,Io=new Map;he.forEach(C=>{const O=C.element;b.has(O)&&(Io.set(O,O),this._beforeAnimationBuild(C.player.namespaceId,C.instruction,Ni))}),$.forEach(C=>{const O=C.element;this._getPreviousPlayers(O,!1,C.namespaceId,C.triggerName,null).forEach(ae=>{Gn(Ni,O,[]).push(ae),ae.destroy()})});const wo=sr.filter(C=>us(C,Ue,ze)),Oi=new Map;ii(Oi,this.driver,Kn,ze,qe.l3).forEach(C=>{us(C,Ue,ze)&&wo.push(C)});const ho=new Map;Dn.forEach((C,O)=>{ii(ho,this.driver,new Set(C),Ue,qe.k1)}),wo.forEach(C=>{const O=Oi.get(C),q=ho.get(C);Oi.set(C,new Map([...O?.entries()??[],...q?.entries()??[]]))});const I=[],S=[],E={};he.forEach(C=>{const{element:O,player:q,instruction:ae}=C;if(b.has(O)){if(xt.has(O))return q.onDestroy(()=>dt(O,ae.toStyles)),q.disabled=!0,q.overrideTotalTime(ae.totalTime),void $.push(q);let He=E;if(Io.size>1){let Tt=O;const An=[];for(;Tt=Tt.parentNode;){const Rn=Io.get(Tt);if(Rn){He=Rn;break}An.push(Tt)}An.forEach(Rn=>Io.set(Rn,He))}const We=this._buildAnimation(q.namespaceId,ae,Ni,H,ho,Oi);if(q.setRealPlayer(We),He===E)I.push(q);else{const Tt=this.playersByElement.get(He);Tt&&Tt.length&&(q.parentPlayer=wn(Tt)),$.push(q)}}else Ct(O,ae.fromStyles),q.onDestroy(()=>dt(O,ae.toStyles)),S.push(q),xt.has(O)&&$.push(q)}),S.forEach(C=>{const O=H.get(C.element);if(O&&O.length){const q=wn(O);C.setRealPlayer(q)}}),$.forEach(C=>{C.parentPlayer?C.syncPlayerEvents(C.parentPlayer):C.destroy()});for(let C=0;C<sr.length;C++){const O=sr[C],q=O[Ei];if(dn(O,qr),q&&q.hasAnimation)continue;let ae=[];if(ye.size){let We=ye.get(O);We&&We.length&&ae.push(...We);let Tt=this.driver.query(O,jr,!0);for(let An=0;An<Tt.length;An++){let Rn=ye.get(Tt[An]);Rn&&Rn.length&&ae.push(...Rn)}}const He=ae.filter(We=>!We.destroyed);He.length?wi(this,O,He):this.processLeaveNode(O)}return sr.length=0,I.forEach(C=>{this.players.push(C),C.onDone(()=>{C.destroy();const O=this.players.indexOf(C);this.players.splice(O,1)}),C.play()}),I}afterFlush(g){this._flushFns.push(g)}afterFlushAnimationsDone(g){this._whenQuietFns.push(g)}_getPreviousPlayers(g,_,b,$,H){let he=[];if(_){const ye=this.playersByQueriedElement.get(g);ye&&(he=ye)}else{const ye=this.playersByElement.get(g);if(ye){const Ue=!H||H==Qr;ye.forEach(ze=>{ze.queued||!Ue&&ze.triggerName!=$||he.push(ze)})}}return(b||$)&&(he=he.filter(ye=>!(b&&b!=ye.namespaceId||$&&$!=ye.triggerName))),he}_beforeAnimationBuild(g,_,b){const H=_.element,he=_.isRemovalTransition?void 0:g,ye=_.isRemovalTransition?void 0:_.triggerName;for(const Ue of _.timelines){const ze=Ue.element,xt=ze!==H,kt=Gn(b,ze,[]);this._getPreviousPlayers(ze,xt,he,ye,_.toState).forEach(Dn=>{const Te=Dn.getRealPlayer();Te.beforeDestroy&&Te.beforeDestroy(),Dn.destroy(),kt.push(Dn)})}Ct(H,_.fromStyles)}_buildAnimation(g,_,b,$,H,he){const ye=_.triggerName,Ue=_.element,ze=[],xt=new Set,kt=new Set,ln=_.timelines.map(Te=>{const Cn=Te.element;xt.add(Cn);const sr=Cn[Ei];if(sr&&sr.removedBeforeQueried)return new qe.ZN(Te.duration,Te.delay);const fi=Cn!==Ue,Kn=function so(V){const g=[];return oo(V,g),g}((b.get(Cn)||Hr).map(Ni=>Ni.getRealPlayer())).filter(Ni=>!!Ni.element&&Ni.element===Cn),fr=H.get(Cn),Wr=he.get(Cn),zr=tr(this._normalizer,Te.keyframes,fr,Wr),Di=this._buildPlayer(Te,zr,Kn);if(Te.subTimeline&&$&&kt.add(Cn),fi){const Ni=new Ws(g,ye,Cn);Ni.setRealPlayer(Di),ze.push(Ni)}return Di});ze.forEach(Te=>{Gn(this.playersByQueriedElement,Te.element,[]).push(Te),Te.onDone(()=>function bo(V,g,_){let b=V.get(g);if(b){if(b.length){const $=b.indexOf(_);b.splice($,1)}0==b.length&&V.delete(g)}return b}(this.playersByQueriedElement,Te.element,Te))}),xt.forEach(Te=>Ii(Te,Pr));const Dn=wn(ln);return Dn.onDestroy(()=>{xt.forEach(Te=>dn(Te,Pr)),dt(Ue,_.toStyles)}),kt.forEach(Te=>{Gn($,Te,[]).push(Dn)}),Dn}_buildPlayer(g,_,b){return _.length>0?this.driver.animate(g.element,_,g.duration,g.delay,g.easing,b):new qe.ZN(g.duration,g.delay)}}class Ws{constructor(g,_,b){this.namespaceId=g,this.triggerName=_,this.element=b,this._player=new qe.ZN,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(g){this._containsRealPlayer||(this._player=g,this._queuedCallbacks.forEach((_,b)=>{_.forEach($=>kn(g,b,void 0,$))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(g.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(g){this.totalTime=g}syncPlayerEvents(g){const _=this._player;_.triggerCallback&&g.onStart(()=>_.triggerCallback("start")),g.onDone(()=>this.finish()),g.onDestroy(()=>this.destroy())}_queueEvent(g,_){Gn(this._queuedCallbacks,g,[]).push(_)}onDone(g){this.queued&&this._queueEvent("done",g),this._player.onDone(g)}onStart(g){this.queued&&this._queueEvent("start",g),this._player.onStart(g)}onDestroy(g){this.queued&&this._queueEvent("destroy",g),this._player.onDestroy(g)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(g){this.queued||this._player.setPosition(g)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(g){const _=this._player;_.triggerCallback&&_.triggerCallback(g)}}function Gr(V){return V&&1===V.nodeType}function Os(V,g){const _=V.style.display;return V.style.display=g??"none",_}function ii(V,g,_,b,$){const H=[];_.forEach(Ue=>H.push(Os(Ue)));const he=[];b.forEach((Ue,ze)=>{const xt=new Map;Ue.forEach(kt=>{const ln=g.computeStyle(ze,kt,$);xt.set(kt,ln),(!ln||0==ln.length)&&(ze[Ei]=vi,he.push(ze))}),V.set(ze,xt)});let ye=0;return _.forEach(Ue=>Os(Ue,H[ye++])),he}function Or(V,g){const _=new Map;if(V.forEach(ye=>_.set(ye,[])),0==g.length)return _;const $=new Set(g),H=new Map;function he(ye){if(!ye)return 1;let Ue=H.get(ye);if(Ue)return Ue;const ze=ye.parentNode;return Ue=_.has(ze)?ze:$.has(ze)?1:he(ze),H.set(ye,Ue),Ue}return g.forEach(ye=>{const Ue=he(ye);1!==Ue&&_.get(Ue).push(ye)}),_}function Ii(V,g){V.classList?.add(g)}function dn(V,g){V.classList?.remove(g)}function wi(V,g,_){wn(_).onDone(()=>V.processLeaveNode(g))}function oo(V,g){for(let _=0;_<V.length;_++){const b=V[_];b instanceof qe.ZE?oo(b.players,g):g.push(b)}}function us(V,g,_){const b=_.get(V);if(!b)return!1;let $=g.get(V);return $?b.forEach(H=>$.add(H)):g.set(V,b),_.delete(V),!0}class Ts{constructor(g,_,b){this.bodyNode=g,this._driver=_,this._normalizer=b,this._triggerCache={},this.onRemovalComplete=($,H)=>{},this._transitionEngine=new jn(g,_,b),this._timelineEngine=new fs(g,_,b),this._transitionEngine.onRemovalComplete=($,H)=>this.onRemovalComplete($,H)}registerTrigger(g,_,b,$,H){const he=g+"-"+$;let ye=this._triggerCache[he];if(!ye){const Ue=[],xt=eo(this._driver,H,Ue,[]);if(Ue.length)throw function Me(V,g){return new ne.vHH(3404,!1)}();ye=function as(V,g,_){return new di(V,g,_)}($,xt,this._normalizer),this._triggerCache[he]=ye}this._transitionEngine.registerTrigger(_,$,ye)}register(g,_){this._transitionEngine.register(g,_)}destroy(g,_){this._transitionEngine.destroy(g,_)}onInsert(g,_,b,$){this._transitionEngine.insertNode(g,_,b,$)}onRemove(g,_,b){this._transitionEngine.removeNode(g,_,b)}disableAnimations(g,_){this._transitionEngine.markElementAsDisabled(g,_)}process(g,_,b,$){if("@"==b.charAt(0)){const[H,he]=Kt(b);this._timelineEngine.command(H,_,he,$)}else this._transitionEngine.trigger(g,_,b,$)}listen(g,_,b,$,H){if("@"==b.charAt(0)){const[he,ye]=Kt(b);return this._timelineEngine.listen(he,_,ye,H)}return this._transitionEngine.listen(g,_,b,$,H)}flush(g=-1){this._transitionEngine.flush(g)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(g){this._transitionEngine.afterFlushAnimationsDone(g)}}let Po=(()=>{class V{static#e=this.initialStylesByElement=new WeakMap;constructor(_,b,$){this._element=_,this._startStyles=b,this._endStyles=$,this._state=0;let H=V.initialStylesByElement.get(_);H||V.initialStylesByElement.set(_,H=new Map),this._initialStyles=H}start(){this._state<1&&(this._startStyles&&dt(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(dt(this._element,this._initialStyles),this._endStyles&&(dt(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(V.initialStylesByElement.delete(this._element),this._startStyles&&(Ct(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Ct(this._element,this._endStyles),this._endStyles=null),dt(this._element,this._initialStyles),this._state=3)}}return V})();function Jo(V){let g=null;return V.forEach((_,b)=>{(function kr(V){return"display"===V||"position"===V})(b)&&(g=g||new Map,g.set(b,_))}),g}class xs{constructor(g,_,b,$){this.element=g,this.keyframes=_,this.options=b,this._specialStyles=$,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=b.duration,this._delay=b.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(g=>g()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const g=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,g,this.options),this._finalKeyframe=g.length?g[g.length-1]:new Map;const _=()=>this._onFinish();this.domPlayer.addEventListener("finish",_),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",_)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(g){const _=[];return g.forEach(b=>{_.push(Object.fromEntries(b))}),_}_triggerWebAnimation(g,_,b){return g.animate(this._convertKeyframesToObject(_),b)}onStart(g){this._originalOnStartFns.push(g),this._onStartFns.push(g)}onDone(g){this._originalOnDoneFns.push(g),this._onDoneFns.push(g)}onDestroy(g){this._onDestroyFns.push(g)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(g=>g()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(g=>g()),this._onDestroyFns=[])}setPosition(g){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=g*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const g=new Map;this.hasStarted()&&this._finalKeyframe.forEach((b,$)=>{"offset"!==$&&g.set($,this._finished?b:Qt(this.element,$))}),this.currentSnapshot=g}triggerCallback(g){const _="start"===g?this._onStartFns:this._onDoneFns;_.forEach(b=>b()),_.length=0}}class Ba{validateStyleProperty(g){return!0}validateAnimatableStyleProperty(g){return!0}matchesElement(g,_){return!1}containsElement(g,_){return $t(g,_)}getParentElement(g){return tn(g)}query(g,_,b){return Si(g,_,b)}computeStyle(g,_,b){return window.getComputedStyle(g)[_]}animate(g,_,b,$,H,he=[]){const Ue={duration:b,delay:$,fill:0==$?"both":"forwards"};H&&(Ue.easing=H);const ze=new Map,xt=he.filter(Dn=>Dn instanceof xs);(function Ge(V,g){return 0===V||0===g})(b,$)&&xt.forEach(Dn=>{Dn.currentSnapshot.forEach((Te,Cn)=>ze.set(Cn,Te))});let kt=function oe(V){return V.length?V[0]instanceof Map?V:V.map(g=>N(g)):[]}(_).map(Dn=>rt(Dn));kt=function Vt(V,g,_){if(_.size&&g.length){let b=g[0],$=[];if(_.forEach((H,he)=>{b.has(he)||$.push(he),b.set(he,H)}),$.length)for(let H=1;H<g.length;H++){let he=g[H];$.forEach(ye=>he.set(ye,Qt(V,ye)))}}return g}(g,kt,ze);const ln=function Eo(V,g){let _=null,b=null;return Array.isArray(g)&&g.length?(_=Jo(g[0]),g.length>1&&(b=Jo(g[g.length-1]))):g instanceof Map&&(_=Jo(g)),_||b?new Po(V,_,b):null}(g,kt);return new xs(g,kt,Ue,ln)}}var Xo=F(6814);let uo=(()=>{class V extends qe._j{constructor(_,b){super(),this._nextAnimationId=0,this._renderer=_.createRenderer(b.body,{id:"0",encapsulation:ne.ifc.None,styles:[],data:{animation:[]}})}build(_){const b=this._nextAnimationId.toString();this._nextAnimationId++;const $=Array.isArray(_)?(0,qe.vP)(_):_;return fa(this._renderer,null,b,"register",[$]),new Ir(b,this._renderer)}static#e=this.\u0275fac=function(b){return new(b||V)(ne.LFG(ne.FYo),ne.LFG(Xo.K0))};static#t=this.\u0275prov=ne.Yz7({token:V,factory:V.\u0275fac})}return V})();class Ir extends qe.LC{constructor(g,_){super(),this._id=g,this._renderer=_}create(g,_){return new Sa(this._id,g,_||{},this._renderer)}}class Sa{constructor(g,_,b,$){this.id=g,this.element=_,this._renderer=$,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",b)}_listen(g,_){return this._renderer.listen(this.element,`@@${this.id}:${g}`,_)}_command(g,..._){return fa(this._renderer,this.element,this.id,g,_)}onDone(g){this._listen("done",g)}onStart(g){this._listen("start",g)}onDestroy(g){this._listen("destroy",g)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(g){this._command("setPosition",g)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function fa(V,g,_,b,$){return V.setProperty(g,`@@${_}:${b}`,$)}const j="@",G="@.disabled";let M=(()=>{class V{constructor(_,b,$){this.delegate=_,this.engine=b,this._zone=$,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,b.onRemovalComplete=(H,he)=>{const ye=he?.parentNode(H);ye&&he.removeChild(ye,H)}}createRenderer(_,b){const H=this.delegate.createRenderer(_,b);if(!(_&&b&&b.data&&b.data.animation)){let xt=this._rendererCache.get(H);return xt||(xt=new X("",H,this.engine,()=>this._rendererCache.delete(H)),this._rendererCache.set(H,xt)),xt}const he=b.id,ye=b.id+"-"+this._currentId;this._currentId++,this.engine.register(ye,_);const Ue=xt=>{Array.isArray(xt)?xt.forEach(Ue):this.engine.registerTrigger(he,ye,_,xt.name,xt)};return b.data.animation.forEach(Ue),new Ie(this,ye,H,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(_,b,$){_>=0&&_<this._microtaskId?this._zone.run(()=>b($)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(H=>{const[he,ye]=H;he(ye)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([b,$]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}static#e=this.\u0275fac=function(b){return new(b||V)(ne.LFG(ne.FYo),ne.LFG(Ts),ne.LFG(ne.R0b))};static#t=this.\u0275prov=ne.Yz7({token:V,factory:V.\u0275fac})}return V})();class X{constructor(g,_,b,$){this.namespaceId=g,this.delegate=_,this.engine=b,this._onDestroy=$}get data(){return this.delegate.data}destroyNode(g){this.delegate.destroyNode?.(g)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(g,_){return this.delegate.createElement(g,_)}createComment(g){return this.delegate.createComment(g)}createText(g){return this.delegate.createText(g)}appendChild(g,_){this.delegate.appendChild(g,_),this.engine.onInsert(this.namespaceId,_,g,!1)}insertBefore(g,_,b,$=!0){this.delegate.insertBefore(g,_,b),this.engine.onInsert(this.namespaceId,_,g,$)}removeChild(g,_,b){this.engine.onRemove(this.namespaceId,_,this.delegate)}selectRootElement(g,_){return this.delegate.selectRootElement(g,_)}parentNode(g){return this.delegate.parentNode(g)}nextSibling(g){return this.delegate.nextSibling(g)}setAttribute(g,_,b,$){this.delegate.setAttribute(g,_,b,$)}removeAttribute(g,_,b){this.delegate.removeAttribute(g,_,b)}addClass(g,_){this.delegate.addClass(g,_)}removeClass(g,_){this.delegate.removeClass(g,_)}setStyle(g,_,b,$){this.delegate.setStyle(g,_,b,$)}removeStyle(g,_,b){this.delegate.removeStyle(g,_,b)}setProperty(g,_,b){_.charAt(0)==j&&_==G?this.disableAnimations(g,!!b):this.delegate.setProperty(g,_,b)}setValue(g,_){this.delegate.setValue(g,_)}listen(g,_,b){return this.delegate.listen(g,_,b)}disableAnimations(g,_){this.engine.disableAnimations(g,_)}}class Ie extends X{constructor(g,_,b,$,H){super(_,b,$,H),this.factory=g,this.namespaceId=_}setProperty(g,_,b){_.charAt(0)==j?"."==_.charAt(1)&&_==G?this.disableAnimations(g,b=void 0===b||!!b):this.engine.process(this.namespaceId,g,_.slice(1),b):this.delegate.setProperty(g,_,b)}listen(g,_,b){if(_.charAt(0)==j){const $=function Bt(V){switch(V){case"body":return document.body;case"document":return document;case"window":return window;default:return V}}(g);let H=_.slice(1),he="";return H.charAt(0)!=j&&([H,he]=function gn(V){const g=V.indexOf(".");return[V.substring(0,g),V.slice(g+1)]}(H)),this.engine.listen(this.namespaceId,$,H,he,ye=>{this.factory.scheduleListenerCallback(ye._data||-1,b,ye)})}return this.delegate.listen(g,_,b)}}const lo=[{provide:qe._j,useClass:uo},{provide:Zr,useFactory:function Gi(){return new Ln}},{provide:Ts,useClass:(()=>{class V extends Ts{constructor(_,b,$,H){super(_.body,b,$)}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(b){return new(b||V)(ne.LFG(Xo.K0),ne.LFG(Fr),ne.LFG(Zr),ne.LFG(ne.z2F))};static#t=this.\u0275prov=ne.Yz7({token:V,factory:V.\u0275fac})}return V})()},{provide:ne.FYo,useFactory:function ps(V,g,_){return new M(V,g,_)},deps:[d.se,Ts,ne.R0b]}],Ui=[{provide:Fr,useFactory:()=>new Ba},{provide:ne.QbO,useValue:"BrowserAnimations"},...lo],Wi=[{provide:Fr,useClass:sn},{provide:ne.QbO,useValue:"NoopAnimations"},...lo];let Ho=(()=>{class V{static withConfig(_){return{ngModule:V,providers:_.disableAnimations?Wi:Ui}}static#e=this.\u0275fac=function(b){return new(b||V)};static#t=this.\u0275mod=ne.oAB({type:V});static#n=this.\u0275inj=ne.cJS({providers:Ui,imports:[d.b2]})}return V})();var Pi=F(7217),ea=F(9862),si=F(1920),Ur=F(7213),No=F(6321),ks=F(5592),Ds=F(2459),ta=F(2096),ls=F(7921),na=F(9360),wr=F(8251);function ra(){return(0,na.e)((V,g)=>{let _,b=!1;V.subscribe((0,wr.x)(g,$=>{const H=_;_=$,b&&g.next([H,$]),b=!0}))})}var Ki=F(7398),Ti=F(6699),Oo=F(3997),xo=F(2181),ba=(F(6365),F(3106)),vt=F(5776),Fs=F(9058),Ls=F(4537);function ko(V,g){if(void 0===g)return{merge:!1};if(void 0!==g.mergeFields&&void 0!==g.merge)throw new vt.WA("invalid-argument",`Invalid options passed to function ${V}(): You cannot specify both "merge" and "mergeFields".`);return g}function ia(){if(typeof Uint8Array>"u")throw new vt.WA("unimplemented","Uint8Arrays are not available in this environment.")}function co(){if(!(0,vt.Me)())throw new vt.WA("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Ra{constructor(g){this._delegate=g}static fromBase64String(g){return co(),new Ra(vt.Jj.fromBase64String(g))}static fromUint8Array(g){return ia(),new Ra(vt.Jj.fromUint8Array(g))}toBase64(){return co(),this._delegate.toBase64()}toUint8Array(){return ia(),this._delegate.toUint8Array()}isEqual(g){return this._delegate.isEqual(g._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function gs(V){return function hu(V,g){if("object"!=typeof V||null===V)return!1;const _=V;for(const b of g)if(b in _&&"function"==typeof _[b])return!0;return!1}(V,["next","error","complete"])}class D{enableIndexedDbPersistence(g,_){return(0,vt.ST)(g._delegate,{forceOwnership:_})}enableMultiTabIndexedDbPersistence(g){return(0,vt.fH)(g._delegate)}clearIndexedDbPersistence(g){return(0,vt.Fc)(g._delegate)}}class K{constructor(g,_,b){this._delegate=_,this._persistenceProvider=b,this.INTERNAL={delete:()=>this.terminate()},g instanceof vt.l7||(this._appCompat=g)}get _databaseId(){return this._delegate._databaseId}settings(g){const _=this._delegate._getSettings();!g.merge&&_.host!==g.host&&(0,vt.yq)("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),g.merge&&delete(g=Object.assign(Object.assign({},_),g)).merge,this._delegate._setSettings(g)}useEmulator(g,_,b={}){(0,vt.at)(this._delegate,g,_,b)}enableNetwork(){return(0,vt.Ix)(this._delegate)}disableNetwork(){return(0,vt.TF)(this._delegate)}enablePersistence(g){let _=!1,b=!1;return g&&(_=!!g.synchronizeTabs,b=!!g.experimentalForceOwningTab,(0,vt.Wi)("synchronizeTabs",_,"experimentalForceOwningTab",b)),_?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,b)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return(0,vt.Mx)(this._delegate)}onSnapshotsInSync(g){return(0,vt.sc)(this._delegate,g)}get app(){if(!this._appCompat)throw new vt.WA("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(g){try{return new at(this,(0,vt.hJ)(this._delegate,g))}catch(_){throw Tn(_,"collection()","Firestore.collection()")}}doc(g){try{return new jt(this,(0,vt.JU)(this._delegate,g))}catch(_){throw Tn(_,"doc()","Firestore.doc()")}}collectionGroup(g){try{return new _n(this,(0,vt.B$)(this._delegate,g))}catch(_){throw Tn(_,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(g){return(0,vt.i3)(this._delegate,_=>g(new de(this,_)))}batch(){return(0,vt.qY)(this._delegate),new Ye(new vt.PU(this._delegate,g=>(0,vt.GL)(this._delegate,g)))}loadBundle(g){return(0,vt.Pb)(this._delegate,g)}namedQuery(g){return(0,vt.L$)(this._delegate,g).then(_=>_?new _n(this,_):null)}}class k extends vt.u7{constructor(g){super(),this.firestore=g}convertBytes(g){return new Ra(new vt.Jj(g))}convertReference(g){const _=this.convertDocumentKey(g,this.firestore._databaseId);return jt.forKey(_,this.firestore,null)}}class de{constructor(g,_){this._firestore=g,this._delegate=_,this._userDataWriter=new k(g)}get(g){const _=yr(g);return this._delegate.get(_).then(b=>new Yt(this._firestore,new vt.xU(this._firestore._delegate,this._userDataWriter,b._key,b._document,b.metadata,_.converter)))}set(g,_,b){const $=yr(g);return b?(ko("Transaction.set",b),this._delegate.set($,_,b)):this._delegate.set($,_),this}update(g,_,b,...$){const H=yr(g);return 2===arguments.length?this._delegate.update(H,_):this._delegate.update(H,_,b,...$),this}delete(g){const _=yr(g);return this._delegate.delete(_),this}}class Ye{constructor(g){this._delegate=g}set(g,_,b){const $=yr(g);return b?(ko("WriteBatch.set",b),this._delegate.set($,_,b)):this._delegate.set($,_),this}update(g,_,b,...$){const H=yr(g);return 2===arguments.length?this._delegate.update(H,_):this._delegate.update(H,_,b,...$),this}delete(g){const _=yr(g);return this._delegate.delete(_),this}commit(){return this._delegate.commit()}}class ot{constructor(g,_,b){this._firestore=g,this._userDataWriter=_,this._delegate=b}fromFirestore(g,_){const b=new vt.$q(this._firestore._delegate,this._userDataWriter,g._key,g._document,g.metadata,null);return this._delegate.fromFirestore(new hr(this._firestore,b),_??{})}toFirestore(g,_){return _?this._delegate.toFirestore(g,_):this._delegate.toFirestore(g)}static getInstance(g,_){const b=ot.INSTANCES;let $=b.get(g);$||($=new WeakMap,b.set(g,$));let H=$.get(_);return H||(H=new ot(g,new k(g),_),$.set(_,H)),H}}ot.INSTANCES=new WeakMap;class jt{constructor(g,_){this.firestore=g,this._delegate=_,this._userDataWriter=new k(g)}static forPath(g,_,b){if(g.length%2!=0)throw new vt.WA("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${g.canonicalString()} has ${g.length}`);return new jt(_,new vt.my(_._delegate,b,new vt.Ky(g)))}static forKey(g,_,b){return new jt(_,new vt.my(_._delegate,b,g))}get id(){return this._delegate.id}get parent(){return new at(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(g){try{return new at(this.firestore,(0,vt.hJ)(this._delegate,g))}catch(_){throw Tn(_,"collection()","DocumentReference.collection()")}}isEqual(g){return(g=(0,Fs.m9)(g))instanceof vt.my&&(0,vt.Eo)(this._delegate,g)}set(g,_){_=ko("DocumentReference.set",_);try{return _?(0,vt.pl)(this._delegate,g,_):(0,vt.pl)(this._delegate,g)}catch(b){throw Tn(b,"setDoc()","DocumentReference.set()")}}update(g,_,...b){try{return 1===arguments.length?(0,vt.r7)(this._delegate,g):(0,vt.r7)(this._delegate,g,_,...b)}catch($){throw Tn($,"updateDoc()","DocumentReference.update()")}}delete(){return(0,vt.oe)(this._delegate)}onSnapshot(...g){const _=dr(g),b=_r(g,$=>new Yt(this.firestore,new vt.xU(this.firestore._delegate,this._userDataWriter,$._key,$._document,$.metadata,this._delegate.converter)));return(0,vt.cf)(this._delegate,_,b)}get(g){let _;return _="cache"===g?.source?(0,vt.kl)(this._delegate):"server"===g?.source?(0,vt.Xk)(this._delegate):(0,vt.QT)(this._delegate),_.then(b=>new Yt(this.firestore,new vt.xU(this.firestore._delegate,this._userDataWriter,b._key,b._document,b.metadata,this._delegate.converter)))}withConverter(g){return new jt(this.firestore,this._delegate.withConverter(g?ot.getInstance(this.firestore,g):null))}}function Tn(V,g,_){return V.message=V.message.replace(g,_),V}function dr(V){for(const g of V)if("object"==typeof g&&!gs(g))return g;return{}}function _r(V,g){var _,b;let $;return $=gs(V[0])?V[0]:gs(V[1])?V[1]:"function"==typeof V[0]?{next:V[0],error:V[1],complete:V[2]}:{next:V[1],error:V[2],complete:V[3]},{next:H=>{$.next&&$.next(g(H))},error:null===(_=$.error)||void 0===_?void 0:_.bind($),complete:null===(b=$.complete)||void 0===b?void 0:b.bind($)}}class Yt{constructor(g,_){this._firestore=g,this._delegate=_}get ref(){return new jt(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(g){return this._delegate.data(g)}get(g,_){return this._delegate.get(g,_)}isEqual(g){return(0,vt.qK)(this._delegate,g._delegate)}}class hr extends Yt{data(g){const _=this._delegate.data(g);return this._delegate._converter||(0,vt.K9)(void 0!==_,"Document in a QueryDocumentSnapshot should exist"),_}}class _n{constructor(g,_){this.firestore=g,this._delegate=_,this._userDataWriter=new k(g)}where(g,_,b){try{return new _n(this.firestore,(0,vt.IO)(this._delegate,(0,vt.ar)(g,_,b)))}catch($){throw Tn($,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(g,_){try{return new _n(this.firestore,(0,vt.IO)(this._delegate,(0,vt.Xo)(g,_)))}catch(b){throw Tn(b,/(orderBy|where)\(\)/,"Query.$1()")}}limit(g){try{return new _n(this.firestore,(0,vt.IO)(this._delegate,(0,vt.b9)(g)))}catch(_){throw Tn(_,"limit()","Query.limit()")}}limitToLast(g){try{return new _n(this.firestore,(0,vt.IO)(this._delegate,(0,vt.vh)(g)))}catch(_){throw Tn(_,"limitToLast()","Query.limitToLast()")}}startAt(...g){try{return new _n(this.firestore,(0,vt.IO)(this._delegate,(0,vt.e0)(...g)))}catch(_){throw Tn(_,"startAt()","Query.startAt()")}}startAfter(...g){try{return new _n(this.firestore,(0,vt.IO)(this._delegate,(0,vt.TQ)(...g)))}catch(_){throw Tn(_,"startAfter()","Query.startAfter()")}}endBefore(...g){try{return new _n(this.firestore,(0,vt.IO)(this._delegate,(0,vt.Lx)(...g)))}catch(_){throw Tn(_,"endBefore()","Query.endBefore()")}}endAt(...g){try{return new _n(this.firestore,(0,vt.IO)(this._delegate,(0,vt.Wu)(...g)))}catch(_){throw Tn(_,"endAt()","Query.endAt()")}}isEqual(g){return(0,vt.iE)(this._delegate,g._delegate)}get(g){let _;return _="cache"===g?.source?(0,vt.UQ)(this._delegate):"server"===g?.source?(0,vt.zN)(this._delegate):(0,vt.PL)(this._delegate),_.then(b=>new ms(this.firestore,new vt.W(this.firestore._delegate,this._userDataWriter,this._delegate,b._snapshot)))}onSnapshot(...g){const _=dr(g),b=_r(g,$=>new ms(this.firestore,new vt.W(this.firestore._delegate,this._userDataWriter,this._delegate,$._snapshot)));return(0,vt.cf)(this._delegate,_,b)}withConverter(g){return new _n(this.firestore,this._delegate.withConverter(g?ot.getInstance(this.firestore,g):null))}}class br{constructor(g,_){this._firestore=g,this._delegate=_}get type(){return this._delegate.type}get doc(){return new hr(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class ms{constructor(g,_){this._firestore=g,this._delegate=_}get query(){return new _n(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(g=>new hr(this._firestore,g))}docChanges(g){return this._delegate.docChanges(g).map(_=>new br(this._firestore,_))}forEach(g,_){this._delegate.forEach(b=>{g.call(_,new hr(this._firestore,b))})}isEqual(g){return(0,vt.qK)(this._delegate,g._delegate)}}class at extends _n{constructor(g,_){super(g,_),this.firestore=g,this._delegate=_}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const g=this._delegate.parent;return g?new jt(this.firestore,g):null}doc(g){try{return new jt(this.firestore,void 0===g?(0,vt.JU)(this._delegate):(0,vt.JU)(this._delegate,g))}catch(_){throw Tn(_,"doc()","CollectionReference.doc()")}}add(g){return(0,vt.ET)(this._delegate,g).then(_=>new jt(this.firestore,_))}isEqual(g){return(0,vt.Eo)(this._delegate,g._delegate)}withConverter(g){return new at(this.firestore,this._delegate.withConverter(g?ot.getInstance(this.firestore,g):null))}}function yr(V){return(0,vt.Cf)(V,vt.my)}class xr{constructor(...g){this._delegate=new vt.Lz(...g)}static documentId(){return new xr(vt.Xb.keyField().canonicalString())}isEqual(g){return(g=(0,Fs.m9)(g))instanceof vt.Lz&&this._delegate._internalPath.isEqual(g._internalPath)}}class es{constructor(g){this._delegate=g}static serverTimestamp(){const g=(0,vt.Bt)();return g._methodName="FieldValue.serverTimestamp",new es(g)}static delete(){const g=(0,vt.AK)();return g._methodName="FieldValue.delete",new es(g)}static arrayUnion(...g){const _=(0,vt.vr)(...g);return _._methodName="FieldValue.arrayUnion",new es(_)}static arrayRemove(...g){const _=(0,vt.Ab)(...g);return _._methodName="FieldValue.arrayRemove",new es(_)}static increment(g){const _=(0,vt.nP)(g);return _._methodName="FieldValue.increment",new es(_)}isEqual(g){return this._delegate.isEqual(g._delegate)}}const At={Firestore:K,GeoPoint:vt.F8,Timestamp:vt.EK,Blob:Ra,Transaction:de,WriteBatch:Ye,DocumentReference:jt,DocumentSnapshot:Yt,Query:_n,QueryDocumentSnapshot:hr,QuerySnapshot:ms,CollectionReference:at,FieldPath:xr,FieldValue:es,setLogLevel:function W(V){(0,vt.Ub)(V)},CACHE_SIZE_UNLIMITED:vt.IX};!function Sl(V){(function qt(V,g){V.INTERNAL.registerComponent(new Ls.wA("firestore-compat",_=>{const b=_.getProvider("app-compat").getImmediate(),$=_.getProvider("firestore").getImmediate();return g(b,$)},"PUBLIC").setServiceProps(Object.assign({},At)))})(V,(g,_)=>new K(g,_,new D)),V.registerVersion("@firebase/firestore-compat","0.3.27")}(ba.Z);var pt=F(7142);function ft(V,g){return function Qe(V,g=No.z){return new ks.y(_=>{let b;return null!=g?g.schedule(()=>{b=V.onSnapshot({includeMetadataChanges:!0},_)}):b=V.onSnapshot({includeMetadataChanges:!0},_),()=>{b?.()}})}(V,g)}function fu(V,g){return ft(V,g).pipe((0,Ki.U)(_=>({payload:_,type:"query"})))}class $u{ref;afs;constructor(g,_){this.ref=g,this.afs=_}set(g,_){return this.ref.set(g,_)}update(g){return this.ref.update(g)}delete(){return this.ref.delete()}collection(g,_){const b=this.ref.collection(g),{ref:$,query:H}=Gt(b,_);return new Ma($,H,this.afs)}snapshotChanges(){return function Cr(V,g){return ft(V,g).pipe((0,ls.O)(void 0),ra(),(0,Ki.U)(_=>{const[b,$]=_;return $.exists?b?.exists?{payload:$,type:"modified"}:{payload:$,type:"added"}:{payload:$,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(si.iC)}valueChanges(g={}){return this.snapshotChanges().pipe((0,Ki.U)(({payload:_})=>g.idField?{..._.data(),[g.idField]:_.id}:_.data()))}get(g){return(0,Ds.D)(this.ref.get(g)).pipe(si.iC)}}function Mi(V,g){return fu(V,g).pipe((0,ls.O)(void 0),ra(),(0,Ki.U)(_=>{const[b,$]=_,H=$.payload.docChanges(),he=H.map(ye=>({type:ye.type,payload:ye}));return b&&JSON.stringify(b.payload.metadata)!==JSON.stringify($.payload.metadata)&&$.payload.docs.forEach((ye,Ue)=>{const ze=H.find(kt=>kt.doc.ref.isEqual(ye.ref)),xt=b?.payload.docs.find(kt=>kt.ref.isEqual(ye.ref));ze&&JSON.stringify(ze.doc.metadata)===JSON.stringify(ye.metadata)||!ze&&xt&&JSON.stringify(xt.metadata)===JSON.stringify(ye.metadata)||he.push({type:"modified",payload:{oldIndex:Ue,newIndex:Ue,type:"modified",doc:ye}})}),he}))}function Vs(V,g,_){return Mi(V,_).pipe((0,Ti.R)((b,$)=>function bl(V,g,_){return g.forEach(b=>{_.indexOf(b.type)>-1&&(V=function ja(V,g){switch(g.type){case"added":if(!V[g.newIndex]||!V[g.newIndex].doc.ref.isEqual(g.doc.ref))return Pa(V,g.newIndex,0,g);break;case"modified":if(null==V[g.oldIndex]||V[g.oldIndex].doc.ref.isEqual(g.doc.ref)){if(g.oldIndex!==g.newIndex){const _=V.slice();return _.splice(g.oldIndex,1),_.splice(g.newIndex,0,g),_}return Pa(V,g.newIndex,1,g)}break;case"removed":if(V[g.oldIndex]&&V[g.oldIndex].doc.ref.isEqual(g.doc.ref))return Pa(V,g.oldIndex,1)}return V}(V,b))}),V}(b,$.map(H=>H.payload),g),[]),(0,Oo.x)(),(0,Ki.U)(b=>b.map($=>({type:$.type,payload:$}))))}function Pa(V,g,_,...b){const $=V.slice();return $.splice(g,_,...b),$}function _s(V){return(!V||0===V.length)&&(V=["added","removed","modified"]),V}class Ma{ref;query;afs;constructor(g,_,b){this.ref=g,this.query=_,this.afs=b}stateChanges(g){let _=Mi(this.query,this.afs.schedulers.outsideAngular);return g&&g.length>0&&(_=_.pipe((0,Ki.U)(b=>b.filter($=>g.indexOf($.type)>-1)))),_.pipe((0,ls.O)(void 0),ra(),(0,xo.h)(([b,$])=>$.length>0||!b),(0,Ki.U)(([,b])=>b),si.iC)}auditTrail(g){return this.stateChanges(g).pipe((0,Ti.R)((_,b)=>[..._,...b],[]))}snapshotChanges(g){const _=_s(g);return Vs(this.query,_,this.afs.schedulers.outsideAngular).pipe(si.iC)}valueChanges(g={}){return fu(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ki.U)(_=>_.payload.docs.map(b=>g.idField?{...b.data(),[g.idField]:b.id}:b.data())),si.iC)}get(g){return(0,Ds.D)(this.query.get(g)).pipe(si.iC)}add(g){return this.ref.add(g)}doc(g){return new $u(this.ref.doc(g),this.afs)}}class mc{query;afs;constructor(g,_){this.query=g,this.afs=_}stateChanges(g){return g&&0!==g.length?Mi(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ki.U)(_=>_.filter(b=>g.indexOf(b.type)>-1)),(0,xo.h)(_=>_.length>0),si.iC):Mi(this.query,this.afs.schedulers.outsideAngular).pipe(si.iC)}auditTrail(g){return this.stateChanges(g).pipe((0,Ti.R)((_,b)=>[..._,...b],[]))}snapshotChanges(g){const _=_s(g);return Vs(this.query,_,this.afs.schedulers.outsideAngular).pipe(si.iC)}valueChanges(g={}){return fu(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ki.U)(b=>b.payload.docs.map($=>g.idField?{[g.idField]:$.id,...$.data()}:$.data())),si.iC)}get(g){return(0,Ds.D)(this.query.get(g)).pipe(si.iC)}}const pu=new ne.OlP("angularfire2.enableFirestorePersistence"),bn=new ne.OlP("angularfire2.firestore.persistenceSettings"),Wo=new ne.OlP("angularfire2.firestore.settings"),gu=new ne.OlP("angularfire2.firestore.use-emulator");function Gt(V,g=(_=>_)){return{query:g(V),ref:V}}let en=(()=>{class V{schedulers;firestore;persistenceEnabled$;constructor(_,b,$,H,he,ye,Ue,ze,xt,kt,ln,Dn,Te,Cn,sr,fi,Kn){this.schedulers=Ue;const fr=(0,Pi.on)(_,ye,b),Wr=xt;kt&&(0,Ur.nw)(fr,ye,ln,Te,Cn,sr,Dn,fi),[this.firestore,this.persistenceEnabled$]=(0,Pi.cc)(`${fr.name}.firestore`,"AngularFirestore",fr.name,()=>{const zr=ye.runOutsideAngular(()=>fr.firestore());if(H&&zr.settings(H),Wr&&zr.useEmulator(...Wr),$&&!(0,Xo.PM)(he)){const Di=()=>{try{return(0,Ds.D)(zr.enablePersistence(ze||void 0).then(()=>!0,()=>!1))}catch(Ni){return typeof console<"u"&&console.warn(Ni),(0,ta.of)(!1)}};return[zr,ye.runOutsideAngular(Di)]}return[zr,(0,ta.of)(!1)]},[H,Wr,$])}collection(_,b){let $;$="string"==typeof _?this.firestore.collection(_):_;const{ref:H,query:he}=Gt($,b),ye=this.schedulers.ngZone.run(()=>H);return new Ma(ye,he,this)}collectionGroup(_,b){const $=b||(he=>he),H=this.firestore.collectionGroup(_);return new mc($(H),this)}doc(_){let b;b="string"==typeof _?this.firestore.doc(_):_;const $=this.schedulers.ngZone.run(()=>b);return new $u($,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(b){return new(b||V)(ne.LFG(Pi.Dh),ne.LFG(Pi.xv,8),ne.LFG(pu,8),ne.LFG(Wo,8),ne.LFG(ne.Lbi),ne.LFG(ne.R0b),ne.LFG(si.HU),ne.LFG(bn,8),ne.LFG(gu,8),ne.LFG(Ur.zQ,8),ne.LFG(Ur.Qv,8),ne.LFG(Ur.L6,8),ne.LFG(Ur._Q,8),ne.LFG(Ur.rT,8),ne.LFG(Ur.lh,8),ne.LFG(Ur.f7,8),ne.LFG(si.Rf,8))};static \u0275prov=ne.Yz7({token:V,factory:V.\u0275fac,providedIn:"any"})}return V})(),Cs=(()=>{class V{constructor(){pt.Z.registerVersion("angularfire",si.q4.full,"fst-compat")}static enablePersistence(_){return{ngModule:V,providers:[{provide:pu,useValue:!0},{provide:bn,useValue:_}]}}static \u0275fac=function(b){return new(b||V)};static \u0275mod=ne.oAB({type:V});static \u0275inj=ne.cJS({providers:[en]})}return V})();var ir=F(721),$a=F(7350),Yr=F(95);const Ft={apiKey:"AIzaSyAOLKEke57Wxx_aUj-AMlgmYry44Q77g4s",authDomain:"primer-parcial-labo-4.firebaseapp.com",projectId:"primer-parcial-labo-4",storageBucket:"primer-parcial-labo-4.appspot.com",messagingSenderId:"282642937535",appId:"1:282642937535:web:fade6523e1ffcdbe33f80a"};let Ks=(()=>{class V{static#e=this.\u0275fac=function(b){return new(b||V)};static#t=this.\u0275mod=ne.oAB({type:V,bootstrap:[et]});static#n=this.\u0275inj=ne.cJS({imports:[d.b2,Yr.u5,ue,Ho,Se.ef,ea.JF,Pi.hO.initializeApp(Ft),Cs,(0,ir.hX)(()=>(0,ir.ZF)(Ft)),(0,$a.Cm)(()=>(0,$a.ad)())]})}return V})();d.q6().bootstrapModule(Ks).catch(V=>console.error(V))},5619:(Mt,Ve,F)=>{F.d(Ve,{X:()=>ee});var d=F(8645);class ee extends d.x{constructor(Ee){super(),this._value=Ee}get value(){return this.getValue()}_subscribe(Ee){const ge=super._subscribe(Ee);return!ge.closed&&Ee.next(this._value),ge}getValue(){const{hasError:Ee,thrownError:ge,_value:ne}=this;if(Ee)throw ge;return this._throwIfClosed(),ne}next(Ee){super.next(this._value=Ee)}}},5592:(Mt,Ve,F)=>{F.d(Ve,{y:()=>_e});var d=F(305),ee=F(7394),J=F(4850),Ee=F(8407),ge=F(2653),ne=F(4674),Ae=F(1441);let _e=(()=>{class Se{constructor(qe){qe&&(this._subscribe=qe)}lift(qe){const ht=new Se;return ht.source=this,ht.operator=qe,ht}subscribe(qe,ht,it){const gt=function ue(Se){return Se&&Se instanceof d.Lv||function re(Se){return Se&&(0,ne.m)(Se.next)&&(0,ne.m)(Se.error)&&(0,ne.m)(Se.complete)}(Se)&&(0,ee.Nn)(Se)}(qe)?qe:new d.Hp(qe,ht,it);return(0,Ae.x)(()=>{const{operator:Xe,source:Lt}=this;gt.add(Xe?Xe.call(gt,Lt):Lt?this._subscribe(gt):this._trySubscribe(gt))}),gt}_trySubscribe(qe){try{return this._subscribe(qe)}catch(ht){qe.error(ht)}}forEach(qe,ht){return new(ht=Le(ht))((it,gt)=>{const Xe=new d.Hp({next:Lt=>{try{qe(Lt)}catch(nt){gt(nt),Xe.unsubscribe()}},error:gt,complete:it});this.subscribe(Xe)})}_subscribe(qe){var ht;return null===(ht=this.source)||void 0===ht?void 0:ht.subscribe(qe)}[J.L](){return this}pipe(...qe){return(0,Ee.U)(qe)(this)}toPromise(qe){return new(qe=Le(qe))((ht,it)=>{let gt;this.subscribe(Xe=>gt=Xe,Xe=>it(Xe),()=>ht(gt))})}}return Se.create=et=>new Se(et),Se})();function Le(Se){var et;return null!==(et=Se??ge.config.Promise)&&void 0!==et?et:Promise}},8645:(Mt,Ve,F)=>{F.d(Ve,{x:()=>Ae});var d=F(5592),ee=F(7394);const Ee=(0,F(2306).d)(Le=>function(){Le(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ge=F(9039),ne=F(1441);let Ae=(()=>{class Le extends d.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ue){const Se=new _e(this,this);return Se.operator=ue,Se}_throwIfClosed(){if(this.closed)throw new Ee}next(ue){(0,ne.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Se of this.currentObservers)Se.next(ue)}})}error(ue){(0,ne.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ue;const{observers:Se}=this;for(;Se.length;)Se.shift().error(ue)}})}complete(){(0,ne.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ue}=this;for(;ue.length;)ue.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ue;return(null===(ue=this.observers)||void 0===ue?void 0:ue.length)>0}_trySubscribe(ue){return this._throwIfClosed(),super._trySubscribe(ue)}_subscribe(ue){return this._throwIfClosed(),this._checkFinalizedStatuses(ue),this._innerSubscribe(ue)}_innerSubscribe(ue){const{hasError:Se,isStopped:et,observers:qe}=this;return Se||et?ee.Lc:(this.currentObservers=null,qe.push(ue),new ee.w0(()=>{this.currentObservers=null,(0,ge.P)(qe,ue)}))}_checkFinalizedStatuses(ue){const{hasError:Se,thrownError:et,isStopped:qe}=this;Se?ue.error(et):qe&&ue.complete()}asObservable(){const ue=new d.y;return ue.source=this,ue}}return Le.create=(re,ue)=>new _e(re,ue),Le})();class _e extends Ae{constructor(re,ue){super(),this.destination=re,this.source=ue}next(re){var ue,Se;null===(Se=null===(ue=this.destination)||void 0===ue?void 0:ue.next)||void 0===Se||Se.call(ue,re)}error(re){var ue,Se;null===(Se=null===(ue=this.destination)||void 0===ue?void 0:ue.error)||void 0===Se||Se.call(ue,re)}complete(){var re,ue;null===(ue=null===(re=this.destination)||void 0===re?void 0:re.complete)||void 0===ue||ue.call(re)}_subscribe(re){var ue,Se;return null!==(Se=null===(ue=this.source)||void 0===ue?void 0:ue.subscribe(re))&&void 0!==Se?Se:ee.Lc}}},305:(Mt,Ve,F)=>{F.d(Ve,{Hp:()=>it,Lv:()=>Se});var d=F(4674),ee=F(7394),J=F(2653),Ee=F(3894),ge=F(2420);const ne=Le("C",void 0,void 0);function Le(se,Be,ke){return{kind:se,value:Be,error:ke}}var re=F(7599),ue=F(1441);class Se extends ee.w0{constructor(Be){super(),this.isStopped=!1,Be?(this.destination=Be,(0,ee.Nn)(Be)&&Be.add(this)):this.destination=nt}static create(Be,ke,xe){return new it(Be,ke,xe)}next(Be){this.isStopped?Lt(function _e(se){return Le("N",se,void 0)}(Be),this):this._next(Be)}error(Be){this.isStopped?Lt(function Ae(se){return Le("E",void 0,se)}(Be),this):(this.isStopped=!0,this._error(Be))}complete(){this.isStopped?Lt(ne,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Be){this.destination.next(Be)}_error(Be){try{this.destination.error(Be)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const et=Function.prototype.bind;function qe(se,Be){return et.call(se,Be)}class ht{constructor(Be){this.partialObserver=Be}next(Be){const{partialObserver:ke}=this;if(ke.next)try{ke.next(Be)}catch(xe){gt(xe)}}error(Be){const{partialObserver:ke}=this;if(ke.error)try{ke.error(Be)}catch(xe){gt(xe)}else gt(Be)}complete(){const{partialObserver:Be}=this;if(Be.complete)try{Be.complete()}catch(ke){gt(ke)}}}class it extends Se{constructor(Be,ke,xe){let tt;if(super(),(0,d.m)(Be)||!Be)tt={next:Be??void 0,error:ke??void 0,complete:xe??void 0};else{let ce;this&&J.config.useDeprecatedNextContext?(ce=Object.create(Be),ce.unsubscribe=()=>this.unsubscribe(),tt={next:Be.next&&qe(Be.next,ce),error:Be.error&&qe(Be.error,ce),complete:Be.complete&&qe(Be.complete,ce)}):tt=Be}this.destination=new ht(tt)}}function gt(se){J.config.useDeprecatedSynchronousErrorHandling?(0,ue.O)(se):(0,Ee.h)(se)}function Lt(se,Be){const{onStoppedNotification:ke}=J.config;ke&&re.z.setTimeout(()=>ke(se,Be))}const nt={closed:!0,next:ge.Z,error:function Xe(se){throw se},complete:ge.Z}},7394:(Mt,Ve,F)=>{F.d(Ve,{Lc:()=>ne,w0:()=>ge,Nn:()=>Ae});var d=F(4674);const J=(0,F(2306).d)(Le=>function(ue){Le(this),this.message=ue?`${ue.length} errors occurred during unsubscription:\n${ue.map((Se,et)=>`${et+1}) ${Se.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ue});var Ee=F(9039);class ge{constructor(re){this.initialTeardown=re,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let re;if(!this.closed){this.closed=!0;const{_parentage:ue}=this;if(ue)if(this._parentage=null,Array.isArray(ue))for(const qe of ue)qe.remove(this);else ue.remove(this);const{initialTeardown:Se}=this;if((0,d.m)(Se))try{Se()}catch(qe){re=qe instanceof J?qe.errors:[qe]}const{_finalizers:et}=this;if(et){this._finalizers=null;for(const qe of et)try{_e(qe)}catch(ht){re=re??[],ht instanceof J?re=[...re,...ht.errors]:re.push(ht)}}if(re)throw new J(re)}}add(re){var ue;if(re&&re!==this)if(this.closed)_e(re);else{if(re instanceof ge){if(re.closed||re._hasParent(this))return;re._addParent(this)}(this._finalizers=null!==(ue=this._finalizers)&&void 0!==ue?ue:[]).push(re)}}_hasParent(re){const{_parentage:ue}=this;return ue===re||Array.isArray(ue)&&ue.includes(re)}_addParent(re){const{_parentage:ue}=this;this._parentage=Array.isArray(ue)?(ue.push(re),ue):ue?[ue,re]:re}_removeParent(re){const{_parentage:ue}=this;ue===re?this._parentage=null:Array.isArray(ue)&&(0,Ee.P)(ue,re)}remove(re){const{_finalizers:ue}=this;ue&&(0,Ee.P)(ue,re),re instanceof ge&&re._removeParent(this)}}ge.EMPTY=(()=>{const Le=new ge;return Le.closed=!0,Le})();const ne=ge.EMPTY;function Ae(Le){return Le instanceof ge||Le&&"closed"in Le&&(0,d.m)(Le.remove)&&(0,d.m)(Le.add)&&(0,d.m)(Le.unsubscribe)}function _e(Le){(0,d.m)(Le)?Le():Le.unsubscribe()}},2653:(Mt,Ve,F)=>{F.d(Ve,{config:()=>d});const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},4036:(Mt,Ve,F)=>{F.d(Ve,{z:()=>J});var d=F(6973),ee=F(305);function J(Ee,ge){const ne="object"==typeof ge;return new Promise((Ae,_e)=>{const Le=new ee.Hp({next:re=>{Ae(re),Le.unsubscribe()},error:_e,complete:()=>{ne?Ae(ge.defaultValue):_e(new d.K)}});Ee.subscribe(Le)})}},5211:(Mt,Ve,F)=>{F.d(Ve,{z:()=>ge});var d=F(7537),J=F(4564),Ee=F(2459);function ge(...ne){return function ee(){return(0,d.J)(1)}()((0,Ee.D)(ne,(0,J.yG)(ne)))}},6232:(Mt,Ve,F)=>{F.d(Ve,{E:()=>ee});const ee=new(F(5592).y)(ge=>ge.complete())},2459:(Mt,Ve,F)=>{F.d(Ve,{D:()=>Be});var d=F(4829),ee=F(3093),J=F(5137),ne=F(5592),_e=F(4971),Le=F(4674),re=F(7103);function Se(ke,xe){if(!ke)throw new Error("Iterable cannot be null");return new ne.y(tt=>{(0,re.f)(tt,xe,()=>{const ce=ke[Symbol.asyncIterator]();(0,re.f)(tt,xe,()=>{ce.next().then(ct=>{ct.done?tt.complete():tt.next(ct.value)})},0,!0)})})}var et=F(8382),qe=F(4026),ht=F(4266),it=F(3664),gt=F(5726),Xe=F(9853),Lt=F(541);function Be(ke,xe){return xe?function se(ke,xe){if(null!=ke){if((0,et.c)(ke))return function Ee(ke,xe){return(0,d.Xf)(ke).pipe((0,J.R)(xe),(0,ee.Q)(xe))}(ke,xe);if((0,ht.z)(ke))return function Ae(ke,xe){return new ne.y(tt=>{let ce=0;return xe.schedule(function(){ce===ke.length?tt.complete():(tt.next(ke[ce++]),tt.closed||this.schedule())})})}(ke,xe);if((0,qe.t)(ke))return function ge(ke,xe){return(0,d.Xf)(ke).pipe((0,J.R)(xe),(0,ee.Q)(xe))}(ke,xe);if((0,gt.D)(ke))return Se(ke,xe);if((0,it.T)(ke))return function ue(ke,xe){return new ne.y(tt=>{let ce;return(0,re.f)(tt,xe,()=>{ce=ke[_e.h](),(0,re.f)(tt,xe,()=>{let ct,It;try{({value:ct,done:It}=ce.next())}catch(zt){return void tt.error(zt)}It?tt.complete():tt.next(ct)},0,!0)}),()=>(0,Le.m)(ce?.return)&&ce.return()})}(ke,xe);if((0,Lt.L)(ke))return function nt(ke,xe){return Se((0,Lt.Q)(ke),xe)}(ke,xe)}throw(0,Xe.z)(ke)}(ke,xe):(0,d.Xf)(ke)}},4829:(Mt,Ve,F)=>{F.d(Ve,{Xf:()=>et});var d=F(7582),ee=F(4266),J=F(4026),Ee=F(5592),ge=F(8382),ne=F(5726),Ae=F(9853),_e=F(3664),Le=F(541),re=F(4674),ue=F(3894),Se=F(4850);function et(se){if(se instanceof Ee.y)return se;if(null!=se){if((0,ge.c)(se))return function qe(se){return new Ee.y(Be=>{const ke=se[Se.L]();if((0,re.m)(ke.subscribe))return ke.subscribe(Be);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(se);if((0,ee.z)(se))return function ht(se){return new Ee.y(Be=>{for(let ke=0;ke<se.length&&!Be.closed;ke++)Be.next(se[ke]);Be.complete()})}(se);if((0,J.t)(se))return function it(se){return new Ee.y(Be=>{se.then(ke=>{Be.closed||(Be.next(ke),Be.complete())},ke=>Be.error(ke)).then(null,ue.h)})}(se);if((0,ne.D)(se))return Xe(se);if((0,_e.T)(se))return function gt(se){return new Ee.y(Be=>{for(const ke of se)if(Be.next(ke),Be.closed)return;Be.complete()})}(se);if((0,Le.L)(se))return function Lt(se){return Xe((0,Le.Q)(se))}(se)}throw(0,Ae.z)(se)}function Xe(se){return new Ee.y(Be=>{(function nt(se,Be){var ke,xe,tt,ce;return(0,d.mG)(this,void 0,void 0,function*(){try{for(ke=(0,d.KL)(se);!(xe=yield ke.next()).done;)if(Be.next(xe.value),Be.closed)return}catch(ct){tt={error:ct}}finally{try{xe&&!xe.done&&(ce=ke.return)&&(yield ce.call(ke))}finally{if(tt)throw tt.error}}Be.complete()})})(se,Be).catch(ke=>Be.error(ke))})}},3019:(Mt,Ve,F)=>{F.d(Ve,{T:()=>ne});var d=F(7537),ee=F(4829),J=F(6232),Ee=F(4564),ge=F(2459);function ne(...Ae){const _e=(0,Ee.yG)(Ae),Le=(0,Ee._6)(Ae,1/0),re=Ae;return re.length?1===re.length?(0,ee.Xf)(re[0]):(0,d.J)(Le)((0,ge.D)(re,_e)):J.E}},2096:(Mt,Ve,F)=>{F.d(Ve,{of:()=>J});var d=F(4564),ee=F(2459);function J(...Ee){const ge=(0,d.yG)(Ee);return(0,ee.D)(Ee,ge)}},8251:(Mt,Ve,F)=>{F.d(Ve,{x:()=>ee});var d=F(305);function ee(Ee,ge,ne,Ae,_e){return new J(Ee,ge,ne,Ae,_e)}class J extends d.Lv{constructor(ge,ne,Ae,_e,Le,re){super(ge),this.onFinalize=Le,this.shouldUnsubscribe=re,this._next=ne?function(ue){try{ne(ue)}catch(Se){ge.error(Se)}}:super._next,this._error=_e?function(ue){try{_e(ue)}catch(Se){ge.error(Se)}finally{this.unsubscribe()}}:super._error,this._complete=Ae?function(){try{Ae()}catch(ue){ge.error(ue)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ge;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ne}=this;super.unsubscribe(),!ne&&(null===(ge=this.onFinalize)||void 0===ge||ge.call(this))}}}},6328:(Mt,Ve,F)=>{F.d(Ve,{b:()=>J});var d=F(1631),ee=F(4674);function J(Ee,ge){return(0,ee.m)(ge)?(0,d.z)(Ee,ge,1):(0,d.z)(Ee,1)}},3572:(Mt,Ve,F)=>{F.d(Ve,{d:()=>J});var d=F(9360),ee=F(8251);function J(Ee){return(0,d.e)((ge,ne)=>{let Ae=!1;ge.subscribe((0,ee.x)(ne,_e=>{Ae=!0,ne.next(_e)},()=>{Ae||ne.next(Ee),ne.complete()}))})}},3997:(Mt,Ve,F)=>{F.d(Ve,{x:()=>Ee});var d=F(2737),ee=F(9360),J=F(8251);function Ee(ne,Ae=d.y){return ne=ne??ge,(0,ee.e)((_e,Le)=>{let re,ue=!0;_e.subscribe((0,J.x)(Le,Se=>{const et=Ae(Se);(ue||!ne(re,et))&&(ue=!1,re=et,Le.next(Se))}))})}function ge(ne,Ae){return ne===Ae}},2181:(Mt,Ve,F)=>{F.d(Ve,{h:()=>J});var d=F(9360),ee=F(8251);function J(Ee,ge){return(0,d.e)((ne,Ae)=>{let _e=0;ne.subscribe((0,ee.x)(Ae,Le=>Ee.call(ge,Le,_e++)&&Ae.next(Le)))})}},4716:(Mt,Ve,F)=>{F.d(Ve,{x:()=>ee});var d=F(9360);function ee(J){return(0,d.e)((Ee,ge)=>{try{Ee.subscribe(ge)}finally{ge.add(J)}})}},1374:(Mt,Ve,F)=>{F.d(Ve,{P:()=>Ae});var d=F(6973),ee=F(2181),J=F(8180),Ee=F(3572),ge=F(3026),ne=F(2737);function Ae(_e,Le){const re=arguments.length>=2;return ue=>ue.pipe(_e?(0,ee.h)((Se,et)=>_e(Se,et,ue)):ne.y,(0,J.q)(1),re?(0,Ee.d)(Le):(0,ge.T)(()=>new d.K))}},7398:(Mt,Ve,F)=>{F.d(Ve,{U:()=>J});var d=F(9360),ee=F(8251);function J(Ee,ge){return(0,d.e)((ne,Ae)=>{let _e=0;ne.subscribe((0,ee.x)(Ae,Le=>{Ae.next(Ee.call(ge,Le,_e++))}))})}},7537:(Mt,Ve,F)=>{F.d(Ve,{J:()=>J});var d=F(1631),ee=F(2737);function J(Ee=1/0){return(0,d.z)(ee.y,Ee)}},1631:(Mt,Ve,F)=>{F.d(Ve,{z:()=>_e});var d=F(7398),ee=F(4829),J=F(9360),Ee=F(7103),ge=F(8251),Ae=F(4674);function _e(Le,re,ue=1/0){return(0,Ae.m)(re)?_e((Se,et)=>(0,d.U)((qe,ht)=>re(Se,qe,et,ht))((0,ee.Xf)(Le(Se,et))),ue):("number"==typeof re&&(ue=re),(0,J.e)((Se,et)=>function ne(Le,re,ue,Se,et,qe,ht,it){const gt=[];let Xe=0,Lt=0,nt=!1;const se=()=>{nt&&!gt.length&&!Xe&&re.complete()},Be=xe=>Xe<Se?ke(xe):gt.push(xe),ke=xe=>{qe&&re.next(xe),Xe++;let tt=!1;(0,ee.Xf)(ue(xe,Lt++)).subscribe((0,ge.x)(re,ce=>{et?.(ce),qe?Be(ce):re.next(ce)},()=>{tt=!0},void 0,()=>{if(tt)try{for(Xe--;gt.length&&Xe<Se;){const ce=gt.shift();ht?(0,Ee.f)(re,ht,()=>ke(ce)):ke(ce)}se()}catch(ce){re.error(ce)}}))};return Le.subscribe((0,ge.x)(re,Be,()=>{nt=!0,se()})),()=>{it?.()}}(Se,et,Le,ue)))}},3093:(Mt,Ve,F)=>{F.d(Ve,{Q:()=>Ee});var d=F(7103),ee=F(9360),J=F(8251);function Ee(ge,ne=0){return(0,ee.e)((Ae,_e)=>{Ae.subscribe((0,J.x)(_e,Le=>(0,d.f)(_e,ge,()=>_e.next(Le),ne),()=>(0,d.f)(_e,ge,()=>_e.complete(),ne),Le=>(0,d.f)(_e,ge,()=>_e.error(Le),ne)))})}},6699:(Mt,Ve,F)=>{F.d(Ve,{R:()=>Ee});var d=F(9360),ee=F(8251);function Ee(ge,ne){return(0,d.e)(function J(ge,ne,Ae,_e,Le){return(re,ue)=>{let Se=Ae,et=ne,qe=0;re.subscribe((0,ee.x)(ue,ht=>{const it=qe++;et=Se?ge(et,ht,it):(Se=!0,ht),_e&&ue.next(et)},Le&&(()=>{Se&&ue.next(et),ue.complete()})))}}(ge,ne,arguments.length>=2,!0))}},3020:(Mt,Ve,F)=>{F.d(Ve,{B:()=>ge});var d=F(4829),ee=F(8645),J=F(305),Ee=F(9360);function ge(Ae={}){const{connector:_e=(()=>new ee.x),resetOnError:Le=!0,resetOnComplete:re=!0,resetOnRefCountZero:ue=!0}=Ae;return Se=>{let et,qe,ht,it=0,gt=!1,Xe=!1;const Lt=()=>{qe?.unsubscribe(),qe=void 0},nt=()=>{Lt(),et=ht=void 0,gt=Xe=!1},se=()=>{const Be=et;nt(),Be?.unsubscribe()};return(0,Ee.e)((Be,ke)=>{it++,!Xe&&!gt&&Lt();const xe=ht=ht??_e();ke.add(()=>{it--,0===it&&!Xe&&!gt&&(qe=ne(se,ue))}),xe.subscribe(ke),!et&&it>0&&(et=new J.Hp({next:tt=>xe.next(tt),error:tt=>{Xe=!0,Lt(),qe=ne(nt,Le,tt),xe.error(tt)},complete:()=>{gt=!0,Lt(),qe=ne(nt,re),xe.complete()}}),(0,d.Xf)(Be).subscribe(et))})(Se)}}function ne(Ae,_e,...Le){if(!0===_e)return void Ae();if(!1===_e)return;const re=new J.Hp({next:()=>{re.unsubscribe(),Ae()}});return(0,d.Xf)(_e(...Le)).subscribe(re)}},7921:(Mt,Ve,F)=>{F.d(Ve,{O:()=>Ee});var d=F(5211),ee=F(4564),J=F(9360);function Ee(...ge){const ne=(0,ee.yG)(ge);return(0,J.e)((Ae,_e)=>{(ne?(0,d.z)(ge,Ae,ne):(0,d.z)(ge,Ae)).subscribe(_e)})}},5137:(Mt,Ve,F)=>{F.d(Ve,{R:()=>ee});var d=F(9360);function ee(J,Ee=0){return(0,d.e)((ge,ne)=>{ne.add(J.schedule(()=>ge.subscribe(ne),Ee))})}},4664:(Mt,Ve,F)=>{F.d(Ve,{w:()=>Ee});var d=F(4829),ee=F(9360),J=F(8251);function Ee(ge,ne){return(0,ee.e)((Ae,_e)=>{let Le=null,re=0,ue=!1;const Se=()=>ue&&!Le&&_e.complete();Ae.subscribe((0,J.x)(_e,et=>{Le?.unsubscribe();let qe=0;const ht=re++;(0,d.Xf)(ge(et,ht)).subscribe(Le=(0,J.x)(_e,it=>_e.next(ne?ne(et,it,ht,qe++):it),()=>{Le=null,Se()}))},()=>{ue=!0,Se()}))})}},8180:(Mt,Ve,F)=>{F.d(Ve,{q:()=>Ee});var d=F(6232),ee=F(9360),J=F(8251);function Ee(ge){return ge<=0?()=>d.E:(0,ee.e)((ne,Ae)=>{let _e=0;ne.subscribe((0,J.x)(Ae,Le=>{++_e<=ge&&(Ae.next(Le),ge<=_e&&Ae.complete())}))})}},9773:(Mt,Ve,F)=>{F.d(Ve,{R:()=>ge});var d=F(9360),ee=F(8251),J=F(4829),Ee=F(2420);function ge(ne){return(0,d.e)((Ae,_e)=>{(0,J.Xf)(ne).subscribe((0,ee.x)(_e,()=>_e.complete(),Ee.Z)),!_e.closed&&Ae.subscribe(_e)})}},9397:(Mt,Ve,F)=>{F.d(Ve,{b:()=>ge});var d=F(4674),ee=F(9360),J=F(8251),Ee=F(2737);function ge(ne,Ae,_e){const Le=(0,d.m)(ne)||Ae||_e?{next:ne,error:Ae,complete:_e}:ne;return Le?(0,ee.e)((re,ue)=>{var Se;null===(Se=Le.subscribe)||void 0===Se||Se.call(Le);let et=!0;re.subscribe((0,J.x)(ue,qe=>{var ht;null===(ht=Le.next)||void 0===ht||ht.call(Le,qe),ue.next(qe)},()=>{var qe;et=!1,null===(qe=Le.complete)||void 0===qe||qe.call(Le),ue.complete()},qe=>{var ht;et=!1,null===(ht=Le.error)||void 0===ht||ht.call(Le,qe),ue.error(qe)},()=>{var qe,ht;et&&(null===(qe=Le.unsubscribe)||void 0===qe||qe.call(Le)),null===(ht=Le.finalize)||void 0===ht||ht.call(Le)}))}):Ee.y}},3026:(Mt,Ve,F)=>{F.d(Ve,{T:()=>Ee});var d=F(6973),ee=F(9360),J=F(8251);function Ee(ne=ge){return(0,ee.e)((Ae,_e)=>{let Le=!1;Ae.subscribe((0,J.x)(_e,re=>{Le=!0,_e.next(re)},()=>Le?_e.complete():_e.error(ne())))})}function ge(){return new d.K}},1954:(Mt,Ve,F)=>{F.d(Ve,{o:()=>ge});var d=F(7394);class ee extends d.w0{constructor(Ae,_e){super()}schedule(Ae,_e=0){return this}}const J={setInterval(ne,Ae,..._e){const{delegate:Le}=J;return Le?.setInterval?Le.setInterval(ne,Ae,..._e):setInterval(ne,Ae,..._e)},clearInterval(ne){const{delegate:Ae}=J;return(Ae?.clearInterval||clearInterval)(ne)},delegate:void 0};var Ee=F(9039);class ge extends ee{constructor(Ae,_e){super(Ae,_e),this.scheduler=Ae,this.work=_e,this.pending=!1}schedule(Ae,_e=0){var Le;if(this.closed)return this;this.state=Ae;const re=this.id,ue=this.scheduler;return null!=re&&(this.id=this.recycleAsyncId(ue,re,_e)),this.pending=!0,this.delay=_e,this.id=null!==(Le=this.id)&&void 0!==Le?Le:this.requestAsyncId(ue,this.id,_e),this}requestAsyncId(Ae,_e,Le=0){return J.setInterval(Ae.flush.bind(Ae,this),Le)}recycleAsyncId(Ae,_e,Le=0){if(null!=Le&&this.delay===Le&&!1===this.pending)return _e;null!=_e&&J.clearInterval(_e)}execute(Ae,_e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Le=this._execute(Ae,_e);if(Le)return Le;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ae,_e){let re,Le=!1;try{this.work(Ae)}catch(ue){Le=!0,re=ue||new Error("Scheduled action threw falsy error")}if(Le)return this.unsubscribe(),re}unsubscribe(){if(!this.closed){const{id:Ae,scheduler:_e}=this,{actions:Le}=_e;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Ee.P)(Le,this),null!=Ae&&(this.id=this.recycleAsyncId(_e,Ae,null)),this.delay=null,super.unsubscribe()}}}},2631:(Mt,Ve,F)=>{F.d(Ve,{v:()=>J});var d=F(4552);class ee{constructor(ge,ne=ee.now){this.schedulerActionCtor=ge,this.now=ne}schedule(ge,ne=0,Ae){return new this.schedulerActionCtor(this,ge).schedule(Ae,ne)}}ee.now=d.l.now;class J extends ee{constructor(ge,ne=ee.now){super(ge,ne),this.actions=[],this._active=!1}flush(ge){const{actions:ne}=this;if(this._active)return void ne.push(ge);let Ae;this._active=!0;do{if(Ae=ge.execute(ge.state,ge.delay))break}while(ge=ne.shift());if(this._active=!1,Ae){for(;ge=ne.shift();)ge.unsubscribe();throw Ae}}}},6321:(Mt,Ve,F)=>{F.d(Ve,{z:()=>J});var d=F(1954);const J=new(F(2631).v)(d.o)},4552:(Mt,Ve,F)=>{F.d(Ve,{l:()=>d});const d={now:()=>(d.delegate||Date).now(),delegate:void 0}},7599:(Mt,Ve,F)=>{F.d(Ve,{z:()=>d});const d={setTimeout(ee,J,...Ee){const{delegate:ge}=d;return ge?.setTimeout?ge.setTimeout(ee,J,...Ee):setTimeout(ee,J,...Ee)},clearTimeout(ee){const{delegate:J}=d;return(J?.clearTimeout||clearTimeout)(ee)},delegate:void 0}},4971:(Mt,Ve,F)=>{F.d(Ve,{h:()=>ee});const ee=function d(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(Mt,Ve,F)=>{F.d(Ve,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},6973:(Mt,Ve,F)=>{F.d(Ve,{K:()=>ee});const ee=(0,F(2306).d)(J=>function(){J(this),this.name="EmptyError",this.message="no elements in sequence"})},4564:(Mt,Ve,F)=>{F.d(Ve,{_6:()=>ne,jO:()=>Ee,yG:()=>ge});var d=F(4674);function J(Ae){return Ae[Ae.length-1]}function Ee(Ae){return(0,d.m)(J(Ae))?Ae.pop():void 0}function ge(Ae){return function ee(Ae){return Ae&&(0,d.m)(Ae.schedule)}(J(Ae))?Ae.pop():void 0}function ne(Ae,_e){return"number"==typeof J(Ae)?Ae.pop():_e}},7453:(Mt,Ve,F)=>{F.d(Ve,{D:()=>ge});const{isArray:d}=Array,{getPrototypeOf:ee,prototype:J,keys:Ee}=Object;function ge(Ae){if(1===Ae.length){const _e=Ae[0];if(d(_e))return{args:_e,keys:null};if(function ne(Ae){return Ae&&"object"==typeof Ae&&ee(Ae)===J}(_e)){const Le=Ee(_e);return{args:Le.map(re=>_e[re]),keys:Le}}}return{args:Ae,keys:null}}},9039:(Mt,Ve,F)=>{function d(ee,J){if(ee){const Ee=ee.indexOf(J);0<=Ee&&ee.splice(Ee,1)}}F.d(Ve,{P:()=>d})},2306:(Mt,Ve,F)=>{function d(ee){const Ee=ee(ge=>{Error.call(ge),ge.stack=(new Error).stack});return Ee.prototype=Object.create(Error.prototype),Ee.prototype.constructor=Ee,Ee}F.d(Ve,{d:()=>d})},2714:(Mt,Ve,F)=>{function d(ee,J){return ee.reduce((Ee,ge,ne)=>(Ee[ge]=J[ne],Ee),{})}F.d(Ve,{n:()=>d})},1441:(Mt,Ve,F)=>{F.d(Ve,{O:()=>Ee,x:()=>J});var d=F(2653);let ee=null;function J(ge){if(d.config.useDeprecatedSynchronousErrorHandling){const ne=!ee;if(ne&&(ee={errorThrown:!1,error:null}),ge(),ne){const{errorThrown:Ae,error:_e}=ee;if(ee=null,Ae)throw _e}}else ge()}function Ee(ge){d.config.useDeprecatedSynchronousErrorHandling&&ee&&(ee.errorThrown=!0,ee.error=ge)}},7103:(Mt,Ve,F)=>{function d(ee,J,Ee,ge=0,ne=!1){const Ae=J.schedule(function(){Ee(),ne?ee.add(this.schedule(null,ge)):this.unsubscribe()},ge);if(ee.add(Ae),!ne)return Ae}F.d(Ve,{f:()=>d})},2737:(Mt,Ve,F)=>{function d(ee){return ee}F.d(Ve,{y:()=>d})},4266:(Mt,Ve,F)=>{F.d(Ve,{z:()=>d});const d=ee=>ee&&"number"==typeof ee.length&&"function"!=typeof ee},5726:(Mt,Ve,F)=>{F.d(Ve,{D:()=>ee});var d=F(4674);function ee(J){return Symbol.asyncIterator&&(0,d.m)(J?.[Symbol.asyncIterator])}},4674:(Mt,Ve,F)=>{function d(ee){return"function"==typeof ee}F.d(Ve,{m:()=>d})},8382:(Mt,Ve,F)=>{F.d(Ve,{c:()=>J});var d=F(4850),ee=F(4674);function J(Ee){return(0,ee.m)(Ee[d.L])}},3664:(Mt,Ve,F)=>{F.d(Ve,{T:()=>J});var d=F(4971),ee=F(4674);function J(Ee){return(0,ee.m)(Ee?.[d.h])}},4026:(Mt,Ve,F)=>{F.d(Ve,{t:()=>ee});var d=F(4674);function ee(J){return(0,d.m)(J?.then)}},541:(Mt,Ve,F)=>{F.d(Ve,{L:()=>Ee,Q:()=>J});var d=F(7582),ee=F(4674);function J(ge){return(0,d.FC)(this,arguments,function*(){const Ae=ge.getReader();try{for(;;){const{value:_e,done:Le}=yield(0,d.qq)(Ae.read());if(Le)return yield(0,d.qq)(void 0);yield yield(0,d.qq)(_e)}}finally{Ae.releaseLock()}})}function Ee(ge){return(0,ee.m)(ge?.getReader)}},9360:(Mt,Ve,F)=>{F.d(Ve,{A:()=>ee,e:()=>J});var d=F(4674);function ee(Ee){return(0,d.m)(Ee?.lift)}function J(Ee){return ge=>{if(ee(ge))return ge.lift(function(ne){try{return Ee(ne,this)}catch(Ae){this.error(Ae)}});throw new TypeError("Unable to lift unknown Observable type")}}},7400:(Mt,Ve,F)=>{F.d(Ve,{Z:()=>Ee});var d=F(7398);const{isArray:ee}=Array;function Ee(ge){return(0,d.U)(ne=>function J(ge,ne){return ee(ne)?ge(...ne):ge(ne)}(ge,ne))}},2420:(Mt,Ve,F)=>{function d(){}F.d(Ve,{Z:()=>d})},8407:(Mt,Ve,F)=>{F.d(Ve,{U:()=>J,z:()=>ee});var d=F(2737);function ee(...Ee){return J(Ee)}function J(Ee){return 0===Ee.length?d.y:1===Ee.length?Ee[0]:function(ne){return Ee.reduce((Ae,_e)=>_e(Ae),ne)}}},3894:(Mt,Ve,F)=>{F.d(Ve,{h:()=>J});var d=F(2653),ee=F(7599);function J(Ee){ee.z.setTimeout(()=>{const{onUnhandledError:ge}=d.config;if(!ge)throw Ee;ge(Ee)})}},9853:(Mt,Ve,F)=>{function d(ee){return new TypeError(`You provided ${null!==ee&&"object"==typeof ee?"an invalid object":`'${ee}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(Ve,{z:()=>d})},6825:(Mt,Ve,F)=>{F.d(Ve,{LC:()=>ee,SB:()=>Le,X$:()=>Ee,ZE:()=>Xe,ZN:()=>gt,_j:()=>d,eR:()=>ue,jt:()=>ge,k1:()=>Lt,l3:()=>J,oB:()=>_e,vP:()=>Ae});class d{}class ee{}const J="*";function Ee(nt,se){return{type:7,name:nt,definitions:se,options:{}}}function ge(nt,se=null){return{type:4,styles:se,timings:nt}}function Ae(nt,se=null){return{type:2,steps:nt,options:se}}function _e(nt){return{type:6,styles:nt,offset:null}}function Le(nt,se,Be){return{type:0,name:nt,styles:se,options:Be}}function ue(nt,se,Be=null){return{type:1,expr:nt,animation:se,options:Be}}class gt{constructor(se=0,Be=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=se+Be}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(se=>se()),this._onDoneFns=[])}onStart(se){this._originalOnStartFns.push(se),this._onStartFns.push(se)}onDone(se){this._originalOnDoneFns.push(se),this._onDoneFns.push(se)}onDestroy(se){this._onDestroyFns.push(se)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(se=>se()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(se=>se()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(se){this._position=this.totalTime?se*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(se){const Be="start"==se?this._onStartFns:this._onDoneFns;Be.forEach(ke=>ke()),Be.length=0}}class Xe{constructor(se){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=se;let Be=0,ke=0,xe=0;const tt=this.players.length;0==tt?queueMicrotask(()=>this._onFinish()):this.players.forEach(ce=>{ce.onDone(()=>{++Be==tt&&this._onFinish()}),ce.onDestroy(()=>{++ke==tt&&this._onDestroy()}),ce.onStart(()=>{++xe==tt&&this._onStart()})}),this.totalTime=this.players.reduce((ce,ct)=>Math.max(ce,ct.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(se=>se()),this._onDoneFns=[])}init(){this.players.forEach(se=>se.init())}onStart(se){this._onStartFns.push(se)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(se=>se()),this._onStartFns=[])}onDone(se){this._onDoneFns.push(se)}onDestroy(se){this._onDestroyFns.push(se)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(se=>se.play())}pause(){this.players.forEach(se=>se.pause())}restart(){this.players.forEach(se=>se.restart())}finish(){this._onFinish(),this.players.forEach(se=>se.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(se=>se.destroy()),this._onDestroyFns.forEach(se=>se()),this._onDestroyFns=[])}reset(){this.players.forEach(se=>se.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(se){const Be=se*this.totalTime;this.players.forEach(ke=>{const xe=ke.totalTime?Math.min(1,Be/ke.totalTime):1;ke.setPosition(xe)})}getPosition(){const se=this.players.reduce((Be,ke)=>null===Be||ke.totalTime>Be.totalTime?ke:Be,null);return null!=se?se.getPosition():0}beforeDestroy(){this.players.forEach(se=>{se.beforeDestroy&&se.beforeDestroy()})}triggerCallback(se){const Be="start"==se?this._onStartFns:this._onDoneFns;Be.forEach(ke=>ke()),Be.length=0}}const Lt="!"},6814:(Mt,Ve,F)=>{F.d(Ve,{Do:()=>it,EM:()=>Hr,HT:()=>Ee,JF:()=>Ji,K0:()=>ne,Mx:()=>Lr,Nd:()=>Li,O5:()=>Fi,PM:()=>yi,S$:()=>et,V_:()=>_e,Ye:()=>gt,b0:()=>ht,bD:()=>er,ez:()=>Vi,q:()=>J,sg:()=>Kr,w_:()=>ge});var d=F(5879);let ee=null;function J(){return ee}function Ee(D){ee||(ee=D)}class ge{}const ne=new d.OlP("DocumentToken");let Ae=(()=>{class D{historyGo(k){throw new Error("Not implemented")}static#e=this.\u0275fac=function(W){return new(W||D)};static#t=this.\u0275prov=d.Yz7({token:D,factory:function(){return(0,d.f3M)(Le)},providedIn:"platform"})}return D})();const _e=new d.OlP("Location Initialized");let Le=(()=>{class D extends Ae{constructor(){super(),this._doc=(0,d.f3M)(ne),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return J().getBaseHref(this._doc)}onPopState(k){const W=J().getGlobalEventTarget(this._doc,"window");return W.addEventListener("popstate",k,!1),()=>W.removeEventListener("popstate",k)}onHashChange(k){const W=J().getGlobalEventTarget(this._doc,"window");return W.addEventListener("hashchange",k,!1),()=>W.removeEventListener("hashchange",k)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(k){this._location.pathname=k}pushState(k,W,de){this._history.pushState(k,W,de)}replaceState(k,W,de){this._history.replaceState(k,W,de)}forward(){this._history.forward()}back(){this._history.back()}historyGo(k=0){this._history.go(k)}getState(){return this._history.state}static#e=this.\u0275fac=function(W){return new(W||D)};static#t=this.\u0275prov=d.Yz7({token:D,factory:function(){return new D},providedIn:"platform"})}return D})();function re(D,K){if(0==D.length)return K;if(0==K.length)return D;let k=0;return D.endsWith("/")&&k++,K.startsWith("/")&&k++,2==k?D+K.substring(1):1==k?D+K:D+"/"+K}function ue(D){const K=D.match(/#|\?|$/),k=K&&K.index||D.length;return D.slice(0,k-("/"===D[k-1]?1:0))+D.slice(k)}function Se(D){return D&&"?"!==D[0]?"?"+D:D}let et=(()=>{class D{historyGo(k){throw new Error("Not implemented")}static#e=this.\u0275fac=function(W){return new(W||D)};static#t=this.\u0275prov=d.Yz7({token:D,factory:function(){return(0,d.f3M)(ht)},providedIn:"root"})}return D})();const qe=new d.OlP("appBaseHref");let ht=(()=>{class D extends et{constructor(k,W){super(),this._platformLocation=k,this._removeListenerFns=[],this._baseHref=W??this._platformLocation.getBaseHrefFromDOM()??(0,d.f3M)(ne).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(k){this._removeListenerFns.push(this._platformLocation.onPopState(k),this._platformLocation.onHashChange(k))}getBaseHref(){return this._baseHref}prepareExternalUrl(k){return re(this._baseHref,k)}path(k=!1){const W=this._platformLocation.pathname+Se(this._platformLocation.search),de=this._platformLocation.hash;return de&&k?`${W}${de}`:W}pushState(k,W,de,Ye){const ot=this.prepareExternalUrl(de+Se(Ye));this._platformLocation.pushState(k,W,ot)}replaceState(k,W,de,Ye){const ot=this.prepareExternalUrl(de+Se(Ye));this._platformLocation.replaceState(k,W,ot)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(k=0){this._platformLocation.historyGo?.(k)}static#e=this.\u0275fac=function(W){return new(W||D)(d.LFG(Ae),d.LFG(qe,8))};static#t=this.\u0275prov=d.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"})}return D})(),it=(()=>{class D extends et{constructor(k,W){super(),this._platformLocation=k,this._baseHref="",this._removeListenerFns=[],null!=W&&(this._baseHref=W)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(k){this._removeListenerFns.push(this._platformLocation.onPopState(k),this._platformLocation.onHashChange(k))}getBaseHref(){return this._baseHref}path(k=!1){let W=this._platformLocation.hash;return null==W&&(W="#"),W.length>0?W.substring(1):W}prepareExternalUrl(k){const W=re(this._baseHref,k);return W.length>0?"#"+W:W}pushState(k,W,de,Ye){let ot=this.prepareExternalUrl(de+Se(Ye));0==ot.length&&(ot=this._platformLocation.pathname),this._platformLocation.pushState(k,W,ot)}replaceState(k,W,de,Ye){let ot=this.prepareExternalUrl(de+Se(Ye));0==ot.length&&(ot=this._platformLocation.pathname),this._platformLocation.replaceState(k,W,ot)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(k=0){this._platformLocation.historyGo?.(k)}static#e=this.\u0275fac=function(W){return new(W||D)(d.LFG(Ae),d.LFG(qe,8))};static#t=this.\u0275prov=d.Yz7({token:D,factory:D.\u0275fac})}return D})(),gt=(()=>{class D{constructor(k){this._subject=new d.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=k;const W=this._locationStrategy.getBaseHref();this._basePath=function se(D){if(new RegExp("^(https?:)?//").test(D)){const[,k]=D.split(/\/\/[^\/]+/);return k}return D}(ue(nt(W))),this._locationStrategy.onPopState(de=>{this._subject.emit({url:this.path(!0),pop:!0,state:de.state,type:de.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(k=!1){return this.normalize(this._locationStrategy.path(k))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(k,W=""){return this.path()==this.normalize(k+Se(W))}normalize(k){return D.stripTrailingSlash(function Lt(D,K){if(!D||!K.startsWith(D))return K;const k=K.substring(D.length);return""===k||["/",";","?","#"].includes(k[0])?k:K}(this._basePath,nt(k)))}prepareExternalUrl(k){return k&&"/"!==k[0]&&(k="/"+k),this._locationStrategy.prepareExternalUrl(k)}go(k,W="",de=null){this._locationStrategy.pushState(de,"",k,W),this._notifyUrlChangeListeners(this.prepareExternalUrl(k+Se(W)),de)}replaceState(k,W="",de=null){this._locationStrategy.replaceState(de,"",k,W),this._notifyUrlChangeListeners(this.prepareExternalUrl(k+Se(W)),de)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(k=0){this._locationStrategy.historyGo?.(k)}onUrlChange(k){return this._urlChangeListeners.push(k),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(W=>{this._notifyUrlChangeListeners(W.url,W.state)})),()=>{const W=this._urlChangeListeners.indexOf(k);this._urlChangeListeners.splice(W,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(k="",W){this._urlChangeListeners.forEach(de=>de(k,W))}subscribe(k,W,de){return this._subject.subscribe({next:k,error:W,complete:de})}static#e=this.normalizeQueryParams=Se;static#t=this.joinWithSlash=re;static#n=this.stripTrailingSlash=ue;static#r=this.\u0275fac=function(W){return new(W||D)(d.LFG(et))};static#i=this.\u0275prov=d.Yz7({token:D,factory:function(){return function Xe(){return new gt((0,d.LFG)(et))}()},providedIn:"root"})}return D})();function nt(D){return D.replace(/\/index.html$/,"")}function Lr(D,K){K=encodeURIComponent(K);for(const k of D.split(";")){const W=k.indexOf("="),[de,Ye]=-1==W?[k,""]:[k.slice(0,W),k.slice(W+1)];if(de.trim()===K)return decodeURIComponent(Ye)}return null}class Fn{constructor(K,k,W,de){this.$implicit=K,this.ngForOf=k,this.index=W,this.count=de}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Kr=(()=>{class D{set ngForOf(k){this._ngForOf=k,this._ngForOfDirty=!0}set ngForTrackBy(k){this._trackByFn=k}get ngForTrackBy(){return this._trackByFn}constructor(k,W,de){this._viewContainer=k,this._template=W,this._differs=de,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(k){k&&(this._template=k)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const k=this._ngForOf;!this._differ&&k&&(this._differ=this._differs.find(k).create(this.ngForTrackBy))}if(this._differ){const k=this._differ.diff(this._ngForOf);k&&this._applyChanges(k)}}_applyChanges(k){const W=this._viewContainer;k.forEachOperation((de,Ye,ot)=>{if(null==de.previousIndex)W.createEmbeddedView(this._template,new Fn(de.item,this._ngForOf,-1,-1),null===ot?void 0:ot);else if(null==ot)W.remove(null===Ye?void 0:Ye);else if(null!==Ye){const jt=W.get(Ye);W.move(jt,ot),ni(jt,de)}});for(let de=0,Ye=W.length;de<Ye;de++){const jt=W.get(de).context;jt.index=de,jt.count=Ye,jt.ngForOf=this._ngForOf}k.forEachIdentityChange(de=>{ni(W.get(de.currentIndex),de)})}static ngTemplateContextGuard(k,W){return!0}static#e=this.\u0275fac=function(W){return new(W||D)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(d.ZZ4))};static#t=this.\u0275dir=d.lG2({type:D,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return D})();function ni(D,K){D.context.$implicit=K.item}let Fi=(()=>{class D{constructor(k,W){this._viewContainer=k,this._context=new mo,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=W}set ngIf(k){this._context.$implicit=this._context.ngIf=k,this._updateView()}set ngIfThen(k){eo("ngIfThen",k),this._thenTemplateRef=k,this._thenViewRef=null,this._updateView()}set ngIfElse(k){eo("ngIfElse",k),this._elseTemplateRef=k,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(k,W){return!0}static#e=this.\u0275fac=function(W){return new(W||D)(d.Y36(d.s_b),d.Y36(d.Rgc))};static#t=this.\u0275dir=d.lG2({type:D,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return D})();class mo{constructor(){this.$implicit=null,this.ngIf=null}}function eo(D,K){if(K&&!K.createEmbeddedView)throw new Error(`${D} must be a TemplateRef, but received '${(0,d.AaK)(K)}'.`)}let Li=(()=>{class D{constructor(k){this.differs=k,this.keyValues=[],this.compareFn=$i}transform(k,W=$i){if(!k||!(k instanceof Map)&&"object"!=typeof k)return null;this.differ||(this.differ=this.differs.find(k).create());const de=this.differ.diff(k),Ye=W!==this.compareFn;return de&&(this.keyValues=[],de.forEachItem(ot=>{this.keyValues.push(function Ln(D,K){return{key:D,value:K}}(ot.key,ot.currentValue))})),(de||Ye)&&(this.keyValues.sort(W),this.compareFn=W),this.keyValues}static#e=this.\u0275fac=function(W){return new(W||D)(d.Y36(d.aQg,16))};static#t=this.\u0275pipe=d.Yjl({name:"keyvalue",type:D,pure:!1,standalone:!0})}return D})();function $i(D,K){const k=D.key,W=K.key;if(k===W)return 0;if(void 0===k)return 1;if(void 0===W)return-1;if(null===k)return 1;if(null===W)return-1;if("string"==typeof k&&"string"==typeof W)return k<W?-1:1;if("number"==typeof k&&"number"==typeof W)return k-W;if("boolean"==typeof k&&"boolean"==typeof W)return k<W?-1:1;const de=String(k),Ye=String(W);return de==Ye?0:de<Ye?-1:1}let Vi=(()=>{class D{static#e=this.\u0275fac=function(W){return new(W||D)};static#t=this.\u0275mod=d.oAB({type:D});static#n=this.\u0275inj=d.cJS({})}return D})();const er="browser",zi="server";function yi(D){return D===zi}let Hr=(()=>{class D{static#e=this.\u0275prov=(0,d.Yz7)({token:D,providedIn:"root",factory:()=>new Dr((0,d.LFG)(ne),window)})}return D})();class Dr{constructor(K,k){this.document=K,this.window=k,this.offset=()=>[0,0]}setOffset(K){this.offset=Array.isArray(K)?()=>K:K}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(K){this.supportsScrolling()&&this.window.scrollTo(K[0],K[1])}scrollToAnchor(K){if(!this.supportsScrolling())return;const k=function vi(D,K){const k=D.getElementById(K)||D.getElementsByName(K)[0];if(k)return k;if("function"==typeof D.createTreeWalker&&D.body&&"function"==typeof D.body.attachShadow){const W=D.createTreeWalker(D.body,NodeFilter.SHOW_ELEMENT);let de=W.currentNode;for(;de;){const Ye=de.shadowRoot;if(Ye){const ot=Ye.getElementById(K)||Ye.querySelector(`[name="${K}"]`);if(ot)return ot}de=W.nextNode()}}return null}(this.document,K);k&&(this.scrollToElement(k),k.focus())}setHistoryScrollRestoration(K){this.supportsScrolling()&&(this.window.history.scrollRestoration=K)}scrollToElement(K){const k=K.getBoundingClientRect(),W=k.left+this.window.pageXOffset,de=k.top+this.window.pageYOffset,Ye=this.offset();this.window.scrollTo(W-Ye[0],de-Ye[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class Ji{}},9862:(Mt,Ve,F)=>{F.d(Ve,{JF:()=>N,eN:()=>Ce});var d=F(5879),ee=F(2096),J=F(2459),Ee=F(5592),ge=F(6328),ne=F(2181),Ae=F(7398),_e=F(4716),Le=F(4664),re=F(6814);class ue{}class Se{}class et{constructor(me){this.normalizedNames=new Map,this.lazyUpdate=null,me?"string"==typeof me?this.lazyInit=()=>{this.headers=new Map,me.split("\n").forEach(De=>{const fe=De.indexOf(":");if(fe>0){const pe=De.slice(0,fe),Fe=pe.toLowerCase(),Ge=De.slice(fe+1).trim();this.maybeSetNormalizedName(pe,Fe),this.headers.has(Fe)?this.headers.get(Fe).push(Ge):this.headers.set(Fe,[Ge])}})}:typeof Headers<"u"&&me instanceof Headers?(this.headers=new Map,me.forEach((De,fe)=>{this.setHeaderEntries(fe,De)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(me).forEach(([De,fe])=>{this.setHeaderEntries(De,fe)})}:this.headers=new Map}has(me){return this.init(),this.headers.has(me.toLowerCase())}get(me){this.init();const De=this.headers.get(me.toLowerCase());return De&&De.length>0?De[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(me){return this.init(),this.headers.get(me.toLowerCase())||null}append(me,De){return this.clone({name:me,value:De,op:"a"})}set(me,De){return this.clone({name:me,value:De,op:"s"})}delete(me,De){return this.clone({name:me,value:De,op:"d"})}maybeSetNormalizedName(me,De){this.normalizedNames.has(De)||this.normalizedNames.set(De,me)}init(){this.lazyInit&&(this.lazyInit instanceof et?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(me=>this.applyUpdate(me)),this.lazyUpdate=null))}copyFrom(me){me.init(),Array.from(me.headers.keys()).forEach(De=>{this.headers.set(De,me.headers.get(De)),this.normalizedNames.set(De,me.normalizedNames.get(De))})}clone(me){const De=new et;return De.lazyInit=this.lazyInit&&this.lazyInit instanceof et?this.lazyInit:this,De.lazyUpdate=(this.lazyUpdate||[]).concat([me]),De}applyUpdate(me){const De=me.name.toLowerCase();switch(me.op){case"a":case"s":let fe=me.value;if("string"==typeof fe&&(fe=[fe]),0===fe.length)return;this.maybeSetNormalizedName(me.name,De);const pe=("a"===me.op?this.headers.get(De):void 0)||[];pe.push(...fe),this.headers.set(De,pe);break;case"d":const Fe=me.value;if(Fe){let Ge=this.headers.get(De);if(!Ge)return;Ge=Ge.filter(Vt=>-1===Fe.indexOf(Vt)),0===Ge.length?(this.headers.delete(De),this.normalizedNames.delete(De)):this.headers.set(De,Ge)}else this.headers.delete(De),this.normalizedNames.delete(De)}}setHeaderEntries(me,De){const fe=(Array.isArray(De)?De:[De]).map(Fe=>Fe.toString()),pe=me.toLowerCase();this.headers.set(pe,fe),this.maybeSetNormalizedName(me,pe)}forEach(me){this.init(),Array.from(this.normalizedNames.keys()).forEach(De=>me(this.normalizedNames.get(De),this.headers.get(De)))}}class ht{encodeKey(me){return Lt(me)}encodeValue(me){return Lt(me)}decodeKey(me){return decodeURIComponent(me)}decodeValue(me){return decodeURIComponent(me)}}const gt=/%(\d[a-f0-9])/gi,Xe={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Lt(we){return encodeURIComponent(we).replace(gt,(me,De)=>Xe[De]??me)}function nt(we){return`${we}`}class se{constructor(me={}){if(this.updates=null,this.cloneFrom=null,this.encoder=me.encoder||new ht,me.fromString){if(me.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function it(we,me){const De=new Map;return we.length>0&&we.replace(/^\?/,"").split("&").forEach(pe=>{const Fe=pe.indexOf("="),[Ge,Vt]=-1==Fe?[me.decodeKey(pe),""]:[me.decodeKey(pe.slice(0,Fe)),me.decodeValue(pe.slice(Fe+1))],st=De.get(Ge)||[];st.push(Vt),De.set(Ge,st)}),De}(me.fromString,this.encoder)}else me.fromObject?(this.map=new Map,Object.keys(me.fromObject).forEach(De=>{const fe=me.fromObject[De],pe=Array.isArray(fe)?fe.map(nt):[nt(fe)];this.map.set(De,pe)})):this.map=null}has(me){return this.init(),this.map.has(me)}get(me){this.init();const De=this.map.get(me);return De?De[0]:null}getAll(me){return this.init(),this.map.get(me)||null}keys(){return this.init(),Array.from(this.map.keys())}append(me,De){return this.clone({param:me,value:De,op:"a"})}appendAll(me){const De=[];return Object.keys(me).forEach(fe=>{const pe=me[fe];Array.isArray(pe)?pe.forEach(Fe=>{De.push({param:fe,value:Fe,op:"a"})}):De.push({param:fe,value:pe,op:"a"})}),this.clone(De)}set(me,De){return this.clone({param:me,value:De,op:"s"})}delete(me,De){return this.clone({param:me,value:De,op:"d"})}toString(){return this.init(),this.keys().map(me=>{const De=this.encoder.encodeKey(me);return this.map.get(me).map(fe=>De+"="+this.encoder.encodeValue(fe)).join("&")}).filter(me=>""!==me).join("&")}clone(me){const De=new se({encoder:this.encoder});return De.cloneFrom=this.cloneFrom||this,De.updates=(this.updates||[]).concat(me),De}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(me=>this.map.set(me,this.cloneFrom.map.get(me))),this.updates.forEach(me=>{switch(me.op){case"a":case"s":const De=("a"===me.op?this.map.get(me.param):void 0)||[];De.push(nt(me.value)),this.map.set(me.param,De);break;case"d":if(void 0===me.value){this.map.delete(me.param);break}{let fe=this.map.get(me.param)||[];const pe=fe.indexOf(nt(me.value));-1!==pe&&fe.splice(pe,1),fe.length>0?this.map.set(me.param,fe):this.map.delete(me.param)}}}),this.cloneFrom=this.updates=null)}}class ke{constructor(){this.map=new Map}set(me,De){return this.map.set(me,De),this}get(me){return this.map.has(me)||this.map.set(me,me.defaultValue()),this.map.get(me)}delete(me){return this.map.delete(me),this}has(me){return this.map.has(me)}keys(){return this.map.keys()}}function tt(we){return typeof ArrayBuffer<"u"&&we instanceof ArrayBuffer}function ce(we){return typeof Blob<"u"&&we instanceof Blob}function ct(we){return typeof FormData<"u"&&we instanceof FormData}class zt{constructor(me,De,fe,pe){let Fe;if(this.url=De,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=me.toUpperCase(),function xe(we){switch(we){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||pe?(this.body=void 0!==fe?fe:null,Fe=pe):Fe=fe,Fe&&(this.reportProgress=!!Fe.reportProgress,this.withCredentials=!!Fe.withCredentials,Fe.responseType&&(this.responseType=Fe.responseType),Fe.headers&&(this.headers=Fe.headers),Fe.context&&(this.context=Fe.context),Fe.params&&(this.params=Fe.params)),this.headers||(this.headers=new et),this.context||(this.context=new ke),this.params){const Ge=this.params.toString();if(0===Ge.length)this.urlWithParams=De;else{const Vt=De.indexOf("?");this.urlWithParams=De+(-1===Vt?"?":Vt<De.length-1?"&":"")+Ge}}else this.params=new se,this.urlWithParams=De}serializeBody(){return null===this.body?null:tt(this.body)||ce(this.body)||ct(this.body)||function It(we){return typeof URLSearchParams<"u"&&we instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof se?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||ct(this.body)?null:ce(this.body)?this.body.type||null:tt(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof se?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(me={}){const De=me.method||this.method,fe=me.url||this.url,pe=me.responseType||this.responseType,Fe=void 0!==me.body?me.body:this.body,Ge=void 0!==me.withCredentials?me.withCredentials:this.withCredentials,Vt=void 0!==me.reportProgress?me.reportProgress:this.reportProgress;let st=me.headers||this.headers,Qt=me.params||this.params;const Xn=me.context??this.context;return void 0!==me.setHeaders&&(st=Object.keys(me.setHeaders).reduce((Sn,Mr)=>Sn.set(Mr,me.setHeaders[Mr]),st)),me.setParams&&(Qt=Object.keys(me.setParams).reduce((Sn,Mr)=>Sn.set(Mr,me.setParams[Mr]),Qt)),new zt(De,fe,Fe,{params:Qt,headers:st,context:Xn,reportProgress:Vt,responseType:pe,withCredentials:Ge})}}var un=function(we){return we[we.Sent=0]="Sent",we[we.UploadProgress=1]="UploadProgress",we[we.ResponseHeader=2]="ResponseHeader",we[we.DownloadProgress=3]="DownloadProgress",we[we.Response=4]="Response",we[we.User=5]="User",we}(un||{});class pn{constructor(me,De=200,fe="OK"){this.headers=me.headers||new et,this.status=void 0!==me.status?me.status:De,this.statusText=me.statusText||fe,this.url=me.url||null,this.ok=this.status>=200&&this.status<300}}class ar extends pn{constructor(me={}){super(me),this.type=un.ResponseHeader}clone(me={}){return new ar({headers:me.headers||this.headers,status:void 0!==me.status?me.status:this.status,statusText:me.statusText||this.statusText,url:me.url||this.url||void 0})}}class Nt extends pn{constructor(me={}){super(me),this.type=un.Response,this.body=void 0!==me.body?me.body:null}clone(me={}){return new Nt({body:void 0!==me.body?me.body:this.body,headers:me.headers||this.headers,status:void 0!==me.status?me.status:this.status,statusText:me.statusText||this.statusText,url:me.url||this.url||void 0})}}class Pt extends pn{constructor(me){super(me,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${me.url||"(unknown url)"}`:`Http failure response for ${me.url||"(unknown url)"}: ${me.status} ${me.statusText}`,this.error=me.error||null}}function wt(we,me){return{body:me,headers:we.headers,context:we.context,observe:we.observe,params:we.params,reportProgress:we.reportProgress,responseType:we.responseType,withCredentials:we.withCredentials}}let Ce=(()=>{class we{constructor(De){this.handler=De}request(De,fe,pe={}){let Fe;if(De instanceof zt)Fe=De;else{let st,Qt;st=pe.headers instanceof et?pe.headers:new et(pe.headers),pe.params&&(Qt=pe.params instanceof se?pe.params:new se({fromObject:pe.params})),Fe=new zt(De,fe,void 0!==pe.body?pe.body:null,{headers:st,context:pe.context,params:Qt,reportProgress:pe.reportProgress,responseType:pe.responseType||"json",withCredentials:pe.withCredentials})}const Ge=(0,ee.of)(Fe).pipe((0,ge.b)(st=>this.handler.handle(st)));if(De instanceof zt||"events"===pe.observe)return Ge;const Vt=Ge.pipe((0,ne.h)(st=>st instanceof Nt));switch(pe.observe||"body"){case"body":switch(Fe.responseType){case"arraybuffer":return Vt.pipe((0,Ae.U)(st=>{if(null!==st.body&&!(st.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return st.body}));case"blob":return Vt.pipe((0,Ae.U)(st=>{if(null!==st.body&&!(st.body instanceof Blob))throw new Error("Response is not a Blob.");return st.body}));case"text":return Vt.pipe((0,Ae.U)(st=>{if(null!==st.body&&"string"!=typeof st.body)throw new Error("Response is not a string.");return st.body}));default:return Vt.pipe((0,Ae.U)(st=>st.body))}case"response":return Vt;default:throw new Error(`Unreachable: unhandled observe type ${pe.observe}}`)}}delete(De,fe={}){return this.request("DELETE",De,fe)}get(De,fe={}){return this.request("GET",De,fe)}head(De,fe={}){return this.request("HEAD",De,fe)}jsonp(De,fe){return this.request("JSONP",De,{params:(new se).append(fe,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(De,fe={}){return this.request("OPTIONS",De,fe)}patch(De,fe,pe={}){return this.request("PATCH",De,wt(pe,fe))}post(De,fe,pe={}){return this.request("POST",De,wt(pe,fe))}put(De,fe,pe={}){return this.request("PUT",De,wt(pe,fe))}static#e=this.\u0275fac=function(fe){return new(fe||we)(d.LFG(ue))};static#t=this.\u0275prov=d.Yz7({token:we,factory:we.\u0275fac})}return we})();function Mn(we,me){return me(we)}function Jt(we,me){return(De,fe)=>me.intercept(De,{handle:pe=>we(pe,fe)})}const on=new d.OlP(""),$n=new d.OlP(""),In=new d.OlP("");function Wn(){let we=null;return(me,De)=>{null===we&&(we=((0,d.f3M)(on,{optional:!0})??[]).reduceRight(Jt,Mn));const fe=(0,d.f3M)(d.HDt),pe=fe.add();return we(me,De).pipe((0,_e.x)(()=>fe.remove(pe)))}}let Rt=(()=>{class we extends ue{constructor(De,fe){super(),this.backend=De,this.injector=fe,this.chain=null,this.pendingTasks=(0,d.f3M)(d.HDt)}handle(De){if(null===this.chain){const pe=Array.from(new Set([...this.injector.get($n),...this.injector.get(In,[])]));this.chain=pe.reduceRight((Fe,Ge)=>function Nn(we,me,De){return(fe,pe)=>De.runInContext(()=>me(fe,Fe=>we(Fe,pe)))}(Fe,Ge,this.injector),Mn)}const fe=this.pendingTasks.add();return this.chain(De,pe=>this.backend.handle(pe)).pipe((0,_e.x)(()=>this.pendingTasks.remove(fe)))}static#e=this.\u0275fac=function(fe){return new(fe||we)(d.LFG(Se),d.LFG(d.lqb))};static#t=this.\u0275prov=d.Yz7({token:we,factory:we.\u0275fac})}return we})();const ur=/^\)\]\}',?\n/;let vn=(()=>{class we{constructor(De){this.xhrFactory=De}handle(De){if("JSONP"===De.method)throw new d.vHH(-2800,!1);const fe=this.xhrFactory;return(fe.\u0275loadImpl?(0,J.D)(fe.\u0275loadImpl()):(0,ee.of)(null)).pipe((0,Le.w)(()=>new Ee.y(Fe=>{const Ge=fe.build();if(Ge.open(De.method,De.urlWithParams),De.withCredentials&&(Ge.withCredentials=!0),De.headers.forEach((xn,lr)=>Ge.setRequestHeader(xn,lr.join(","))),De.headers.has("Accept")||Ge.setRequestHeader("Accept","application/json, text/plain, */*"),!De.headers.has("Content-Type")){const xn=De.detectContentTypeHeader();null!==xn&&Ge.setRequestHeader("Content-Type",xn)}if(De.responseType){const xn=De.responseType.toLowerCase();Ge.responseType="json"!==xn?xn:"text"}const Vt=De.serializeBody();let st=null;const Qt=()=>{if(null!==st)return st;const xn=Ge.statusText||"OK",lr=new et(Ge.getAllResponseHeaders()),li=function ui(we){return"responseURL"in we&&we.responseURL?we.responseURL:/^X-Request-URL:/m.test(we.getAllResponseHeaders())?we.getResponseHeader("X-Request-URL"):null}(Ge)||De.url;return st=new ar({headers:lr,status:Ge.status,statusText:xn,url:li}),st},Xn=()=>{let{headers:xn,status:lr,statusText:li,url:vs}=Qt(),Fn=null;204!==lr&&(Fn=typeof Ge.response>"u"?Ge.responseText:Ge.response),0===lr&&(lr=Fn?200:0);let Kr=lr>=200&&lr<300;if("json"===De.responseType&&"string"==typeof Fn){const ni=Fn;Fn=Fn.replace(ur,"");try{Fn=""!==Fn?JSON.parse(Fn):null}catch(Rs){Fn=ni,Kr&&(Kr=!1,Fn={error:Rs,text:Fn})}}Kr?(Fe.next(new Nt({body:Fn,headers:xn,status:lr,statusText:li,url:vs||void 0})),Fe.complete()):Fe.error(new Pt({error:Fn,headers:xn,status:lr,statusText:li,url:vs||void 0}))},Sn=xn=>{const{url:lr}=Qt(),li=new Pt({error:xn,status:Ge.status||0,statusText:Ge.statusText||"Unknown Error",url:lr||void 0});Fe.error(li)};let Mr=!1;const Lr=xn=>{Mr||(Fe.next(Qt()),Mr=!0);let lr={type:un.DownloadProgress,loaded:xn.loaded};xn.lengthComputable&&(lr.total=xn.total),"text"===De.responseType&&Ge.responseText&&(lr.partialText=Ge.responseText),Fe.next(lr)},ki=xn=>{let lr={type:un.UploadProgress,loaded:xn.loaded};xn.lengthComputable&&(lr.total=xn.total),Fe.next(lr)};return Ge.addEventListener("load",Xn),Ge.addEventListener("error",Sn),Ge.addEventListener("timeout",Sn),Ge.addEventListener("abort",Sn),De.reportProgress&&(Ge.addEventListener("progress",Lr),null!==Vt&&Ge.upload&&Ge.upload.addEventListener("progress",ki)),Ge.send(Vt),Fe.next({type:un.Sent}),()=>{Ge.removeEventListener("error",Sn),Ge.removeEventListener("abort",Sn),Ge.removeEventListener("load",Xn),Ge.removeEventListener("timeout",Sn),De.reportProgress&&(Ge.removeEventListener("progress",Lr),null!==Vt&&Ge.upload&&Ge.upload.removeEventListener("progress",ki)),Ge.readyState!==Ge.DONE&&Ge.abort()}})))}static#e=this.\u0275fac=function(fe){return new(fe||we)(d.LFG(re.JF))};static#t=this.\u0275prov=d.Yz7({token:we,factory:we.\u0275fac})}return we})();const vr=new d.OlP("XSRF_ENABLED"),$t=new d.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),nn=new d.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class sn{}let Fr=(()=>{class we{constructor(De,fe,pe){this.doc=De,this.platform=fe,this.cookieName=pe,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const De=this.doc.cookie||"";return De!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,re.Mx)(De,this.cookieName),this.lastCookieString=De),this.lastToken}static#e=this.\u0275fac=function(fe){return new(fe||we)(d.LFG(re.K0),d.LFG(d.Lbi),d.LFG($t))};static#t=this.\u0275prov=d.Yz7({token:we,factory:we.\u0275fac})}return we})();function bi(we,me){const De=we.url.toLowerCase();if(!(0,d.f3M)(vr)||"GET"===we.method||"HEAD"===we.method||De.startsWith("http://")||De.startsWith("https://"))return me(we);const fe=(0,d.f3M)(sn).getToken(),pe=(0,d.f3M)(nn);return null!=fe&&!we.headers.has(pe)&&(we=we.clone({headers:we.headers.set(pe,fe)})),me(we)}var mn=function(we){return we[we.Interceptors=0]="Interceptors",we[we.LegacyInterceptors=1]="LegacyInterceptors",we[we.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",we[we.NoXsrfProtection=3]="NoXsrfProtection",we[we.JsonpSupport=4]="JsonpSupport",we[we.RequestsMadeViaParent=5]="RequestsMadeViaParent",we[we.Fetch=6]="Fetch",we}(mn||{});function qr(...we){const me=[Ce,vn,Rt,{provide:ue,useExisting:Rt},{provide:Se,useExisting:vn},{provide:$n,useValue:bi,multi:!0},{provide:vr,useValue:!0},{provide:sn,useClass:Fr}];for(const De of we)me.push(...De.\u0275providers);return(0,d.MR2)(me)}const Rr=new d.OlP("LEGACY_INTERCEPTOR_FN");function Pr(){return function rr(we,me){return{\u0275kind:we,\u0275providers:me}}(mn.LegacyInterceptors,[{provide:Rr,useFactory:Wn},{provide:$n,useExisting:Rr,multi:!0}])}let N=(()=>{class we{static#e=this.\u0275fac=function(fe){return new(fe||we)};static#t=this.\u0275mod=d.oAB({type:we});static#n=this.\u0275inj=d.cJS({providers:[qr(Pr())]})}return we})()},5879:(Mt,Ve,F)=>{F.d(Ve,{$8M:()=>oa,$WT:()=>Jr,$Z:()=>D_,AFp:()=>Qh,ALo:()=>v0,AaK:()=>Se,AsE:()=>tE,CHM:()=>ye,CRH:()=>k0,EJc:()=>OC,EiD:()=>Bm,EpF:()=>iy,F$t:()=>hy,F4k:()=>sy,FYo:()=>rf,FiY:()=>xa,Gf:()=>O0,GfV:()=>Wp,Gpc:()=>ht,HDt:()=>iw,Hsn:()=>fy,JOm:()=>Tu,JVY:()=>jy,JZr:()=>nt,KtG:()=>Ue,L6k:()=>Om,LAX:()=>bd,LFG:()=>dt,LSH:()=>Tp,Lbi:()=>Fd,Lck:()=>yD,MAs:()=>ry,MMx:()=>o0,MR2:()=>Ap,NdJ:()=>oy,O4$:()=>Zs,Ojb:()=>Yh,OlP:()=>$t,Oqu:()=>eE,P3R:()=>$m,PXZ:()=>uA,Q6J:()=>Hg,QGY:()=>qg,QbO:()=>Ld,Qsj:()=>Xy,R0b:()=>$s,RDi:()=>Kl,Rgc:()=>om,SBq:()=>zc,Sil:()=>FC,Suo:()=>x0,TTD:()=>Yt,TgZ:()=>kf,Tol:()=>tI,Udp:()=>Lf,VuI:()=>zA,W1O:()=>U0,X6Q:()=>mA,XFs:()=>Kt,Xpm:()=>to,Xq5:()=>Mg,Xts:()=>Jl,Y36:()=>Wc,YKP:()=>r0,YNc:()=>ey,Yjl:()=>Yi,Yz7:()=>on,Z0I:()=>Rt,ZZ4:()=>kE,_Bn:()=>n0,_UZ:()=>ah,_c5:()=>NA,_uU:()=>uI,aQg:()=>FE,c2e:()=>rw,cJS:()=>In,cg1:()=>nE,dDg:()=>iA,dqk:()=>vn,eBb:()=>kc,eFA:()=>pw,eJc:()=>vE,ekj:()=>Jv,eoX:()=>cw,f3M:()=>St,g9A:()=>Fp,h0i:()=>ch,hGG:()=>OA,hij:()=>_y,iGM:()=>N0,ifc:()=>Ge,ip1:()=>nw,jDz:()=>a0,kL8:()=>bI,kcU:()=>To,lG2:()=>ro,lcZ:()=>E0,lqb:()=>ou,lri:()=>uw,mCW:()=>Zl,n5z:()=>Ic,oAB:()=>ji,oJD:()=>wp,oxw:()=>dy,pB0:()=>Fc,q3G:()=>Fa,q4F:()=>o_,qFp:()=>WA,qLn:()=>ml,qOj:()=>Rg,qZA:()=>Vu,qzn:()=>ul,rWj:()=>lw,rg0:()=>Ye,s9C:()=>Kg,sBO:()=>_A,s_b:()=>Dy,soG:()=>Ay,tb:()=>RE,tp0:()=>Yu,uIk:()=>nh,vHH:()=>se,vpe:()=>au,wAp:()=>Uf,xp6:()=>T_,z2F:()=>Hf,z3N:()=>Ru,zSh:()=>xd,zs3:()=>So});var d=F(8645),ee=F(7394),J=F(5592),Ee=F(3019),ge=F(5619),ne=F(2096),Ae=F(3020),_e=F(4664),Le=F(3997);function re(t){for(let r in t)if(t[r]===re)return r;throw Error("Could not find renamed property on target object.")}function ue(t,r){for(const s in r)r.hasOwnProperty(s)&&!t.hasOwnProperty(s)&&(t[s]=r[s])}function Se(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Se).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const r=t.toString();if(null==r)return""+r;const s=r.indexOf("\n");return-1===s?r:r.substring(0,s)}function et(t,r){return null==t||""===t?null===r?"":r:null==r||""===r?t:t+" "+r}const qe=re({__forward_ref__:re});function ht(t){return t.__forward_ref__=ht,t.toString=function(){return Se(this())},t}function it(t){return gt(t)?t():t}function gt(t){return"function"==typeof t&&t.hasOwnProperty(qe)&&t.__forward_ref__===ht}function Xe(t){return t&&!!t.\u0275providers}const nt="https://g.co/ng/security#xss";class se extends Error{constructor(r,s){super(function Be(t,r){return`NG0${Math.abs(t)}${r?": "+r:""}`}(r,s)),this.code=r}}function ke(t){return"string"==typeof t?t:null==t?"":String(t)}function It(t,r){throw new se(-201,!1)}function Et(t,r){null==t&&function yt(t,r,s,a){throw new Error(`ASSERTION ERROR: ${t}`+(null==a?"":` [Expected=> ${s} ${a} ${r} <=Actual]`))}(r,t,null,"!=")}function on(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function In(t){return{providers:t.providers||[],imports:t.imports||[]}}function Wn(t){return Jn(t,kn)||Jn(t,nr)}function Rt(t){return null!==Wn(t)}function Jn(t,r){return t.hasOwnProperty(r)?t[r]:null}function tr(t){return t&&(t.hasOwnProperty(Un)||t.hasOwnProperty(Gn))?t[Un]:null}const kn=re({\u0275prov:re}),Un=re({\u0275inj:re}),nr=re({ngInjectableDef:re}),Gn=re({ngInjectorDef:re});var Kt=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Kt||{});let Xt;function qn(t){const r=Xt;return Xt=t,r}function ur(t,r,s){const a=Wn(t);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:s&Kt.Optional?null:void 0!==r?r:void It(Se(t))}const vn=globalThis;class $t{constructor(r,s){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=on({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Pr={},jr="__NG_DI_FLAG__",mr="ngTempTokenPath",Y=/\n/gm,x="__source";let N;function be(t){const r=N;return N=t,r}function rt(t,r=Kt.Default){if(void 0===N)throw new se(-203,!1);return null===N?ur(t,void 0,r):N.get(t,r&Kt.Optional?null:void 0,r)}function dt(t,r=Kt.Default){return(function tn(){return Xt}()||rt)(it(t),r)}function St(t,r=Kt.Default){return dt(t,Zt(r))}function Zt(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function On(t){const r=[];for(let s=0;s<t.length;s++){const a=it(t[s]);if(Array.isArray(a)){if(0===a.length)throw new se(900,!1);let l,h=Kt.Default;for(let y=0;y<a.length;y++){const w=a[y],R=me(w);"number"==typeof R?-1===R?l=w.token:h|=R:l=w}r.push(dt(l,h))}else r.push(dt(a))}return r}function we(t,r){return t[jr]=r,t.prototype[jr]=r,t}function me(t){return t[jr]}function pe(t){return{toString:t}.toString()}var Fe=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Fe||{}),Ge=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Ge||{});const Vt={},st=[],Qt=re({\u0275cmp:re}),Xn=re({\u0275dir:re}),Sn=re({\u0275pipe:re}),Mr=re({\u0275mod:re}),Lr=re({\u0275fac:re}),ki=re({__NG_ELEMENT_ID__:re}),xn=re({__NG_ENV_ID__:re});function lr(t,r,s){let a=t.length;for(;;){const l=t.indexOf(r,s);if(-1===l)return l;if(0===l||t.charCodeAt(l-1)<=32){const h=r.length;if(l+h===a||t.charCodeAt(l+h)<=32)return l}s=l+1}}function li(t,r,s){let a=0;for(;a<s.length;){const l=s[a];if("number"==typeof l){if(0!==l)break;a++;const h=s[a++],y=s[a++],w=s[a++];t.setAttribute(r,y,w,h)}else{const h=l,y=s[++a];Fn(h)?t.setProperty(r,h,y):t.setAttribute(r,h,y),a++}}return a}function vs(t){return 3===t||4===t||6===t}function Fn(t){return 64===t.charCodeAt(0)}function Kr(t,r){if(null!==r&&0!==r.length)if(null===t||0===t.length)t=r.slice();else{let s=-1;for(let a=0;a<r.length;a++){const l=r[a];"number"==typeof l?s=l:0===s||ni(t,s,l,null,-1===s||2===s?r[++a]:null)}}return t}function ni(t,r,s,a,l){let h=0,y=t.length;if(-1===r)y=-1;else for(;h<t.length;){const w=t[h++];if("number"==typeof w){if(w===r){y=-1;break}if(w>r){y=h-1;break}}}for(;h<t.length;){const w=t[h];if("number"==typeof w)break;if(w===s){if(null===a)return void(null!==l&&(t[h+1]=l));if(a===t[h+1])return void(t[h+2]=l)}h++,null!==a&&h++,null!==l&&h++}-1!==y&&(t.splice(y,0,r),h=y+1),t.splice(h++,0,s),null!==a&&t.splice(h++,0,a),null!==l&&t.splice(h++,0,l)}const Rs="ng-template";function Fi(t,r,s){let a=0,l=!0;for(;a<t.length;){let h=t[a++];if("string"==typeof h&&l){const y=t[a++];if(s&&"class"===h&&-1!==lr(y.toLowerCase(),r,0))return!0}else{if(1===h){for(;a<t.length&&"string"==typeof(h=t[a++]);)if(h.toLowerCase()===r)return!0;return!1}"number"==typeof h&&(l=!1)}}return!1}function mo(t){return 4===t.type&&t.value!==Rs}function eo(t,r,s){return r===(4!==t.type||s?t.value:Rs)}function zs(t,r,s){let a=4;const l=t.attrs||[],h=function Qi(t){for(let r=0;r<t.length;r++)if(vs(t[r]))return r;return t.length}(l);let y=!1;for(let w=0;w<r.length;w++){const R=r[w];if("number"!=typeof R){if(!y)if(4&a){if(a=2|1&a,""!==R&&!eo(t,R,s)||""===R&&1===r.length){if(Nr(a))return!1;y=!0}}else{const L=8&a?R:r[++w];if(8&a&&null!==t.attrs){if(!Fi(t.attrs,L,s)){if(Nr(a))return!1;y=!0}continue}const le=ci(8&a?"class":R,l,mo(t),s);if(-1===le){if(Nr(a))return!1;y=!0;continue}if(""!==L){let Oe;Oe=le>h?"":l[le+1].toLowerCase();const je=8&a?Oe:null;if(je&&-1!==lr(je,L,0)||2&a&&L!==Oe){if(Nr(a))return!1;y=!0}}}}else{if(!y&&!Nr(a)&&!Nr(R))return!1;if(y&&Nr(R))continue;y=!1,a=R|1&a}}return Nr(a)||y}function Nr(t){return 0==(1&t)}function ci(t,r,s,a){if(null===r)return-1;let l=0;if(a||!s){let h=!1;for(;l<r.length;){const y=r[l];if(y===t)return l;if(3===y||6===y)h=!0;else{if(1===y||2===y){let w=r[++l];for(;"string"==typeof w;)w=r[++l];continue}if(4===y)break;if(0===y){l+=4;continue}}l+=h?1:2}return-1}return function Ps(t,r){let s=t.indexOf(4);if(s>-1)for(s++;s<t.length;){const a=t[s];if("number"==typeof a)return-1;if(a===r)return s;s++}return-1}(r,t)}function Gs(t,r,s=!1){for(let a=0;a<r.length;a++)if(zs(t,r[a],s))return!0;return!1}function Ri(t,r){e:for(let s=0;s<r.length;s++){const a=r[s];if(t.length===a.length){for(let l=0;l<t.length;l++)if(t[l]!==a[l])continue e;return!0}}return!1}function Ms(t,r){return t?":not("+r.trim()+")":r}function jo(t){let r=t[0],s=1,a=2,l="",h=!1;for(;s<t.length;){let y=t[s];if("string"==typeof y)if(2&a){const w=t[++s];l+="["+y+(w.length>0?'="'+w+'"':"")+"]"}else 8&a?l+="."+y:4&a&&(l+=" "+y);else""!==l&&!Nr(y)&&(r+=Ms(h,l),l=""),a=y,h=h||!Nr(a);s++}return""!==l&&(r+=Ms(h,l)),r}function to(t){return pe(()=>{const r=Ns(t),s={...r,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Fe.OnPush,directiveDefs:null,pipeDefs:null,dependencies:r.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Ge.Emulated,styles:t.styles||st,_:null,schemas:t.schemas||null,tView:null,id:""};io(s);const a=t.dependencies;return s.directiveDefs=Ln(a,!1),s.pipeDefs=Ln(a,!0),s.id=function $i(t){let r=0;const s=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const l of s)r=Math.imul(31,r)+l.charCodeAt(0)<<0;return r+=2147483648,"c"+r}(s),s})}function no(t){return Hn(t)||ri(t)}function _o(t){return null!==t}function ji(t){return pe(()=>({type:t.type,bootstrap:t.bootstrap||st,declarations:t.declarations||st,imports:t.imports||st,exports:t.exports||st,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function os(t,r){if(null==t)return Vt;const s={};for(const a in t)if(t.hasOwnProperty(a)){let l=t[a],h=l;Array.isArray(l)&&(h=l[1],l=l[0]),s[l]=a,r&&(r[l]=h)}return s}function ro(t){return pe(()=>{const r=Ns(t);return io(r),r})}function Yi(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function Hn(t){return t[Qt]||null}function ri(t){return t[Xn]||null}function Vr(t){return t[Sn]||null}function Jr(t){const r=Hn(t)||ri(t)||Vr(t);return null!==r&&r.standalone}function Zr(t,r){const s=t[Mr]||null;if(!s&&!0===r)throw new Error(`Type ${Se(t)} does not have '\u0275mod' property.`);return s}function Ns(t){const r={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:r,inputTransforms:null,inputConfig:t.inputs||Vt,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||st,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:os(t.inputs,r),outputs:os(t.outputs)}}function io(t){t.features?.forEach(r=>r(t))}function Ln(t,r){if(!t)return null;const s=r?Vr:no;return()=>("function"==typeof t?t():t).map(a=>s(a)).filter(_o)}const Er=0,Ot=1,cn=2,cr=3,Hi=4,as=5,di=6,Vi=7,er=8,zi=9,fs=10,an=11,_i=12,yi=13,Is=14,$r=15,Bn=16,Hr=17,Dr=18,vi=19,Ei=20,Ji=21,Qr=22,ws=23,vo=24,jn=25,bo=1,qs=2,Gr=7,Os=9,Or=11;function dn(t){return Array.isArray(t)&&"object"==typeof t[bo]}function wi(t){return Array.isArray(t)&&!0===t[bo]}function so(t){return 0!=(4&t.flags)}function oo(t){return t.componentOffset>-1}function ao(t){return 1==(1&t.flags)}function us(t){return!!t.template}function Ts(t){return 0!=(512&t[cn])}function Ui(t,r){return t.hasOwnProperty(Lr)?t[Lr]:null}let qi=null,Mo=!1;function Pi(t){const r=qi;return qi=t,r}const ea={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function Ur(t){if(!Ti(t)||t.dirty){if(!t.producerMustRecompute(t)&&!na(t))return void(t.dirty=!1);t.producerRecomputeValue(t),t.dirty=!1}}function Ds(t){t.dirty=!0,function No(t){if(void 0===t.liveConsumerNode)return;const r=Mo;Mo=!0;try{for(const s of t.liveConsumerNode)s.dirty||Ds(s)}finally{Mo=r}}(t),t.consumerMarkedDirty?.(t)}function ta(t){return t&&(t.nextProducerIndex=0),Pi(t)}function ls(t,r){if(Pi(r),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(Ti(t))for(let s=t.nextProducerIndex;s<t.producerNode.length;s++)Ki(t.producerNode[s],t.producerIndexOfThis[s]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function na(t){Oo(t);for(let r=0;r<t.producerNode.length;r++){const s=t.producerNode[r],a=t.producerLastReadVersion[r];if(a!==s.version||(Ur(s),a!==s.version))return!0}return!1}function wr(t){if(Oo(t),Ti(t))for(let r=0;r<t.producerNode.length;r++)Ki(t.producerNode[r],t.producerIndexOfThis[r]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Ki(t,r){if(function xo(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),Oo(t),1===t.liveConsumerNode.length)for(let a=0;a<t.producerNode.length;a++)Ki(t.producerNode[a],t.producerIndexOfThis[a]);const s=t.liveConsumerNode.length-1;if(t.liveConsumerNode[r]=t.liveConsumerNode[s],t.liveConsumerIndexOfThis[r]=t.liveConsumerIndexOfThis[s],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,r<t.liveConsumerNode.length){const a=t.liveConsumerIndexOfThis[r],l=t.liveConsumerNode[r];Oo(l),l.producerIndexOfThis[a]=r}}function Ti(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Oo(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let Go=null;function Ye(t){const r=Pi(null);try{return t()}finally{Pi(r)}}const jt=()=>{},Tn=(()=>({...ea,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule(t.ref)},hasRun:!1,cleanupFn:jt}))();class _r{constructor(r,s,a){this.previousValue=r,this.currentValue=s,this.firstChange=a}isFirstChange(){return this.firstChange}}function Yt(){return hr}function hr(t){return t.type.prototype.ngOnChanges&&(t.setInput=br),_n}function _n(){const t=at(this),r=t?.current;if(r){const s=t.previous;if(s===Vt)t.previous=r;else for(let a in r)s[a]=r[a];t.current=null,this.ngOnChanges(r)}}function br(t,r,s,a){const l=this.declaredInputs[s],h=at(t)||function yr(t,r){return t[ms]=r}(t,{previous:Vt,current:null}),y=h.current||(h.current={}),w=h.previous,R=w[l];y[l]=new _r(R&&R.currentValue,r,w===Vt),t[a]=r}Yt.ngInherit=!0;const ms="__ngSimpleChanges__";function at(t){return t[ms]||null}const At=function(t,r,s){},qt="svg";function pt(t){for(;Array.isArray(t);)t=t[Er];return t}function ft(t,r){return pt(r[t])}function Cr(t,r){return pt(r[t.index])}function $u(t,r){return t.data[r]}function Mi(t,r){return t[r]}function Vs(t,r){const s=r[t];return dn(s)?s:s[Er]}function _s(t,r){return null==r?null:t[r]}function Ma(t){t[Hr]=0}function mc(t){1024&t[cn]||(t[cn]|=1024,bn(t,1))}function pu(t){1024&t[cn]&&(t[cn]&=-1025,bn(t,-1))}function bn(t,r){let s=t[cr];if(null===s)return;s[as]+=r;let a=s;for(s=s[cr];null!==s&&(1===r&&1===a[as]||-1===r&&0===a[as]);)s[as]+=r,a=s,s=s[cr]}const Gt={lFrame:ae(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Ft(){return Gt.bindingsEnabled}function Ks(){return null!==Gt.skipHydrationRootTNode}function H(){return Gt.lFrame.lView}function he(){return Gt.lFrame.tView}function ye(t){return Gt.lFrame.contextLView=t,t[er]}function Ue(t){return Gt.lFrame.contextLView=null,t}function ze(){let t=xt();for(;null!==t&&64===t.type;)t=t.parent;return t}function xt(){return Gt.lFrame.currentTNode}function ln(t,r){const s=Gt.lFrame;s.currentTNode=t,s.isParent=r}function Dn(){return Gt.lFrame.isParent}function Te(){Gt.lFrame.isParent=!1}function zr(){return Gt.lFrame.bindingIndex++}function Di(t){const r=Gt.lFrame,s=r.bindingIndex;return r.bindingIndex=r.bindingIndex+t,s}function wo(t,r){const s=Gt.lFrame;s.bindingIndex=s.bindingRootIndex=t,Fo(r)}function Fo(t){Gt.lFrame.currentDirectiveIndex=t}function I(){return Gt.lFrame.currentQueryIndex}function S(t){Gt.lFrame.currentQueryIndex=t}function E(t){const r=t[Ot];return 2===r.type?r.declTNode:1===r.type?t[di]:null}function C(t,r,s){if(s&Kt.SkipSelf){let l=r,h=t;for(;!(l=l.parent,null!==l||s&Kt.Host||(l=E(h),null===l||(h=h[Is],10&l.type))););if(null===l)return!1;r=l,t=h}const a=Gt.lFrame=q();return a.currentTNode=r,a.lView=t,!0}function O(t){const r=q(),s=t[Ot];Gt.lFrame=r,r.currentTNode=s.firstChild,r.lView=t,r.tView=s,r.contextLView=t,r.bindingIndex=s.bindingStartIndex,r.inI18n=!1}function q(){const t=Gt.lFrame,r=null===t?null:t.child;return null===r?ae(t):r}function ae(t){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=r),r}function He(){const t=Gt.lFrame;return Gt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const We=He;function Tt(){const t=He();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Pn(){return Gt.lFrame.selectedIndex}function ts(t){Gt.lFrame.selectedIndex=t}function zn(){const t=Gt.lFrame;return $u(t.tView,t.selectedIndex)}function Zs(){Gt.lFrame.currentNamespace=qt}function To(){!function Ha(){Gt.lFrame.currentNamespace=null}()}let fh=!0;function _c(){return fh}function ga(t){fh=t}function Hu(t,r){for(let s=r.directiveStart,a=r.directiveEnd;s<a;s++){const h=t.data[s].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:w,ngAfterViewInit:R,ngAfterViewChecked:L,ngOnDestroy:Z}=h;y&&(t.contentHooks??=[]).push(-s,y),w&&((t.contentHooks??=[]).push(s,w),(t.contentCheckHooks??=[]).push(s,w)),R&&(t.viewHooks??=[]).push(-s,R),L&&((t.viewHooks??=[]).push(s,L),(t.viewCheckHooks??=[]).push(s,L)),null!=Z&&(t.destroyHooks??=[]).push(s,Z)}}function Rl(t,r,s){zu(t,r,3,s)}function mu(t,r,s,a){(3&t[cn])===s&&zu(t,r,s,a)}function ad(t,r){let s=t[cn];(3&s)===r&&(s&=8191,s+=1,t[cn]=s)}function zu(t,r,s,a){const h=a??-1,y=r.length-1;let w=0;for(let R=void 0!==a?65535&t[Hr]:0;R<y;R++)if("number"==typeof r[R+1]){if(w=r[R],null!=a&&w>=a)break}else r[R]<0&&(t[Hr]+=65536),(w<h||-1==h)&&(yc(t,s,r,R),t[Hr]=(4294901760&t[Hr])+R+2),R++}function Zi(t,r){At(4,t,r);const s=Pi(null);try{r.call(t)}finally{Pi(s),At(5,t,r)}}function yc(t,r,s,a){const l=s[a]<0,h=s[a+1],w=t[l?-s[a]:s[a]];l?t[cn]>>13<t[Hr]>>16&&(3&t[cn])===r&&(t[cn]+=8192,Zi(w,h)):Zi(w,h)}const Lo=-1;class za{constructor(r,s,a){this.factory=r,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=a}}function ud(t){return t!==Lo}function Bi(t){return 32767&t}function qo(t,r){let s=function ld(t){return t>>16}(t),a=r;for(;s>0;)a=a[Is],s--;return a}let gi=!0;function Ko(t){const r=gi;return gi=t,r}const _u=255,Wu=5;let Ml=0;const Us={};function Oa(t,r){const s=Vo(t,r);if(-1!==s)return s;const a=r[Ot];a.firstCreatePass&&(t.injectorIndex=r.length,Zo(a.data,t),Zo(r,null),Zo(a.blueprint,null));const l=Wa(t,r),h=t.injectorIndex;if(ud(l)){const y=Bi(l),w=qo(l,r),R=w[Ot].data;for(let L=0;L<8;L++)r[h+L]=w[y+L]|R[y+L]}return r[h+8]=l,h}function Zo(t,r){t.push(0,0,0,0,0,0,0,0,r)}function Vo(t,r){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===r[t.injectorIndex+8]?-1:t.injectorIndex}function Wa(t,r){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let s=0,a=null,l=r;for(;null!==l;){if(a=ai(l),null===a)return Lo;if(s++,l=l[Is],-1!==a.injectorIndex)return a.injectorIndex|s<<16}return Lo}function sa(t,r,s){!function Ga(t,r,s){let a;"string"==typeof s?a=s.charCodeAt(0)||0:s.hasOwnProperty(ki)&&(a=s[ki]),null==a&&(a=s[ki]=Ml++);const l=a&_u;r.data[t+(l>>Wu)]|=1<<l}(t,r,s)}function qa(t,r,s){if(s&Kt.Optional||void 0!==t)return t;It()}function vc(t,r,s,a){if(s&Kt.Optional&&void 0===a&&(a=null),!(s&(Kt.Self|Kt.Host))){const l=t[zi],h=qn(void 0);try{return l?l.get(r,a,s&Kt.Optional):ur(r,a,s&Kt.Optional)}finally{qn(h)}}return qa(a,0,s)}function Nl(t,r,s,a=Kt.Default,l){if(null!==t){if(2048&r[cn]&&!(a&Kt.Self)){const y=function yh(t,r,s,a,l){let h=t,y=r;for(;null!==h&&null!==y&&2048&y[cn]&&!(512&y[cn]);){const w=ma(h,y,s,a|Kt.Self,Us);if(w!==Us)return w;let R=h.parent;if(!R){const L=y[Ei];if(L){const Z=L.get(s,Us,a);if(Z!==Us)return Z}R=ai(y),y=y[Is]}h=R}return l}(t,r,s,a,Us);if(y!==Us)return y}const h=ma(t,r,s,a,Us);if(h!==Us)return h}return vc(r,s,a,l)}function ma(t,r,s,a,l){const h=function _h(t){if("string"==typeof t)return t.charCodeAt(0)||0;const r=t.hasOwnProperty(ki)?t[ki]:void 0;return"number"==typeof r?r>=0?r&_u:Ec:r}(s);if("function"==typeof h){if(!C(r,t,a))return a&Kt.Host?qa(l,0,a):vc(r,s,a,l);try{let y;if(y=h(a),null!=y||a&Kt.Optional)return y;It()}finally{We()}}else if("number"==typeof h){let y=null,w=Vo(t,r),R=Lo,L=a&Kt.Host?r[$r][di]:null;for((-1===w||a&Kt.SkipSelf)&&(R=-1===w?Wa(t,r):r[w+8],R!==Lo&&Za(a,!1)?(y=r[Ot],w=Bi(R),r=qo(R,r)):w=-1);-1!==w;){const Z=r[Ot];if(Ol(h,w,Z.data)){const le=dd(w,r,s,y,a,L);if(le!==Us)return le}R=r[w+8],R!==Lo&&Za(a,r[Ot].data[w+8]===L)&&Ol(h,w,r)?(y=Z,w=Bi(R),r=qo(R,r)):w=-1}}return l}function dd(t,r,s,a,l,h){const y=r[Ot],w=y.data[t+8],Z=Ka(w,y,s,null==a?oo(w)&&gi:a!=y&&0!=(3&w.type),l&Kt.Host&&h===w);return null!==Z?_a(r,y,Z,w):Us}function Ka(t,r,s,a,l){const h=t.providerIndexes,y=r.data,w=1048575&h,R=t.directiveStart,Z=h>>20,Oe=l?w+Z:t.directiveEnd;for(let je=a?w:w+Z;je<Oe;je++){const ut=y[je];if(je<R&&s===ut||je>=R&&ut.type===s)return je}if(l){const je=y[R];if(je&&us(je)&&je.type===s)return R}return null}function _a(t,r,s,a){let l=t[s];const h=r.data;if(function pi(t){return t instanceof za}(l)){const y=l;y.resolving&&function tt(t,r){const s=r?`. Dependency path: ${r.join(" > ")} > ${t}`:"";throw new se(-200,`Circular dependency in DI detected for ${t}${s}`)}(function xe(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():ke(t)}(h[s]));const w=Ko(y.canSeeViewProviders);y.resolving=!0;const L=y.injectImpl?qn(y.injectImpl):null;C(t,a,Kt.Default);try{l=t[s]=y.factory(void 0,h,t,a),r.firstCreatePass&&s>=a.directiveStart&&function ph(t,r,s){const{ngOnChanges:a,ngOnInit:l,ngDoCheck:h}=r.type.prototype;if(a){const y=hr(r);(s.preOrderHooks??=[]).push(t,y),(s.preOrderCheckHooks??=[]).push(t,y)}l&&(s.preOrderHooks??=[]).push(0-t,l),h&&((s.preOrderHooks??=[]).push(t,h),(s.preOrderCheckHooks??=[]).push(t,h))}(s,h[s],r)}finally{null!==L&&qn(L),Ko(w),y.resolving=!1,We()}}return l}function Ol(t,r,s){return!!(s[r+(t>>Wu)]&1<<t)}function Za(t,r){return!(t&Kt.Self||t&Kt.Host&&r)}class Bs{constructor(r,s){this._tNode=r,this._lView=s}get(r,s,a){return Nl(this._tNode,this._lView,r,Zt(a),s)}}function Ec(){return new Bs(ze(),H())}function Ic(t){return pe(()=>{const r=t.prototype.constructor,s=r[Lr]||rs(r),a=Object.prototype;let l=Object.getPrototypeOf(t.prototype).constructor;for(;l&&l!==a;){const h=l[Lr]||rs(l);if(h&&h!==s)return h;l=Object.getPrototypeOf(l)}return h=>new h})}function rs(t){return gt(t)?()=>{const r=rs(it(t));return r&&r()}:Ui(t)}function ai(t){const r=t[Ot],s=r.type;return 2===s?r.declTNode:1===s?t[di]:null}function oa(t){return function cd(t,r){if("class"===r)return t.classes;if("style"===r)return t.styles;const s=t.attrs;if(s){const a=s.length;let l=0;for(;l<a;){const h=s[l];if(vs(h))break;if(0===h)l+=2;else if("number"==typeof h)for(l++;l<a&&"string"==typeof s[l];)l++;else{if(h===r)return s[l+1];l+=2}}}return null}(ze(),t)}const yu="__parameters__";function or(t,r,s){return pe(()=>{const a=function Tc(t){return function(...s){if(t){const a=t(...s);for(const l in a)this[l]=a[l]}}}(r);function l(...h){if(this instanceof l)return a.apply(this,h),this;const y=new l(...h);return w.annotation=y,w;function w(R,L,Z){const le=R.hasOwnProperty(yu)?R[yu]:Object.defineProperty(R,yu,{value:[]})[yu];for(;le.length<=Z;)le.push(null);return(le[Z]=le[Z]||[]).push(y),R}}return s&&(l.prototype=Object.create(s.prototype)),l.prototype.ngMetadataName=t,l.annotationCls=l,l})}function Ku(t,r){t.forEach(s=>Array.isArray(s)?Ku(s,r):r(s))}function Ch(t,r,s){r>=t.length?t.push(s):t.splice(r,0,s)}function Zu(t,r){return r>=t.length-1?t.pop():t.splice(r,1)[0]}function ua(t,r){const s=[];for(let a=0;a<t;a++)s.push(r);return s}function Co(t,r,s){let a=Eu(t,r);return a>=0?t[1|a]=s:(a=~a,function Ac(t,r,s,a){let l=t.length;if(l==r)t.push(s,a);else if(1===l)t.push(a,t[0]),t[0]=s;else{for(l--,t.push(t[l-1],t[l]);l>r;)t[l]=t[l-2],l--;t[r]=s,t[r+1]=a}}(t,a,r,s)),a}function la(t,r){const s=Eu(t,r);if(s>=0)return t[1|s]}function Eu(t,r){return function Fl(t,r,s){let a=0,l=t.length>>s;for(;l!==a;){const h=a+(l-a>>1),y=t[h<<s];if(r===y)return h<<s;y>r?l=h:a=h+1}return~(l<<s)}(t,r,1)}const xa=we(or("Optional"),8),Yu=we(or("SkipSelf"),4);function Ed(t){return 128==(128&t.flags)}var Tu=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Tu||{});const tp=new Map;let Ny=0;const Nh="__ngContext__";function Qs(t,r){dn(r)?(t[Nh]=r[vi],function Br(t){tp.set(t[vi],t)}(r)):t[Nh]=r}let up;function lp(t,r){return up(t,r)}function zl(t){const r=t[cr];return wi(r)?r[cr]:r}function pm(t){return xh(t[_i])}function ds(t){return xh(t[Hi])}function xh(t){for(;null!==t&&!wi(t);)t=t[Hi];return t}function nl(t,r,s,a,l){if(null!=a){let h,y=!1;wi(a)?h=a:dn(a)&&(y=!0,a=a[Er]);const w=pt(a);0===t&&null!==s?null==l?wm(r,s,w):il(r,s,w,l||null,!0):1===t&&null!==s?il(r,s,w,l||null,!0):2===t?function ru(t,r,s){const a=Cu(t,r);a&&function Ly(t,r,s,a){t.removeChild(r,s,a)}(t,a,r,s)}(r,w,y):3===t&&r.destroyNode(w),null!=h&&function Sm(t,r,s,a,l){const h=s[Gr];h!==pt(s)&&nl(r,t,a,h,l);for(let w=Or;w<s.length;w++){const R=s[w];Wl(R[Ot],R,t,r,a,h)}}(r,t,h,s,l)}}function Td(t,r,s){return t.createElement(r,s)}function vm(t,r){const s=t[Os],a=s.indexOf(r);pu(r),s.splice(a,1)}function rl(t,r){if(t.length<=Or)return;const s=Or+r,a=t[s];if(a){const l=a[Bn];null!==l&&l!==t&&vm(l,a),r>0&&(t[s-1][Hi]=a[Hi]);const h=Zu(t,Or+r);!function gm(t,r){Wl(t,r,r[an],2,null,null),r[Er]=null,r[di]=null}(a[Ot],a);const y=h[Dr];null!==y&&y.detachView(h[Ot]),a[cr]=null,a[Hi]=null,a[cn]&=-129}return a}function Dd(t,r){if(!(256&r[cn])){const s=r[an];r[ws]&&wr(r[ws]),r[vo]&&wr(r[vo]),s.destroyNode&&Wl(t,r,s,3,null,null),function _m(t){let r=t[_i];if(!r)return dp(t[Ot],t);for(;r;){let s=null;if(dn(r))s=r[_i];else{const a=r[Or];a&&(s=a)}if(!s){for(;r&&!r[Hi]&&r!==t;)dn(r)&&dp(r[Ot],r),r=r[cr];null===r&&(r=t),dn(r)&&dp(r[Ot],r),s=r&&r[Hi]}r=s}}(r)}}function dp(t,r){if(!(256&r[cn])){r[cn]&=-129,r[cn]|=256,function hp(t,r){let s;if(null!=t&&null!=(s=t.destroyHooks))for(let a=0;a<s.length;a+=2){const l=r[s[a]];if(!(l instanceof za)){const h=s[a+1];if(Array.isArray(h))for(let y=0;y<h.length;y+=2){const w=l[h[y]],R=h[y+1];At(4,w,R);try{R.call(w)}finally{At(5,w,R)}}else{At(4,l,h);try{h.call(l)}finally{At(5,l,h)}}}}}(t,r),function Em(t,r){const s=t.cleanup,a=r[Vi];if(null!==s)for(let h=0;h<s.length-1;h+=2)if("string"==typeof s[h]){const y=s[h+3];y>=0?a[y]():a[-y].unsubscribe(),h+=2}else s[h].call(a[s[h+1]]);null!==a&&(r[Vi]=null);const l=r[Ji];if(null!==l){r[Ji]=null;for(let h=0;h<l.length;h++)(0,l[h])()}}(t,r),1===r[Ot].type&&r[an].destroy();const s=r[Bn];if(null!==s&&wi(r[cr])){s!==r[cr]&&vm(s,r);const a=r[Dr];null!==a&&a.detachView(t)}!function cm(t){tp.delete(t[vi])}(r)}}function kh(t,r,s){return function Im(t,r,s){let a=r;for(;null!==a&&40&a.type;)a=(r=a).parent;if(null===a)return s[Er];{const{componentOffset:l}=a;if(l>-1){const{encapsulation:h}=t.data[a.directiveStart+l];if(h===Ge.None||h===Ge.Emulated)return null}return Cr(a,s)}}(t,r.parent,s)}function il(t,r,s,a,l){t.insertBefore(r,s,a,l)}function wm(t,r,s){t.appendChild(r,s)}function Tm(t,r,s,a,l){null!==a?il(t,r,s,a,l):wm(t,r,s)}function Cu(t,r){return t.parentNode(r)}function Cm(t,r,s){return nu(t,r,s)}let Fh,al,ql,Sd,nu=function fp(t,r,s){return 40&t.type?Cr(t,s):null};function Cd(t,r,s,a){const l=kh(t,a,r),h=r[an],w=Cm(a.parent||r[di],a,r);if(null!=l)if(Array.isArray(s))for(let R=0;R<s.length;R++)Tm(h,l,s[R],w,!1);else Tm(h,l,s,w,!1);void 0!==Fh&&Fh(h,a,r,s,l)}function sl(t,r){if(null!==r){const s=r.type;if(3&s)return Cr(r,t);if(4&s)return Au(-1,t[r.index]);if(8&s){const a=r.child;if(null!==a)return sl(t,a);{const l=t[r.index];return wi(l)?Au(-1,l):pt(l)}}if(32&s)return lp(r,t)()||pt(t[r.index]);{const a=ol(t,r);return null!==a?Array.isArray(a)?a[0]:sl(zl(t[$r]),a):sl(t,r.next)}}return null}function ol(t,r){return null!==r?t[$r][di].projection[r.projection]:null}function Au(t,r){const s=Or+t+1;if(s<r.length){const a=r[s],l=a[Ot].firstChild;if(null!==l)return sl(a,l)}return r[Gr]}function Lh(t,r,s,a,l,h,y){for(;null!=s;){const w=a[s.index],R=s.type;if(y&&0===r&&(w&&Qs(pt(w),a),s.flags|=2),32!=(32&s.flags))if(8&R)Lh(t,r,s.child,a,l,h,!1),nl(r,t,l,w,h);else if(32&R){const L=lp(s,a);let Z;for(;Z=L();)nl(r,t,l,Z,h);nl(r,t,l,w,h)}else 16&R?gp(t,r,a,s,l,h):nl(r,t,l,w,h);s=y?s.projectionNext:s.next}}function Wl(t,r,s,a,l,h){Lh(s,a,t.firstChild,r,l,h,!1)}function gp(t,r,s,a,l,h){const y=s[$r],R=y[di].projection[a.projection];if(Array.isArray(R))for(let L=0;L<R.length;L++)nl(r,t,l,R[L],h);else{let L=R;const Z=y[cr];Ed(a)&&(L.flags|=128),Lh(t,r,L,Z,l,h,!0)}}function mp(t,r,s){""===s?t.removeAttribute(r,"class"):t.setAttribute(r,"class",s)}function Ad(t,r,s){const{mergedAttrs:a,classes:l,styles:h}=s;null!==a&&li(t,r,a),null!==l&&mp(t,r,l),null!==h&&function bm(t,r,s){t.setAttribute(r,"style",s)}(t,r,h)}function xc(t){return function Su(){if(void 0===al&&(al=null,vn.trustedTypes))try{al=vn.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return al}()?.createHTML(t)||t}function Kl(t){ql=t}function ca(){if(void 0!==ql)return ql;if(typeof document<"u")return document;throw new se(210,!1)}function Vh(){if(void 0===Sd&&(Sd=null,vn.trustedTypes))try{Sd=vn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Sd}function _p(t){return Vh()?.createHTML(t)||t}function Uh(t){return Vh()?.createScriptURL(t)||t}class bu{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${nt})`}}class Mm extends bu{getTypeName(){return"HTML"}}class yp extends bu{getTypeName(){return"Style"}}class vp extends bu{getTypeName(){return"Script"}}class Nm extends bu{getTypeName(){return"URL"}}class Bh extends bu{getTypeName(){return"ResourceURL"}}function Ru(t){return t instanceof bu?t.changingThisBreaksApplicationSecurity:t}function ul(t,r){const s=function jh(t){return t instanceof bu&&t.getTypeName()||null}(t);if(null!=s&&s!==r){if("ResourceURL"===s&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${s} (see ${nt})`)}return s===r}function jy(t){return new Mm(t)}function Om(t){return new yp(t)}function kc(t){return new vp(t)}function bd(t){return new Nm(t)}function Fc(t){return new Bh(t)}class xm{constructor(r){this.inertDocumentHelper=r}getInertBodyElement(r){r="<body><remove></remove>"+r;try{const s=(new window.DOMParser).parseFromString(xc(r),"text/html").body;return null===s?this.inertDocumentHelper.getInertBodyElement(r):(s.removeChild(s.firstChild),s)}catch{return null}}}class Ao{constructor(r){this.defaultDoc=r,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(r){const s=this.inertDocument.createElement("template");return s.innerHTML=xc(r),s}}const $h=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Zl(t){return(t=String(t)).match($h)?t:"unsafe:"+t}function iu(t){const r={};for(const s of t.split(","))r[s]=!0;return r}function Ea(...t){const r={};for(const s of t)for(const a in s)s.hasOwnProperty(a)&&(r[a]=!0);return r}const Ql=iu("area,br,col,hr,img,wbr"),Ip=iu("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ll=iu("rp,rt"),su=Ea(Ql,Ea(Ip,iu("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Ea(ll,iu("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Ea(ll,Ip)),Hh=iu("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Fm=Ea(Hh,iu("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),iu("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Lm=iu("script,style,template");class zy{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(r){let s=r.firstChild,a=!0;for(;s;)if(s.nodeType===Node.ELEMENT_NODE?a=this.startElement(s):s.nodeType===Node.TEXT_NODE?this.chars(s.nodeValue):this.sanitizedSomething=!0,a&&s.firstChild)s=s.firstChild;else for(;s;){s.nodeType===Node.ELEMENT_NODE&&this.endElement(s);let l=this.checkClobberedElement(s,s.nextSibling);if(l){s=l;break}s=this.checkClobberedElement(s,s.parentNode)}return this.buf.join("")}startElement(r){const s=r.nodeName.toLowerCase();if(!su.hasOwnProperty(s))return this.sanitizedSomething=!0,!Lm.hasOwnProperty(s);this.buf.push("<"),this.buf.push(s);const a=r.attributes;for(let l=0;l<a.length;l++){const h=a.item(l),y=h.name,w=y.toLowerCase();if(!Fm.hasOwnProperty(w)){this.sanitizedSomething=!0;continue}let R=h.value;Hh[w]&&(R=Zl(R)),this.buf.push(" ",y,'="',Um(R),'"')}return this.buf.push(">"),!0}endElement(r){const s=r.nodeName.toLowerCase();su.hasOwnProperty(s)&&!Ql.hasOwnProperty(s)&&(this.buf.push("</"),this.buf.push(s),this.buf.push(">"))}chars(r){this.buf.push(Um(r))}checkClobberedElement(r,s){if(s&&(r.compareDocumentPosition(s)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${r.outerHTML}`);return s}}const zh=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Vm=/([^\#-~ |!])/g;function Um(t){return t.replace(/&/g,"&amp;").replace(zh,function(r){return"&#"+(1024*(r.charCodeAt(0)-55296)+(r.charCodeAt(1)-56320)+65536)+";"}).replace(Vm,function(r){return"&#"+r.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Pd;function Bm(t,r){let s=null;try{Pd=Pd||function Ep(t){const r=new Ao(t);return function km(){try{return!!(new window.DOMParser).parseFromString(xc(""),"text/html")}catch{return!1}}()?new xm(r):r}(t);let a=r?String(r):"";s=Pd.getInertBodyElement(a);let l=5,h=a;do{if(0===l)throw new Error("Failed to sanitize html because the input is unstable");l--,a=h,h=s.innerHTML,s=Pd.getInertBodyElement(a)}while(a!==h);return xc((new zy).sanitizeChildren(Gh(s)||s))}finally{if(s){const a=Gh(s)||s;for(;a.firstChild;)a.removeChild(a.firstChild)}}}function Gh(t){return"content"in t&&function Yl(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var Fa=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Fa||{});function wp(t){const r=Md();return r?_p(r.sanitize(Fa.HTML,t)||""):ul(t,"HTML")?_p(Ru(t)):Bm(ca(),ke(t))}function Tp(t){const r=Md();return r?r.sanitize(Fa.URL,t)||"":ul(t,"URL")?Ru(t):Zl(ke(t))}function Dp(t){const r=Md();if(r)return Uh(r.sanitize(Fa.RESOURCE_URL,t)||"");if(ul(t,"ResourceURL"))return Uh(Ru(t));throw new se(904,!1)}function $m(t,r,s){return function Ys(t,r){return"src"===r&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===r&&("base"===t||"link"===t)?Dp:Tp}(r,s)(t)}function Md(){const t=H();return t&&t[fs].sanitizer}const Jl=new $t("ENVIRONMENT_INITIALIZER"),Hm=new $t("INJECTOR",-1),Nd=new $t("INJECTOR_DEF_TYPES");class Lc{get(r,s=Pr){if(s===Pr){const a=new Error(`NullInjectorError: No provider for ${Se(r)}!`);throw a.name="NullInjectorError",a}return s}}function Ap(t){return{\u0275providers:t}}function zm(...t){return{\u0275providers:Wh(0,t),\u0275fromNgModule:!0}}function Wh(t,...r){const s=[],a=new Set;let l;const h=y=>{s.push(y)};return Ku(r,y=>{const w=y;cl(w,h,[],a)&&(l||=[],l.push(w))}),void 0!==l&&qh(l,h),s}function qh(t,r){for(let s=0;s<t.length;s++){const{ngModule:a,providers:l}=t[s];Od(l,h=>{r(h,a)})}}function cl(t,r,s,a){if(!(t=it(t)))return!1;let l=null,h=tr(t);const y=!h&&Hn(t);if(h||y){if(y&&!y.standalone)return!1;l=t}else{const R=t.ngModule;if(h=tr(R),!h)return!1;l=R}const w=a.has(l);if(y){if(w)return!1;if(a.add(l),y.dependencies){const R="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const L of R)cl(L,r,s,a)}}else{if(!h)return!1;{if(null!=h.imports&&!w){let L;a.add(l);try{Ku(h.imports,Z=>{cl(Z,r,s,a)&&(L||=[],L.push(Z))})}finally{}void 0!==L&&qh(L,r)}if(!w){const L=Ui(l)||(()=>new l);r({provide:l,useFactory:L,deps:st},l),r({provide:Nd,useValue:l,multi:!0},l),r({provide:Jl,useValue:()=>dt(l),multi:!0},l)}const R=h.providers;if(null!=R&&!w){const L=t;Od(R,Z=>{r(Z,L)})}}}return l!==t&&void 0!==t.providers}function Od(t,r){for(let s of t)Xe(s)&&(s=s.\u0275providers),Array.isArray(s)?Od(s,r):r(s)}const bp=re({provide:String,useValue:re});function Rp(t){return null!==t&&"object"==typeof t&&bp in t}function dl(t){return"function"==typeof t}const xd=new $t("Set Injector scope."),Kh={},qm={};let Mp;function kd(){return void 0===Mp&&(Mp=new Lc),Mp}class ou{}class La extends ou{get destroyed(){return this._destroyed}constructor(r,s,a,l){super(),this.parent=s,this.source=a,this.scopes=l,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,kp(r,y=>this.processProvider(y)),this.records.set(Hm,Xl(void 0,this)),l.has("environment")&&this.records.set(ou,Xl(void 0,this));const h=this.records.get(xd);null!=h&&"string"==typeof h.value&&this.scopes.add(h.value),this.injectorDefTypes=new Set(this.get(Nd.multi,st,Kt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();const r=this._onDestroyHooks;this._onDestroyHooks=[];for(const s of r)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(r){return this.assertNotDestroyed(),this._onDestroyHooks.push(r),()=>this.removeOnDestroy(r)}runInContext(r){this.assertNotDestroyed();const s=be(this),a=qn(void 0);try{return r()}finally{be(s),qn(a)}}get(r,s=Pr,a=Kt.Default){if(this.assertNotDestroyed(),r.hasOwnProperty(xn))return r[xn](this);a=Zt(a);const h=be(this),y=qn(void 0);try{if(!(a&Kt.SkipSelf)){let R=this.records.get(r);if(void 0===R){const L=function xp(t){return"function"==typeof t||"object"==typeof t&&t instanceof $t}(r)&&Wn(r);R=L&&this.injectableDefInScope(L)?Xl(hl(r),Kh):null,this.records.set(r,R)}if(null!=R)return this.hydrate(r,R)}return(a&Kt.Self?kd():this.parent).get(r,s=a&Kt.Optional&&s===Pr?null:s)}catch(w){if("NullInjectorError"===w.name){if((w[mr]=w[mr]||[]).unshift(Se(r)),h)throw w;return function De(t,r,s,a){const l=t[mr];throw r[x]&&l.unshift(r[x]),t.message=function fe(t,r,s,a=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let l=Se(r);if(Array.isArray(r))l=r.map(Se).join(" -> ");else if("object"==typeof r){let h=[];for(let y in r)if(r.hasOwnProperty(y)){let w=r[y];h.push(y+":"+("string"==typeof w?JSON.stringify(w):Se(w)))}l=`{${h.join(", ")}}`}return`${s}${a?"("+a+")":""}[${l}]: ${t.replace(Y,"\n  ")}`}("\n"+t.message,l,s,a),t.ngTokenPath=l,t[mr]=null,t}(w,r,"R3InjectorError",this.source)}throw w}finally{qn(y),be(h)}}resolveInjectorInitializers(){const r=be(this),s=qn(void 0);try{const l=this.get(Jl.multi,st,Kt.Self);for(const h of l)h()}finally{be(r),qn(s)}}toString(){const r=[],s=this.records;for(const a of s.keys())r.push(Se(a));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new se(205,!1)}processProvider(r){let s=dl(r=it(r))?r:it(r&&r.provide);const a=function Zh(t){return Rp(t)?Xl(void 0,t.useValue):Xl(Op(t),Kh)}(r);if(dl(r)||!0!==r.multi)this.records.get(s);else{let l=this.records.get(s);l||(l=Xl(void 0,Kh,!0),l.factory=()=>On(l.multi),this.records.set(s,l)),s=r,l.multi.push(r)}this.records.set(s,a)}hydrate(r,s){return s.value===Kh&&(s.value=qm,s.value=s.factory()),"object"==typeof s.value&&s.value&&function qy(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(s.value)&&this._ngOnDestroyHooks.add(s.value),s.value}injectableDefInScope(r){if(!r.providedIn)return!1;const s=it(r.providedIn);return"string"==typeof s?"any"===s||this.scopes.has(s):this.injectorDefTypes.has(s)}removeOnDestroy(r){const s=this._onDestroyHooks.indexOf(r);-1!==s&&this._onDestroyHooks.splice(s,1)}}function hl(t){const r=Wn(t),s=null!==r?r.factory:Ui(t);if(null!==s)return s;if(t instanceof $t)throw new se(204,!1);if(t instanceof Function)return function Np(t){const r=t.length;if(r>0)throw ua(r,"?"),new se(204,!1);const s=function wn(t){return t&&(t[kn]||t[nr])||null}(t);return null!==s?()=>s.factory(t):()=>new t}(t);throw new se(204,!1)}function Op(t,r,s){let a;if(dl(t)){const l=it(t);return Ui(l)||hl(l)}if(Rp(t))a=()=>it(t.useValue);else if(function Gm(t){return!(!t||!t.useFactory)}(t))a=()=>t.useFactory(...On(t.deps||[]));else if(function Pp(t){return!(!t||!t.useExisting)}(t))a=()=>dt(it(t.useExisting));else{const l=it(t&&(t.useClass||t.provide));if(!function Km(t){return!!t.deps}(t))return Ui(l)||hl(l);a=()=>new l(...On(t.deps))}return a}function Xl(t,r,s=!1){return{factory:t,value:r,multi:s?[]:void 0}}function kp(t,r){for(const s of t)Array.isArray(s)?kp(s,r):s&&Xe(s)?kp(s.\u0275providers,r):r(s)}const Qh=new $t("AppId",{providedIn:"root",factory:()=>Zm}),Zm="ng",Fp=new $t("Platform Initializer"),Fd=new $t("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Ld=new $t("AnimationModuleType"),Yh=new $t("CSP nonce",{providedIn:"root",factory:()=>ca().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Jm=(t,r,s)=>null;function Hp(t,r,s=!1){return Jm(t,r,s)}class t_{}class n_{}class Jy{resolveComponentFactory(r){throw function Gp(t){const r=Error(`No component factory found for ${Se(t)}.`);return r.ngComponent=t,r}(r)}}let Hc=(()=>{class t{static#e=this.NULL=new Jy}return t})();function nf(){return pl(ze(),H())}function pl(t,r){return new zc(Cr(t,r))}let zc=(()=>{class t{constructor(s){this.nativeElement=s}static#e=this.__NG_ELEMENT_ID__=nf}return t})();function Gc(t){return t instanceof zc?t.nativeElement:t}class rf{}let Xy=(()=>{class t{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function ev(){const t=H(),s=Vs(ze().index,t);return(dn(s)?s:t)[an]}()}return t})(),s_=(()=>{class t{static#e=this.\u0275prov=on({token:t,providedIn:"root",factory:()=>null})}return t})();class Wp{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const o_=new Wp("16.2.12"),$d={};function Mu(t,r=null,s=null,a){const l=uf(t,r,s,a);return l.resolveInjectorInitializers(),l}function uf(t,r=null,s=null,a,l=new Set){const h=[s||st,zm(t)];return a=a||("object"==typeof t?void 0:Se(t)),new La(h,r||kd(),a||null,l)}let So=(()=>{class t{static#e=this.THROW_IF_NOT_FOUND=Pr;static#t=this.NULL=new Lc;static create(s,a){if(Array.isArray(s))return Mu({name:""},a,s,"");{const l=s.name??"";return Mu({name:l},s.parent,s.providers,l)}}static#n=this.\u0275prov=on({token:t,providedIn:"any",factory:()=>dt(Hm)});static#r=this.__NG_ELEMENT_ID__=-1}return t})();function gl(t){return t.ngOriginalError}class ml{constructor(){this._console=console}handleError(r){const s=this._findOriginalError(r);this._console.error("ERROR",r),s&&this._console.error("ORIGINAL ERROR",s)}_findOriginalError(r){let s=r&&gl(r);for(;s&&gl(s);)s=gl(s);return s||null}}function Gd(t){return r=>{setTimeout(t,void 0,r)}}const au=class Jp extends d.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,s,a){let l=r,h=s||(()=>null),y=a;if(r&&"object"==typeof r){const R=r;l=R.next?.bind(R),h=R.error?.bind(R),y=R.complete?.bind(R)}this.__isAsync&&(h=Gd(h),l&&(l=Gd(l)),y&&(y=Gd(y)));const w=super.subscribe({next:l,error:h,complete:y});return r instanceof ee.w0&&r.add(w),w}};function c_(...t){}class $s{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new au(!1),this.onMicrotaskEmpty=new au(!1),this.onStable=new au(!1),this.onError=new au(!1),typeof Zone>"u")throw new se(908,!1);Zone.assertZonePatched();const l=this;l._nesting=0,l._outer=l._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!a&&s,l.shouldCoalesceRunChangeDetection=a,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function Xp(){const t="function"==typeof vn.requestAnimationFrame;let r=vn[t?"requestAnimationFrame":"setTimeout"],s=vn[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&r&&s){const a=r[Zone.__symbol__("OriginalDelegate")];a&&(r=a);const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function rv(t){const r=()=>{!function h_(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(vn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,lf(t),t.isCheckStableRunning=!0,tg(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),lf(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,a,l,h,y,w)=>{if(function iv(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(w))return s.invokeTask(l,h,y,w);try{return ng(t),s.invokeTask(l,h,y,w)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||t.shouldCoalesceRunChangeDetection)&&r(),rg(t)}},onInvoke:(s,a,l,h,y,w,R)=>{try{return ng(t),s.invoke(l,h,y,w,R)}finally{t.shouldCoalesceRunChangeDetection&&r(),rg(t)}},onHasTask:(s,a,l,h)=>{s.hasTask(l,h),a===l&&("microTask"==h.change?(t._hasPendingMicrotasks=h.microTask,lf(t),tg(t)):"macroTask"==h.change&&(t.hasPendingMacrotasks=h.macroTask))},onHandleError:(s,a,l,h)=>(s.handleError(l,h),t.runOutsideAngular(()=>t.onError.emit(h)),!1)})}(l)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!$s.isInAngularZone())throw new se(909,!1)}static assertNotInAngularZone(){if($s.isInAngularZone())throw new se(909,!1)}run(r,s,a){return this._inner.run(r,s,a)}runTask(r,s,a,l){const h=this._inner,y=h.scheduleEventTask("NgZoneEvent: "+l,r,eg,c_,c_);try{return h.runTask(y,s,a)}finally{h.cancelTask(y)}}runGuarded(r,s,a){return this._inner.runGuarded(r,s,a)}runOutsideAngular(r){return this._outer.run(r)}}const eg={};function tg(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function lf(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function ng(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function rg(t){t._nesting--,tg(t)}class f_{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new au,this.onMicrotaskEmpty=new au,this.onStable=new au,this.onError=new au}run(r,s,a){return r.apply(s,a)}runGuarded(r,s,a){return r.apply(s,a)}runOutsideAngular(r){return r()}runTask(r,s,a,l){return r.apply(s,a)}}const p_=new $t("",{providedIn:"root",factory:g_});function g_(){const t=St($s);let r=!0;const s=new J.y(l=>{r=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{l.next(r),l.complete()})}),a=new J.y(l=>{let h;t.runOutsideAngular(()=>{h=t.onStable.subscribe(()=>{$s.assertNotInAngularZone(),queueMicrotask(()=>{!r&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(r=!0,l.next(!0))})})});const y=t.onUnstable.subscribe(()=>{$s.assertInAngularZone(),r&&(r=!1,t.runOutsideAngular(()=>{l.next(!1)}))});return()=>{h.unsubscribe(),y.unsubscribe()}});return(0,Ee.T)(s,a.pipe((0,Ae.B)()))}function uu(t){return t instanceof Function?t():t}let ag=(()=>{class t{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=on({token:t,providedIn:"root",factory:()=>new t})}return t})();function rc(t){for(;t;){t[cn]|=64;const r=zl(t);if(Ts(t)&&!r)return t;t=r}return null}const ug=new $t("",{providedIn:"root",factory:()=>!1});let Nu=null;function dg(t,r){return t[r]??lu()}function gf(t,r){const s=lu();s.producerNode?.length&&(t[r]=Nu,s.lView=t,Nu=mf())}const uv={...ea,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{rc(t.lView)},lView:null};function mf(){return Object.create(uv)}function lu(){return Nu??=mf(),Nu}const Zn={};function T_(t){_f(he(),H(),Pn()+t,!1)}function _f(t,r,s,a){if(!a)if(3==(3&r[cn])){const h=t.preOrderCheckHooks;null!==h&&Rl(r,h,s)}else{const h=t.preOrderHooks;null!==h&&mu(r,h,0,s)}ts(s)}function Wc(t,r=Kt.Default){const s=H();return null===s?dt(t,r):Nl(ze(),s,it(t),r)}function D_(){throw new Error("invalid")}function yf(t,r,s,a,l,h,y,w,R,L,Z){const le=r.blueprint.slice();return le[Er]=l,le[cn]=140|a,(null!==L||t&&2048&t[cn])&&(le[cn]|=2048),Ma(le),le[cr]=le[Is]=t,le[er]=s,le[fs]=y||t&&t[fs],le[an]=w||t&&t[an],le[zi]=R||t&&t[zi]||null,le[di]=h,le[vi]=function Ss(){return Ny++}(),le[Qr]=Z,le[Ei]=L,le[$r]=2==r.type?t[$r]:le,le}function vl(t,r,s,a,l){let h=t.data[r];if(null===h)h=function fg(t,r,s,a,l){const h=xt(),y=Dn(),R=t.data[r]=function Kd(t,r,s,a,l,h){let y=r?r.injectorIndex:-1,w=0;return Ks()&&(w|=128),{type:s,index:a,insertBeforeIndex:null,injectorIndex:y,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:w,providerIndexes:0,value:l,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?h:h&&h.parent,s,r,a,l);return null===t.firstChild&&(t.firstChild=R),null!==h&&(y?null==h.child&&null!==R.parent&&(h.child=R):null===h.next&&(h.next=R,R.prev=h)),R}(t,r,s,a,l),function Ni(){return Gt.lFrame.inI18n}()&&(h.flags|=32);else if(64&h.type){h.type=s,h.value=a,h.attrs=l;const y=function kt(){const t=Gt.lFrame,r=t.currentTNode;return t.isParent?r:r.parent}();h.injectorIndex=null===y?-1:y.injectorIndex}return ln(h,!0),h}function ic(t,r,s,a){if(0===s)return-1;const l=r.length;for(let h=0;h<s;h++)r.push(a),t.blueprint.push(a),t.data.push(null);return l}function C_(t,r,s,a,l){const h=dg(r,ws),y=Pn(),w=2&a;try{ts(-1),w&&r.length>jn&&_f(t,r,jn,!1),At(w?2:0,l);const L=w?h:null,Z=ta(L);try{null!==L&&(L.dirty=!1),s(a,l)}finally{ls(L,Z)}}finally{w&&null===r[ws]&&gf(r,ws),ts(y),At(w?3:1,l)}}function Wd(t,r,s){if(so(r)){const a=Pi(null);try{const h=r.directiveEnd;for(let y=r.directiveStart;y<h;y++){const w=t.data[y];w.contentQueries&&w.contentQueries(1,s[y],y)}}finally{Pi(a)}}}function vf(t,r,s){Ft()&&(function Eg(t,r,s,a){const l=s.directiveStart,h=s.directiveEnd;oo(s)&&function M_(t,r,s){const a=Cr(r,t),l=pg(s);let y=16;s.signals?y=4096:s.onPush&&(y=64);const w=Qd(t,yf(t,l,null,y,a,r,null,t[fs].rendererFactory.createRenderer(a,s),null,null,null));t[r.index]=w}(r,s,t.data[l+s.componentOffset]),t.firstCreatePass||Oa(s,r),Qs(a,r);const y=s.initialInputs;for(let w=l;w<h;w++){const R=t.data[w],L=_a(r,t,w,s);Qs(L,r),null!==y&&Zc(0,w-l,L,R,0,y),us(R)&&(Vs(s.index,r)[er]=_a(r,t,w,s))}}(t,r,s,Cr(s,r)),64==(64&s.flags)&&Cf(t,r,s))}function qd(t,r,s=Cr){const a=r.localNames;if(null!==a){let l=r.index+1;for(let h=0;h<a.length;h+=2){const y=a[h+1],w=-1===y?s(r,t):t[y];t[l++]=w}}}function pg(t){const r=t.tView;return null===r||r.incompleteFirstPass?t.tView=gg(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):r}function gg(t,r,s,a,l,h,y,w,R,L,Z){const le=jn+a,Oe=le+l,je=function lv(t,r){const s=[];for(let a=0;a<r;a++)s.push(a<t?null:Zn);return s}(le,Oe),ut="function"==typeof L?L():L;return je[Ot]={type:t,blueprint:je,template:s,queries:null,viewQuery:w,declTNode:r,data:je.slice().fill(null,le),bindingStartIndex:le,expandoStartIndex:Oe,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:R,consts:ut,incompleteFirstPass:!1,ssrId:Z}}let Ef=t=>null;function A_(t,r,s,a){for(let l in t)if(t.hasOwnProperty(l)){s=null===s?{}:s;const h=t[l];null===a?wf(s,r,l,h):a.hasOwnProperty(l)&&wf(s,r,a[l],h)}return s}function wf(t,r,s,a){t.hasOwnProperty(s)?t[s].push(r,a):t[s]=[r,a]}function Qo(t,r,s,a,l,h,y,w){const R=Cr(r,s);let Z,L=r.inputs;!w&&null!=L&&(Z=L[a])?(Dg(t,s,Z,a,l),oo(r)&&function Tf(t,r){const s=Vs(r,t);16&s[cn]||(s[cn]|=64)}(s,r.index)):3&r.type&&(a=function qc(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(a),l=null!=y?y(l,r.value||"",a):l,h.setProperty(R,a,l))}function yg(t,r,s,a){if(Ft()){const l=null===a?null:{"":-1},h=function Ig(t,r){const s=t.directiveRegistry;let a=null,l=null;if(s)for(let h=0;h<s.length;h++){const y=s[h];if(Gs(r,y.selectors,!1))if(a||(a=[]),us(y))if(null!==y.findHostDirectiveDefs){const w=[];l=l||new Map,y.findHostDirectiveDefs(y,w,l),a.unshift(...w,y),Zd(t,r,w.length)}else a.unshift(y),Zd(t,r,0);else l=l||new Map,y.findHostDirectiveDefs?.(y,a,l),a.push(y)}return null===a?null:[a,l]}(t,s);let y,w;null===h?y=w=null:[y,w]=h,null!==y&&b_(t,r,s,y,l,w),l&&function Af(t,r,s){if(r){const a=t.localNames=[];for(let l=0;l<r.length;l+=2){const h=s[r[l+1]];if(null==h)throw new se(-301,!1);a.push(r[l],h)}}}(s,a,l)}s.mergedAttrs=Kr(s.mergedAttrs,s.attrs)}function b_(t,r,s,a,l,h){for(let L=0;L<a.length;L++)sa(Oa(s,r),t,a[L].type);!function P_(t,r,s){t.flags|=1,t.directiveStart=r,t.directiveEnd=r+s,t.providerIndexes=r}(s,t.data.length,a.length);for(let L=0;L<a.length;L++){const Z=a[L];Z.providersResolver&&Z.providersResolver(Z)}let y=!1,w=!1,R=ic(t,r,a.length,null);for(let L=0;L<a.length;L++){const Z=a[L];s.mergedAttrs=Kr(s.mergedAttrs,Z.hostAttrs),Kc(t,s,r,R,Z),wg(R,Z,l),null!==Z.contentQueries&&(s.flags|=4),(null!==Z.hostBindings||null!==Z.hostAttrs||0!==Z.hostVars)&&(s.flags|=64);const le=Z.type.prototype;!y&&(le.ngOnChanges||le.ngOnInit||le.ngDoCheck)&&((t.preOrderHooks??=[]).push(s.index),y=!0),!w&&(le.ngOnChanges||le.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(s.index),w=!0),R++}!function S_(t,r,s){const l=r.directiveEnd,h=t.data,y=r.attrs,w=[];let R=null,L=null;for(let Z=r.directiveStart;Z<l;Z++){const le=h[Z],Oe=s?s.get(le):null,ut=Oe?Oe.outputs:null;R=A_(le.inputs,Z,R,Oe?Oe.inputs:null),L=A_(le.outputs,Z,L,ut);const Dt=null===R||null===y||mo(r)?null:fv(R,Z,y);w.push(Dt)}null!==R&&(R.hasOwnProperty("class")&&(r.flags|=8),R.hasOwnProperty("style")&&(r.flags|=16)),r.initialInputs=w,r.inputs=R,r.outputs=L}(t,s,h)}function Cf(t,r,s){const a=s.directiveStart,l=s.directiveEnd,h=s.index,y=function Oi(){return Gt.lFrame.currentDirectiveIndex}();try{ts(h);for(let w=a;w<l;w++){const R=t.data[w],L=r[w];Fo(w),(null!==R.hostBindings||0!==R.hostVars||null!==R.hostAttrs)&&R_(R,L)}}finally{ts(-1),Fo(y)}}function R_(t,r){null!==t.hostBindings&&t.hostBindings(1,r)}function Zd(t,r,s){r.componentOffset=s,(t.components??=[]).push(r.index)}function wg(t,r,s){if(s){if(r.exportAs)for(let a=0;a<r.exportAs.length;a++)s[r.exportAs[a]]=t;us(r)&&(s[""]=t)}}function Kc(t,r,s,a,l){t.data[a]=l;const h=l.factory||(l.factory=Ui(l.type)),y=new za(h,us(l),Wc);t.blueprint[a]=y,s[a]=y,function Df(t,r,s,a,l){const h=l.hostBindings;if(h){let y=t.hostBindingOpCodes;null===y&&(y=t.hostBindingOpCodes=[]);const w=~r.index;(function vg(t){let r=t.length;for(;r>0;){const s=t[--r];if("number"==typeof s&&s<0)return s}return 0})(y)!=w&&y.push(w),y.push(s,a,h)}}(t,r,a,ic(t,s,l.hostVars,Zn),l)}function Ia(t,r,s,a,l,h){const y=Cr(t,r);!function Sf(t,r,s,a,l,h,y){if(null==h)t.removeAttribute(r,l,s);else{const w=null==y?ke(h):y(h,a||"",l);t.setAttribute(r,l,w,s)}}(r[an],y,h,t.value,s,a,l)}function Zc(t,r,s,a,l,h){const y=h[r];if(null!==y)for(let w=0;w<y.length;)bf(a,s,y[w++],y[w++],y[w++])}function bf(t,r,s,a,l){const h=Pi(null);try{const y=t.inputTransforms;null!==y&&y.hasOwnProperty(a)&&(l=y[a].call(r,l)),null!==t.setInput?t.setInput(r,l,s,a):r[a]=l}finally{Pi(h)}}function fv(t,r,s){let a=null,l=0;for(;l<s.length;){const h=s[l];if(0!==h)if(5!==h){if("number"==typeof h)break;if(t.hasOwnProperty(h)){null===a&&(a=[]);const y=t[h];for(let w=0;w<y.length;w+=2)if(y[w]===r){a.push(h,y[w+1],s[l+1]);break}}l+=2}else l+=2;else l+=4}return a}function N_(t,r,s,a){return[t,!0,!1,r,null,0,a,s,null,null,null]}function O_(t,r){const s=t.contentQueries;if(null!==s)for(let a=0;a<s.length;a+=2){const h=s[a+1];if(-1!==h){const y=t.data[h];S(s[a]),y.contentQueries(2,r[h],h)}}}function Qd(t,r){return t[_i]?t[yi][Hi]=r:t[_i]=r,t[yi]=r,r}function Tg(t,r,s){S(0);const a=Pi(null);try{r(t,s)}finally{Pi(a)}}function x_(t){return t[Vi]||(t[Vi]=[])}function k_(t){return t.cleanup||(t.cleanup=[])}function L_(t,r){const s=t[zi],a=s?s.get(ml,null):null;a&&a.handleError(r)}function Dg(t,r,s,a,l){for(let h=0;h<s.length;){const y=s[h++],w=s[h++];bf(t.data[y],r[y],a,w,l)}}function Ou(t,r,s){const a=ft(r,t);!function Nc(t,r,s){t.setValue(r,s)}(t[an],a,s)}function V_(t,r){const s=Vs(r,t),a=s[Ot];!function U_(t,r){for(let s=r.length;s<t.blueprint.length;s++)r.push(t.blueprint[s])}(a,s);const l=s[Er];null!==l&&null===s[Qr]&&(s[Qr]=Hp(l,s[zi])),Yd(a,s,s[er])}function Yd(t,r,s){O(r);try{const a=t.viewQuery;null!==a&&Tg(1,a,s);const l=t.template;null!==l&&C_(t,r,l,1,s),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&O_(t,r),t.staticViewQueries&&Tg(2,t.viewQuery,s);const h=t.components;null!==h&&function B_(t,r){for(let s=0;s<r.length;s++)V_(t,r[s])}(r,h)}catch(a){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),a}finally{r[cn]&=-5,Tt()}}let Cg=(()=>{class t{constructor(){this.all=new Set,this.queue=new Map}create(s,a,l){const h=typeof Zone>"u"?null:Zone.current,y=function ot(t,r,s){const a=Object.create(Tn);s&&(a.consumerAllowSignalWrites=!0),a.fn=t,a.schedule=r;const l=y=>{a.cleanupFn=y};return a.ref={notify:()=>Ds(a),run:()=>{if(a.dirty=!1,a.hasRun&&!na(a))return;a.hasRun=!0;const y=ta(a);try{a.cleanupFn(),a.cleanupFn=jt,a.fn(l)}finally{ls(a,y)}},cleanup:()=>a.cleanupFn()},a.ref}(s,L=>{this.all.has(L)&&this.queue.set(L,h)},l);let w;this.all.add(y),y.notify();const R=()=>{y.cleanup(),w?.(),this.all.delete(y),this.queue.delete(y)};return w=a?.onDestroy(R),{destroy:R}}flush(){if(0!==this.queue.size)for(const[s,a]of this.queue)this.queue.delete(s),a?a.run(()=>s.run()):s.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=on({token:t,providedIn:"root",factory:()=>new t})}return t})();function sc(t,r,s){let a=s?t.styles:null,l=s?t.classes:null,h=0;if(null!==r)for(let y=0;y<r.length;y++){const w=r[y];"number"==typeof w?h=w:1==h?l=et(l,w):2==h&&(a=et(a,w+": "+r[++y]+";"))}s?t.styles=a:t.stylesWithoutHost=a,s?t.classes=l:t.classesWithoutHost=l}function pr(t,r,s,a,l=!1){for(;null!==s;){const h=r[s.index];null!==h&&a.push(pt(h)),wi(h)&&Ag(h,a);const y=s.type;if(8&y)pr(t,r,s.child,a);else if(32&y){const w=lp(s,r);let R;for(;R=w();)a.push(R)}else if(16&y){const w=ol(r,s);if(Array.isArray(w))a.push(...w);else{const R=zl(r[$r]);pr(R[Ot],R,w,a,!0)}}s=l?s.projectionNext:s.next}return a}function Ag(t,r){for(let s=Or;s<t.length;s++){const a=t[s],l=a[Ot].firstChild;null!==l&&pr(a[Ot],a,l,r)}t[Gr]!==t[Er]&&r.push(t[Gr])}function Jd(t,r,s,a=!0){const l=r[fs],h=l.rendererFactory,y=l.afterRenderEventManager;h.begin?.(),y?.begin();try{Js(t,r,t.template,s)}catch(R){throw a&&L_(r,R),R}finally{h.end?.(),l.effectManager?.flush(),y?.end()}}function Js(t,r,s,a){const l=r[cn];if(256!=(256&l)){r[fs].effectManager?.flush(),O(r);try{Ma(r),function Wr(t){return Gt.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==s&&C_(t,r,s,2,a);const y=3==(3&l);if(y){const L=t.preOrderCheckHooks;null!==L&&Rl(r,L,null)}else{const L=t.preOrderHooks;null!==L&&mu(r,L,0,null),ad(r,0)}if(function cu(t){for(let r=pm(t);null!==r;r=ds(r)){if(!r[qs])continue;const s=r[Os];for(let a=0;a<s.length;a++){mc(s[a])}}}(r),is(r,2),null!==t.contentQueries&&O_(t,r),y){const L=t.contentCheckHooks;null!==L&&Rl(r,L)}else{const L=t.contentHooks;null!==L&&mu(r,L,1),ad(r,1)}!function hg(t,r){const s=t.hostBindingOpCodes;if(null===s)return;const a=dg(r,vo);try{for(let l=0;l<s.length;l++){const h=s[l];if(h<0)ts(~h);else{const y=h,w=s[++l],R=s[++l];wo(w,y),a.dirty=!1;const L=ta(a);try{R(2,r[y])}finally{ls(a,L)}}}}finally{null===r[vo]&&gf(r,vo),ts(-1)}}(t,r);const w=t.components;null!==w&&Sg(r,w,0);const R=t.viewQuery;if(null!==R&&Tg(2,R,a),y){const L=t.viewCheckHooks;null!==L&&Rl(r,L)}else{const L=t.viewHooks;null!==L&&mu(r,L,2),ad(r,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),r[cn]&=-73,pu(r)}finally{Tt()}}}function is(t,r){for(let s=pm(t);null!==s;s=ds(s))for(let a=Or;a<s.length;a++)H_(s[a],r)}function gv(t,r,s){H_(Vs(r,t),s)}function H_(t,r){if(!function Pa(t){return 128==(128&t[cn])}(t))return;const s=t[Ot],a=t[cn];if(80&a&&0===r||1024&a||2===r)Js(s,t,s.template,t[er]);else if(t[as]>0){is(t,1);const l=s.components;null!==l&&Sg(t,l,1)}}function Sg(t,r,s){for(let a=0;a<r.length;a++)gv(t,r[a],s)}class Xd{get rootNodes(){const r=this._lView,s=r[Ot];return pr(s,r,s.firstChild,[])}constructor(r,s){this._lView=r,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[er]}set context(r){this._lView[er]=r}get destroyed(){return 256==(256&this._lView[cn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[cr];if(wi(r)){const s=r[8],a=s?s.indexOf(this):-1;a>-1&&(rl(r,a),Zu(s,a))}this._attachedToViewContainer=!1}Dd(this._lView[Ot],this._lView)}onDestroy(r){!function Wo(t,r){if(256==(256&t[cn]))throw new se(911,!1);null===t[Ji]&&(t[Ji]=[]),t[Ji].push(r)}(this._lView,r)}markForCheck(){rc(this._cdRefInjectingView||this._lView)}detach(){this._lView[cn]&=-129}reattach(){this._lView[cn]|=128}detectChanges(){Jd(this._lView[Ot],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new se(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function mm(t,r){Wl(t,r,r[an],2,null,null)}(this._lView[Ot],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new se(902,!1);this._appRef=r}}class bg extends Xd{constructor(r){super(r),this._view=r}detectChanges(){const r=this._view;Jd(r[Ot],r,r[er],!1)}checkNoChanges(){}get context(){return null}}class z_ extends Hc{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const s=Hn(r);return new ei(s,this.ngModule)}}function Pf(t){const r=[];for(let s in t)t.hasOwnProperty(s)&&r.push({propName:t[s],templateName:s});return r}class _v{constructor(r,s){this.injector=r,this.parentInjector=s}get(r,s,a){a=Zt(a);const l=this.injector.get(r,$d,a);return l!==$d||s===$d?l:this.parentInjector.get(r,s,a)}}class ei extends n_{get inputs(){const r=this.componentDef,s=r.inputTransforms,a=Pf(r.inputs);if(null!==s)for(const l of a)s.hasOwnProperty(l.propName)&&(l.transform=s[l.propName]);return a}get outputs(){return Pf(this.componentDef.outputs)}constructor(r,s){super(),this.componentDef=r,this.ngModule=s,this.componentType=r.type,this.selector=function mi(t){return t.map(jo).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!s}create(r,s,a,l){let h=(l=l||this.ngModule)instanceof ou?l:l?.injector;h&&null!==this.componentDef.getStandaloneInjector&&(h=this.componentDef.getStandaloneInjector(h)||h);const y=h?new _v(r,h):r,w=y.get(rf,null);if(null===w)throw new se(407,!1);const le={rendererFactory:w,sanitizer:y.get(s_,null),effectManager:y.get(Cg,null),afterRenderEventManager:y.get(ag,null)},Oe=w.createRenderer(null,this.componentDef),je=this.componentDef.selectors[0][0]||"div",ut=a?function mg(t,r,s,a){const h=a.get(ug,!1)||s===Ge.ShadowDom,y=t.selectRootElement(r,h);return function cv(t){Ef(t)}(y),y}(Oe,a,this.componentDef.encapsulation,y):Td(Oe,je,function mv(t){const r=t.toLowerCase();return"svg"===r?qt:"math"===r?"math":null}(je)),En=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let _t=null;null!==ut&&(_t=Hp(ut,y,!0));const Yn=gg(0,null,null,1,0,null,null,null,null,null,null),Ar=yf(null,Yn,null,En,null,null,le,Oe,y,null,_t);let Ai,Ca;O(Ar);try{const gc=this.componentDef;let zf,VE=null;gc.findHostDirectiveDefs?(zf=[],VE=new Map,gc.findHostDirectiveDefs(gc,zf,VE),zf.push(gc)):zf=[gc];const qA=function yv(t,r){const s=t[Ot],a=jn;return t[a]=r,vl(s,a,2,"#host",null)}(Ar,ut),KA=function hs(t,r,s,a,l,h,y){const w=l[Ot];!function G_(t,r,s,a){for(const l of t)r.mergedAttrs=Kr(r.mergedAttrs,l.hostAttrs);null!==r.mergedAttrs&&(sc(r,r.mergedAttrs,!0),null!==s&&Ad(a,s,r))}(a,t,r,y);let R=null;null!==r&&(R=Hp(r,l[zi]));const L=h.rendererFactory.createRenderer(r,s);let Z=16;s.signals?Z=4096:s.onPush&&(Z=64);const le=yf(l,pg(s),null,Z,l[t.index],t,h,L,null,null,R);return w.firstCreatePass&&Zd(w,t,a.length-1),Qd(l,le),l[t.index]=le}(qA,ut,gc,zf,Ar,le,Oe);Ca=$u(Yn,jn),ut&&function Ev(t,r,s,a){if(a)li(t,s,["ng-version",o_.full]);else{const{attrs:l,classes:h}=function Aa(t){const r=[],s=[];let a=1,l=2;for(;a<t.length;){let h=t[a];if("string"==typeof h)2===l?""!==h&&r.push(h,t[++a]):8===l&&s.push(h);else{if(!Nr(l))break;l=h}a++}return{attrs:r,classes:s}}(r.selectors[0]);l&&li(t,s,l),h&&h.length>0&&mp(t,s,h.join(" "))}}(Oe,gc,ut,a),void 0!==s&&function W_(t,r,s){const a=t.projection=[];for(let l=0;l<r.length;l++){const h=s[l];a.push(null!=h?Array.from(h):null)}}(Ca,this.ngContentSelectors,s),Ai=function vv(t,r,s,a,l,h){const y=ze(),w=l[Ot],R=Cr(y,l);b_(w,l,y,s,null,a);for(let Z=0;Z<s.length;Z++)Qs(_a(l,w,y.directiveStart+Z,y),l);Cf(w,l,y),R&&Qs(R,l);const L=_a(l,w,y.directiveStart+y.componentOffset,y);if(t[er]=l[er]=L,null!==h)for(const Z of h)Z(L,r);return Wd(w,y,t),L}(KA,gc,zf,VE,Ar,[Iv]),Yd(Yn,Ar,null)}finally{Tt()}return new qE(this.componentType,Ai,pl(Ca,Ar),Ar,Ca)}}class qE extends t_{constructor(r,s,a,l,h){super(),this.location=a,this._rootLView=l,this._tNode=h,this.previousInputValues=null,this.instance=s,this.hostView=this.changeDetectorRef=new bg(l),this.componentType=r}setInput(r,s){const a=this._tNode.inputs;let l;if(null!==a&&(l=a[r])){if(this.previousInputValues??=new Map,this.previousInputValues.has(r)&&Object.is(this.previousInputValues.get(r),s))return;const h=this._rootLView;Dg(h[Ot],h,l,r,s),this.previousInputValues.set(r,s),rc(Vs(this._tNode.index,h))}}get injector(){return new Bs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function Iv(){const t=ze();Hu(H()[Ot],t)}function Rg(t){let r=function q_(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),s=!0;const a=[t];for(;r;){let l;if(us(t))l=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new se(903,!1);l=r.\u0275dir}if(l){if(s){a.push(l);const y=t;y.inputs=Pg(t.inputs),y.inputTransforms=Pg(t.inputTransforms),y.declaredInputs=Pg(t.declaredInputs),y.outputs=Pg(t.outputs);const w=l.hostBindings;w&&K_(t,w);const R=l.viewQuery,L=l.contentQueries;if(R&&Tv(t,R),L&&Dv(t,L),ue(t.inputs,l.inputs),ue(t.declaredInputs,l.declaredInputs),ue(t.outputs,l.outputs),null!==l.inputTransforms&&(null===y.inputTransforms&&(y.inputTransforms={}),ue(y.inputTransforms,l.inputTransforms)),us(l)&&l.data.animation){const Z=t.data;Z.animation=(Z.animation||[]).concat(l.data.animation)}}const h=l.features;if(h)for(let y=0;y<h.length;y++){const w=h[y];w&&w.ngInherit&&w(t),w===Rg&&(s=!1)}}r=Object.getPrototypeOf(r)}!function wv(t){let r=0,s=null;for(let a=t.length-1;a>=0;a--){const l=t[a];l.hostVars=r+=l.hostVars,l.hostAttrs=Kr(l.hostAttrs,s=Kr(s,l.hostAttrs))}}(a)}function Pg(t){return t===Vt?{}:t===st?[]:t}function Tv(t,r){const s=t.viewQuery;t.viewQuery=s?(a,l)=>{r(a,l),s(a,l)}:r}function Dv(t,r){const s=t.contentQueries;t.contentQueries=s?(a,l,h)=>{r(a,l,h),s(a,l,h)}:r}function K_(t,r){const s=t.hostBindings;t.hostBindings=s?(a,l)=>{r(a,l),s(a,l)}:r}function Mg(t){const r=t.inputConfig,s={};for(const a in r)if(r.hasOwnProperty(a)){const l=r[a];Array.isArray(l)&&l[2]&&(s[a]=l[2])}t.inputTransforms=s}function oc(t){return!!Qc(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function Qc(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Xs(t,r,s){return!Object.is(t[r],s)&&(t[r]=s,!0)}function nh(t,r,s,a){const l=H();return Xs(l,zr(),r)&&(he(),Ia(zn(),l,t,r,s,a)),nh}function wa(t,r,s,a){return Xs(t,zr(),s)?r+ke(s)+a:Zn}function cc(t,r,s,a,l,h){const w=function xu(t,r,s,a){const l=Xs(t,r,s);return Xs(t,r+1,a)||l}(t,function fr(){return Gt.lFrame.bindingIndex}(),s,l);return Di(2),w?r+ke(s)+a+ke(l)+h:Zn}function ey(t,r,s,a,l,h,y,w){const R=H(),L=he(),Z=t+jn,le=L.firstCreatePass?function Dl(t,r,s,a,l,h,y,w,R){const L=r.consts,Z=vl(r,t,4,y||null,_s(L,w));yg(r,s,Z,_s(L,R)),Hu(r,Z);const le=Z.tView=gg(2,Z,a,l,h,r.directiveRegistry,r.pipeRegistry,null,r.schemas,L,null);return null!==r.queries&&(r.queries.template(r,Z),le.queries=r.queries.embeddedTView(Z)),Z}(Z,L,R,r,s,a,l,h,y):L.data[Z];ln(le,!1);const Oe=ty(L,R,le,t);_c()&&Cd(L,R,Oe,le),Qs(Oe,R),Qd(R,R[Z]=N_(Oe,R,Oe,le)),ao(le)&&vf(L,R,le),null!=y&&qd(R,le,w)}let ty=function ny(t,r,s,a){return ga(!0),r[an].createComment("")};function ry(t){return Mi(function Cn(){return Gt.lFrame.contextLView}(),jn+t)}function Hg(t,r,s){const a=H();return Xs(a,zr(),r)&&Qo(he(),zn(),a,t,r,a[an],s,!1),Hg}function zg(t,r,s,a,l){const y=l?"class":"style";Dg(t,s,r.inputs[y],y,a)}function kf(t,r,s,a){const l=H(),h=he(),y=jn+t,w=l[an],R=h.firstCreatePass?function Uv(t,r,s,a,l,h){const y=r.consts,R=vl(r,t,2,a,_s(y,l));return yg(r,s,R,_s(y,h)),null!==R.attrs&&sc(R,R.attrs,!1),null!==R.mergedAttrs&&sc(R,R.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,R),R}(y,h,l,r,s,a):h.data[y],L=Bv(h,l,R,w,r,t);l[y]=L;const Z=ao(R);return ln(R,!0),Ad(w,L,R),32!=(32&R.flags)&&_c()&&Cd(h,l,L,R),0===function ir(){return Gt.lFrame.elementDepthCount}()&&Qs(L,l),function $a(){Gt.lFrame.elementDepthCount++}(),Z&&(vf(h,l,R),Wd(h,R,l)),null!==a&&qd(l,R),kf}function Vu(){let t=ze();Dn()?Te():(t=t.parent,ln(t,!1));const r=t;(function V(t){return Gt.skipHydrationRootTNode===t})(r)&&function $(){Gt.skipHydrationRootTNode=null}(),function Yr(){Gt.lFrame.elementDepthCount--}();const s=he();return s.firstCreatePass&&(Hu(s,t),so(t)&&s.queries.elementEnd(t)),null!=r.classesWithoutHost&&function gh(t){return 0!=(8&t.flags)}(r)&&zg(s,r,H(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function Gu(t){return 0!=(16&t.flags)}(r)&&zg(s,r,H(),r.stylesWithoutHost,!1),Vu}function ah(t,r,s,a){return kf(t,r,s,a),Vu(),ah}let Bv=(t,r,s,a,l,h)=>(ga(!0),Td(a,l,function hh(){return Gt.lFrame.currentNamespace}()));function iy(){return H()}function qg(t){return!!t&&"function"==typeof t.then}function sy(t){return!!t&&"function"==typeof t.subscribe}function oy(t,r,s,a){const l=H(),h=he(),y=ze();return function Uu(t,r,s,a,l,h,y){const w=ao(a),L=t.firstCreatePass&&k_(t),Z=r[er],le=x_(r);let Oe=!0;if(3&a.type||y){const Dt=Cr(a,r),Wt=y?y(Dt):Dt,En=le.length,_t=y?Ar=>y(pt(Ar[a.index])):a.index;let Yn=null;if(!y&&w&&(Yn=function uy(t,r,s,a){const l=t.cleanup;if(null!=l)for(let h=0;h<l.length-1;h+=2){const y=l[h];if(y===s&&l[h+1]===a){const w=r[Vi],R=l[h+2];return w.length>R?w[R]:null}"string"==typeof y&&(h+=2)}return null}(t,r,l,a.index)),null!==Yn)(Yn.__ngLastListenerFn__||Yn).__ngNextListenerFn__=h,Yn.__ngLastListenerFn__=h,Oe=!1;else{h=cy(a,r,Z,h,!1);const Ar=s.listen(Wt,l,h);le.push(h,Ar),L&&L.push(l,_t,En,En+1)}}else h=cy(a,r,Z,h,!1);const je=a.outputs;let ut;if(Oe&&null!==je&&(ut=je[l])){const Dt=ut.length;if(Dt)for(let Wt=0;Wt<Dt;Wt+=2){const Ai=r[ut[Wt]][ut[Wt+1]].subscribe(h),Ca=le.length;le.push(h,Ai),L&&L.push(l,a.index,Ca,-(Ca+1))}}}(h,l,l[an],y,t,r,a),oy}function ly(t,r,s,a){try{return At(6,r,s),!1!==s(a)}catch(l){return L_(t,l),!1}finally{At(7,r,s)}}function cy(t,r,s,a,l){return function h(y){if(y===Function)return a;rc(t.componentOffset>-1?Vs(t.index,r):r);let R=ly(r,s,a,y),L=h.__ngNextListenerFn__;for(;L;)R=ly(r,s,L,y)&&R,L=L.__ngNextListenerFn__;return l&&!1===R&&y.preventDefault(),R}}function dy(t=1){return function An(t){return(Gt.lFrame.contextLView=function Rn(t,r){for(;t>0;)r=r[Is],t--;return r}(t,Gt.lFrame.contextLView))[er]}(t)}function Wv(t,r){let s=null;const a=function Es(t){const r=t.attrs;if(null!=r){const s=r.indexOf(5);if(!(1&s))return r[s+1]}return null}(t);for(let l=0;l<r.length;l++){const h=r[l];if("*"!==h){if(null===a?Gs(t,h,!0):Ri(a,h))return l}else s=l}return s}function hy(t){const r=H()[$r][di];if(!r.projection){const a=r.projection=ua(t?t.length:1,null),l=a.slice();let h=r.child;for(;null!==h;){const y=t?Wv(h,t):0;null!==y&&(l[y]?l[y].projectionNext=h:a[y]=h,l[y]=h),h=h.next}}}function fy(t,r=0,s){const a=H(),l=he(),h=vl(l,jn+t,16,null,s||null);null===h.projection&&(h.projection=r),Te(),(!a[Qr]||Ks())&&32!=(32&h.flags)&&function pp(t,r,s){gp(r[an],0,r,s,kh(t,s,r),Cm(s.parent||r[di],s,r))}(l,a,h)}function Kg(t,r,s){return py(t,"",r,"",s),Kg}function py(t,r,s,a,l){const h=H(),y=wa(h,r,s,a);return y!==Zn&&Qo(he(),zn(),h,t,y,h[an],l,!1),py}function uh(t,r){return t<<17|r<<2}function pc(t){return t>>17&32767}function i(t){return 2|t}function e(t){return(131068&t)>>2}function n(t,r){return-131069&t|r<<2}function u(t){return 1|t}function B(t,r,s,a,l){const h=t[s+1],y=null===r;let w=a?pc(h):e(h),R=!1;for(;0!==w&&(!1===R||y);){const Z=t[w+1];Q(t[w],r)&&(R=!0,t[w+1]=a?u(Z):i(Z)),w=a?pc(Z):e(Z)}R&&(t[s+1]=a?i(h):u(h))}function Q(t,r){return null===t||null==r||(Array.isArray(t)?t[1]:t)===r||!(!Array.isArray(t)||"string"!=typeof r)&&Eu(t,r)>=0}const ie={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Re(t){return t.substring(ie.key,ie.keyEnd)}function Ht(t,r){const s=ie.textEnd;return s===r?-1:(r=ie.keyEnd=function gr(t,r,s){for(;r<s&&t.charCodeAt(r)>32;)r++;return r}(t,ie.key=r,s),fn(t,r,s))}function fn(t,r,s){for(;r<s&&t.charCodeAt(r)<=32;)r++;return r}function Lf(t,r,s){return Bu(t,r,s,!1),Lf}function Jv(t,r){return Bu(t,r,null,!0),Jv}function tI(t){!function ju(t,r,s,a){const l=he(),h=Di(2);l.firstUpdatePass&&rI(l,null,h,a);const y=H();if(s!==Zn&&Xs(y,h,s)){const w=l.data[Pn()];if(aI(w,a)&&!nI(l,h)){let R=a?w.classesWithoutHost:w.stylesWithoutHost;null!==R&&(s=et(R,s||"")),zg(l,w,y,s,a)}else!function Zw(t,r,s,a,l,h,y,w){l===Zn&&(l=st);let R=0,L=0,Z=0<l.length?l[0]:null,le=0<h.length?h[0]:null;for(;null!==Z||null!==le;){const Oe=R<l.length?l[R+1]:void 0,je=L<h.length?h[L+1]:void 0;let Dt,ut=null;Z===le?(R+=2,L+=2,Oe!==je&&(ut=le,Dt=je)):null===le||null!==Z&&Z<le?(R+=2,ut=Z):(L+=2,ut=le,Dt=je),null!==ut&&sI(t,r,s,a,ut,Dt,y,w),Z=R<l.length?l[R]:null,le=L<h.length?h[L]:null}}(l,w,y,y[an],y[h+1],y[h+1]=function qw(t,r,s){if(null==s||""===s)return st;const a=[],l=Ru(s);if(Array.isArray(l))for(let h=0;h<l.length;h++)t(a,l[h],!0);else if("object"==typeof l)for(const h in l)l.hasOwnProperty(h)&&t(a,h,l[h]);else"string"==typeof l&&r(a,l);return a}(t,r,s),a,h)}}(Kw,Al,t,!0)}function Al(t,r){for(let s=function bt(t){return function Qn(t){ie.key=0,ie.keyEnd=0,ie.value=0,ie.valueEnd=0,ie.textEnd=t.length}(t),Ht(t,fn(t,0,ie.textEnd))}(r);s>=0;s=Ht(r,s))Co(t,Re(r),!0)}function Bu(t,r,s,a){const l=H(),h=he(),y=Di(2);h.firstUpdatePass&&rI(h,t,y,a),r!==Zn&&Xs(l,y,r)&&sI(h,h.data[Pn()],l,l[an],t,l[y+1]=function Qw(t,r){return null==t||""===t||("string"==typeof r?t+=r:"object"==typeof t&&(t=Se(Ru(t)))),t}(r,s),a,y)}function nI(t,r){return r>=t.expandoStartIndex}function rI(t,r,s,a){const l=t.data;if(null===l[s+1]){const h=l[Pn()],y=nI(t,s);aI(h,a)&&null===r&&!y&&(r=!1),r=function Hw(t,r,s,a){const l=function ho(t){const r=Gt.lFrame.currentDirectiveIndex;return-1===r?null:t[r]}(t);let h=a?r.residualClasses:r.residualStyles;if(null===l)0===(a?r.classBindings:r.styleBindings)&&(s=Jg(s=Xv(null,t,r,s,a),r.attrs,a),h=null);else{const y=r.directiveStylingLast;if(-1===y||t[y]!==l)if(s=Xv(l,t,r,s,a),null===h){let R=function zw(t,r,s){const a=s?r.classBindings:r.styleBindings;if(0!==e(a))return t[pc(a)]}(t,r,a);void 0!==R&&Array.isArray(R)&&(R=Xv(null,t,r,R[1],a),R=Jg(R,r.attrs,a),function Gw(t,r,s,a){t[pc(s?r.classBindings:r.styleBindings)]=a}(t,r,a,R))}else h=function Ww(t,r,s){let a;const l=r.directiveEnd;for(let h=1+r.directiveStylingLast;h<l;h++)a=Jg(a,t[h].hostAttrs,s);return Jg(a,r.attrs,s)}(t,r,a)}return void 0!==h&&(a?r.residualClasses=h:r.residualStyles=h),s}(l,h,r,a),function A(t,r,s,a,l,h){let y=h?r.classBindings:r.styleBindings,w=pc(y),R=e(y);t[a]=s;let Z,L=!1;if(Array.isArray(s)?(Z=s[1],(null===Z||Eu(s,Z)>0)&&(L=!0)):Z=s,l)if(0!==R){const Oe=pc(t[w+1]);t[a+1]=uh(Oe,w),0!==Oe&&(t[Oe+1]=n(t[Oe+1],a)),t[w+1]=function Ff(t,r){return 131071&t|r<<17}(t[w+1],a)}else t[a+1]=uh(w,0),0!==w&&(t[w+1]=n(t[w+1],a)),w=a;else t[a+1]=uh(R,0),0===w?w=a:t[R+1]=n(t[R+1],a),R=a;L&&(t[a+1]=i(t[a+1])),B(t,Z,a,!0),B(t,Z,a,!1),function P(t,r,s,a,l){const h=l?t.residualClasses:t.residualStyles;null!=h&&"string"==typeof r&&Eu(h,r)>=0&&(s[a+1]=u(s[a+1]))}(r,Z,t,a,h),y=uh(w,R),h?r.classBindings=y:r.styleBindings=y}(l,h,r,s,y,a)}}function Xv(t,r,s,a,l){let h=null;const y=s.directiveEnd;let w=s.directiveStylingLast;for(-1===w?w=s.directiveStart:w++;w<y&&(h=r[w],a=Jg(a,h.hostAttrs,l),h!==t);)w++;return null!==t&&(s.directiveStylingLast=w),a}function Jg(t,r,s){const a=s?1:2;let l=-1;if(null!==r)for(let h=0;h<r.length;h++){const y=r[h];"number"==typeof y?l=y:l===a&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Co(t,y,!!s||r[++h]))}return void 0===t?null:t}function Kw(t,r,s){const a=String(r);""!==a&&!a.includes(" ")&&Co(t,a,s)}function sI(t,r,s,a,l,h,y,w){if(!(3&r.type))return;const R=t.data,L=R[w+1],Z=function o(t){return 1==(1&t)}(L)?oI(R,r,s,l,e(L),y):void 0;my(Z)||(my(h)||function Yg(t){return 2==(2&t)}(L)&&(h=oI(R,null,s,l,w,y)),function Vy(t,r,s,a,l){if(r)l?t.addClass(s,a):t.removeClass(s,a);else{let h=-1===a.indexOf("-")?void 0:Tu.DashCase;null==l?t.removeStyle(s,a,h):("string"==typeof l&&l.endsWith("!important")&&(l=l.slice(0,-10),h|=Tu.Important),t.setStyle(s,a,l,h))}}(a,y,ft(Pn(),s),l,h))}function oI(t,r,s,a,l,h){const y=null===r;let w;for(;l>0;){const R=t[l],L=Array.isArray(R),Z=L?R[1]:R,le=null===Z;let Oe=s[l+1];Oe===Zn&&(Oe=le?st:void 0);let je=le?la(Oe,a):Z===a?Oe:void 0;if(L&&!my(je)&&(je=la(R,a)),my(je)&&(w=je,y))return w;const ut=t[l+1];l=y?pc(ut):e(ut)}if(null!==r){let R=h?r.residualClasses:r.residualStyles;null!=R&&(w=la(R,a))}return w}function my(t){return void 0!==t}function aI(t,r){return 0!=(t.flags&(r?8:16))}function uI(t,r=""){const s=H(),a=he(),l=t+jn,h=a.firstCreatePass?vl(a,l,1,r,null):a.data[l],y=lI(a,s,h,r,t);s[l]=y,_c()&&Cd(a,s,y,h),ln(h,!1)}let lI=(t,r,s,a,l)=>(ga(!0),function wd(t,r){return t.createText(r)}(r[an],a));function eE(t){return _y("",t,""),eE}function _y(t,r,s){const a=H(),l=wa(a,t,r,s);return l!==Zn&&Ou(a,Pn(),l),_y}function tE(t,r,s,a,l){const h=H(),y=cc(h,t,r,s,a,l);return y!==Zn&&Ou(h,Pn(),y),tE}const lh=void 0;var yT=["en",[["a","p"],["AM","PM"],lh],[["AM","PM"],lh,lh],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],lh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],lh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",lh,"{1} 'at' {0}",lh],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function _T(t){const s=Math.floor(Math.abs(t)),a=t.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===a?1:5}];let Vf={};function nE(t){const r=function vT(t){return t.toLowerCase().replace(/_/g,"-")}(t);let s=RI(r);if(s)return s;const a=r.split("-")[0];if(s=RI(a),s)return s;if("en"===a)return yT;throw new se(701,!1)}function bI(t){return nE(t)[Uf.PluralCase]}function RI(t){return t in Vf||(Vf[t]=vn.ng&&vn.ng.common&&vn.ng.common.locales&&vn.ng.common.locales[t]),Vf[t]}var Uf=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(Uf||{});const Bf="en-US";let PI=Bf;function sE(t,r,s,a,l){if(t=it(t),Array.isArray(t))for(let h=0;h<t.length;h++)sE(t[h],r,s,a,l);else{const h=he(),y=H(),w=ze();let R=dl(t)?t:it(t.provide);const L=Op(t),Z=1048575&w.providerIndexes,le=w.directiveStart,Oe=w.providerIndexes>>20;if(dl(t)||!t.multi){const je=new za(L,l,Wc),ut=aE(R,r,l?Z:Z+Oe,le);-1===ut?(sa(Oa(w,y),h,R),oE(h,t,r.length),r.push(R),w.directiveStart++,w.directiveEnd++,l&&(w.providerIndexes+=1048576),s.push(je),y.push(je)):(s[ut]=je,y[ut]=je)}else{const je=aE(R,r,Z+Oe,le),ut=aE(R,r,Z,Z+Oe),Wt=ut>=0&&s[ut];if(l&&!Wt||!l&&!(je>=0&&s[je])){sa(Oa(w,y),h,R);const En=function _D(t,r,s,a,l){const h=new za(t,s,Wc);return h.multi=[],h.index=r,h.componentProviders=0,t0(h,l,a&&!s),h}(l?mD:gD,s.length,l,a,L);!l&&Wt&&(s[ut].providerFactory=En),oE(h,t,r.length,0),r.push(R),w.directiveStart++,w.directiveEnd++,l&&(w.providerIndexes+=1048576),s.push(En),y.push(En)}else oE(h,t,je>-1?je:ut,t0(s[l?ut:je],L,!l&&a));!l&&a&&Wt&&s[ut].componentProviders++}}}function oE(t,r,s,a){const l=dl(r),h=function Wm(t){return!!t.useClass}(r);if(l||h){const R=(h?it(r.useClass):r).prototype.ngOnDestroy;if(R){const L=t.destroyHooks||(t.destroyHooks=[]);if(!l&&r.multi){const Z=L.indexOf(s);-1===Z?L.push(s,[a,R]):L[Z+1].push(a,R)}else L.push(s,R)}}}function t0(t,r,s){return s&&t.componentProviders++,t.multi.push(r)-1}function aE(t,r,s,a){for(let l=s;l<a;l++)if(r[l]===t)return l;return-1}function gD(t,r,s,a){return uE(this.multi,[])}function mD(t,r,s,a){const l=this.multi;let h;if(this.providerFactory){const y=this.providerFactory.componentProviders,w=_a(s,s[Ot],this.providerFactory.index,a);h=w.slice(0,y),uE(l,h);for(let R=y;R<w.length;R++)h.push(w[R])}else h=[],uE(l,h);return h}function uE(t,r){for(let s=0;s<t.length;s++)r.push((0,t[s])());return r}function n0(t,r=[]){return s=>{s.providersResolver=(a,l)=>function pD(t,r,s){const a=he();if(a.firstCreatePass){const l=us(t);sE(s,a.data,a.blueprint,l,!0),sE(r,a.data,a.blueprint,l,!1)}}(a,l?l(t):t,r)}}class ch{}class r0{}function yD(t,r){return new lE(t,r??null,[])}class lE extends ch{constructor(r,s,a){super(),this._parent=s,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new z_(this);const l=Zr(r);this._bootstrapComponents=uu(l.bootstrap),this._r3Injector=uf(r,s,[{provide:ch,useValue:this},{provide:Hc,useValue:this.componentFactoryResolver},...a],Se(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class cE extends r0{constructor(r){super(),this.moduleType=r}create(r){return new lE(this.moduleType,r,[])}}class s0 extends ch{constructor(r){super(),this.componentFactoryResolver=new z_(this),this.instance=null;const s=new La([...r.providers,{provide:ch,useValue:this},{provide:Hc,useValue:this.componentFactoryResolver}],r.parent||kd(),r.debugName,new Set(["environment"]));this.injector=s,r.runEnvironmentInitializers&&s.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function o0(t,r,s=null){return new s0({providers:t,parent:r,debugName:s,runEnvironmentInitializers:!0}).injector}let ED=(()=>{class t{constructor(s){this._injector=s,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(s){if(!s.standalone)return null;if(!this.cachedInjectors.has(s)){const a=Wh(0,s.type),l=a.length>0?o0([a],this._injector,`Standalone[${s.type.name}]`):null;this.cachedInjectors.set(s,l)}return this.cachedInjectors.get(s)}ngOnDestroy(){try{for(const s of this.cachedInjectors.values())null!==s&&s.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=on({token:t,providedIn:"environment",factory:()=>new t(dt(ou))})}return t})();function a0(t){t.getStandaloneInjector=r=>r.get(ED).getOrCreateStandaloneInjector(t)}function p0(t,r,s,a,l,h){const y=r+s;return Xs(t,y,l)?function Ua(t,r,s){return t[r]=s}(t,y+1,h?a.call(h,l):a(l)):function im(t,r){const s=t[r];return s===Zn?void 0:s}(t,y+1)}function v0(t,r){const s=he();let a;const l=t+jn;s.firstCreatePass?(a=function UD(t,r){if(r)for(let s=r.length-1;s>=0;s--){const a=r[s];if(t===a.name)return a}}(r,s.pipeRegistry),s.data[l]=a,a.onDestroy&&(s.destroyHooks??=[]).push(l,a.onDestroy)):a=s.data[l];const h=a.factory||(a.factory=Ui(a.type)),w=qn(Wc);try{const R=Ko(!1),L=h();return Ko(R),function Vv(t,r,s,a){s>=t.data.length&&(t.data[s]=null,t.blueprint[s]=null),r[s]=a}(s,H(),l,L),L}finally{qn(w)}}function E0(t,r,s){const a=t+jn,l=H(),h=Mi(l,a);return function sm(t,r){return t[Ot].data[r].pure}(l,a)?p0(l,function Kn(){const t=Gt.lFrame;let r=t.bindingRootIndex;return-1===r&&(r=t.bindingRootIndex=t.tView.bindingStartIndex),r}(),r,h.transform,s,h):h.transform(s)}function zD(){return this._results[Symbol.iterator]()}class hE{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new au)}constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=hE.prototype;s[Symbol.iterator]||(s[Symbol.iterator]=zD)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,s){return this._results.reduce(r,s)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,s){const a=this;a.dirty=!1;const l=function Do(t){return t.flat(Number.POSITIVE_INFINITY)}(r);(this._changesDetected=!function Dh(t,r,s){if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++){let l=t[a],h=r[a];if(s&&(l=s(l),h=s(h)),h!==l)return!1}return!0}(a._results,l,s))&&(a._results=l,a.length=l.length,a.last=l[this.length-1],a.first=l[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function WD(t,r,s,a=!0){const l=r[Ot];if(function ym(t,r,s,a){const l=Or+a,h=s.length;a>0&&(s[l-1][Hi]=r),a<h-Or?(r[Hi]=s[l],Ch(s,Or+a,r)):(s.push(r),r[Hi]=null),r[cr]=s;const y=r[Bn];null!==y&&s!==y&&function Fy(t,r){const s=t[Os];r[$r]!==r[cr][cr][$r]&&(t[qs]=!0),null===s?t[Os]=[r]:s.push(r)}(y,r);const w=r[Dr];null!==w&&w.insertView(t),r[cn]|=128}(l,r,t,s),a){const h=Au(s,t),y=r[an],w=Cu(y,t[Gr]);null!==w&&function cp(t,r,s,a,l,h){a[Er]=l,a[di]=r,Wl(t,a,s,1,l,h)}(l,t[di],y,r,w,h)}}let om=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=ZD}return t})();const qD=om,KD=class extends qD{constructor(r,s,a){super(),this._declarationLView=r,this._declarationTContainer=s,this.elementRef=a}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(r,s){return this.createEmbeddedViewImpl(r,s)}createEmbeddedViewImpl(r,s,a){const l=function GD(t,r,s,a){const l=r.tView,w=yf(t,l,s,4096&t[cn]?4096:16,null,r,null,null,null,a?.injector??null,a?.hydrationInfo??null);w[Bn]=t[r.index];const L=t[Dr];return null!==L&&(w[Dr]=L.createEmbeddedView(l)),Yd(l,w,s),w}(this._declarationLView,this._declarationTContainer,r,{injector:s,hydrationInfo:a});return new Xd(l)}};function ZD(){return wy(ze(),H())}function wy(t,r){return 4&t.type?new KD(r,t,pl(t,r)):null}let Dy=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=tC}return t})();function tC(){return S0(ze(),H())}const nC=Dy,C0=class extends nC{constructor(r,s,a){super(),this._lContainer=r,this._hostTNode=s,this._hostLView=a}get element(){return pl(this._hostTNode,this._hostLView)}get injector(){return new Bs(this._hostTNode,this._hostLView)}get parentInjector(){const r=Wa(this._hostTNode,this._hostLView);if(ud(r)){const s=qo(r,this._hostLView),a=Bi(r);return new Bs(s[Ot].data[a+8],s)}return new Bs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const s=A0(this._lContainer);return null!==s&&s[r]||null}get length(){return this._lContainer.length-Or}createEmbeddedView(r,s,a){let l,h;"number"==typeof a?l=a:null!=a&&(l=a.index,h=a.injector);const w=r.createEmbeddedViewImpl(s||{},h,null);return this.insertImpl(w,l,false),w}createComponent(r,s,a,l,h){const y=r&&!function xl(t){return"function"==typeof t}(r);let w;if(y)w=s;else{const Dt=s||{};w=Dt.index,a=Dt.injector,l=Dt.projectableNodes,h=Dt.environmentInjector||Dt.ngModuleRef}const R=y?r:new ei(Hn(r)),L=a||this.parentInjector;if(!h&&null==R.ngModule){const Wt=(y?L:this.parentInjector).get(ou,null);Wt&&(h=Wt)}Hn(R.componentType??{});const je=R.create(L,l,null,h);return this.insertImpl(je.hostView,w,false),je}insert(r,s){return this.insertImpl(r,s,!1)}insertImpl(r,s,a){const l=r._lView;if(function ja(t){return wi(t[cr])}(l)){const R=this.indexOf(r);if(-1!==R)this.detach(R);else{const L=l[cr],Z=new C0(L,L[di],L[cr]);Z.detach(Z.indexOf(r))}}const y=this._adjustIndex(s),w=this._lContainer;return WD(w,l,y,!a),r.attachToViewContainerRef(),Ch(fE(w),y,r),r}move(r,s){return this.insert(r,s)}indexOf(r){const s=A0(this._lContainer);return null!==s?s.indexOf(r):-1}remove(r){const s=this._adjustIndex(r,-1),a=rl(this._lContainer,s);a&&(Zu(fE(this._lContainer),s),Dd(a[Ot],a))}detach(r){const s=this._adjustIndex(r,-1),a=rl(this._lContainer,s);return a&&null!=Zu(fE(this._lContainer),s)?new Xd(a):null}_adjustIndex(r,s=0){return r??this.length+s}};function A0(t){return t[8]}function fE(t){return t[8]||(t[8]=[])}function S0(t,r){let s;const a=r[t.index];return wi(a)?s=a:(s=N_(a,r,null,t),r[t.index]=s,Qd(r,s)),b0(s,r,t,a),new C0(s,t,r)}let b0=function R0(t,r,s,a){if(t[Gr])return;let l;l=8&s.type?pt(a):function rC(t,r){const s=t[an],a=s.createComment(""),l=Cr(r,t);return il(s,Cu(s,l),a,function Dm(t,r){return t.nextSibling(r)}(s,l),!1),a}(r,s),t[Gr]=l};class pE{constructor(r){this.queryList=r,this.matches=null}clone(){return new pE(this.queryList)}setDirty(){this.queryList.setDirty()}}class gE{constructor(r=[]){this.queries=r}createEmbeddedView(r){const s=r.queries;if(null!==s){const a=null!==r.contentQueries?r.contentQueries[0]:s.length,l=[];for(let h=0;h<a;h++){const y=s.getByIndex(h);l.push(this.queries[y.indexInDeclarationView].clone())}return new gE(l)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let s=0;s<this.queries.length;s++)null!==V0(r,s).matches&&this.queries[s].setDirty()}}class P0{constructor(r,s,a=null){this.predicate=r,this.flags=s,this.read=a}}class mE{constructor(r=[]){this.queries=r}elementStart(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(r,s)}elementEnd(r){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(r)}embeddedTView(r){let s=null;for(let a=0;a<this.length;a++){const l=null!==s?s.length:0,h=this.getByIndex(a).embeddedTView(r,l);h&&(h.indexInDeclarationView=a,null!==s?s.push(h):s=[h])}return null!==s?new mE(s):null}template(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].template(r,s)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class _E{constructor(r,s=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(r,s){this.isApplyingToNode(s)&&this.matchTNode(r,s)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,s){this.elementStart(r,s)}embeddedTView(r,s){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,s),new _E(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let a=r.parent;for(;null!==a&&8&a.type&&a.index!==s;)a=a.parent;return s===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(r,s){const a=this.metadata.predicate;if(Array.isArray(a))for(let l=0;l<a.length;l++){const h=a[l];this.matchTNodeWithReadOption(r,s,oC(s,h)),this.matchTNodeWithReadOption(r,s,Ka(s,r,h,!1,!1))}else a===om?4&s.type&&this.matchTNodeWithReadOption(r,s,-1):this.matchTNodeWithReadOption(r,s,Ka(s,r,a,!1,!1))}matchTNodeWithReadOption(r,s,a){if(null!==a){const l=this.metadata.read;if(null!==l)if(l===zc||l===Dy||l===om&&4&s.type)this.addMatch(s.index,-2);else{const h=Ka(s,r,l,!1,!1);null!==h&&this.addMatch(s.index,h)}else this.addMatch(s.index,a)}}addMatch(r,s){null===this.matches?this.matches=[r,s]:this.matches.push(r,s)}}function oC(t,r){const s=t.localNames;if(null!==s)for(let a=0;a<s.length;a+=2)if(s[a]===r)return s[a+1];return null}function uC(t,r,s,a){return-1===s?function aC(t,r){return 11&t.type?pl(t,r):4&t.type?wy(t,r):null}(r,t):-2===s?function lC(t,r,s){return s===zc?pl(r,t):s===om?wy(r,t):s===Dy?S0(r,t):void 0}(t,r,a):_a(t,t[Ot],s,r)}function M0(t,r,s,a){const l=r[Dr].queries[a];if(null===l.matches){const h=t.data,y=s.matches,w=[];for(let R=0;R<y.length;R+=2){const L=y[R];w.push(L<0?null:uC(r,h[L],y[R+1],s.metadata.read))}l.matches=w}return l.matches}function yE(t,r,s,a){const l=t.queries.getByIndex(s),h=l.matches;if(null!==h){const y=M0(t,r,l,s);for(let w=0;w<h.length;w+=2){const R=h[w];if(R>0)a.push(y[w/2]);else{const L=h[w+1],Z=r[-R];for(let le=Or;le<Z.length;le++){const Oe=Z[le];Oe[Bn]===Oe[cr]&&yE(Oe[Ot],Oe,L,a)}if(null!==Z[Os]){const le=Z[Os];for(let Oe=0;Oe<le.length;Oe++){const je=le[Oe];yE(je[Ot],je,L,a)}}}}}return a}function N0(t){const r=H(),s=he(),a=I();S(a+1);const l=V0(s,a);if(t.dirty&&function bl(t){return 4==(4&t[cn])}(r)===(2==(2&l.metadata.flags))){if(null===l.matches)t.reset([]);else{const h=l.crossesNgTemplate?yE(s,r,a,[]):M0(s,r,l,a);t.reset(h,Gc),t.notifyOnChanges()}return!0}return!1}function O0(t,r,s){const a=he();a.firstCreatePass&&(L0(a,new P0(t,r,s),-1),2==(2&r)&&(a.staticViewQueries=!0)),F0(a,H(),r)}function x0(t,r,s,a){const l=he();if(l.firstCreatePass){const h=ze();L0(l,new P0(r,s,a),h.index),function dC(t,r){const s=t.contentQueries||(t.contentQueries=[]);r!==(s.length?s[s.length-1]:-1)&&s.push(t.queries.length-1,r)}(l,t),2==(2&s)&&(l.staticContentQueries=!0)}F0(l,H(),s)}function k0(){return function cC(t,r){return t[Dr].queries[r].queryList}(H(),I())}function F0(t,r,s){const a=new hE(4==(4&s));(function dv(t,r,s,a){const l=x_(r);l.push(s),t.firstCreatePass&&k_(t).push(a,l.length-1)})(t,r,a,a.destroy),null===r[Dr]&&(r[Dr]=new gE),r[Dr].queries.push(new pE(a))}function L0(t,r,s){null===t.queries&&(t.queries=new mE),t.queries.track(new _E(r,s))}function V0(t,r){return t.queries.getByIndex(r)}function U0(t,r){return wy(t,r)}function vE(t){return!!Zr(t)}const nw=new $t("Application Initializer");let DE=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((s,a)=>{this.resolve=s,this.reject=a}),this.appInits=St(nw,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const s=[];for(const l of this.appInits){const h=l();if(qg(h))s.push(h);else if(sy(h)){const y=new Promise((w,R)=>{h.subscribe({complete:w,error:R})});s.push(y)}}const a=()=>{this.done=!0,this.resolve()};Promise.all(s).then(()=>{a()}).catch(l=>{this.reject(l)}),0===s.length&&a(),this.initialized=!0}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=on({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),rw=(()=>{class t{log(s){console.log(s)}warn(s){console.warn(s)}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=on({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();const Ay=new $t("LocaleId",{providedIn:"root",factory:()=>St(Ay,Kt.Optional|Kt.SkipSelf)||function NC(){return typeof $localize<"u"&&$localize.locale||Bf}()}),OC=new $t("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let iw=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ge.X(!1)}add(){this.hasPendingTasks.next(!0);const s=this.taskId++;return this.pendingTasks.add(s),s}remove(s){this.pendingTasks.delete(s),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=on({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class kC{constructor(r,s){this.ngModuleFactory=r,this.componentFactories=s}}let FC=(()=>{class t{compileModuleSync(s){return new cE(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const a=this.compileModuleSync(s),h=uu(Zr(s).declarations).reduce((y,w)=>{const R=Hn(w);return R&&y.push(new ei(R)),y},[]);return new kC(a,h)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=on({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const uw=new $t(""),lw=new $t("");let SE,iA=(()=>{class t{constructor(s,a,l){this._ngZone=s,this.registry=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,SE||(function sA(t){SE=t}(l),l.addToWindow(a)),this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{$s.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(s)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,a,l){let h=-1;a&&a>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==h),s(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:s,timeoutId:h,updateCb:l})}whenStable(s,a,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,a,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(s){this.registry.registerApplication(s,this)}unregisterApplication(s){this.registry.unregisterApplication(s)}findProviders(s,a,l){return[]}static#e=this.\u0275fac=function(a){return new(a||t)(dt($s),dt(cw),dt(lw))};static#t=this.\u0275prov=on({token:t,factory:t.\u0275fac})}return t})(),cw=(()=>{class t{constructor(){this._applications=new Map}registerApplication(s,a){this._applications.set(s,a)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,a=!0){return SE?.findTestabilityInTree(this,s,a)??null}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=on({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),od=null;const dw=new $t("AllowMultipleToken"),bE=new $t("PlatformDestroyListeners"),RE=new $t("appBootstrapListener");class uA{constructor(r,s){this.name=r,this.token=s}}function pw(t,r,s=[]){const a=`Platform: ${r}`,l=new $t(a);return(h=[])=>{let y=PE();if(!y||y.injector.get(dw,!1)){const w=[...s,...h,{provide:l,useValue:!0}];t?t(w):function lA(t){if(od&&!od.get(dw,!1))throw new se(400,!1);(function hw(){!function ia(t){Go=t}(()=>{throw new se(600,!1)})})(),od=t;const r=t.get(mw);(function fw(t){t.get(Fp,null)?.forEach(s=>s())})(t)}(function gw(t=[],r){return So.create({name:r,providers:[{provide:xd,useValue:"platform"},{provide:bE,useValue:new Set([()=>od=null])},...t]})}(w,a))}return function dA(t){const r=PE();if(!r)throw new se(401,!1);return r}()}}function PE(){return od?.get(mw)??null}let mw=(()=>{class t{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,a){const l=function hA(t="zone.js",r){return"noop"===t?new f_:"zone.js"===t?new $s(r):t}(a?.ngZone,function _w(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:a?.ngZoneEventCoalescing,runCoalescing:a?.ngZoneRunCoalescing}));return l.run(()=>{const h=function vD(t,r,s){return new lE(t,r,s)}(s.moduleType,this.injector,function ww(t){return[{provide:$s,useFactory:t},{provide:Jl,multi:!0,useFactory:()=>{const r=St(pA,{optional:!0});return()=>r.initialize()}},{provide:Iw,useFactory:fA},{provide:p_,useFactory:g_}]}(()=>l)),y=h.injector.get(ml,null);return l.runOutsideAngular(()=>{const w=l.onError.subscribe({next:R=>{y.handleError(R)}});h.onDestroy(()=>{by(this._modules,h),w.unsubscribe()})}),function yw(t,r,s){try{const a=s();return qg(a)?a.catch(l=>{throw r.runOutsideAngular(()=>t.handleError(l)),l}):a}catch(a){throw r.runOutsideAngular(()=>t.handleError(a)),a}}(y,l,()=>{const w=h.injector.get(DE);return w.runInitializers(),w.donePromise.then(()=>(function MI(t){Et(t,"Expected localeId to be defined"),"string"==typeof t&&(PI=t.toLowerCase().replace(/_/g,"-"))}(h.injector.get(Ay,Bf)||Bf),this._moduleDoBootstrap(h),h))})})}bootstrapModule(s,a=[]){const l=vw({},a);return function oA(t,r,s){const a=new cE(s);return Promise.resolve(a)}(0,0,s).then(h=>this.bootstrapModuleFactory(h,l))}_moduleDoBootstrap(s){const a=s.injector.get(Hf);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(l=>a.bootstrap(l));else{if(!s.instance.ngDoBootstrap)throw new se(-403,!1);s.instance.ngDoBootstrap(a)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new se(404,!1);this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a());const s=this._injector.get(bE,null);s&&(s.forEach(a=>a()),s.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(a){return new(a||t)(dt(So))};static#t=this.\u0275prov=on({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function vw(t,r){return Array.isArray(r)?r.reduce(vw,t):{...t,...r}}let Hf=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=St(Iw),this.zoneIsStable=St(p_),this.componentTypes=[],this.components=[],this.isStable=St(iw).hasPendingTasks.pipe((0,_e.w)(s=>s?(0,ne.of)(!1):this.zoneIsStable),(0,Le.x)(),(0,Ae.B)()),this._injector=St(ou)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(s,a){const l=s instanceof n_;if(!this._injector.get(DE).done)throw!l&&Jr(s),new se(405,!1);let y;y=l?s:this._injector.get(Hc).resolveComponentFactory(s),this.componentTypes.push(y.componentType);const w=function aA(t){return t.isBoundToModule}(y)?void 0:this._injector.get(ch),L=y.create(So.NULL,[],a||y.selector,w),Z=L.location.nativeElement,le=L.injector.get(uw,null);return le?.registerApplication(Z),L.onDestroy(()=>{this.detachView(L.hostView),by(this.components,L),le?.unregisterApplication(Z)}),this._loadComponent(L),L}tick(){if(this._runningTick)throw new se(101,!1);try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this.internalErrorHandler(s)}finally{this._runningTick=!1}}attachView(s){const a=s;this._views.push(a),a.attachToAppRef(this)}detachView(s){const a=s;by(this._views,a),a.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s);const a=this._injector.get(RE,[]);a.push(...this._bootstrapListeners),a.forEach(l=>l(s))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(s=>s()),this._views.slice().forEach(s=>s.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(s){return this._destroyListeners.push(s),()=>by(this._destroyListeners,s)}destroy(){if(this._destroyed)throw new se(406,!1);const s=this._injector;s.destroy&&!s.destroyed&&s.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=on({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function by(t,r){const s=t.indexOf(r);s>-1&&t.splice(s,1)}const Iw=new $t("",{providedIn:"root",factory:()=>St(ml).handleError.bind(void 0)});function fA(){const t=St($s),r=St(ml);return s=>t.runOutsideAngular(()=>r.handleError(s))}let pA=(()=>{class t{constructor(){this.zone=St($s),this.applicationRef=St(Hf)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(a){return new(a||t)};static#t=this.\u0275prov=on({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function mA(){return!1}let _A=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=yA}return t})();function yA(t){return function vA(t,r,s){if(oo(t)&&!s){const a=Vs(t.index,r);return new Xd(a,a)}return 47&t.type?new Xd(r[$r],r):null}(ze(),H(),16==(16&t))}class Aw{constructor(){}supports(r){return oc(r)}create(r){return new CA(r)}}const DA=(t,r)=>r;class CA{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||DA}forEachItem(r){let s;for(s=this._itHead;null!==s;s=s._next)r(s)}forEachOperation(r){let s=this._itHead,a=this._removalsHead,l=0,h=null;for(;s||a;){const y=!a||s&&s.currentIndex<bw(a,l,h)?s:a,w=bw(y,l,h),R=y.currentIndex;if(y===a)l--,a=a._nextRemoved;else if(s=s._next,null==y.previousIndex)l++;else{h||(h=[]);const L=w-l,Z=R-l;if(L!=Z){for(let Oe=0;Oe<L;Oe++){const je=Oe<h.length?h[Oe]:h[Oe]=0,ut=je+Oe;Z<=ut&&ut<L&&(h[Oe]=je+1)}h[y.previousIndex]=Z-L}}w!==R&&r(y,w,R)}}forEachPreviousItem(r){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachMovedItem(r){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}forEachIdentityChange(r){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)r(s)}diff(r){if(null==r&&(r=[]),!oc(r))throw new se(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let l,h,y,s=this._itHead,a=!1;if(Array.isArray(r)){this.length=r.length;for(let w=0;w<this.length;w++)h=r[w],y=this._trackByFn(w,h),null!==s&&Object.is(s.trackById,y)?(a&&(s=this._verifyReinsertion(s,h,y,w)),Object.is(s.item,h)||this._addIdentityChange(s,h)):(s=this._mismatch(s,h,y,w),a=!0),s=s._next}else l=0,function ac(t,r){if(Array.isArray(t))for(let s=0;s<t.length;s++)r(t[s]);else{const s=t[Symbol.iterator]();let a;for(;!(a=s.next()).done;)r(a.value)}}(r,w=>{y=this._trackByFn(l,w),null!==s&&Object.is(s.trackById,y)?(a&&(s=this._verifyReinsertion(s,w,y,l)),Object.is(s.item,w)||this._addIdentityChange(s,w)):(s=this._mismatch(s,w,y,l),a=!0),s=s._next,l++}),this.length=l;return this._truncate(s),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,s,a,l){let h;return null===r?h=this._itTail:(h=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._reinsertAfter(r,h,l)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(a,l))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._moveAfter(r,h,l)):r=this._addAfter(new AA(s,a),h,l),r}_verifyReinsertion(r,s,a,l){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==h?r=this._reinsertAfter(h,r._prev,l):r.currentIndex!=l&&(r.currentIndex=l,this._addToMoves(r,l)),r}_truncate(r){for(;null!==r;){const s=r._next;this._addToRemovals(this._unlink(r)),r=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,s,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const l=r._prevRemoved,h=r._nextRemoved;return null===l?this._removalsHead=h:l._nextRemoved=h,null===h?this._removalsTail=l:h._prevRemoved=l,this._insertAfter(r,s,a),this._addToMoves(r,a),r}_moveAfter(r,s,a){return this._unlink(r),this._insertAfter(r,s,a),this._addToMoves(r,a),r}_addAfter(r,s,a){return this._insertAfter(r,s,a),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,s,a){const l=null===s?this._itHead:s._next;return r._next=l,r._prev=s,null===l?this._itTail=r:l._prev=r,null===s?this._itHead=r:s._next=r,null===this._linkedRecords&&(this._linkedRecords=new Sw),this._linkedRecords.put(r),r.currentIndex=a,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const s=r._prev,a=r._next;return null===s?this._itHead=a:s._next=a,null===a?this._itTail=s:a._prev=s,r}_addToMoves(r,s){return r.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Sw),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,s){return r.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class AA{constructor(r,s){this.item=r,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class SA{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,s){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===s||s<=a.currentIndex)&&Object.is(a.trackById,r))return a;return null}remove(r){const s=r._prevDup,a=r._nextDup;return null===s?this._head=a:s._nextDup=a,null===a?this._tail=s:a._prevDup=s,null===this._head}}class Sw{constructor(){this.map=new Map}put(r){const s=r.trackById;let a=this.map.get(s);a||(a=new SA,this.map.set(s,a)),a.add(r)}get(r,s){const l=this.map.get(r);return l?l.get(r,s):null}remove(r){const s=r.trackById;return this.map.get(s).remove(r)&&this.map.delete(s),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function bw(t,r,s){const a=t.previousIndex;if(null===a)return a;let l=0;return s&&a<s.length&&(l=s[a]),a+r+l}class Rw{constructor(){}supports(r){return r instanceof Map||Qc(r)}create(){return new bA}}class bA{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let s;for(s=this._mapHead;null!==s;s=s._next)r(s)}forEachPreviousItem(r){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)r(s)}forEachChangedItem(r){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}diff(r){if(r){if(!(r instanceof Map||Qc(r)))throw new se(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(r,(a,l)=>{if(s&&s.key===l)this._maybeAddToChanges(s,a),this._appendAfter=s,s=s._next;else{const h=this._getOrCreateRecordForKey(l,a);s=this._insertBeforeOrAppend(s,h)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let a=s;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,s){if(r){const a=r._prev;return s._next=r,s._prev=a,r._prev=s,a&&(a._next=s),r===this._mapHead&&(this._mapHead=s),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(r,s){if(this._records.has(r)){const l=this._records.get(r);this._maybeAddToChanges(l,s);const h=l._prev,y=l._next;return h&&(h._next=y),y&&(y._prev=h),l._next=null,l._prev=null,l}const a=new RA(r);return this._records.set(r,a),a.currentValue=s,this._addToAdditions(a),a}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,s){Object.is(s,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=s,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,s){r instanceof Map?r.forEach(s):Object.keys(r).forEach(a=>s(r[a],a))}}class RA{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Pw(){return new kE([new Aw])}let kE=(()=>{class t{static#e=this.\u0275prov=on({token:t,providedIn:"root",factory:Pw});constructor(s){this.factories=s}static create(s,a){if(null!=a){const l=a.factories.slice();s=s.concat(l)}return new t(s)}static extend(s){return{provide:t,useFactory:a=>t.create(s,a||Pw()),deps:[[t,new Yu,new xa]]}}find(s){const a=this.factories.find(l=>l.supports(s));if(null!=a)return a;throw new se(901,!1)}}return t})();function Mw(){return new FE([new Rw])}let FE=(()=>{class t{static#e=this.\u0275prov=on({token:t,providedIn:"root",factory:Mw});constructor(s){this.factories=s}static create(s,a){if(a){const l=a.factories.slice();s=s.concat(l)}return new t(s)}static extend(s){return{provide:t,useFactory:a=>t.create(s,a||Mw()),deps:[[t,new Yu,new xa]]}}find(s){const a=this.factories.find(l=>l.supports(s));if(a)return a;throw new se(901,!1)}}return t})();const NA=pw(null,"core",[]);let OA=(()=>{class t{constructor(s){}static#e=this.\u0275fac=function(a){return new(a||t)(dt(Hf))};static#t=this.\u0275mod=ji({type:t});static#n=this.\u0275inj=In({})}return t})();function zA(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}function WA(t){const r=Hn(t);if(!r)return null;const s=new ei(r);return{get selector(){return s.selector},get type(){return s.componentType},get inputs(){return s.inputs},get outputs(){return s.outputs},get ngContentSelectors(){return s.ngContentSelectors},get isStandalone(){return r.standalone},get isSignal(){return r.signals}}}},721:(Mt,Ve,F)=>{F.d(Ve,{Ot:()=>Ee,ZF:()=>gt,hX:()=>et,z6:()=>ge});var d=F(3182),ee=F(5879),J=F(1920);class Ee{constructor(Be){return Be}}class ge{constructor(){return(0,d.C6)()}}const _e=new ee.OlP("angularfire2._apps"),Le={provide:Ee,useFactory:function Ae(se){return se&&1===se.length?se[0]:new Ee((0,d.Mq)())},deps:[[new ee.FiY,_e]]},re={provide:ge,deps:[[new ee.FiY,_e]]};function ue(se){return(Be,ke)=>{const xe=Be.runOutsideAngular(()=>se(ke));return new Ee(xe)}}let Se=(()=>{class se{constructor(ke){(0,d.KN)("angularfire",J.q4.full,"core"),(0,d.KN)("angularfire",J.q4.full,"app"),(0,d.KN)("angular",ee.q4F.full,ke.toString())}static \u0275fac=function(xe){return new(xe||se)(ee.LFG(ee.Lbi))};static \u0275mod=ee.oAB({type:se});static \u0275inj=ee.cJS({providers:[Le,re]})}return se})();function et(se,...Be){return{ngModule:Se,providers:[{provide:_e,useFactory:ue(se),multi:!0,deps:[ee.R0b,ee.zs3,J.HU,...Be]}]}}const gt=(0,J.u3)(d.ZF,!0)},7213:(Mt,Ve,F)=>{F.d(Ve,{zQ:()=>ar,rT:()=>It,f7:()=>un,L6:()=>ce,_Q:()=>ct,lh:()=>zt,Qv:()=>tt,nw:()=>pn}),F(6365);var ee=F(6814),J=F(5879),Ee=F(1920),ge=F(7217),ne=F(8645),Ae=F(2096),_e=F(5592),Le=F(2459),re=F(3019),ue=F(3093),Se=F(4664),et=F(7398),qe=F(4552);class ht extends ne.x{constructor(wt=1/0,Ce=1/0,Pe=qe.l){super(),this._bufferSize=wt,this._windowTime=Ce,this._timestampProvider=Pe,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=Ce===1/0,this._bufferSize=Math.max(1,wt),this._windowTime=Math.max(1,Ce)}next(wt){const{isStopped:Ce,_buffer:Pe,_infiniteTimeWindow:$e,_timestampProvider:Me,_windowTime:Ke}=this;Ce||(Pe.push(wt),!$e&&Pe.push(Me.now()+Ke)),this._trimBuffer(),super.next(wt)}_subscribe(wt){this._throwIfClosed(),this._trimBuffer();const Ce=this._innerSubscribe(wt),{_infiniteTimeWindow:Pe,_buffer:$e}=this,Me=$e.slice();for(let Ke=0;Ke<Me.length&&!wt.closed;Ke+=Pe?1:2)wt.next(Me[Ke]);return this._checkFinalizedStatuses(wt),Ce}_trimBuffer(){const{_bufferSize:wt,_timestampProvider:Ce,_buffer:Pe,_infiniteTimeWindow:$e}=this,Me=($e?1:2)*wt;if(wt<1/0&&Me<Pe.length&&Pe.splice(0,Pe.length-Me),!$e){const Ke=Ce.now();let lt=0;for(let Et=1;Et<Pe.length&&Pe[Et]<=Ke;Et+=2)lt=Et;lt&&Pe.splice(0,lt+1)}}}var it=F(3020);function gt(Pt,wt,Ce){let Pe,$e=!1;return Pt&&"object"==typeof Pt?({bufferSize:Pe=1/0,windowTime:wt=1/0,refCount:$e=!1,scheduler:Ce}=Pt):Pe=Pt??1/0,(0,it.B)({connector:()=>new ht(Pe,wt,Ce),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:$e})}var Xe=F(1374),Lt=F(4674);function nt(Pt,wt){return(0,Lt.m)(wt)?(0,Se.w)(()=>Pt,wt):(0,Se.w)(()=>Pt)}var se=F(5137),Be=F(2181);F(7142);const tt=new J.OlP("angularfire2.auth.use-emulator"),ce=new J.OlP("angularfire2.auth.settings"),ct=new J.OlP("angularfire2.auth.tenant-id"),It=new J.OlP("angularfire2.auth.langugage-code"),zt=new J.OlP("angularfire2.auth.use-device-language"),un=new J.OlP("angularfire.auth.persistence"),pn=(Pt,wt,Ce,Pe,$e,Me,Ke,lt)=>(0,ge.cc)(`${Pt.name}.auth`,"AngularFireAuth",Pt.name,()=>{const Et=wt.runOutsideAngular(()=>Pt.auth());if(Ce&&Et.useEmulator(...Ce),Pe&&(Et.tenantId=Pe),Et.languageCode=$e,Me&&Et.useDeviceLanguage(),Ke)for(const[yt,Mn]of Object.entries(Ke))Et.settings[yt]=Mn;return lt&&Et.setPersistence(lt),Et},[Ce,Pe,$e,Me,Ke,lt]);let ar=(()=>{class Pt{authState;idToken;user;idTokenResult;credential;constructor(Ce,Pe,$e,Me,Ke,lt,Et,yt,Mn,Jt,Nn,on){const $n=new ne.x,In=(0,Ae.of)(void 0).pipe((0,ue.Q)(Ke.outsideAngular),(0,Se.w)(()=>Me.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,6365)))),(0,et.U)(()=>(0,ge.on)(Ce,Me,Pe)),(0,et.U)(Wn=>pn(Wn,Me,lt,yt,Mn,Jt,Et,Nn)),gt({bufferSize:1,refCount:!1}));if((0,ee.PM)($e))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Ae.of)(null);else{In.pipe((0,Xe.P)()).subscribe();const Wn=In.pipe((0,Se.w)(wn=>wn.getRedirectResult().then(tr=>tr,()=>null)),Ee.iC,gt({bufferSize:1,refCount:!1})),Rt=In.pipe((0,Se.w)(wn=>new _e.y(tr=>({unsubscribe:Me.runOutsideAngular(()=>wn.onAuthStateChanged(kn=>tr.next(kn),kn=>tr.error(kn),()=>tr.complete()))})))),Jn=In.pipe((0,Se.w)(wn=>new _e.y(tr=>({unsubscribe:Me.runOutsideAngular(()=>wn.onIdTokenChanged(kn=>tr.next(kn),kn=>tr.error(kn),()=>tr.complete()))}))));this.authState=Wn.pipe(nt(Rt),(0,se.R)(Ke.outsideAngular),(0,ue.Q)(Ke.insideAngular)),this.user=Wn.pipe(nt(Jn),(0,se.R)(Ke.outsideAngular),(0,ue.Q)(Ke.insideAngular)),this.idToken=this.user.pipe((0,Se.w)(wn=>wn?(0,Le.D)(wn.getIdToken()):(0,Ae.of)(null))),this.idTokenResult=this.user.pipe((0,Se.w)(wn=>wn?(0,Le.D)(wn.getIdTokenResult()):(0,Ae.of)(null))),this.credential=(0,re.T)(Wn,$n,this.authState.pipe((0,Be.h)(wn=>!wn))).pipe((0,et.U)(wn=>wn?.user?wn:null),(0,se.R)(Ke.outsideAngular),(0,ue.Q)(Ke.insideAngular))}return(0,ge.pX)(this,In,Me,{spy:{apply:(Wn,Rt,Jn)=>{(Wn.startsWith("signIn")||Wn.startsWith("createUser"))&&Jn.then(wn=>$n.next(wn))}}})}static \u0275fac=function(Pe){return new(Pe||Pt)(J.LFG(ge.Dh),J.LFG(ge.xv,8),J.LFG(J.Lbi),J.LFG(J.R0b),J.LFG(Ee.HU),J.LFG(tt,8),J.LFG(ce,8),J.LFG(ct,8),J.LFG(It,8),J.LFG(zt,8),J.LFG(un,8),J.LFG(Ee.Rf,8))};static \u0275prov=J.Yz7({token:Pt,factory:Pt.\u0275fac,providedIn:"any"})}return Pt})()},7217:(Mt,Ve,F)=>{F.d(Ve,{Dh:()=>_e,GT:()=>ne,cc:()=>qe,hO:()=>et,on:()=>re,pX:()=>ge,xv:()=>Le});var d=F(5879),ee=F(1920),J=F(7142);const Ee=["ngOnDestroy"],ge=(Xe,Lt,nt,se={})=>new Proxy(Xe,{get:(Be,ke)=>nt.runOutsideAngular(()=>{if(Xe[ke])return se?.spy?.get&&se.spy.get(ke,Xe[ke]),Xe[ke];if(Ee.indexOf(ke)>-1)return()=>{};const xe=Lt.toPromise().then(tt=>{const ce=tt?.[ke];return"function"==typeof ce?ce.bind(tt):ce?.then?ce.then(ct=>nt.run(()=>ct)):nt.run(()=>ce)});return new Proxy(()=>{},{get:(tt,ce)=>xe[ce],apply:(tt,ce,ct)=>xe.then(It=>{const zt=It?.(...ct);return se?.spy?.apply&&se.spy.apply(ke,ct,zt),zt})})})}),ne=(Xe,Lt)=>{Lt.forEach(nt=>{Object.getOwnPropertyNames(nt.prototype||nt).forEach(se=>{Object.defineProperty(Xe.prototype,se,Object.getOwnPropertyDescriptor(nt.prototype||nt,se))})})};class Ae{constructor(Lt){return Lt}}const _e=new d.OlP("angularfire2.app.options"),Le=new d.OlP("angularfire2.app.name");function re(Xe,Lt,nt){const Be="object"==typeof nt&&nt||{};Be.name=Be.name||"string"==typeof nt&&nt||"[DEFAULT]";const xe=J.Z.apps.filter(tt=>tt&&tt.name===Be.name)[0]||Lt.runOutsideAngular(()=>J.Z.initializeApp(Xe,Be));try{if(JSON.stringify(Xe)!==JSON.stringify(xe.options)){const tt=!!module.hot;ue("error",`${xe.name} Firebase App already initialized with different options${tt?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Ae(xe)}const ue=(Xe,...Lt)=>{(0,d.X6Q)()&&typeof console<"u"&&console[Xe](...Lt)},Se={provide:Ae,useFactory:re,deps:[_e,d.R0b,[new d.FiY,Le]]};let et=(()=>{class Xe{static initializeApp(nt,se){return{ngModule:Xe,providers:[{provide:_e,useValue:nt},{provide:Le,useValue:se}]}}constructor(nt){J.Z.registerVersion("angularfire",ee.q4.full,"core"),J.Z.registerVersion("angularfire",ee.q4.full,"app-compat"),J.Z.registerVersion("angular",d.q4F.full,nt.toString())}static \u0275fac=function(se){return new(se||Xe)(d.LFG(d.Lbi))};static \u0275mod=d.oAB({type:Xe});static \u0275inj=d.cJS({providers:[Se]})}return Xe})();function qe(Xe,Lt,nt,se,Be){const[,ke,xe]=globalThis.\u0275AngularfireInstanceCache.find(tt=>tt[0]===Xe)||[];if(ke)return function ht(Xe,Lt){try{return Xe.toString()===Lt.toString()}catch{return Xe===Lt}}(Be,xe)||(gt("error",`${Lt} was already initialized on the ${nt} Firebase App with different settings.${it?" You may need to reload as Firebase is not HMR aware.":""}`),gt("warn",{is:Be,was:xe})),ke;{const tt=se();return globalThis.\u0275AngularfireInstanceCache.push([Xe,tt,Be]),tt}}const it=typeof module<"u"&&!!module.hot,gt=(Xe,...Lt)=>{(0,d.X6Q)()&&typeof console<"u"&&console[Xe](...Lt)};globalThis.\u0275AngularfireInstanceCache||=[]},7350:(Mt,Ve,F)=>{F.d(Ve,{gg:()=>Rr,ET:()=>Fe,hJ:()=>Lr,PL:()=>jo,ad:()=>to,cf:()=>Vr,Cm:()=>be,IO:()=>$i,ar:()=>Is});var d=F(1920),ee=F(5879),J=F(721),Ee=F(3182);F(4206),F(9058),F(534),F(7879),F(4537);class Se{constructor(){return(0,d.vb)("auth")}}var Sr=F(5776);class Rr{constructor(Hr){return Hr}}const Pr="firestore",ve=new ee.OlP("angularfire2.firestore-instances");function U(Bn){return(Hr,Dr)=>{const vi=Hr.runOutsideAngular(()=>Bn(Dr));return new Rr(vi)}}const x={provide:class jr{constructor(){return(0,d.vb)(Pr)}},deps:[[new ee.FiY,ve]]},N={provide:Rr,useFactory:function Y(Bn,Hr){const Dr=(0,d.JM)(Pr,Bn,Hr);return Dr&&new Rr(Dr)},deps:[[new ee.FiY,ve],J.Ot]};let oe=(()=>{class Bn{constructor(){(0,Ee.KN)("angularfire",d.q4.full,"fst")}static \u0275fac=function(vi){return new(vi||Bn)};static \u0275mod=ee.oAB({type:Bn});static \u0275inj=ee.cJS({providers:[N,x]})}return Bn})();function be(Bn,...Hr){return{ngModule:oe,providers:[{provide:ve,useFactory:U(Bn),multi:!0,deps:[ee.R0b,ee.zs3,d.HU,J.z6,[new ee.FiY,Se],[new ee.FiY,d.Rf],...Hr]}]}}const Fe=(0,d.u3)(Sr.ET,!0),Lr=(0,d.u3)(Sr.hJ,!0),jo=(0,d.u3)(Sr.PL,!0),to=(0,d.u3)(Sr.ad,!0),Vr=(0,d.u3)(Sr.cf,!0),$i=(0,d.u3)(Sr.IO,!0),Is=(0,d.u3)(Sr.ar,!0)},1920:(Mt,Ve,F)=>{F.d(Ve,{q4:()=>qe,iC:()=>zt,HU:()=>ke,Rf:()=>Xe,vb:()=>gt,JM:()=>it,u3:()=>ar});var d=F(5879),ee=F(3182),J=F(1954),ge=F(2631);const Ae=new class ne extends ge.v{}(class Ee extends J.o{constructor(Pt,wt){super(Pt,wt),this.scheduler=Pt,this.work=wt}schedule(Pt,wt=0){return wt>0?super.schedule(Pt,wt):(this.delay=wt,this.state=Pt,this.scheduler.flush(this),this)}execute(Pt,wt){return wt>0||this.closed?super.execute(Pt,wt):this._execute(Pt,wt)}requestAsyncId(Pt,wt,Ce=0){return null!=Ce&&Ce>0||null==Ce&&this.delay>0?super.requestAsyncId(Pt,wt,Ce):(Pt.flush(this),0)}});var Le=F(6321),re=F(5592),ue=F(9397),Se=F(5137),et=F(3093);const qe=new d.GfV("ANGULARFIRE2_VERSION");function it(Nt,Pt,wt){if(Pt){if(1===Pt.length)return Pt[0];const $e=Pt.filter(Me=>Me.app===wt);if(1===$e.length)return $e[0]}return wt.container.getProvider(Nt).getImmediate({optional:!0})}const gt=(Nt,Pt)=>{const wt=Pt?[Pt]:(0,ee.C6)(),Ce=[];return wt.forEach(Pe=>{Pe.container.getProvider(Nt).instances.forEach(Me=>{Ce.includes(Me)||Ce.push(Me)})}),Ce};class Xe{constructor(){return gt(Lt)}}const Lt="app-check";function nt(){}class se{zone;delegate;constructor(Pt,wt=Ae){this.zone=Pt,this.delegate=wt}now(){return this.delegate.now()}schedule(Pt,wt,Ce){const Pe=this.zone;return this.delegate.schedule(function(Me){Pe.runGuarded(()=>{Pt.apply(this,[Me])})},wt,Ce)}}class Be{zone;task=null;constructor(Pt){this.zone=Pt}call(Pt,wt){const Ce=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",nt,{},nt,nt)),wt.pipe((0,ue.b)({next:Ce,complete:Ce,error:Ce})).subscribe(Pt).add(Ce)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ke=(()=>{class Nt{ngZone;outsideAngular;insideAngular;constructor(wt){this.ngZone=wt,this.outsideAngular=wt.runOutsideAngular(()=>new se(Zone.current)),this.insideAngular=wt.run(()=>new se(Zone.current,Le.z)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(Ce){return new(Ce||Nt)(d.LFG(d.R0b))};static \u0275prov=d.Yz7({token:Nt,factory:Nt.\u0275fac,providedIn:"root"})}return Nt})();function xe(){const Nt=globalThis.\u0275AngularFireScheduler;if(!Nt)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return Nt}function ce(Nt){return xe().ngZone.run(()=>Nt())}function zt(Nt){return function un(Nt){return function(wt){return(wt=wt.lift(new Be(Nt.ngZone))).pipe((0,Se.R)(Nt.outsideAngular),(0,et.Q)(Nt.insideAngular))}}(xe())(Nt)}const pn=(Nt,Pt)=>function(){const Ce=arguments;return Pt&&setTimeout(()=>{"scheduled"===Pt.state&&Pt.invoke()},10),ce(()=>Nt.apply(void 0,Ce))},ar=(Nt,Pt)=>function(){let wt;const Ce=arguments;for(let $e=0;$e<arguments.length;$e++)"function"==typeof Ce[$e]&&(Pt&&(wt||=ce(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",nt,{},nt,nt))),Ce[$e]=pn(Ce[$e],wt));const Pe=function tt(Nt){return xe().ngZone.runOutsideAngular(()=>Nt())}(()=>Nt.apply(this,Ce));if(!Pt){if(Pe instanceof re.y){const $e=xe();return Pe.pipe((0,Se.R)($e.outsideAngular),(0,et.Q)($e.insideAngular))}return ce(()=>Pe)}return Pe instanceof re.y?Pe.pipe(zt):Pe instanceof Promise?ce(()=>new Promise(($e,Me)=>Pe.then(Ke=>ce(()=>$e(Ke)),Ke=>ce(()=>Me(Ke))))):"function"==typeof Pe&&wt?function(){return setTimeout(()=>{wt&&"scheduled"===wt.state&&wt.invoke()},10),Pe.apply(this,arguments)}:ce(()=>Pe)}},95:(Mt,Ve,F)=>{F.d(Ve,{Fj:()=>se,qu:()=>Ba,u:()=>er,sg:()=>Ot,u5:()=>Sa,JJ:()=>Xt,JL:()=>tn,F:()=>ci,On:()=>yo,YN:()=>yi,wV:()=>Yi,UX:()=>fa,Q7:()=>Gr,EJ:()=>_i,kI:()=>ct,_Y:()=>os,Kr:()=>vi});var d=F(5879),ee=F(6814),J=F(2459),Ee=F(5592),ge=F(7453),ne=F(4829),Ae=F(4564),_e=F(8251),Le=F(7400),re=F(2714),Se=F(7398);let et=(()=>{class j{constructor(M,X){this._renderer=M,this._elementRef=X,this.onChange=Ie=>{},this.onTouched=()=>{}}setProperty(M,X){this._renderer.setProperty(this._elementRef.nativeElement,M,X)}registerOnTouched(M){this.onTouched=M}registerOnChange(M){this.onChange=M}setDisabledState(M){this.setProperty("disabled",M)}static#e=this.\u0275fac=function(X){return new(X||j)(d.Y36(d.Qsj),d.Y36(d.SBq))};static#t=this.\u0275dir=d.lG2({type:j})}return j})(),qe=(()=>{class j extends et{static#e=this.\u0275fac=function(){let M;return function(Ie){return(M||(M=d.n5z(j)))(Ie||j)}}();static#t=this.\u0275dir=d.lG2({type:j,features:[d.qOj]})}return j})();const ht=new d.OlP("NgValueAccessor"),Xe={provide:ht,useExisting:(0,d.Gpc)(()=>se),multi:!0},nt=new d.OlP("CompositionEventMode");let se=(()=>{class j extends et{constructor(M,X,Ie){super(M,X),this._compositionMode=Ie,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Lt(){const j=(0,ee.q)()?(0,ee.q)().getUserAgent():"";return/android (\d+)/.test(j.toLowerCase())}())}writeValue(M){this.setProperty("value",M??"")}_handleInput(M){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(M)}_compositionStart(){this._composing=!0}_compositionEnd(M){this._composing=!1,this._compositionMode&&this.onChange(M)}static#e=this.\u0275fac=function(X){return new(X||j)(d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(nt,8))};static#t=this.\u0275dir=d.lG2({type:j,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(X,Ie){1&X&&d.NdJ("input",function(gn){return Ie._handleInput(gn.target.value)})("blur",function(){return Ie.onTouched()})("compositionstart",function(){return Ie._compositionStart()})("compositionend",function(gn){return Ie._compositionEnd(gn.target.value)})},features:[d._Bn([Xe]),d.qOj]})}return j})();function Be(j){return null==j||("string"==typeof j||Array.isArray(j))&&0===j.length}function ke(j){return null!=j&&"number"==typeof j.length}const xe=new d.OlP("NgValidators"),tt=new d.OlP("NgAsyncValidators"),ce=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class ct{static min(G){return function It(j){return G=>{if(Be(G.value)||Be(j))return null;const M=parseFloat(G.value);return!isNaN(M)&&M<j?{min:{min:j,actual:G.value}}:null}}(G)}static max(G){return function zt(j){return G=>{if(Be(G.value)||Be(j))return null;const M=parseFloat(G.value);return!isNaN(M)&&M>j?{max:{max:j,actual:G.value}}:null}}(G)}static required(G){return un(G)}static requiredTrue(G){return function pn(j){return!0===j.value?null:{required:!0}}(G)}static email(G){return function ar(j){return Be(j.value)||ce.test(j.value)?null:{email:!0}}(G)}static minLength(G){return function Nt(j){return G=>Be(G.value)||!ke(G.value)?null:G.value.length<j?{minlength:{requiredLength:j,actualLength:G.value.length}}:null}(G)}static maxLength(G){return function Pt(j){return G=>ke(G.value)&&G.value.length>j?{maxlength:{requiredLength:j,actualLength:G.value.length}}:null}(G)}static pattern(G){return function wt(j){if(!j)return Ce;let G,M;return"string"==typeof j?(M="","^"!==j.charAt(0)&&(M+="^"),M+=j,"$"!==j.charAt(j.length-1)&&(M+="$"),G=new RegExp(M)):(M=j.toString(),G=j),X=>{if(Be(X.value))return null;const Ie=X.value;return G.test(Ie)?null:{pattern:{requiredPattern:M,actualValue:Ie}}}}(G)}static nullValidator(G){return null}static compose(G){return yt(G)}static composeAsync(G){return Jt(G)}}function un(j){return Be(j.value)?{required:!0}:null}function Ce(j){return null}function Pe(j){return null!=j}function $e(j){return(0,d.QGY)(j)?(0,J.D)(j):j}function Me(j){let G={};return j.forEach(M=>{G=null!=M?{...G,...M}:G}),0===Object.keys(G).length?null:G}function Ke(j,G){return G.map(M=>M(j))}function Et(j){return j.map(G=>function lt(j){return!j.validate}(G)?G:M=>G.validate(M))}function yt(j){if(!j)return null;const G=j.filter(Pe);return 0==G.length?null:function(M){return Me(Ke(M,G))}}function Mn(j){return null!=j?yt(Et(j)):null}function Jt(j){if(!j)return null;const G=j.filter(Pe);return 0==G.length?null:function(M){return function ue(...j){const G=(0,Ae.jO)(j),{args:M,keys:X}=(0,ge.D)(j),Ie=new Ee.y(Bt=>{const{length:gn}=M;if(!gn)return void Bt.complete();const hi=new Array(gn);let Gi=gn,ps=gn;for(let lo=0;lo<gn;lo++){let Ui=!1;(0,ne.Xf)(M[lo]).subscribe((0,_e.x)(Bt,Wi=>{Ui||(Ui=!0,ps--),hi[lo]=Wi},()=>Gi--,void 0,()=>{(!Gi||!Ui)&&(ps||Bt.next(X?(0,re.n)(X,hi):hi),Bt.complete())}))}});return G?Ie.pipe((0,Le.Z)(G)):Ie}(Ke(M,G).map($e)).pipe((0,Se.U)(Me))}}function Nn(j){return null!=j?Jt(Et(j)):null}function on(j,G){return null===j?[G]:Array.isArray(j)?[...j,G]:[j,G]}function $n(j){return j._rawValidators}function In(j){return j._rawAsyncValidators}function Wn(j){return j?Array.isArray(j)?j:[j]:[]}function Rt(j,G){return Array.isArray(j)?j.includes(G):j===G}function Jn(j,G){const M=Wn(G);return Wn(j).forEach(Ie=>{Rt(M,Ie)||M.push(Ie)}),M}function wn(j,G){return Wn(G).filter(M=>!Rt(j,M))}class tr{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(G){this._rawValidators=G||[],this._composedValidatorFn=Mn(this._rawValidators)}_setAsyncValidators(G){this._rawAsyncValidators=G||[],this._composedAsyncValidatorFn=Nn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(G){this._onDestroyCallbacks.push(G)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(G=>G()),this._onDestroyCallbacks=[]}reset(G=void 0){this.control&&this.control.reset(G)}hasError(G,M){return!!this.control&&this.control.hasError(G,M)}getError(G,M){return this.control?this.control.getError(G,M):null}}class kn extends tr{get formDirective(){return null}get path(){return null}}class Un extends tr{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class nr{constructor(G){this._cd=G}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Xt=(()=>{class j extends nr{constructor(M){super(M)}static#e=this.\u0275fac=function(X){return new(X||j)(d.Y36(Un,2))};static#t=this.\u0275dir=d.lG2({type:j,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(X,Ie){2&X&&d.ekj("ng-untouched",Ie.isUntouched)("ng-touched",Ie.isTouched)("ng-pristine",Ie.isPristine)("ng-dirty",Ie.isDirty)("ng-valid",Ie.isValid)("ng-invalid",Ie.isInvalid)("ng-pending",Ie.isPending)},features:[d.qOj]})}return j})(),tn=(()=>{class j extends nr{constructor(M){super(M)}static#e=this.\u0275fac=function(X){return new(X||j)(d.Y36(kn,10))};static#t=this.\u0275dir=d.lG2({type:j,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(X,Ie){2&X&&d.ekj("ng-untouched",Ie.isUntouched)("ng-touched",Ie.isTouched)("ng-pristine",Ie.isPristine)("ng-dirty",Ie.isDirty)("ng-valid",Ie.isValid)("ng-invalid",Ie.isInvalid)("ng-pending",Ie.isPending)("ng-submitted",Ie.isSubmitted)},features:[d.qOj]})}return j})();const Rr="VALID",Pr="INVALID",jr="PENDING",mr="DISABLED";function ve(j){return(N(j)?j.validators:j)||null}function U(j,G){return(N(G)?G.asyncValidators:j)||null}function N(j){return null!=j&&!Array.isArray(j)&&"object"==typeof j}function oe(j,G,M){const X=j.controls;if(!(G?Object.keys(X):X).length)throw new d.vHH(1e3,"");if(!X[M])throw new d.vHH(1001,"")}function be(j,G,M){j._forEachChild((X,Ie)=>{if(void 0===M[Ie])throw new d.vHH(1002,"")})}class rt{constructor(G,M){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(G),this._assignAsyncValidators(M)}get validator(){return this._composedValidatorFn}set validator(G){this._rawValidators=this._composedValidatorFn=G}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(G){this._rawAsyncValidators=this._composedAsyncValidatorFn=G}get parent(){return this._parent}get valid(){return this.status===Rr}get invalid(){return this.status===Pr}get pending(){return this.status==jr}get disabled(){return this.status===mr}get enabled(){return this.status!==mr}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(G){this._assignValidators(G)}setAsyncValidators(G){this._assignAsyncValidators(G)}addValidators(G){this.setValidators(Jn(G,this._rawValidators))}addAsyncValidators(G){this.setAsyncValidators(Jn(G,this._rawAsyncValidators))}removeValidators(G){this.setValidators(wn(G,this._rawValidators))}removeAsyncValidators(G){this.setAsyncValidators(wn(G,this._rawAsyncValidators))}hasValidator(G){return Rt(this._rawValidators,G)}hasAsyncValidator(G){return Rt(this._rawAsyncValidators,G)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(G={}){this.touched=!0,this._parent&&!G.onlySelf&&this._parent.markAsTouched(G)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(G=>G.markAllAsTouched())}markAsUntouched(G={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(M=>{M.markAsUntouched({onlySelf:!0})}),this._parent&&!G.onlySelf&&this._parent._updateTouched(G)}markAsDirty(G={}){this.pristine=!1,this._parent&&!G.onlySelf&&this._parent.markAsDirty(G)}markAsPristine(G={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(M=>{M.markAsPristine({onlySelf:!0})}),this._parent&&!G.onlySelf&&this._parent._updatePristine(G)}markAsPending(G={}){this.status=jr,!1!==G.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!G.onlySelf&&this._parent.markAsPending(G)}disable(G={}){const M=this._parentMarkedDirty(G.onlySelf);this.status=mr,this.errors=null,this._forEachChild(X=>{X.disable({...G,onlySelf:!0})}),this._updateValue(),!1!==G.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...G,skipPristineCheck:M}),this._onDisabledChange.forEach(X=>X(!0))}enable(G={}){const M=this._parentMarkedDirty(G.onlySelf);this.status=Rr,this._forEachChild(X=>{X.enable({...G,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:G.emitEvent}),this._updateAncestors({...G,skipPristineCheck:M}),this._onDisabledChange.forEach(X=>X(!1))}_updateAncestors(G){this._parent&&!G.onlySelf&&(this._parent.updateValueAndValidity(G),G.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(G){this._parent=G}getRawValue(){return this.value}updateValueAndValidity(G={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Rr||this.status===jr)&&this._runAsyncValidator(G.emitEvent)),!1!==G.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!G.onlySelf&&this._parent.updateValueAndValidity(G)}_updateTreeValidity(G={emitEvent:!0}){this._forEachChild(M=>M._updateTreeValidity(G)),this.updateValueAndValidity({onlySelf:!0,emitEvent:G.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?mr:Rr}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(G){if(this.asyncValidator){this.status=jr,this._hasOwnPendingAsyncValidator=!0;const M=$e(this.asyncValidator(this));this._asyncValidationSubscription=M.subscribe(X=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(X,{emitEvent:G})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(G,M={}){this.errors=G,this._updateControlsErrors(!1!==M.emitEvent)}get(G){let M=G;return null==M||(Array.isArray(M)||(M=M.split(".")),0===M.length)?null:M.reduce((X,Ie)=>X&&X._find(Ie),this)}getError(G,M){const X=M?this.get(M):this;return X&&X.errors?X.errors[G]:null}hasError(G,M){return!!this.getError(G,M)}get root(){let G=this;for(;G._parent;)G=G._parent;return G}_updateControlsErrors(G){this.status=this._calculateStatus(),G&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(G)}_initObservables(){this.valueChanges=new d.vpe,this.statusChanges=new d.vpe}_calculateStatus(){return this._allControlsDisabled()?mr:this.errors?Pr:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(jr)?jr:this._anyControlsHaveStatus(Pr)?Pr:Rr}_anyControlsHaveStatus(G){return this._anyControls(M=>M.status===G)}_anyControlsDirty(){return this._anyControls(G=>G.dirty)}_anyControlsTouched(){return this._anyControls(G=>G.touched)}_updatePristine(G={}){this.pristine=!this._anyControlsDirty(),this._parent&&!G.onlySelf&&this._parent._updatePristine(G)}_updateTouched(G={}){this.touched=this._anyControlsTouched(),this._parent&&!G.onlySelf&&this._parent._updateTouched(G)}_registerOnCollectionChange(G){this._onCollectionChange=G}_setUpdateStrategy(G){N(G)&&null!=G.updateOn&&(this._updateOn=G.updateOn)}_parentMarkedDirty(G){return!G&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(G){return null}_assignValidators(G){this._rawValidators=Array.isArray(G)?G.slice():G,this._composedValidatorFn=function Y(j){return Array.isArray(j)?Mn(j):j||null}(this._rawValidators)}_assignAsyncValidators(G){this._rawAsyncValidators=Array.isArray(G)?G.slice():G,this._composedAsyncValidatorFn=function x(j){return Array.isArray(j)?Nn(j):j||null}(this._rawAsyncValidators)}}class dt extends rt{constructor(G,M,X){super(ve(M),U(X,M)),this.controls=G,this._initObservables(),this._setUpdateStrategy(M),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(G,M){return this.controls[G]?this.controls[G]:(this.controls[G]=M,M.setParent(this),M._registerOnCollectionChange(this._onCollectionChange),M)}addControl(G,M,X={}){this.registerControl(G,M),this.updateValueAndValidity({emitEvent:X.emitEvent}),this._onCollectionChange()}removeControl(G,M={}){this.controls[G]&&this.controls[G]._registerOnCollectionChange(()=>{}),delete this.controls[G],this.updateValueAndValidity({emitEvent:M.emitEvent}),this._onCollectionChange()}setControl(G,M,X={}){this.controls[G]&&this.controls[G]._registerOnCollectionChange(()=>{}),delete this.controls[G],M&&this.registerControl(G,M),this.updateValueAndValidity({emitEvent:X.emitEvent}),this._onCollectionChange()}contains(G){return this.controls.hasOwnProperty(G)&&this.controls[G].enabled}setValue(G,M={}){be(this,0,G),Object.keys(G).forEach(X=>{oe(this,!0,X),this.controls[X].setValue(G[X],{onlySelf:!0,emitEvent:M.emitEvent})}),this.updateValueAndValidity(M)}patchValue(G,M={}){null!=G&&(Object.keys(G).forEach(X=>{const Ie=this.controls[X];Ie&&Ie.patchValue(G[X],{onlySelf:!0,emitEvent:M.emitEvent})}),this.updateValueAndValidity(M))}reset(G={},M={}){this._forEachChild((X,Ie)=>{X.reset(G?G[Ie]:null,{onlySelf:!0,emitEvent:M.emitEvent})}),this._updatePristine(M),this._updateTouched(M),this.updateValueAndValidity(M)}getRawValue(){return this._reduceChildren({},(G,M,X)=>(G[X]=M.getRawValue(),G))}_syncPendingControls(){let G=this._reduceChildren(!1,(M,X)=>!!X._syncPendingControls()||M);return G&&this.updateValueAndValidity({onlySelf:!0}),G}_forEachChild(G){Object.keys(this.controls).forEach(M=>{const X=this.controls[M];X&&G(X,M)})}_setUpControls(){this._forEachChild(G=>{G.setParent(this),G._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(G){for(const[M,X]of Object.entries(this.controls))if(this.contains(M)&&G(X))return!0;return!1}_reduceValue(){return this._reduceChildren({},(M,X,Ie)=>((X.enabled||this.disabled)&&(M[Ie]=X.value),M))}_reduceChildren(G,M){let X=G;return this._forEachChild((Ie,Bt)=>{X=M(X,Ie,Bt)}),X}_allControlsDisabled(){for(const G of Object.keys(this.controls))if(this.controls[G].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(G){return this.controls.hasOwnProperty(G)?this.controls[G]:null}}class Zt extends dt{}const we=new d.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>me}),me="always";function De(j,G){return[...G.path,j]}function fe(j,G,M=me){Vt(j,G),G.valueAccessor.writeValue(j.value),(j.disabled||"always"===M)&&G.valueAccessor.setDisabledState?.(j.disabled),function Qt(j,G){G.valueAccessor.registerOnChange(M=>{j._pendingValue=M,j._pendingChange=!0,j._pendingDirty=!0,"change"===j.updateOn&&Sn(j,G)})}(j,G),function Mr(j,G){const M=(X,Ie)=>{G.valueAccessor.writeValue(X),Ie&&G.viewToModelUpdate(X)};j.registerOnChange(M),G._registerOnDestroy(()=>{j._unregisterOnChange(M)})}(j,G),function Xn(j,G){G.valueAccessor.registerOnTouched(()=>{j._pendingTouched=!0,"blur"===j.updateOn&&j._pendingChange&&Sn(j,G),"submit"!==j.updateOn&&j.markAsTouched()})}(j,G),function Ge(j,G){if(G.valueAccessor.setDisabledState){const M=X=>{G.valueAccessor.setDisabledState(X)};j.registerOnDisabledChange(M),G._registerOnDestroy(()=>{j._unregisterOnDisabledChange(M)})}}(j,G)}function pe(j,G,M=!0){const X=()=>{};G.valueAccessor&&(G.valueAccessor.registerOnChange(X),G.valueAccessor.registerOnTouched(X)),st(j,G),j&&(G._invokeOnDestroyCallbacks(),j._registerOnCollectionChange(()=>{}))}function Fe(j,G){j.forEach(M=>{M.registerOnValidatorChange&&M.registerOnValidatorChange(G)})}function Vt(j,G){const M=$n(j);null!==G.validator?j.setValidators(on(M,G.validator)):"function"==typeof M&&j.setValidators([M]);const X=In(j);null!==G.asyncValidator?j.setAsyncValidators(on(X,G.asyncValidator)):"function"==typeof X&&j.setAsyncValidators([X]);const Ie=()=>j.updateValueAndValidity();Fe(G._rawValidators,Ie),Fe(G._rawAsyncValidators,Ie)}function st(j,G){let M=!1;if(null!==j){if(null!==G.validator){const Ie=$n(j);if(Array.isArray(Ie)&&Ie.length>0){const Bt=Ie.filter(gn=>gn!==G.validator);Bt.length!==Ie.length&&(M=!0,j.setValidators(Bt))}}if(null!==G.asyncValidator){const Ie=In(j);if(Array.isArray(Ie)&&Ie.length>0){const Bt=Ie.filter(gn=>gn!==G.asyncValidator);Bt.length!==Ie.length&&(M=!0,j.setAsyncValidators(Bt))}}}const X=()=>{};return Fe(G._rawValidators,X),Fe(G._rawAsyncValidators,X),M}function Sn(j,G){j._pendingDirty&&j.markAsDirty(),j.setValue(j._pendingValue,{emitModelToViewChange:!1}),G.viewToModelUpdate(j._pendingValue),j._pendingChange=!1}function Lr(j,G){Vt(j,G)}function Kr(j,G){if(!j.hasOwnProperty("model"))return!1;const M=j.model;return!!M.isFirstChange()||!Object.is(G,M.currentValue)}function Rs(j,G){j._syncPendingControls(),G.forEach(M=>{const X=M.control;"submit"===X.updateOn&&X._pendingChange&&(M.viewToModelUpdate(X._pendingValue),X._pendingChange=!1)})}function Fi(j,G){if(!G)return null;let M,X,Ie;return Array.isArray(G),G.forEach(Bt=>{Bt.constructor===se?M=Bt:function ni(j){return Object.getPrototypeOf(j.constructor)===qe}(Bt)?X=Bt:Ie=Bt}),Ie||X||M||null}const zs={provide:kn,useExisting:(0,d.Gpc)(()=>ci)},Nr=(()=>Promise.resolve())();let ci=(()=>{class j extends kn{constructor(M,X,Ie){super(),this.callSetDisabledState=Ie,this.submitted=!1,this._directives=new Set,this.ngSubmit=new d.vpe,this.form=new dt({},Mn(M),Nn(X))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(M){Nr.then(()=>{const X=this._findContainer(M.path);M.control=X.registerControl(M.name,M.control),fe(M.control,M,this.callSetDisabledState),M.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(M)})}getControl(M){return this.form.get(M.path)}removeControl(M){Nr.then(()=>{const X=this._findContainer(M.path);X&&X.removeControl(M.name),this._directives.delete(M)})}addFormGroup(M){Nr.then(()=>{const X=this._findContainer(M.path),Ie=new dt({});Lr(Ie,M),X.registerControl(M.name,Ie),Ie.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(M){Nr.then(()=>{const X=this._findContainer(M.path);X&&X.removeControl(M.name)})}getFormGroup(M){return this.form.get(M.path)}updateModel(M,X){Nr.then(()=>{this.form.get(M.path).setValue(X)})}setValue(M){this.control.setValue(M)}onSubmit(M){return this.submitted=!0,Rs(this.form,this._directives),this.ngSubmit.emit(M),"dialog"===M?.target?.method}onReset(){this.resetForm()}resetForm(M=void 0){this.form.reset(M),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(M){return M.pop(),M.length?this.form.get(M):this.form}static#e=this.\u0275fac=function(X){return new(X||j)(d.Y36(xe,10),d.Y36(tt,10),d.Y36(we,8))};static#t=this.\u0275dir=d.lG2({type:j,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(X,Ie){1&X&&d.NdJ("submit",function(gn){return Ie.onSubmit(gn)})("reset",function(){return Ie.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([zs]),d.qOj]})}return j})();function Gs(j,G){const M=j.indexOf(G);M>-1&&j.splice(M,1)}function Es(j){return"object"==typeof j&&null!==j&&2===Object.keys(j).length&&"value"in j&&"disabled"in j}const Qi=class extends rt{constructor(G=null,M,X){super(ve(M),U(X,M)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(G),this._setUpdateStrategy(M),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),N(M)&&(M.nonNullable||M.initialValueIsDefault)&&(this.defaultValue=Es(G)?G.value:G)}setValue(G,M={}){this.value=this._pendingValue=G,this._onChange.length&&!1!==M.emitModelToViewChange&&this._onChange.forEach(X=>X(this.value,!1!==M.emitViewToModelChange)),this.updateValueAndValidity(M)}patchValue(G,M={}){this.setValue(G,M)}reset(G=this.defaultValue,M={}){this._applyFormState(G),this.markAsPristine(M),this.markAsUntouched(M),this.setValue(this.value,M),this._pendingChange=!1}_updateValue(){}_anyControls(G){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(G){this._onChange.push(G)}_unregisterOnChange(G){Gs(this._onChange,G)}registerOnDisabledChange(G){this._onDisabledChange.push(G)}_unregisterOnDisabledChange(G){Gs(this._onDisabledChange,G)}_forEachChild(G){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(G){Es(G)?(this.value=this._pendingValue=G.value,G.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=G}},_o={provide:Un,useExisting:(0,d.Gpc)(()=>yo)},ji=(()=>Promise.resolve())();let yo=(()=>{class j extends Un{constructor(M,X,Ie,Bt,gn,hi){super(),this._changeDetectorRef=gn,this.callSetDisabledState=hi,this.control=new Qi,this._registered=!1,this.name="",this.update=new d.vpe,this._parent=M,this._setValidators(X),this._setAsyncValidators(Ie),this.valueAccessor=Fi(0,Bt)}ngOnChanges(M){if(this._checkForErrors(),!this._registered||"name"in M){if(this._registered&&(this._checkName(),this.formDirective)){const X=M.name.previousValue;this.formDirective.removeControl({name:X,path:this._getPath(X)})}this._setUpControl()}"isDisabled"in M&&this._updateDisabled(M),Kr(M,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(M){this.viewModel=M,this.update.emit(M)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){fe(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(M){ji.then(()=>{this.control.setValue(M,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(M){const X=M.isDisabled.currentValue,Ie=0!==X&&(0,d.VuI)(X);ji.then(()=>{Ie&&!this.control.disabled?this.control.disable():!Ie&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(M){return this._parent?De(M,this._parent):[M]}static#e=this.\u0275fac=function(X){return new(X||j)(d.Y36(kn,9),d.Y36(xe,10),d.Y36(tt,10),d.Y36(ht,10),d.Y36(d.sBO,8),d.Y36(we,8))};static#t=this.\u0275dir=d.lG2({type:j,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[d._Bn([_o]),d.qOj,d.TTD]})}return j})(),os=(()=>{class j{static#e=this.\u0275fac=function(X){return new(X||j)};static#t=this.\u0275dir=d.lG2({type:j,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return j})();const ro={provide:ht,useExisting:(0,d.Gpc)(()=>Yi),multi:!0};let Yi=(()=>{class j extends qe{writeValue(M){this.setProperty("value",M??"")}registerOnChange(M){this.onChange=X=>{M(""==X?null:parseFloat(X))}}static#e=this.\u0275fac=function(){let M;return function(Ie){return(M||(M=d.n5z(j)))(Ie||j)}}();static#t=this.\u0275dir=d.lG2({type:j,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(X,Ie){1&X&&d.NdJ("input",function(gn){return Ie.onChange(gn.target.value)})("blur",function(){return Ie.onTouched()})},features:[d._Bn([ro]),d.qOj]})}return j})(),Vr=(()=>{class j{static#e=this.\u0275fac=function(X){return new(X||j)};static#t=this.\u0275mod=d.oAB({type:j});static#n=this.\u0275inj=d.cJS({})}return j})();const Ln=new d.OlP("NgModelWithFormControlWarning"),Er={provide:kn,useExisting:(0,d.Gpc)(()=>Ot)};let Ot=(()=>{class j extends kn{constructor(M,X,Ie){super(),this.callSetDisabledState=Ie,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new d.vpe,this._setValidators(M),this._setAsyncValidators(X)}ngOnChanges(M){this._checkFormPresent(),M.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(st(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(M){const X=this.form.get(M.path);return fe(X,M,this.callSetDisabledState),X.updateValueAndValidity({emitEvent:!1}),this.directives.push(M),X}getControl(M){return this.form.get(M.path)}removeControl(M){pe(M.control||null,M,!1),function mo(j,G){const M=j.indexOf(G);M>-1&&j.splice(M,1)}(this.directives,M)}addFormGroup(M){this._setUpFormContainer(M)}removeFormGroup(M){this._cleanUpFormContainer(M)}getFormGroup(M){return this.form.get(M.path)}addFormArray(M){this._setUpFormContainer(M)}removeFormArray(M){this._cleanUpFormContainer(M)}getFormArray(M){return this.form.get(M.path)}updateModel(M,X){this.form.get(M.path).setValue(X)}onSubmit(M){return this.submitted=!0,Rs(this.form,this.directives),this.ngSubmit.emit(M),"dialog"===M?.target?.method}onReset(){this.resetForm()}resetForm(M=void 0){this.form.reset(M),this.submitted=!1}_updateDomValue(){this.directives.forEach(M=>{const X=M.control,Ie=this.form.get(M.path);X!==Ie&&(pe(X||null,M),(j=>j instanceof Qi)(Ie)&&(fe(Ie,M,this.callSetDisabledState),M.control=Ie))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(M){const X=this.form.get(M.path);Lr(X,M),X.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(M){if(this.form){const X=this.form.get(M.path);X&&function ki(j,G){return st(j,G)}(X,M)&&X.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Vt(this.form,this),this._oldForm&&st(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(X){return new(X||j)(d.Y36(xe,10),d.Y36(tt,10),d.Y36(we,8))};static#t=this.\u0275dir=d.lG2({type:j,selectors:[["","formGroup",""]],hostBindings:function(X,Ie){1&X&&d.NdJ("submit",function(gn){return Ie.onSubmit(gn)})("reset",function(){return Ie.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([Er]),d.qOj,d.TTD]})}return j})();const Vi={provide:Un,useExisting:(0,d.Gpc)(()=>er)};let er=(()=>{class j extends Un{set isDisabled(M){}static#e=this._ngModelWarningSentOnce=!1;constructor(M,X,Ie,Bt,gn){super(),this._ngModelWarningConfig=gn,this._added=!1,this.name=null,this.update=new d.vpe,this._ngModelWarningSent=!1,this._parent=M,this._setValidators(X),this._setAsyncValidators(Ie),this.valueAccessor=Fi(0,Bt)}ngOnChanges(M){this._added||this._setUpControl(),Kr(M,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(M){this.viewModel=M,this.update.emit(M)}get path(){return De(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static#t=this.\u0275fac=function(X){return new(X||j)(d.Y36(kn,13),d.Y36(xe,10),d.Y36(tt,10),d.Y36(ht,10),d.Y36(Ln,8))};static#n=this.\u0275dir=d.lG2({type:j,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[d._Bn([Vi]),d.qOj,d.TTD]})}return j})();const zi={provide:ht,useExisting:(0,d.Gpc)(()=>_i),multi:!0};function fs(j,G){return null==j?`${G}`:(G&&"object"==typeof G&&(G="Object"),`${j}: ${G}`.slice(0,50))}let _i=(()=>{class j extends qe{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(M){this._compareWith=M}writeValue(M){this.value=M;const Ie=fs(this._getOptionId(M),M);this.setProperty("value",Ie)}registerOnChange(M){this.onChange=X=>{this.value=this._getOptionValue(X),M(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(M){for(const X of this._optionMap.keys())if(this._compareWith(this._optionMap.get(X),M))return X;return null}_getOptionValue(M){const X=function an(j){return j.split(":")[0]}(M);return this._optionMap.has(X)?this._optionMap.get(X):M}static#e=this.\u0275fac=function(){let M;return function(Ie){return(M||(M=d.n5z(j)))(Ie||j)}}();static#t=this.\u0275dir=d.lG2({type:j,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(X,Ie){1&X&&d.NdJ("change",function(gn){return Ie.onChange(gn.target.value)})("blur",function(){return Ie.onTouched()})},inputs:{compareWith:"compareWith"},features:[d._Bn([zi]),d.qOj]})}return j})(),yi=(()=>{class j{constructor(M,X,Ie){this._element=M,this._renderer=X,this._select=Ie,this._select&&(this.id=this._select._registerOption())}set ngValue(M){null!=this._select&&(this._select._optionMap.set(this.id,M),this._setElementValue(fs(this.id,M)),this._select.writeValue(this._select.value))}set value(M){this._setElementValue(M),this._select&&this._select.writeValue(this._select.value)}_setElementValue(M){this._renderer.setProperty(this._element.nativeElement,"value",M)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(X){return new(X||j)(d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(_i,9))};static#t=this.\u0275dir=d.lG2({type:j,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return j})();const Is={provide:ht,useExisting:(0,d.Gpc)(()=>Dr),multi:!0};function $r(j,G){return null==j?`${G}`:("string"==typeof G&&(G=`'${G}'`),G&&"object"==typeof G&&(G="Object"),`${j}: ${G}`.slice(0,50))}let Dr=(()=>{class j extends qe{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(M){this._compareWith=M}writeValue(M){let X;if(this.value=M,Array.isArray(M)){const Ie=M.map(Bt=>this._getOptionId(Bt));X=(Bt,gn)=>{Bt._setSelected(Ie.indexOf(gn.toString())>-1)}}else X=(Ie,Bt)=>{Ie._setSelected(!1)};this._optionMap.forEach(X)}registerOnChange(M){this.onChange=X=>{const Ie=[],Bt=X.selectedOptions;if(void 0!==Bt){const gn=Bt;for(let hi=0;hi<gn.length;hi++){const ps=this._getOptionValue(gn[hi].value);Ie.push(ps)}}else{const gn=X.options;for(let hi=0;hi<gn.length;hi++){const Gi=gn[hi];if(Gi.selected){const ps=this._getOptionValue(Gi.value);Ie.push(ps)}}}this.value=Ie,M(Ie)}}_registerOption(M){const X=(this._idCounter++).toString();return this._optionMap.set(X,M),X}_getOptionId(M){for(const X of this._optionMap.keys())if(this._compareWith(this._optionMap.get(X)._value,M))return X;return null}_getOptionValue(M){const X=function Bn(j){return j.split(":")[0]}(M);return this._optionMap.has(X)?this._optionMap.get(X)._value:M}static#e=this.\u0275fac=function(){let M;return function(Ie){return(M||(M=d.n5z(j)))(Ie||j)}}();static#t=this.\u0275dir=d.lG2({type:j,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(X,Ie){1&X&&d.NdJ("change",function(gn){return Ie.onChange(gn.target)})("blur",function(){return Ie.onTouched()})},inputs:{compareWith:"compareWith"},features:[d._Bn([Is]),d.qOj]})}return j})(),vi=(()=>{class j{constructor(M,X,Ie){this._element=M,this._renderer=X,this._select=Ie,this._select&&(this.id=this._select._registerOption(this))}set ngValue(M){null!=this._select&&(this._value=M,this._setElementValue($r(this.id,M)),this._select.writeValue(this._select.value))}set value(M){this._select?(this._value=M,this._setElementValue($r(this.id,M)),this._select.writeValue(this._select.value)):this._setElementValue(M)}_setElementValue(M){this._renderer.setProperty(this._element.nativeElement,"value",M)}_setSelected(M){this._renderer.setProperty(this._element.nativeElement,"selected",M)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(X){return new(X||j)(d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(Dr,9))};static#t=this.\u0275dir=d.lG2({type:j,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return j})(),Qr=(()=>{class j{constructor(){this._validator=Ce}ngOnChanges(M){if(this.inputName in M){const X=this.normalizeInput(M[this.inputName].currentValue);this._enabled=this.enabled(X),this._validator=this._enabled?this.createValidator(X):Ce,this._onChange&&this._onChange()}}validate(M){return this._validator(M)}registerOnValidatorChange(M){this._onChange=M}enabled(M){return null!=M}static#e=this.\u0275fac=function(X){return new(X||j)};static#t=this.\u0275dir=d.lG2({type:j,features:[d.TTD]})}return j})();const bo={provide:xe,useExisting:(0,d.Gpc)(()=>Gr),multi:!0};let Gr=(()=>{class j extends Qr{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=d.VuI,this.createValidator=M=>un}enabled(M){return M}static#e=this.\u0275fac=function(){let M;return function(Ie){return(M||(M=d.n5z(j)))(Ie||j)}}();static#t=this.\u0275dir=d.lG2({type:j,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(X,Ie){2&X&&d.uIk("required",Ie._enabled?"":null)},inputs:{required:"required"},features:[d._Bn([bo]),d.qOj]})}return j})(),Eo=(()=>{class j{static#e=this.\u0275fac=function(X){return new(X||j)};static#t=this.\u0275mod=d.oAB({type:j});static#n=this.\u0275inj=d.cJS({imports:[Vr]})}return j})();class Po extends rt{constructor(G,M,X){super(ve(M),U(X,M)),this.controls=G,this._initObservables(),this._setUpdateStrategy(M),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(G){return this.controls[this._adjustIndex(G)]}push(G,M={}){this.controls.push(G),this._registerControl(G),this.updateValueAndValidity({emitEvent:M.emitEvent}),this._onCollectionChange()}insert(G,M,X={}){this.controls.splice(G,0,M),this._registerControl(M),this.updateValueAndValidity({emitEvent:X.emitEvent})}removeAt(G,M={}){let X=this._adjustIndex(G);X<0&&(X=0),this.controls[X]&&this.controls[X]._registerOnCollectionChange(()=>{}),this.controls.splice(X,1),this.updateValueAndValidity({emitEvent:M.emitEvent})}setControl(G,M,X={}){let Ie=this._adjustIndex(G);Ie<0&&(Ie=0),this.controls[Ie]&&this.controls[Ie]._registerOnCollectionChange(()=>{}),this.controls.splice(Ie,1),M&&(this.controls.splice(Ie,0,M),this._registerControl(M)),this.updateValueAndValidity({emitEvent:X.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(G,M={}){be(this,0,G),G.forEach((X,Ie)=>{oe(this,!1,Ie),this.at(Ie).setValue(X,{onlySelf:!0,emitEvent:M.emitEvent})}),this.updateValueAndValidity(M)}patchValue(G,M={}){null!=G&&(G.forEach((X,Ie)=>{this.at(Ie)&&this.at(Ie).patchValue(X,{onlySelf:!0,emitEvent:M.emitEvent})}),this.updateValueAndValidity(M))}reset(G=[],M={}){this._forEachChild((X,Ie)=>{X.reset(G[Ie],{onlySelf:!0,emitEvent:M.emitEvent})}),this._updatePristine(M),this._updateTouched(M),this.updateValueAndValidity(M)}getRawValue(){return this.controls.map(G=>G.getRawValue())}clear(G={}){this.controls.length<1||(this._forEachChild(M=>M._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:G.emitEvent}))}_adjustIndex(G){return G<0?G+this.length:G}_syncPendingControls(){let G=this.controls.reduce((M,X)=>!!X._syncPendingControls()||M,!1);return G&&this.updateValueAndValidity({onlySelf:!0}),G}_forEachChild(G){this.controls.forEach((M,X)=>{G(M,X)})}_updateValue(){this.value=this.controls.filter(G=>G.enabled||this.disabled).map(G=>G.value)}_anyControls(G){return this.controls.some(M=>M.enabled&&G(M))}_setUpControls(){this._forEachChild(G=>this._registerControl(G))}_allControlsDisabled(){for(const G of this.controls)if(G.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(G){G.setParent(this),G._registerOnCollectionChange(this._onCollectionChange)}_find(G){return this.at(G)??null}}function xs(j){return!!j&&(void 0!==j.asyncValidators||void 0!==j.validators||void 0!==j.updateOn)}let Ba=(()=>{class j{constructor(){this.useNonNullable=!1}get nonNullable(){const M=new j;return M.useNonNullable=!0,M}group(M,X=null){const Ie=this._reduceControls(M);let Bt={};return xs(X)?Bt=X:null!==X&&(Bt.validators=X.validator,Bt.asyncValidators=X.asyncValidator),new dt(Ie,Bt)}record(M,X=null){const Ie=this._reduceControls(M);return new Zt(Ie,X)}control(M,X,Ie){let Bt={};return this.useNonNullable?(xs(X)?Bt=X:(Bt.validators=X,Bt.asyncValidators=Ie),new Qi(M,{...Bt,nonNullable:!0})):new Qi(M,X,Ie)}array(M,X,Ie){const Bt=M.map(gn=>this._createControl(gn));return new Po(Bt,X,Ie)}_reduceControls(M){const X={};return Object.keys(M).forEach(Ie=>{X[Ie]=this._createControl(M[Ie])}),X}_createControl(M){return M instanceof Qi||M instanceof rt?M:Array.isArray(M)?this.control(M[0],M.length>1?M[1]:null,M.length>2?M[2]:null):this.control(M)}static#e=this.\u0275fac=function(X){return new(X||j)};static#t=this.\u0275prov=d.Yz7({token:j,factory:j.\u0275fac,providedIn:"root"})}return j})(),Sa=(()=>{class j{static withConfig(M){return{ngModule:j,providers:[{provide:we,useValue:M.callSetDisabledState??me}]}}static#e=this.\u0275fac=function(X){return new(X||j)};static#t=this.\u0275mod=d.oAB({type:j});static#n=this.\u0275inj=d.cJS({imports:[Eo]})}return j})(),fa=(()=>{class j{static withConfig(M){return{ngModule:j,providers:[{provide:Ln,useValue:M.warnOnNgModelWithFormControl??"always"},{provide:we,useValue:M.callSetDisabledState??me}]}}static#e=this.\u0275fac=function(X){return new(X||j)};static#t=this.\u0275mod=d.oAB({type:j});static#n=this.\u0275inj=d.cJS({imports:[Eo]})}return j})()},6593:(Mt,Ve,F)=>{F.d(Ve,{Dx:()=>Un,H7:()=>bi,b2:()=>Rt,q6:()=>on,se:()=>ce});var d=F(5879),ee=F(6814);class J extends ee.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Ee extends J{static makeCurrent(){(0,ee.HT)(new Ee)}onAndCancel(U,x,N){return U.addEventListener(x,N),()=>{U.removeEventListener(x,N)}}dispatchEvent(U,x){U.dispatchEvent(x)}remove(U){U.parentNode&&U.parentNode.removeChild(U)}createElement(U,x){return(x=x||this.getDefaultDocument()).createElement(U)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(U){return U.nodeType===Node.ELEMENT_NODE}isShadowRoot(U){return U instanceof DocumentFragment}getGlobalEventTarget(U,x){return"window"===x?window:"document"===x?U:"body"===x?U.body:null}getBaseHref(U){const x=function ne(){return ge=ge||document.querySelector("base"),ge?ge.getAttribute("href"):null}();return null==x?null:function _e(Y){Ae=Ae||document.createElement("a"),Ae.setAttribute("href",Y);const U=Ae.pathname;return"/"===U.charAt(0)?U:`/${U}`}(x)}resetBaseElement(){ge=null}getUserAgent(){return window.navigator.userAgent}getCookie(U){return(0,ee.Mx)(document.cookie,U)}}let Ae,ge=null,re=(()=>{class Y{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(N){return new(N||Y)};static#t=this.\u0275prov=d.Yz7({token:Y,factory:Y.\u0275fac})}return Y})();const ue=new d.OlP("EventManagerPlugins");let Se=(()=>{class Y{constructor(x,N){this._zone=N,this._eventNameToPlugin=new Map,x.forEach(oe=>{oe.manager=this}),this._plugins=x.slice().reverse()}addEventListener(x,N,oe){return this._findPluginFor(N).addEventListener(x,N,oe)}getZone(){return this._zone}_findPluginFor(x){let N=this._eventNameToPlugin.get(x);if(N)return N;if(N=this._plugins.find(be=>be.supports(x)),!N)throw new d.vHH(5101,!1);return this._eventNameToPlugin.set(x,N),N}static#e=this.\u0275fac=function(N){return new(N||Y)(d.LFG(ue),d.LFG(d.R0b))};static#t=this.\u0275prov=d.Yz7({token:Y,factory:Y.\u0275fac})}return Y})();class et{constructor(U){this._doc=U}}const qe="ng-app-id";let ht=(()=>{class Y{constructor(x,N,oe,be={}){this.doc=x,this.appId=N,this.nonce=oe,this.platformId=be,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,ee.PM)(be),this.resetHostNodes()}addStyles(x){for(const N of x)1===this.changeUsageCount(N,1)&&this.onStyleAdded(N)}removeStyles(x){for(const N of x)this.changeUsageCount(N,-1)<=0&&this.onStyleRemoved(N)}ngOnDestroy(){const x=this.styleNodesInDOM;x&&(x.forEach(N=>N.remove()),x.clear());for(const N of this.getAllStyles())this.onStyleRemoved(N);this.resetHostNodes()}addHost(x){this.hostNodes.add(x);for(const N of this.getAllStyles())this.addStyleToHost(x,N)}removeHost(x){this.hostNodes.delete(x)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(x){for(const N of this.hostNodes)this.addStyleToHost(N,x)}onStyleRemoved(x){const N=this.styleRef;N.get(x)?.elements?.forEach(oe=>oe.remove()),N.delete(x)}collectServerRenderedStyles(){const x=this.doc.head?.querySelectorAll(`style[${qe}="${this.appId}"]`);if(x?.length){const N=new Map;return x.forEach(oe=>{null!=oe.textContent&&N.set(oe.textContent,oe)}),N}return null}changeUsageCount(x,N){const oe=this.styleRef;if(oe.has(x)){const be=oe.get(x);return be.usage+=N,be.usage}return oe.set(x,{usage:N,elements:[]}),N}getStyleElement(x,N){const oe=this.styleNodesInDOM,be=oe?.get(N);if(be?.parentNode===x)return oe.delete(N),be.removeAttribute(qe),be;{const rt=this.doc.createElement("style");return this.nonce&&rt.setAttribute("nonce",this.nonce),rt.textContent=N,this.platformIsServer&&rt.setAttribute(qe,this.appId),rt}}addStyleToHost(x,N){const oe=this.getStyleElement(x,N);x.appendChild(oe);const be=this.styleRef,rt=be.get(N)?.elements;rt?rt.push(oe):be.set(N,{elements:[oe],usage:1})}resetHostNodes(){const x=this.hostNodes;x.clear(),x.add(this.doc.head)}static#e=this.\u0275fac=function(N){return new(N||Y)(d.LFG(ee.K0),d.LFG(d.AFp),d.LFG(d.Ojb,8),d.LFG(d.Lbi))};static#t=this.\u0275prov=d.Yz7({token:Y,factory:Y.\u0275fac})}return Y})();const it={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},gt=/%COMP%/g,Be=new d.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function tt(Y,U){return U.map(x=>x.replace(gt,Y))}let ce=(()=>{class Y{constructor(x,N,oe,be,rt,dt,Ct,St=null){this.eventManager=x,this.sharedStylesHost=N,this.appId=oe,this.removeStylesOnCompDestroy=be,this.doc=rt,this.platformId=dt,this.ngZone=Ct,this.nonce=St,this.rendererByCompId=new Map,this.platformIsServer=(0,ee.PM)(dt),this.defaultRenderer=new ct(x,rt,Ct,this.platformIsServer)}createRenderer(x,N){if(!x||!N)return this.defaultRenderer;this.platformIsServer&&N.encapsulation===d.ifc.ShadowDom&&(N={...N,encapsulation:d.ifc.Emulated});const oe=this.getOrCreateRenderer(x,N);return oe instanceof Nt?oe.applyToHost(x):oe instanceof ar&&oe.applyStyles(),oe}getOrCreateRenderer(x,N){const oe=this.rendererByCompId;let be=oe.get(N.id);if(!be){const rt=this.doc,dt=this.ngZone,Ct=this.eventManager,St=this.sharedStylesHost,Zt=this.removeStylesOnCompDestroy,On=this.platformIsServer;switch(N.encapsulation){case d.ifc.Emulated:be=new Nt(Ct,St,N,this.appId,Zt,rt,dt,On);break;case d.ifc.ShadowDom:return new pn(Ct,St,x,N,rt,dt,this.nonce,On);default:be=new ar(Ct,St,N,Zt,rt,dt,On)}oe.set(N.id,be)}return be}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(N){return new(N||Y)(d.LFG(Se),d.LFG(ht),d.LFG(d.AFp),d.LFG(Be),d.LFG(ee.K0),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(d.Ojb))};static#t=this.\u0275prov=d.Yz7({token:Y,factory:Y.\u0275fac})}return Y})();class ct{constructor(U,x,N,oe){this.eventManager=U,this.doc=x,this.ngZone=N,this.platformIsServer=oe,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(U,x){return x?this.doc.createElementNS(it[x]||x,U):this.doc.createElement(U)}createComment(U){return this.doc.createComment(U)}createText(U){return this.doc.createTextNode(U)}appendChild(U,x){(un(U)?U.content:U).appendChild(x)}insertBefore(U,x,N){U&&(un(U)?U.content:U).insertBefore(x,N)}removeChild(U,x){U&&U.removeChild(x)}selectRootElement(U,x){let N="string"==typeof U?this.doc.querySelector(U):U;if(!N)throw new d.vHH(-5104,!1);return x||(N.textContent=""),N}parentNode(U){return U.parentNode}nextSibling(U){return U.nextSibling}setAttribute(U,x,N,oe){if(oe){x=oe+":"+x;const be=it[oe];be?U.setAttributeNS(be,x,N):U.setAttribute(x,N)}else U.setAttribute(x,N)}removeAttribute(U,x,N){if(N){const oe=it[N];oe?U.removeAttributeNS(oe,x):U.removeAttribute(`${N}:${x}`)}else U.removeAttribute(x)}addClass(U,x){U.classList.add(x)}removeClass(U,x){U.classList.remove(x)}setStyle(U,x,N,oe){oe&(d.JOm.DashCase|d.JOm.Important)?U.style.setProperty(x,N,oe&d.JOm.Important?"important":""):U.style[x]=N}removeStyle(U,x,N){N&d.JOm.DashCase?U.style.removeProperty(x):U.style[x]=""}setProperty(U,x,N){U[x]=N}setValue(U,x){U.nodeValue=x}listen(U,x,N){if("string"==typeof U&&!(U=(0,ee.q)().getGlobalEventTarget(this.doc,U)))throw new Error(`Unsupported event target ${U} for event ${x}`);return this.eventManager.addEventListener(U,x,this.decoratePreventDefault(N))}decoratePreventDefault(U){return x=>{if("__ngUnwrap__"===x)return U;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>U(x)):U(x))&&x.preventDefault()}}}function un(Y){return"TEMPLATE"===Y.tagName&&void 0!==Y.content}class pn extends ct{constructor(U,x,N,oe,be,rt,dt,Ct){super(U,be,rt,Ct),this.sharedStylesHost=x,this.hostEl=N,this.shadowRoot=N.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const St=tt(oe.id,oe.styles);for(const Zt of St){const On=document.createElement("style");dt&&On.setAttribute("nonce",dt),On.textContent=Zt,this.shadowRoot.appendChild(On)}}nodeOrShadowRoot(U){return U===this.hostEl?this.shadowRoot:U}appendChild(U,x){return super.appendChild(this.nodeOrShadowRoot(U),x)}insertBefore(U,x,N){return super.insertBefore(this.nodeOrShadowRoot(U),x,N)}removeChild(U,x){return super.removeChild(this.nodeOrShadowRoot(U),x)}parentNode(U){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(U)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class ar extends ct{constructor(U,x,N,oe,be,rt,dt,Ct){super(U,be,rt,dt),this.sharedStylesHost=x,this.removeStylesOnCompDestroy=oe,this.styles=Ct?tt(Ct,N.styles):N.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Nt extends ar{constructor(U,x,N,oe,be,rt,dt,Ct){const St=oe+"-"+N.id;super(U,x,N,be,rt,dt,Ct,St),this.contentAttr=function ke(Y){return"_ngcontent-%COMP%".replace(gt,Y)}(St),this.hostAttr=function xe(Y){return"_nghost-%COMP%".replace(gt,Y)}(St)}applyToHost(U){this.applyStyles(),this.setAttribute(U,this.hostAttr,"")}createElement(U,x){const N=super.createElement(U,x);return super.setAttribute(N,this.contentAttr,""),N}}let Pt=(()=>{class Y extends et{constructor(x){super(x)}supports(x){return!0}addEventListener(x,N,oe){return x.addEventListener(N,oe,!1),()=>this.removeEventListener(x,N,oe)}removeEventListener(x,N,oe){return x.removeEventListener(N,oe)}static#e=this.\u0275fac=function(N){return new(N||Y)(d.LFG(ee.K0))};static#t=this.\u0275prov=d.Yz7({token:Y,factory:Y.\u0275fac})}return Y})();const wt=["alt","control","meta","shift"],Ce={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Pe={alt:Y=>Y.altKey,control:Y=>Y.ctrlKey,meta:Y=>Y.metaKey,shift:Y=>Y.shiftKey};let $e=(()=>{class Y extends et{constructor(x){super(x)}supports(x){return null!=Y.parseEventName(x)}addEventListener(x,N,oe){const be=Y.parseEventName(N),rt=Y.eventCallback(be.fullKey,oe,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,ee.q)().onAndCancel(x,be.domEventName,rt))}static parseEventName(x){const N=x.toLowerCase().split("."),oe=N.shift();if(0===N.length||"keydown"!==oe&&"keyup"!==oe)return null;const be=Y._normalizeKey(N.pop());let rt="",dt=N.indexOf("code");if(dt>-1&&(N.splice(dt,1),rt="code."),wt.forEach(St=>{const Zt=N.indexOf(St);Zt>-1&&(N.splice(Zt,1),rt+=St+".")}),rt+=be,0!=N.length||0===be.length)return null;const Ct={};return Ct.domEventName=oe,Ct.fullKey=rt,Ct}static matchEventFullKeyCode(x,N){let oe=Ce[x.key]||x.key,be="";return N.indexOf("code.")>-1&&(oe=x.code,be="code."),!(null==oe||!oe)&&(oe=oe.toLowerCase()," "===oe?oe="space":"."===oe&&(oe="dot"),wt.forEach(rt=>{rt!==oe&&(0,Pe[rt])(x)&&(be+=rt+".")}),be+=oe,be===N)}static eventCallback(x,N,oe){return be=>{Y.matchEventFullKeyCode(be,x)&&oe.runGuarded(()=>N(be))}}static _normalizeKey(x){return"esc"===x?"escape":x}static#e=this.\u0275fac=function(N){return new(N||Y)(d.LFG(ee.K0))};static#t=this.\u0275prov=d.Yz7({token:Y,factory:Y.\u0275fac})}return Y})();const on=(0,d.eFA)(d._c5,"browser",[{provide:d.Lbi,useValue:ee.bD},{provide:d.g9A,useValue:function yt(){Ee.makeCurrent()},multi:!0},{provide:ee.K0,useFactory:function Jt(){return(0,d.RDi)(document),document},deps:[]}]),$n=new d.OlP(""),In=[{provide:d.rWj,useClass:class Le{addToWindow(U){d.dqk.getAngularTestability=(N,oe=!0)=>{const be=U.findTestabilityInTree(N,oe);if(null==be)throw new d.vHH(5103,!1);return be},d.dqk.getAllAngularTestabilities=()=>U.getAllTestabilities(),d.dqk.getAllAngularRootElements=()=>U.getAllRootElements(),d.dqk.frameworkStabilizers||(d.dqk.frameworkStabilizers=[]),d.dqk.frameworkStabilizers.push(N=>{const oe=d.dqk.getAllAngularTestabilities();let be=oe.length,rt=!1;const dt=function(Ct){rt=rt||Ct,be--,0==be&&N(rt)};oe.forEach(Ct=>{Ct.whenStable(dt)})})}findTestabilityInTree(U,x,N){return null==x?null:U.getTestability(x)??(N?(0,ee.q)().isShadowRoot(x)?this.findTestabilityInTree(U,x.host,!0):this.findTestabilityInTree(U,x.parentElement,!0):null)}},deps:[]},{provide:d.lri,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]},{provide:d.dDg,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]}],Wn=[{provide:d.zSh,useValue:"root"},{provide:d.qLn,useFactory:function Mn(){return new d.qLn},deps:[]},{provide:ue,useClass:Pt,multi:!0,deps:[ee.K0,d.R0b,d.Lbi]},{provide:ue,useClass:$e,multi:!0,deps:[ee.K0]},ce,ht,Se,{provide:d.FYo,useExisting:ce},{provide:ee.JF,useClass:re,deps:[]},[]];let Rt=(()=>{class Y{constructor(x){}static withServerTransition(x){return{ngModule:Y,providers:[{provide:d.AFp,useValue:x.appId}]}}static#e=this.\u0275fac=function(N){return new(N||Y)(d.LFG($n,12))};static#t=this.\u0275mod=d.oAB({type:Y});static#n=this.\u0275inj=d.cJS({providers:[...Wn,...In],imports:[ee.ez,d.hGG]})}return Y})(),Un=(()=>{class Y{constructor(x){this._doc=x}getTitle(){return this._doc.title}setTitle(x){this._doc.title=x||""}static#e=this.\u0275fac=function(N){return new(N||Y)(d.LFG(ee.K0))};static#t=this.\u0275prov=d.Yz7({token:Y,factory:function(N){let oe=null;return oe=N?new N:function kn(){return new Un((0,d.LFG)(ee.K0))}(),oe},providedIn:"root"})}return Y})();typeof window<"u"&&window;let bi=(()=>{class Y{static#e=this.\u0275fac=function(N){return new(N||Y)};static#t=this.\u0275prov=d.Yz7({token:Y,factory:function(N){let oe=null;return oe=N?new(N||Y):d.LFG(mn),oe},providedIn:"root"})}return Y})(),mn=(()=>{class Y extends bi{constructor(x){super(),this._doc=x}sanitize(x,N){if(null==N)return null;switch(x){case d.q3G.NONE:return N;case d.q3G.HTML:return(0,d.qzn)(N,"HTML")?(0,d.z3N)(N):(0,d.EiD)(this._doc,String(N)).toString();case d.q3G.STYLE:return(0,d.qzn)(N,"Style")?(0,d.z3N)(N):N;case d.q3G.SCRIPT:if((0,d.qzn)(N,"Script"))return(0,d.z3N)(N);throw new d.vHH(5200,!1);case d.q3G.URL:return(0,d.qzn)(N,"URL")?(0,d.z3N)(N):(0,d.mCW)(String(N));case d.q3G.RESOURCE_URL:if((0,d.qzn)(N,"ResourceURL"))return(0,d.z3N)(N);throw new d.vHH(5201,!1);default:throw new d.vHH(5202,!1)}}bypassSecurityTrustHtml(x){return(0,d.JVY)(x)}bypassSecurityTrustStyle(x){return(0,d.L6k)(x)}bypassSecurityTrustScript(x){return(0,d.eBb)(x)}bypassSecurityTrustUrl(x){return(0,d.LAX)(x)}bypassSecurityTrustResourceUrl(x){return(0,d.pB0)(x)}static#e=this.\u0275fac=function(N){return new(N||Y)(d.LFG(ee.K0))};static#t=this.\u0275prov=d.Yz7({token:Y,factory:function(N){let oe=null;return oe=N?new N:function Vn(Y){return new mn(Y.get(ee.K0))}(d.LFG(d.zs3)),oe},providedIn:"root"})}return Y})()},7045:(Mt,Ve,F)=>{F.d(Ve,{F0:()=>Mi,rH:()=>Pa,Bz:()=>Cn,lC:()=>an});var d=F(5879),ee=F(5592),J=F(4674),ge=F(2459),ne=F(2096),Ae=F(5619),_e=F(7453),Le=F(2737),re=F(7400),ue=F(4564),Se=F(2714),et=F(8251),qe=F(7103);function ht(...I){const S=(0,ue.yG)(I),E=(0,ue.jO)(I),{args:C,keys:O}=(0,_e.D)(I);if(0===C.length)return(0,ge.D)([],S);const q=new ee.y(function it(I,S,E=Le.y){return C=>{gt(S,()=>{const{length:O}=I,q=new Array(O);let ae=O,He=O;for(let We=0;We<O;We++)gt(S,()=>{const Tt=(0,ge.D)(I[We],S);let An=!1;Tt.subscribe((0,et.x)(C,Rn=>{q[We]=Rn,An||(An=!0,He--),He||C.next(E(q.slice()))},()=>{--ae||C.complete()}))},C)},C)}}(C,S,O?ae=>(0,Se.n)(O,ae):Le.y));return E?q.pipe((0,re.Z)(E)):q}function gt(I,S,E){I?(0,qe.f)(E,I,S):S()}var Xe=F(6973),Lt=F(5211),nt=F(4829);function se(I){return new ee.y(S=>{(0,nt.Xf)(I()).subscribe(S)})}var Be=F(8407);function ke(I,S){const E=(0,J.m)(I)?I:()=>I,C=O=>O.error(E());return new ee.y(S?O=>S.schedule(C,0,O):C)}var xe=F(6232),tt=F(7394),ce=F(9360);function ct(){return(0,ce.e)((I,S)=>{let E=null;I._refCount++;const C=(0,et.x)(S,void 0,void 0,void 0,()=>{if(!I||I._refCount<=0||0<--I._refCount)return void(E=null);const O=I._connection,q=E;E=null,O&&(!q||O===q)&&O.unsubscribe(),S.unsubscribe()});I.subscribe(C),C.closed||(E=I.connect())})}class It extends ee.y{constructor(S,E){super(),this.source=S,this.subjectFactory=E,this._subject=null,this._refCount=0,this._connection=null,(0,ce.A)(S)&&(this.lift=S.lift)}_subscribe(S){return this.getSubject().subscribe(S)}getSubject(){const S=this._subject;return(!S||S.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:S}=this;this._subject=this._connection=null,S?.unsubscribe()}connect(){let S=this._connection;if(!S){S=this._connection=new tt.w0;const E=this.getSubject();S.add(this.source.subscribe((0,et.x)(E,void 0,()=>{this._teardown(),E.complete()},C=>{this._teardown(),E.error(C)},()=>this._teardown()))),S.closed&&(this._connection=null,S=tt.w0.EMPTY)}return S}refCount(){return ct()(this)}}var zt=F(8645),un=F(6814),pn=F(7398),ar=F(4664),Nt=F(8180),Pt=F(7921),wt=F(2181),Ce=F(1631),Pe=F(1374),$e=F(6328),Me=F(9397);function Ke(I){return(0,ce.e)((S,E)=>{let q,C=null,O=!1;C=S.subscribe((0,et.x)(E,void 0,void 0,ae=>{q=(0,nt.Xf)(I(ae,Ke(I)(S))),C?(C.unsubscribe(),C=null,q.subscribe(E)):O=!0})),O&&(C.unsubscribe(),C=null,q.subscribe(E))})}var lt=F(6699),Et=F(3572);function yt(I){return I<=0?()=>xe.E:(0,ce.e)((S,E)=>{let C=[];S.subscribe((0,et.x)(E,O=>{C.push(O),I<C.length&&C.shift()},()=>{for(const O of C)E.next(O);E.complete()},void 0,()=>{C=null}))})}var Mn=F(3026),on=F(4716),$n=F(9773),In=F(7537),Wn=F(6593);const Rt="primary",Jn=Symbol("RouteTitle");class wn{constructor(S){this.params=S||{}}has(S){return Object.prototype.hasOwnProperty.call(this.params,S)}get(S){if(this.has(S)){const E=this.params[S];return Array.isArray(E)?E[0]:E}return null}getAll(S){if(this.has(S)){const E=this.params[S];return Array.isArray(E)?E:[E]}return[]}get keys(){return Object.keys(this.params)}}function tr(I){return new wn(I)}function kn(I,S,E){const C=E.path.split("/");if(C.length>I.length||"full"===E.pathMatch&&(S.hasChildren()||C.length<I.length))return null;const O={};for(let q=0;q<C.length;q++){const ae=C[q],He=I[q];if(ae.startsWith(":"))O[ae.substring(1)]=He;else if(ae!==He.path)return null}return{consumed:I.slice(0,C.length),posParams:O}}function nr(I,S){const E=I?Object.keys(I):void 0,C=S?Object.keys(S):void 0;if(!E||!C||E.length!=C.length)return!1;let O;for(let q=0;q<E.length;q++)if(O=E[q],!Gn(I[O],S[O]))return!1;return!0}function Gn(I,S){if(Array.isArray(I)&&Array.isArray(S)){if(I.length!==S.length)return!1;const E=[...I].sort(),C=[...S].sort();return E.every((O,q)=>C[q]===O)}return I===S}function Kt(I){return I.length>0?I[I.length-1]:null}function Xt(I){return function Ee(I){return!!I&&(I instanceof ee.y||(0,J.m)(I.lift)&&(0,J.m)(I.subscribe))}(I)?I:(0,d.QGY)(I)?(0,ge.D)(Promise.resolve(I)):(0,ne.of)(I)}const tn={exact:function vn(I,S,E){if(!Vn(I.segments,S.segments)||!Si(I.segments,S.segments,E)||I.numberOfChildren!==S.numberOfChildren)return!1;for(const C in S.children)if(!I.children[C]||!vn(I.children[C],S.children[C],E))return!1;return!0},subset:ss},qn={exact:function ui(I,S){return nr(I,S)},subset:function vr(I,S){return Object.keys(S).length<=Object.keys(I).length&&Object.keys(S).every(E=>Gn(I[E],S[E]))},ignored:()=>!0};function ur(I,S,E){return tn[E.paths](I.root,S.root,E.matrixParams)&&qn[E.queryParams](I.queryParams,S.queryParams)&&!("exact"===E.fragment&&I.fragment!==S.fragment)}function ss(I,S,E){return $t(I,S,S.segments,E)}function $t(I,S,E,C){if(I.segments.length>E.length){const O=I.segments.slice(0,E.length);return!(!Vn(O,E)||S.hasChildren()||!Si(O,E,C))}if(I.segments.length===E.length){if(!Vn(I.segments,E)||!Si(I.segments,E,C))return!1;for(const O in S.children)if(!I.children[O]||!ss(I.children[O],S.children[O],C))return!1;return!0}{const O=E.slice(0,I.segments.length),q=E.slice(I.segments.length);return!!(Vn(I.segments,O)&&Si(I.segments,O,C)&&I.children[Rt])&&$t(I.children[Rt],S,q,C)}}function Si(I,S,E){return S.every((C,O)=>qn[E](I[O].parameters,C.parameters))}class nn{constructor(S=new sn([],{}),E={},C=null){this.root=S,this.queryParams=E,this.fragment=C}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=tr(this.queryParams)),this._queryParamMap}toString(){return Sr.serialize(this)}}class sn{constructor(S,E){this.segments=S,this.children=E,this.parent=null,Object.values(E).forEach(C=>C.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Rr(this)}}class Fr{constructor(S,E){this.path=S,this.parameters=E}get parameterMap(){return this._parameterMap||(this._parameterMap=tr(this.parameters)),this._parameterMap}toString(){return N(this)}}function Vn(I,S){return I.length===S.length&&I.every((E,C)=>E.path===S[C].path)}let rr=(()=>{class I{static#e=this.\u0275fac=function(C){return new(C||I)};static#t=this.\u0275prov=d.Yz7({token:I,factory:function(){return new qr},providedIn:"root"})}return I})();class qr{parse(S){const E=new De(S);return new nn(E.parseRootSegment(),E.parseQueryParams(),E.parseFragment())}serialize(S){const E=`/${Pr(S.root,!0)}`,C=function be(I){const S=Object.keys(I).map(E=>{const C=I[E];return Array.isArray(C)?C.map(O=>`${mr(E)}=${mr(O)}`).join("&"):`${mr(E)}=${mr(C)}`}).filter(E=>!!E);return S.length?`?${S.join("&")}`:""}(S.queryParams);return`${E}${C}${"string"==typeof S.fragment?`#${function ve(I){return encodeURI(I)}(S.fragment)}`:""}`}}const Sr=new qr;function Rr(I){return I.segments.map(S=>N(S)).join("/")}function Pr(I,S){if(!I.hasChildren())return Rr(I);if(S){const E=I.children[Rt]?Pr(I.children[Rt],!1):"",C=[];return Object.entries(I.children).forEach(([O,q])=>{O!==Rt&&C.push(`${O}:${Pr(q,!1)}`)}),C.length>0?`${E}(${C.join("//")})`:E}{const E=function mn(I,S){let E=[];return Object.entries(I.children).forEach(([C,O])=>{C===Rt&&(E=E.concat(S(O,C)))}),Object.entries(I.children).forEach(([C,O])=>{C!==Rt&&(E=E.concat(S(O,C)))}),E}(I,(C,O)=>O===Rt?[Pr(I.children[Rt],!1)]:[`${O}:${Pr(C,!1)}`]);return 1===Object.keys(I.children).length&&null!=I.children[Rt]?`${Rr(I)}/${E[0]}`:`${Rr(I)}/(${E.join("//")})`}}function jr(I){return encodeURIComponent(I).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function mr(I){return jr(I).replace(/%3B/gi,";")}function Y(I){return jr(I).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function U(I){return decodeURIComponent(I)}function x(I){return U(I.replace(/\+/g,"%20"))}function N(I){return`${Y(I.path)}${function oe(I){return Object.keys(I).map(S=>`;${Y(S)}=${Y(I[S])}`).join("")}(I.parameters)}`}const rt=/^[^\/()?;#]+/;function dt(I){const S=I.match(rt);return S?S[0]:""}const Ct=/^[^\/()?;=#]+/,Zt=/^[^=?&#]+/,we=/^[^&#]+/;class De{constructor(S){this.url=S,this.remaining=S}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new sn([],{}):new sn([],this.parseChildren())}parseQueryParams(){const S={};if(this.consumeOptional("?"))do{this.parseQueryParam(S)}while(this.consumeOptional("&"));return S}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const S=[];for(this.peekStartsWith("(")||S.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),S.push(this.parseSegment());let E={};this.peekStartsWith("/(")&&(this.capture("/"),E=this.parseParens(!0));let C={};return this.peekStartsWith("(")&&(C=this.parseParens(!1)),(S.length>0||Object.keys(E).length>0)&&(C[Rt]=new sn(S,E)),C}parseSegment(){const S=dt(this.remaining);if(""===S&&this.peekStartsWith(";"))throw new d.vHH(4009,!1);return this.capture(S),new Fr(U(S),this.parseMatrixParams())}parseMatrixParams(){const S={};for(;this.consumeOptional(";");)this.parseParam(S);return S}parseParam(S){const E=function St(I){const S=I.match(Ct);return S?S[0]:""}(this.remaining);if(!E)return;this.capture(E);let C="";if(this.consumeOptional("=")){const O=dt(this.remaining);O&&(C=O,this.capture(C))}S[U(E)]=U(C)}parseQueryParam(S){const E=function On(I){const S=I.match(Zt);return S?S[0]:""}(this.remaining);if(!E)return;this.capture(E);let C="";if(this.consumeOptional("=")){const ae=function me(I){const S=I.match(we);return S?S[0]:""}(this.remaining);ae&&(C=ae,this.capture(C))}const O=x(E),q=x(C);if(S.hasOwnProperty(O)){let ae=S[O];Array.isArray(ae)||(ae=[ae],S[O]=ae),ae.push(q)}else S[O]=q}parseParens(S){const E={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const C=dt(this.remaining),O=this.remaining[C.length];if("/"!==O&&")"!==O&&";"!==O)throw new d.vHH(4010,!1);let q;C.indexOf(":")>-1?(q=C.slice(0,C.indexOf(":")),this.capture(q),this.capture(":")):S&&(q=Rt);const ae=this.parseChildren();E[q]=1===Object.keys(ae).length?ae[Rt]:new sn([],ae),this.consumeOptional("//")}return E}peekStartsWith(S){return this.remaining.startsWith(S)}consumeOptional(S){return!!this.peekStartsWith(S)&&(this.remaining=this.remaining.substring(S.length),!0)}capture(S){if(!this.consumeOptional(S))throw new d.vHH(4011,!1)}}function fe(I){return I.segments.length>0?new sn([],{[Rt]:I}):I}function pe(I){const S={};for(const C of Object.keys(I.children)){const q=pe(I.children[C]);if(C===Rt&&0===q.segments.length&&q.hasChildren())for(const[ae,He]of Object.entries(q.children))S[ae]=He;else(q.segments.length>0||q.hasChildren())&&(S[C]=q)}return function Fe(I){if(1===I.numberOfChildren&&I.children[Rt]){const S=I.children[Rt];return new sn(I.segments.concat(S.segments),S.children)}return I}(new sn(I.segments,S))}function Ge(I){return I instanceof nn}function st(I){let S;const O=fe(function E(q){const ae={};for(const We of q.children){const Tt=E(We);ae[We.outlet]=Tt}const He=new sn(q.url,ae);return q===I&&(S=He),He}(I.root));return S??O}function Qt(I,S,E,C){let O=I;for(;O.parent;)O=O.parent;if(0===S.length)return Mr(O,O,O,E,C);const q=function xn(I){if("string"==typeof I[0]&&1===I.length&&"/"===I[0])return new ki(!0,0,I);let S=0,E=!1;const C=I.reduce((O,q,ae)=>{if("object"==typeof q&&null!=q){if(q.outlets){const He={};return Object.entries(q.outlets).forEach(([We,Tt])=>{He[We]="string"==typeof Tt?Tt.split("/"):Tt}),[...O,{outlets:He}]}if(q.segmentPath)return[...O,q.segmentPath]}return"string"!=typeof q?[...O,q]:0===ae?(q.split("/").forEach((He,We)=>{0==We&&"."===He||(0==We&&""===He?E=!0:".."===He?S++:""!=He&&O.push(He))}),O):[...O,q]},[]);return new ki(E,S,C)}(S);if(q.toRoot())return Mr(O,O,new sn([],{}),E,C);const ae=function li(I,S,E){if(I.isAbsolute)return new lr(S,!0,0);if(!E)return new lr(S,!1,NaN);if(null===E.parent)return new lr(E,!0,0);const C=Xn(I.commands[0])?0:1;return function vs(I,S,E){let C=I,O=S,q=E;for(;q>O;){if(q-=O,C=C.parent,!C)throw new d.vHH(4005,!1);O=C.segments.length}return new lr(C,!1,O-q)}(E,E.segments.length-1+C,I.numberOfDoubleDots)}(q,O,I),He=ae.processChildren?ni(ae.segmentGroup,ae.index,q.commands):Kr(ae.segmentGroup,ae.index,q.commands);return Mr(O,ae.segmentGroup,He,E,C)}function Xn(I){return"object"==typeof I&&null!=I&&!I.outlets&&!I.segmentPath}function Sn(I){return"object"==typeof I&&null!=I&&I.outlets}function Mr(I,S,E,C,O){let ae,q={};C&&Object.entries(C).forEach(([We,Tt])=>{q[We]=Array.isArray(Tt)?Tt.map(An=>`${An}`):`${Tt}`}),ae=I===S?E:Lr(I,S,E);const He=fe(pe(ae));return new nn(He,q,O)}function Lr(I,S,E){const C={};return Object.entries(I.children).forEach(([O,q])=>{C[O]=q===S?E:Lr(q,S,E)}),new sn(I.segments,C)}class ki{constructor(S,E,C){if(this.isAbsolute=S,this.numberOfDoubleDots=E,this.commands=C,S&&C.length>0&&Xn(C[0]))throw new d.vHH(4003,!1);const O=C.find(Sn);if(O&&O!==Kt(C))throw new d.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class lr{constructor(S,E,C){this.segmentGroup=S,this.processChildren=E,this.index=C}}function Kr(I,S,E){if(I||(I=new sn([],{})),0===I.segments.length&&I.hasChildren())return ni(I,S,E);const C=function Rs(I,S,E){let C=0,O=S;const q={match:!1,pathIndex:0,commandIndex:0};for(;O<I.segments.length;){if(C>=E.length)return q;const ae=I.segments[O],He=E[C];if(Sn(He))break;const We=`${He}`,Tt=C<E.length-1?E[C+1]:null;if(O>0&&void 0===We)break;if(We&&Tt&&"object"==typeof Tt&&void 0===Tt.outlets){if(!zs(We,Tt,ae))return q;C+=2}else{if(!zs(We,{},ae))return q;C++}O++}return{match:!0,pathIndex:O,commandIndex:C}}(I,S,E),O=E.slice(C.commandIndex);if(C.match&&C.pathIndex<I.segments.length){const q=new sn(I.segments.slice(0,C.pathIndex),{});return q.children[Rt]=new sn(I.segments.slice(C.pathIndex),I.children),ni(q,0,O)}return C.match&&0===O.length?new sn(I.segments,{}):C.match&&!I.hasChildren()?Fi(I,S,E):C.match?ni(I,0,O):Fi(I,S,E)}function ni(I,S,E){if(0===E.length)return new sn(I.segments,{});{const C=function Fn(I){return Sn(I[0])?I[0].outlets:{[Rt]:I}}(E),O={};if(Object.keys(C).some(q=>q!==Rt)&&I.children[Rt]&&1===I.numberOfChildren&&0===I.children[Rt].segments.length){const q=ni(I.children[Rt],S,E);return new sn(I.segments,q.children)}return Object.entries(C).forEach(([q,ae])=>{"string"==typeof ae&&(ae=[ae]),null!==ae&&(O[q]=Kr(I.children[q],S,ae))}),Object.entries(I.children).forEach(([q,ae])=>{void 0===C[q]&&(O[q]=ae)}),new sn(I.segments,O)}}function Fi(I,S,E){const C=I.segments.slice(0,S);let O=0;for(;O<E.length;){const q=E[O];if(Sn(q)){const We=mo(q.outlets);return new sn(C,We)}if(0===O&&Xn(E[0])){C.push(new Fr(I.segments[S].path,eo(E[0]))),O++;continue}const ae=Sn(q)?q.outlets[Rt]:`${q}`,He=O<E.length-1?E[O+1]:null;ae&&He&&Xn(He)?(C.push(new Fr(ae,eo(He))),O+=2):(C.push(new Fr(ae,{})),O++)}return new sn(C,{})}function mo(I){const S={};return Object.entries(I).forEach(([E,C])=>{"string"==typeof C&&(C=[C]),null!==C&&(S[E]=Fi(new sn([],{}),0,C))}),S}function eo(I){const S={};return Object.entries(I).forEach(([E,C])=>S[E]=`${C}`),S}function zs(I,S,E){return I==E.path&&nr(S,E.parameters)}const Nr="imperative";class ci{constructor(S,E){this.id=S,this.url=E}}class Gs extends ci{constructor(S,E,C="imperative",O=null){super(S,E),this.type=0,this.navigationTrigger=C,this.restoredState=O}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Es extends ci{constructor(S,E,C){super(S,E),this.urlAfterRedirects=C,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Qi extends ci{constructor(S,E,C,O){super(S,E),this.reason=C,this.code=O,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ps extends ci{constructor(S,E,C,O){super(S,E),this.reason=C,this.code=O,this.type=16}}class Ri extends ci{constructor(S,E,C,O){super(S,E),this.error=C,this.target=O,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ms extends ci{constructor(S,E,C,O){super(S,E),this.urlAfterRedirects=C,this.state=O,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class jo extends ci{constructor(S,E,C,O){super(S,E),this.urlAfterRedirects=C,this.state=O,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mi extends ci{constructor(S,E,C,O,q){super(S,E),this.urlAfterRedirects=C,this.state=O,this.shouldActivate=q,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Aa extends ci{constructor(S,E,C,O){super(S,E),this.urlAfterRedirects=C,this.state=O,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class to extends ci{constructor(S,E,C,O){super(S,E),this.urlAfterRedirects=C,this.state=O,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $o{constructor(S){this.route=S,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class no{constructor(S){this.route=S,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class _o{constructor(S){this.snapshot=S,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ji{constructor(S){this.snapshot=S,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class yo{constructor(S){this.snapshot=S,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class os{constructor(S){this.snapshot=S,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ro{constructor(S,E,C){this.routerEvent=S,this.position=E,this.anchor=C,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Yi{}class Hn{constructor(S){this.url=S}}class Vr{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Jr,this.attachRef=null}}let Jr=(()=>{class I{constructor(){this.contexts=new Map}onChildOutletCreated(E,C){const O=this.getOrCreateContext(E);O.outlet=C,this.contexts.set(E,O)}onChildOutletDestroyed(E){const C=this.getContext(E);C&&(C.outlet=null,C.attachRef=null)}onOutletDeactivated(){const E=this.contexts;return this.contexts=new Map,E}onOutletReAttached(E){this.contexts=E}getOrCreateContext(E){let C=this.getContext(E);return C||(C=new Vr,this.contexts.set(E,C)),C}getContext(E){return this.contexts.get(E)||null}static#e=this.\u0275fac=function(C){return new(C||I)};static#t=this.\u0275prov=d.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"})}return I})();class Zr{constructor(S){this._root=S}get root(){return this._root.value}parent(S){const E=this.pathFromRoot(S);return E.length>1?E[E.length-2]:null}children(S){const E=Ns(S,this._root);return E?E.children.map(C=>C.value):[]}firstChild(S){const E=Ns(S,this._root);return E&&E.children.length>0?E.children[0].value:null}siblings(S){const E=io(S,this._root);return E.length<2?[]:E[E.length-2].children.map(O=>O.value).filter(O=>O!==S)}pathFromRoot(S){return io(S,this._root).map(E=>E.value)}}function Ns(I,S){if(I===S.value)return S;for(const E of S.children){const C=Ns(I,E);if(C)return C}return null}function io(I,S){if(I===S.value)return[S];for(const E of S.children){const C=io(I,E);if(C.length)return C.unshift(S),C}return[]}class Ln{constructor(S,E){this.value=S,this.children=E}toString(){return`TreeNode(${this.value})`}}function Li(I){const S={};return I&&I.children.forEach(E=>S[E.value.outlet]=E),S}class $i extends Zr{constructor(S,E){super(S),this.snapshot=E,Vi(this,S)}toString(){return this.snapshot.toString()}}function Er(I,S){const E=function Ot(I,S){const ae=new as([],{},{},"",{},Rt,S,null,{});return new di("",new Ln(ae,[]))}(0,S),C=new Ae.X([new Fr("",{})]),O=new Ae.X({}),q=new Ae.X({}),ae=new Ae.X({}),He=new Ae.X(""),We=new cn(C,O,ae,He,q,Rt,S,E.root);return We.snapshot=E.root,new $i(new Ln(We,[]),E)}class cn{constructor(S,E,C,O,q,ae,He,We){this.urlSubject=S,this.paramsSubject=E,this.queryParamsSubject=C,this.fragmentSubject=O,this.dataSubject=q,this.outlet=ae,this.component=He,this._futureSnapshot=We,this.title=this.dataSubject?.pipe((0,pn.U)(Tt=>Tt[Jn]))??(0,ne.of)(void 0),this.url=S,this.params=E,this.queryParams=C,this.fragment=O,this.data=q}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,pn.U)(S=>tr(S)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,pn.U)(S=>tr(S)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function cr(I,S="emptyOnly"){const E=I.pathFromRoot;let C=0;if("always"!==S)for(C=E.length-1;C>=1;){const O=E[C],q=E[C-1];if(O.routeConfig&&""===O.routeConfig.path)C--;else{if(q.component)break;C--}}return function Hi(I){return I.reduce((S,E)=>({params:{...S.params,...E.params},data:{...S.data,...E.data},resolve:{...E.data,...S.resolve,...E.routeConfig?.data,...E._resolvedData}}),{params:{},data:{},resolve:{}})}(E.slice(C))}class as{get title(){return this.data?.[Jn]}constructor(S,E,C,O,q,ae,He,We,Tt){this.url=S,this.params=E,this.queryParams=C,this.fragment=O,this.data=q,this.outlet=ae,this.component=He,this.routeConfig=We,this._resolve=Tt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=tr(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=tr(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(C=>C.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class di extends Zr{constructor(S,E){super(E),this.url=S,Vi(this,E)}toString(){return er(this._root)}}function Vi(I,S){S.value._routerState=I,S.children.forEach(E=>Vi(I,E))}function er(I){const S=I.children.length>0?` { ${I.children.map(er).join(", ")} } `:"";return`${I.value}${S}`}function zi(I){if(I.snapshot){const S=I.snapshot,E=I._futureSnapshot;I.snapshot=E,nr(S.queryParams,E.queryParams)||I.queryParamsSubject.next(E.queryParams),S.fragment!==E.fragment&&I.fragmentSubject.next(E.fragment),nr(S.params,E.params)||I.paramsSubject.next(E.params),function Un(I,S){if(I.length!==S.length)return!1;for(let E=0;E<I.length;++E)if(!nr(I[E],S[E]))return!1;return!0}(S.url,E.url)||I.urlSubject.next(E.url),nr(S.data,E.data)||I.dataSubject.next(E.data)}else I.snapshot=I._futureSnapshot,I.dataSubject.next(I._futureSnapshot.data)}function fs(I,S){const E=nr(I.params,S.params)&&function bi(I,S){return Vn(I,S)&&I.every((E,C)=>nr(E.parameters,S[C].parameters))}(I.url,S.url);return E&&!(!I.parent!=!S.parent)&&(!I.parent||fs(I.parent,S.parent))}let an=(()=>{class I{constructor(){this.activated=null,this._activatedRoute=null,this.name=Rt,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.attachEvents=new d.vpe,this.detachEvents=new d.vpe,this.parentContexts=(0,d.f3M)(Jr),this.location=(0,d.f3M)(d.s_b),this.changeDetector=(0,d.f3M)(d.sBO),this.environmentInjector=(0,d.f3M)(d.lqb),this.inputBinder=(0,d.f3M)(yi,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(E){if(E.name){const{firstChange:C,previousValue:O}=E.name;if(C)return;this.isTrackedInParentContexts(O)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(O)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(E){return this.parentContexts.getContext(E)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const E=this.parentContexts.getContext(this.name);E?.route&&(E.attachRef?this.attach(E.attachRef,E.route):this.activateWith(E.route,E.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new d.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new d.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new d.vHH(4012,!1);this.location.detach();const E=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(E.instance),E}attach(E,C){this.activated=E,this._activatedRoute=C,this.location.insert(E.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(E.instance)}deactivate(){if(this.activated){const E=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(E)}}activateWith(E,C){if(this.isActivated)throw new d.vHH(4013,!1);this._activatedRoute=E;const O=this.location,ae=E.snapshot.component,He=this.parentContexts.getOrCreateContext(this.name).children,We=new _i(E,He,O.injector);this.activated=O.createComponent(ae,{index:O.length,injector:We,environmentInjector:C??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(C){return new(C||I)};static#t=this.\u0275dir=d.lG2({type:I,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[d.TTD]})}return I})();class _i{constructor(S,E,C){this.route=S,this.childContexts=E,this.parent=C}get(S,E){return S===cn?this.route:S===Jr?this.childContexts:this.parent.get(S,E)}}const yi=new d.OlP("");let Is=(()=>{class I{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(E){this.unsubscribeFromRouteData(E),this.subscribeToRouteData(E)}unsubscribeFromRouteData(E){this.outletDataSubscriptions.get(E)?.unsubscribe(),this.outletDataSubscriptions.delete(E)}subscribeToRouteData(E){const{activatedRoute:C}=E,O=ht([C.queryParams,C.params,C.data]).pipe((0,ar.w)(([q,ae,He],We)=>(He={...q,...ae,...He},0===We?(0,ne.of)(He):Promise.resolve(He)))).subscribe(q=>{if(!E.isActivated||!E.activatedComponentRef||E.activatedRoute!==C||null===C.component)return void this.unsubscribeFromRouteData(E);const ae=(0,d.qFp)(C.component);if(ae)for(const{templateName:He}of ae.inputs)E.activatedComponentRef.setInput(He,q[He]);else this.unsubscribeFromRouteData(E)});this.outletDataSubscriptions.set(E,O)}static#e=this.\u0275fac=function(C){return new(C||I)};static#t=this.\u0275prov=d.Yz7({token:I,factory:I.\u0275fac})}return I})();function Bn(I,S,E){if(E&&I.shouldReuseRoute(S.value,E.value.snapshot)){const C=E.value;C._futureSnapshot=S.value;const O=function Hr(I,S,E){return S.children.map(C=>{for(const O of E.children)if(I.shouldReuseRoute(C.value,O.value.snapshot))return Bn(I,C,O);return Bn(I,C)})}(I,S,E);return new Ln(C,O)}{if(I.shouldAttach(S.value)){const q=I.retrieve(S.value);if(null!==q){const ae=q.route;return ae.value._futureSnapshot=S.value,ae.children=S.children.map(He=>Bn(I,He)),ae}}const C=function Dr(I){return new cn(new Ae.X(I.url),new Ae.X(I.params),new Ae.X(I.queryParams),new Ae.X(I.fragment),new Ae.X(I.data),I.outlet,I.component,I)}(S.value),O=S.children.map(q=>Bn(I,q));return new Ln(C,O)}}const vi="ngNavigationCancelingError";function Ei(I,S){const{redirectTo:E,navigationBehaviorOptions:C}=Ge(S)?{redirectTo:S,navigationBehaviorOptions:void 0}:S,O=Ji(!1,0,S);return O.url=E,O.navigationBehaviorOptions=C,O}function Ji(I,S,E){const C=new Error("NavigationCancelingError: "+(I||""));return C[vi]=!0,C.cancellationCode=S,E&&(C.url=E),C}function ws(I){return I&&I[vi]}let vo=(()=>{class I{static#e=this.\u0275fac=function(C){return new(C||I)};static#t=this.\u0275cmp=d.Xpm({type:I,selectors:[["ng-component"]],standalone:!0,features:[d.jDz],decls:1,vars:0,template:function(C,O){1&C&&d._UZ(0,"router-outlet")},dependencies:[an],encapsulation:2})}return I})();function Ii(I){const S=I.children&&I.children.map(Ii),E=S?{...I,children:S}:{...I};return!E.component&&!E.loadComponent&&(S||E.loadChildren)&&E.outlet&&E.outlet!==Rt&&(E.component=vo),E}function dn(I){return I.outlet||Rt}function so(I){if(!I)return null;if(I.routeConfig?._injector)return I.routeConfig._injector;for(let S=I.parent;S;S=S.parent){const E=S.routeConfig;if(E?._loadedInjector)return E._loadedInjector;if(E?._injector)return E._injector}return null}class us{constructor(S,E,C,O,q){this.routeReuseStrategy=S,this.futureState=E,this.currState=C,this.forwardEvent=O,this.inputBindingEnabled=q}activate(S){const E=this.futureState._root,C=this.currState?this.currState._root:null;this.deactivateChildRoutes(E,C,S),zi(this.futureState.root),this.activateChildRoutes(E,C,S)}deactivateChildRoutes(S,E,C){const O=Li(E);S.children.forEach(q=>{const ae=q.value.outlet;this.deactivateRoutes(q,O[ae],C),delete O[ae]}),Object.values(O).forEach(q=>{this.deactivateRouteAndItsChildren(q,C)})}deactivateRoutes(S,E,C){const O=S.value,q=E?E.value:null;if(O===q)if(O.component){const ae=C.getContext(O.outlet);ae&&this.deactivateChildRoutes(S,E,ae.children)}else this.deactivateChildRoutes(S,E,C);else q&&this.deactivateRouteAndItsChildren(E,C)}deactivateRouteAndItsChildren(S,E){S.value.component&&this.routeReuseStrategy.shouldDetach(S.value.snapshot)?this.detachAndStoreRouteSubtree(S,E):this.deactivateRouteAndOutlet(S,E)}detachAndStoreRouteSubtree(S,E){const C=E.getContext(S.value.outlet),O=C&&S.value.component?C.children:E,q=Li(S);for(const ae of Object.keys(q))this.deactivateRouteAndItsChildren(q[ae],O);if(C&&C.outlet){const ae=C.outlet.detach(),He=C.children.onOutletDeactivated();this.routeReuseStrategy.store(S.value.snapshot,{componentRef:ae,route:S,contexts:He})}}deactivateRouteAndOutlet(S,E){const C=E.getContext(S.value.outlet),O=C&&S.value.component?C.children:E,q=Li(S);for(const ae of Object.keys(q))this.deactivateRouteAndItsChildren(q[ae],O);C&&(C.outlet&&(C.outlet.deactivate(),C.children.onOutletDeactivated()),C.attachRef=null,C.route=null)}activateChildRoutes(S,E,C){const O=Li(E);S.children.forEach(q=>{this.activateRoutes(q,O[q.value.outlet],C),this.forwardEvent(new os(q.value.snapshot))}),S.children.length&&this.forwardEvent(new ji(S.value.snapshot))}activateRoutes(S,E,C){const O=S.value,q=E?E.value:null;if(zi(O),O===q)if(O.component){const ae=C.getOrCreateContext(O.outlet);this.activateChildRoutes(S,E,ae.children)}else this.activateChildRoutes(S,E,C);else if(O.component){const ae=C.getOrCreateContext(O.outlet);if(this.routeReuseStrategy.shouldAttach(O.snapshot)){const He=this.routeReuseStrategy.retrieve(O.snapshot);this.routeReuseStrategy.store(O.snapshot,null),ae.children.onOutletReAttached(He.contexts),ae.attachRef=He.componentRef,ae.route=He.route.value,ae.outlet&&ae.outlet.attach(He.componentRef,He.route.value),zi(He.route.value),this.activateChildRoutes(S,null,ae.children)}else{const He=so(O.snapshot);ae.attachRef=null,ae.route=O,ae.injector=He,ae.outlet&&ae.outlet.activateWith(O,ae.injector),this.activateChildRoutes(S,null,ae.children)}}else this.activateChildRoutes(S,null,C)}}class Ts{constructor(S){this.path=S,this.route=this.path[this.path.length-1]}}class Eo{constructor(S,E){this.component=S,this.route=E}}function Po(I,S,E){const C=I._root;return xs(C,S?S._root:null,E,[C.value])}function kr(I,S){const E=Symbol(),C=S.get(I,E);return C===E?"function"!=typeof I||(0,d.Z0I)(I)?S.get(I):I:C}function xs(I,S,E,C,O={canDeactivateChecks:[],canActivateChecks:[]}){const q=Li(S);return I.children.forEach(ae=>{(function Ba(I,S,E,C,O={canDeactivateChecks:[],canActivateChecks:[]}){const q=I.value,ae=S?S.value:null,He=E?E.getContext(I.value.outlet):null;if(ae&&q.routeConfig===ae.routeConfig){const We=function Xo(I,S,E){if("function"==typeof E)return E(I,S);switch(E){case"pathParamsChange":return!Vn(I.url,S.url);case"pathParamsOrQueryParamsChange":return!Vn(I.url,S.url)||!nr(I.queryParams,S.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!fs(I,S)||!nr(I.queryParams,S.queryParams);default:return!fs(I,S)}}(ae,q,q.routeConfig.runGuardsAndResolvers);We?O.canActivateChecks.push(new Ts(C)):(q.data=ae.data,q._resolvedData=ae._resolvedData),xs(I,S,q.component?He?He.children:null:E,C,O),We&&He&&He.outlet&&He.outlet.isActivated&&O.canDeactivateChecks.push(new Eo(He.outlet.component,ae))}else ae&&uo(S,He,O),O.canActivateChecks.push(new Ts(C)),xs(I,null,q.component?He?He.children:null:E,C,O)})(ae,q[ae.value.outlet],E,C.concat([ae.value]),O),delete q[ae.value.outlet]}),Object.entries(q).forEach(([ae,He])=>uo(He,E.getContext(ae),O)),O}function uo(I,S,E){const C=Li(I),O=I.value;Object.entries(C).forEach(([q,ae])=>{uo(ae,O.component?S?S.children.getContext(q):null:S,E)}),E.canDeactivateChecks.push(new Eo(O.component&&S&&S.outlet&&S.outlet.isActivated?S.outlet.component:null,O))}function Ir(I){return"function"==typeof I}function gn(I){return I instanceof Xe.K||"EmptyError"===I?.name}const hi=Symbol("INITIAL_VALUE");function Gi(){return(0,ar.w)(I=>ht(I.map(S=>S.pipe((0,Nt.q)(1),(0,Pt.O)(hi)))).pipe((0,pn.U)(S=>{for(const E of S)if(!0!==E){if(E===hi)return hi;if(!1===E||E instanceof nn)return E}return!0}),(0,wt.h)(S=>S!==hi),(0,Nt.q)(1)))}function ea(I){return(0,Be.z)((0,Me.b)(S=>{if(Ge(S))throw Ei(0,S)}),(0,pn.U)(S=>!0===S))}class Ur{constructor(S){this.segmentGroup=S||null}}class No{constructor(S){this.urlTree=S}}function ks(I){return ke(new Ur(I))}function Ds(I){return ke(new No(I))}class na{constructor(S,E){this.urlSerializer=S,this.urlTree=E}noMatchError(S){return new d.vHH(4002,!1)}lineralizeSegments(S,E){let C=[],O=E.root;for(;;){if(C=C.concat(O.segments),0===O.numberOfChildren)return(0,ne.of)(C);if(O.numberOfChildren>1||!O.children[Rt])return ke(new d.vHH(4e3,!1));O=O.children[Rt]}}applyRedirectCommands(S,E,C){return this.applyRedirectCreateUrlTree(E,this.urlSerializer.parse(E),S,C)}applyRedirectCreateUrlTree(S,E,C,O){const q=this.createSegmentGroup(S,E.root,C,O);return new nn(q,this.createQueryParams(E.queryParams,this.urlTree.queryParams),E.fragment)}createQueryParams(S,E){const C={};return Object.entries(S).forEach(([O,q])=>{if("string"==typeof q&&q.startsWith(":")){const He=q.substring(1);C[O]=E[He]}else C[O]=q}),C}createSegmentGroup(S,E,C,O){const q=this.createSegments(S,E.segments,C,O);let ae={};return Object.entries(E.children).forEach(([He,We])=>{ae[He]=this.createSegmentGroup(S,We,C,O)}),new sn(q,ae)}createSegments(S,E,C,O){return E.map(q=>q.path.startsWith(":")?this.findPosParam(S,q,O):this.findOrReturn(q,C))}findPosParam(S,E,C){const O=C[E.path.substring(1)];if(!O)throw new d.vHH(4001,!1);return O}findOrReturn(S,E){let C=0;for(const O of E){if(O.path===S.path)return E.splice(C),O;C++}return S}}const wr={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ra(I,S,E,C,O){const q=Ki(I,S,E);return q.matched?(C=function jn(I,S){return I.providers&&!I._injector&&(I._injector=(0,d.MMx)(I.providers,S,`Route: ${I.path}`)),I._injector??S}(S,C),function si(I,S,E,C){const O=S.canMatch;if(!O||0===O.length)return(0,ne.of)(!0);const q=O.map(ae=>{const He=kr(ae,I);return Xt(function X(I){return I&&Ir(I.canMatch)}(He)?He.canMatch(S,E):I.runInContext(()=>He(S,E)))});return(0,ne.of)(q).pipe(Gi(),ea())}(C,S,E).pipe((0,pn.U)(ae=>!0===ae?q:{...wr}))):(0,ne.of)(q)}function Ki(I,S,E){if(""===S.path)return"full"===S.pathMatch&&(I.hasChildren()||E.length>0)?{...wr}:{matched:!0,consumedSegments:[],remainingSegments:E,parameters:{},positionalParamSegments:{}};const O=(S.matcher||kn)(E,I,S);if(!O)return{...wr};const q={};Object.entries(O.posParams??{}).forEach(([He,We])=>{q[He]=We.path});const ae=O.consumed.length>0?{...q,...O.consumed[O.consumed.length-1].parameters}:q;return{matched:!0,consumedSegments:O.consumed,remainingSegments:E.slice(O.consumed.length),parameters:ae,positionalParamSegments:O.posParams??{}}}function Ti(I,S,E,C){return E.length>0&&function pa(I,S,E){return E.some(C=>vt(I,S,C)&&dn(C)!==Rt)}(I,E,C)?{segmentGroup:new sn(S,xo(C,new sn(E,I.children))),slicedSegments:[]}:0===E.length&&function ba(I,S,E){return E.some(C=>vt(I,S,C))}(I,E,C)?{segmentGroup:new sn(I.segments,Oo(I,0,E,C,I.children)),slicedSegments:E}:{segmentGroup:new sn(I.segments,I.children),slicedSegments:E}}function Oo(I,S,E,C,O){const q={};for(const ae of C)if(vt(I,E,ae)&&!O[dn(ae)]){const He=new sn([],{});q[dn(ae)]=He}return{...O,...q}}function xo(I,S){const E={};E[Rt]=S;for(const C of I)if(""===C.path&&dn(C)!==Rt){const O=new sn([],{});E[dn(C)]=O}return E}function vt(I,S,E){return(!(I.hasChildren()||S.length>0)||"full"!==E.pathMatch)&&""===E.path}class Go{constructor(S,E,C,O,q,ae,He){this.injector=S,this.configLoader=E,this.rootComponentType=C,this.config=O,this.urlTree=q,this.paramsInheritanceStrategy=ae,this.urlSerializer=He,this.allowRedirects=!0,this.applyRedirects=new na(this.urlSerializer,this.urlTree)}noMatchError(S){return new d.vHH(4002,!1)}recognize(){const S=Ti(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,S,Rt).pipe(Ke(E=>{if(E instanceof No)return this.allowRedirects=!1,this.urlTree=E.urlTree,this.match(E.urlTree);throw E instanceof Ur?this.noMatchError(E):E}),(0,pn.U)(E=>{const C=new as([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Rt,this.rootComponentType,null,{}),O=new Ln(C,E),q=new di("",O),ae=function Vt(I,S,E=null,C=null){return Qt(st(I),S,E,C)}(C,[],this.urlTree.queryParams,this.urlTree.fragment);return ae.queryParams=this.urlTree.queryParams,q.url=this.urlSerializer.serialize(ae),this.inheritParamsAndData(q._root),{state:q,tree:ae}}))}match(S){return this.processSegmentGroup(this.injector,this.config,S.root,Rt).pipe(Ke(C=>{throw C instanceof Ur?this.noMatchError(C):C}))}inheritParamsAndData(S){const E=S.value,C=cr(E,this.paramsInheritanceStrategy);E.params=Object.freeze(C.params),E.data=Object.freeze(C.data),S.children.forEach(O=>this.inheritParamsAndData(O))}processSegmentGroup(S,E,C,O){return 0===C.segments.length&&C.hasChildren()?this.processChildren(S,E,C):this.processSegment(S,E,C,C.segments,O,!0)}processChildren(S,E,C){const O=[];for(const q of Object.keys(C.children))"primary"===q?O.unshift(q):O.push(q);return(0,ge.D)(O).pipe((0,$e.b)(q=>{const ae=C.children[q],He=function wi(I,S){const E=I.filter(C=>dn(C)===S);return E.push(...I.filter(C=>dn(C)!==S)),E}(E,q);return this.processSegmentGroup(S,He,ae,q)}),(0,lt.R)((q,ae)=>(q.push(...ae),q)),(0,Et.d)(null),function Jt(I,S){const E=arguments.length>=2;return C=>C.pipe(I?(0,wt.h)((O,q)=>I(O,q,C)):Le.y,yt(1),E?(0,Et.d)(S):(0,Mn.T)(()=>new Xe.K))}(),(0,Ce.z)(q=>{if(null===q)return ks(C);const ae=co(q);return function ko(I){I.sort((S,E)=>S.value.outlet===Rt?-1:E.value.outlet===Rt?1:S.value.outlet.localeCompare(E.value.outlet))}(ae),(0,ne.of)(ae)}))}processSegment(S,E,C,O,q,ae){return(0,ge.D)(E).pipe((0,$e.b)(He=>this.processSegmentAgainstRoute(He._injector??S,E,He,C,O,q,ae).pipe(Ke(We=>{if(We instanceof Ur)return(0,ne.of)(null);throw We}))),(0,Pe.P)(He=>!!He),Ke(He=>{if(gn(He))return function Ls(I,S,E){return 0===S.length&&!I.children[E]}(C,O,q)?(0,ne.of)([]):ks(C);throw He}))}processSegmentAgainstRoute(S,E,C,O,q,ae,He){return function Fs(I,S,E,C){return!!(dn(I)===C||C!==Rt&&vt(S,E,I))&&("**"===I.path||Ki(S,I,E).matched)}(C,O,q,ae)?void 0===C.redirectTo?this.matchSegmentAgainstRoute(S,O,C,q,ae,He):He&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(S,O,E,C,q,ae):ks(O):ks(O)}expandSegmentAgainstRouteUsingRedirect(S,E,C,O,q,ae){return"**"===O.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(S,C,O,ae):this.expandRegularSegmentAgainstRouteUsingRedirect(S,E,C,O,q,ae)}expandWildCardWithParamsAgainstRouteUsingRedirect(S,E,C,O){const q=this.applyRedirects.applyRedirectCommands([],C.redirectTo,{});return C.redirectTo.startsWith("/")?Ds(q):this.applyRedirects.lineralizeSegments(C,q).pipe((0,Ce.z)(ae=>{const He=new sn(ae,{});return this.processSegment(S,E,He,ae,O,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(S,E,C,O,q,ae){const{matched:He,consumedSegments:We,remainingSegments:Tt,positionalParamSegments:An}=Ki(E,O,q);if(!He)return ks(E);const Rn=this.applyRedirects.applyRedirectCommands(We,O.redirectTo,An);return O.redirectTo.startsWith("/")?Ds(Rn):this.applyRedirects.lineralizeSegments(O,Rn).pipe((0,Ce.z)(Pn=>this.processSegment(S,C,E,Pn.concat(Tt),ae,!1)))}matchSegmentAgainstRoute(S,E,C,O,q,ae){let He;if("**"===C.path){const We=O.length>0?Kt(O).parameters:{},Tt=new as(O,We,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,gs(C),dn(C),C.component??C._loadedComponent??null,C,hu(C));He=(0,ne.of)({snapshot:Tt,consumedSegments:[],remainingSegments:[]}),E.children={}}else He=ra(E,C,O,S).pipe((0,pn.U)(({matched:We,consumedSegments:Tt,remainingSegments:An,parameters:Rn})=>We?{snapshot:new as(Tt,Rn,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,gs(C),dn(C),C.component??C._loadedComponent??null,C,hu(C)),consumedSegments:Tt,remainingSegments:An}:null));return He.pipe((0,ar.w)(We=>null===We?ks(E):this.getChildConfig(S=C._injector??S,C,O).pipe((0,ar.w)(({routes:Tt})=>{const An=C._loadedInjector??S,{snapshot:Rn,consumedSegments:Pn,remainingSegments:ts}=We,{segmentGroup:zn,slicedSegments:Zs}=Ti(E,Pn,ts,Tt);if(0===Zs.length&&zn.hasChildren())return this.processChildren(An,Tt,zn).pipe((0,pn.U)(To=>null===To?null:[new Ln(Rn,To)]));if(0===Tt.length&&0===Zs.length)return(0,ne.of)([new Ln(Rn,[])]);const As=dn(C)===q;return this.processSegment(An,Tt,zn,Zs,As?Rt:q,!0).pipe((0,pn.U)(To=>[new Ln(Rn,To)]))}))))}getChildConfig(S,E,C){return E.children?(0,ne.of)({routes:E.children,injector:S}):E.loadChildren?void 0!==E._loadedRoutes?(0,ne.of)({routes:E._loadedRoutes,injector:E._loadedInjector}):function Pi(I,S,E,C){const O=S.canLoad;if(void 0===O||0===O.length)return(0,ne.of)(!0);const q=O.map(ae=>{const He=kr(ae,I);return Xt(function fa(I){return I&&Ir(I.canLoad)}(He)?He.canLoad(S,E):I.runInContext(()=>He(S,E)))});return(0,ne.of)(q).pipe(Gi(),ea())}(S,E,C).pipe((0,Ce.z)(O=>O?this.configLoader.loadChildren(S,E).pipe((0,Me.b)(q=>{E._loadedRoutes=q.routes,E._loadedInjector=q.injector})):function ls(I){return ke(Ji(!1,3))}())):(0,ne.of)({routes:[],injector:S})}}function ia(I){const S=I.value.routeConfig;return S&&""===S.path}function co(I){const S=[],E=new Set;for(const C of I){if(!ia(C)){S.push(C);continue}const O=S.find(q=>C.value.routeConfig===q.value.routeConfig);void 0!==O?(O.children.push(...C.children),E.add(O)):S.push(C)}for(const C of E){const O=co(C.children);S.push(new Ln(C.value,O))}return S.filter(C=>!E.has(C))}function gs(I){return I.data||{}}function hu(I){return I.resolve||{}}function ot(I){return"string"==typeof I.title||null===I.title}function jt(I){return(0,ar.w)(S=>{const E=I(S);return E?(0,ge.D)(E).pipe((0,pn.U)(()=>S)):(0,ne.of)(S)})}const Tn=new d.OlP("ROUTES");let dr=(()=>{class I{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,d.f3M)(d.Sil)}loadComponent(E){if(this.componentLoaders.get(E))return this.componentLoaders.get(E);if(E._loadedComponent)return(0,ne.of)(E._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(E);const C=Xt(E.loadComponent()).pipe((0,pn.U)(hr),(0,Me.b)(q=>{this.onLoadEndListener&&this.onLoadEndListener(E),E._loadedComponent=q}),(0,on.x)(()=>{this.componentLoaders.delete(E)})),O=new It(C,()=>new zt.x).pipe(ct());return this.componentLoaders.set(E,O),O}loadChildren(E,C){if(this.childrenLoaders.get(C))return this.childrenLoaders.get(C);if(C._loadedRoutes)return(0,ne.of)({routes:C._loadedRoutes,injector:C._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(C);const q=function _r(I,S,E,C){return Xt(I.loadChildren()).pipe((0,pn.U)(hr),(0,Ce.z)(O=>O instanceof d.YKP||Array.isArray(O)?(0,ne.of)(O):(0,ge.D)(S.compileModuleAsync(O))),(0,pn.U)(O=>{C&&C(I);let q,ae,He=!1;return Array.isArray(O)?(ae=O,!0):(q=O.create(E).injector,ae=q.get(Tn,[],{optional:!0,self:!0}).flat()),{routes:ae.map(Ii),injector:q}}))}(C,this.compiler,E,this.onLoadEndListener).pipe((0,on.x)(()=>{this.childrenLoaders.delete(C)})),ae=new It(q,()=>new zt.x).pipe(ct());return this.childrenLoaders.set(C,ae),ae}static#e=this.\u0275fac=function(C){return new(C||I)};static#t=this.\u0275prov=d.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"})}return I})();function hr(I){return function Yt(I){return I&&"object"==typeof I&&"default"in I}(I)?I.default:I}let _n=(()=>{class I{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new zt.x,this.transitionAbortSubject=new zt.x,this.configLoader=(0,d.f3M)(dr),this.environmentInjector=(0,d.f3M)(d.lqb),this.urlSerializer=(0,d.f3M)(rr),this.rootContexts=(0,d.f3M)(Jr),this.inputBindingEnabled=null!==(0,d.f3M)(yi,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,ne.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=O=>this.events.next(new no(O)),this.configLoader.onLoadStartListener=O=>this.events.next(new $o(O))}complete(){this.transitions?.complete()}handleNavigationRequest(E){const C=++this.navigationId;this.transitions?.next({...this.transitions.value,...E,id:C})}setupNavigations(E,C,O){return this.transitions=new Ae.X({id:0,currentUrlTree:C,currentRawUrl:C,currentBrowserUrl:C,extractedUrl:E.urlHandlingStrategy.extract(C),urlAfterRedirects:E.urlHandlingStrategy.extract(C),rawUrl:C,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Nr,restoredState:null,currentSnapshot:O.snapshot,targetSnapshot:null,currentRouterState:O,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,wt.h)(q=>0!==q.id),(0,pn.U)(q=>({...q,extractedUrl:E.urlHandlingStrategy.extract(q.rawUrl)})),(0,ar.w)(q=>{this.currentTransition=q;let ae=!1,He=!1;return(0,ne.of)(q).pipe((0,Me.b)(We=>{this.currentNavigation={id:We.id,initialUrl:We.rawUrl,extractedUrl:We.extractedUrl,trigger:We.source,extras:We.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,ar.w)(We=>{const Tt=We.currentBrowserUrl.toString(),An=!E.navigated||We.extractedUrl.toString()!==Tt||Tt!==We.currentUrlTree.toString();if(!An&&"reload"!==(We.extras.onSameUrlNavigation??E.onSameUrlNavigation)){const Pn="";return this.events.next(new Ps(We.id,this.urlSerializer.serialize(We.rawUrl),Pn,0)),We.resolve(null),xe.E}if(E.urlHandlingStrategy.shouldProcessUrl(We.rawUrl))return(0,ne.of)(We).pipe((0,ar.w)(Pn=>{const ts=this.transitions?.getValue();return this.events.next(new Gs(Pn.id,this.urlSerializer.serialize(Pn.extractedUrl),Pn.source,Pn.restoredState)),ts!==this.transitions?.getValue()?xe.E:Promise.resolve(Pn)}),function D(I,S,E,C,O,q){return(0,Ce.z)(ae=>function Xi(I,S,E,C,O,q,ae="emptyOnly"){return new Go(I,S,E,C,O,ae,q).recognize()}(I,S,E,C,ae.extractedUrl,O,q).pipe((0,pn.U)(({state:He,tree:We})=>({...ae,targetSnapshot:He,urlAfterRedirects:We}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,E.config,this.urlSerializer,E.paramsInheritanceStrategy),(0,Me.b)(Pn=>{q.targetSnapshot=Pn.targetSnapshot,q.urlAfterRedirects=Pn.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:Pn.urlAfterRedirects};const ts=new Ms(Pn.id,this.urlSerializer.serialize(Pn.extractedUrl),this.urlSerializer.serialize(Pn.urlAfterRedirects),Pn.targetSnapshot);this.events.next(ts)}));if(An&&E.urlHandlingStrategy.shouldProcessUrl(We.currentRawUrl)){const{id:Pn,extractedUrl:ts,source:zn,restoredState:Zs,extras:As}=We,To=new Gs(Pn,this.urlSerializer.serialize(ts),zn,Zs);this.events.next(To);const Ha=Er(0,this.rootComponentType).snapshot;return this.currentTransition=q={...We,targetSnapshot:Ha,urlAfterRedirects:ts,extras:{...As,skipLocationChange:!1,replaceUrl:!1}},(0,ne.of)(q)}{const Pn="";return this.events.next(new Ps(We.id,this.urlSerializer.serialize(We.extractedUrl),Pn,1)),We.resolve(null),xe.E}}),(0,Me.b)(We=>{const Tt=new jo(We.id,this.urlSerializer.serialize(We.extractedUrl),this.urlSerializer.serialize(We.urlAfterRedirects),We.targetSnapshot);this.events.next(Tt)}),(0,pn.U)(We=>(this.currentTransition=q={...We,guards:Po(We.targetSnapshot,We.currentSnapshot,this.rootContexts)},q)),function ps(I,S){return(0,Ce.z)(E=>{const{targetSnapshot:C,currentSnapshot:O,guards:{canActivateChecks:q,canDeactivateChecks:ae}}=E;return 0===ae.length&&0===q.length?(0,ne.of)({...E,guardsResult:!0}):function lo(I,S,E,C){return(0,ge.D)(I).pipe((0,Ce.z)(O=>function Mo(I,S,E,C,O){const q=S&&S.routeConfig?S.routeConfig.canDeactivate:null;if(!q||0===q.length)return(0,ne.of)(!0);const ae=q.map(He=>{const We=so(S)??O,Tt=kr(He,We);return Xt(function M(I){return I&&Ir(I.canDeactivate)}(Tt)?Tt.canDeactivate(I,S,E,C):We.runInContext(()=>Tt(I,S,E,C))).pipe((0,Pe.P)())});return(0,ne.of)(ae).pipe(Gi())}(O.component,O.route,E,S,C)),(0,Pe.P)(O=>!0!==O,!0))}(ae,C,O,I).pipe((0,Ce.z)(He=>He&&function Sa(I){return"boolean"==typeof I}(He)?function Ui(I,S,E,C){return(0,ge.D)(S).pipe((0,$e.b)(O=>(0,Lt.z)(function Ho(I,S){return null!==I&&S&&S(new _o(I)),(0,ne.of)(!0)}(O.route.parent,C),function Wi(I,S){return null!==I&&S&&S(new yo(I)),(0,ne.of)(!0)}(O.route,C),function qi(I,S,E){const C=S[S.length-1],q=S.slice(0,S.length-1).reverse().map(ae=>function Jo(I){const S=I.routeConfig?I.routeConfig.canActivateChild:null;return S&&0!==S.length?{node:I,guards:S}:null}(ae)).filter(ae=>null!==ae).map(ae=>se(()=>{const He=ae.guards.map(We=>{const Tt=so(ae.node)??E,An=kr(We,Tt);return Xt(function G(I){return I&&Ir(I.canActivateChild)}(An)?An.canActivateChild(C,I):Tt.runInContext(()=>An(C,I))).pipe((0,Pe.P)())});return(0,ne.of)(He).pipe(Gi())}));return(0,ne.of)(q).pipe(Gi())}(I,O.path,E),function zo(I,S,E){const C=S.routeConfig?S.routeConfig.canActivate:null;if(!C||0===C.length)return(0,ne.of)(!0);const O=C.map(q=>se(()=>{const ae=so(S)??E,He=kr(q,ae);return Xt(function j(I){return I&&Ir(I.canActivate)}(He)?He.canActivate(S,I):ae.runInContext(()=>He(S,I))).pipe((0,Pe.P)())}));return(0,ne.of)(O).pipe(Gi())}(I,O.route,E))),(0,Pe.P)(O=>!0!==O,!0))}(C,q,I,S):(0,ne.of)(He)),(0,pn.U)(He=>({...E,guardsResult:He})))})}(this.environmentInjector,We=>this.events.next(We)),(0,Me.b)(We=>{if(q.guardsResult=We.guardsResult,Ge(We.guardsResult))throw Ei(0,We.guardsResult);const Tt=new mi(We.id,this.urlSerializer.serialize(We.extractedUrl),this.urlSerializer.serialize(We.urlAfterRedirects),We.targetSnapshot,!!We.guardsResult);this.events.next(Tt)}),(0,wt.h)(We=>!!We.guardsResult||(this.cancelNavigationTransition(We,"",3),!1)),jt(We=>{if(We.guards.canActivateChecks.length)return(0,ne.of)(We).pipe((0,Me.b)(Tt=>{const An=new Aa(Tt.id,this.urlSerializer.serialize(Tt.extractedUrl),this.urlSerializer.serialize(Tt.urlAfterRedirects),Tt.targetSnapshot);this.events.next(An)}),(0,ar.w)(Tt=>{let An=!1;return(0,ne.of)(Tt).pipe(function K(I,S){return(0,Ce.z)(E=>{const{targetSnapshot:C,guards:{canActivateChecks:O}}=E;if(!O.length)return(0,ne.of)(E);let q=0;return(0,ge.D)(O).pipe((0,$e.b)(ae=>function k(I,S,E,C){const O=I.routeConfig,q=I._resolve;return void 0!==O?.title&&!ot(O)&&(q[Jn]=O.title),function W(I,S,E,C){const O=function de(I){return[...Object.keys(I),...Object.getOwnPropertySymbols(I)]}(I);if(0===O.length)return(0,ne.of)({});const q={};return(0,ge.D)(O).pipe((0,Ce.z)(ae=>function Ye(I,S,E,C){const O=so(S)??C,q=kr(I,O);return Xt(q.resolve?q.resolve(S,E):O.runInContext(()=>q(S,E)))}(I[ae],S,E,C).pipe((0,Pe.P)(),(0,Me.b)(He=>{q[ae]=He}))),yt(1),function Nn(I){return(0,pn.U)(()=>I)}(q),Ke(ae=>gn(ae)?xe.E:ke(ae)))}(q,I,S,C).pipe((0,pn.U)(ae=>(I._resolvedData=ae,I.data=cr(I,E).resolve,O&&ot(O)&&(I.data[Jn]=O.title),null)))}(ae.route,C,I,S)),(0,Me.b)(()=>q++),yt(1),(0,Ce.z)(ae=>q===O.length?(0,ne.of)(E):xe.E))})}(E.paramsInheritanceStrategy,this.environmentInjector),(0,Me.b)({next:()=>An=!0,complete:()=>{An||this.cancelNavigationTransition(Tt,"",2)}}))}),(0,Me.b)(Tt=>{const An=new to(Tt.id,this.urlSerializer.serialize(Tt.extractedUrl),this.urlSerializer.serialize(Tt.urlAfterRedirects),Tt.targetSnapshot);this.events.next(An)}))}),jt(We=>{const Tt=An=>{const Rn=[];An.routeConfig?.loadComponent&&!An.routeConfig._loadedComponent&&Rn.push(this.configLoader.loadComponent(An.routeConfig).pipe((0,Me.b)(Pn=>{An.component=Pn}),(0,pn.U)(()=>{})));for(const Pn of An.children)Rn.push(...Tt(Pn));return Rn};return ht(Tt(We.targetSnapshot.root)).pipe((0,Et.d)(),(0,Nt.q)(1))}),jt(()=>this.afterPreactivation()),(0,pn.U)(We=>{const Tt=function $r(I,S,E){const C=Bn(I,S._root,E?E._root:void 0);return new $i(C,S)}(E.routeReuseStrategy,We.targetSnapshot,We.currentRouterState);return this.currentTransition=q={...We,targetRouterState:Tt},q}),(0,Me.b)(()=>{this.events.next(new Yi)}),((I,S,E,C)=>(0,pn.U)(O=>(new us(S,O.targetRouterState,O.currentRouterState,E,C).activate(I),O)))(this.rootContexts,E.routeReuseStrategy,We=>this.events.next(We),this.inputBindingEnabled),(0,Nt.q)(1),(0,Me.b)({next:We=>{ae=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Es(We.id,this.urlSerializer.serialize(We.extractedUrl),this.urlSerializer.serialize(We.urlAfterRedirects))),E.titleStrategy?.updateTitle(We.targetRouterState.snapshot),We.resolve(!0)},complete:()=>{ae=!0}}),(0,$n.R)(this.transitionAbortSubject.pipe((0,Me.b)(We=>{throw We}))),(0,on.x)(()=>{ae||He||this.cancelNavigationTransition(q,"",1),this.currentNavigation?.id===q.id&&(this.currentNavigation=null)}),Ke(We=>{if(He=!0,ws(We))this.events.next(new Qi(q.id,this.urlSerializer.serialize(q.extractedUrl),We.message,We.cancellationCode)),function Qr(I){return ws(I)&&Ge(I.url)}(We)?this.events.next(new Hn(We.url)):q.resolve(!1);else{this.events.next(new Ri(q.id,this.urlSerializer.serialize(q.extractedUrl),We,q.targetSnapshot??void 0));try{q.resolve(E.errorHandler(We))}catch(Tt){q.reject(Tt)}}return xe.E}))}))}cancelNavigationTransition(E,C,O){const q=new Qi(E.id,this.urlSerializer.serialize(E.extractedUrl),C,O);this.events.next(q),E.resolve(!1)}static#e=this.\u0275fac=function(C){return new(C||I)};static#t=this.\u0275prov=d.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"})}return I})();function br(I){return I!==Nr}let ms=(()=>{class I{buildTitle(E){let C,O=E.root;for(;void 0!==O;)C=this.getResolvedTitleForRoute(O)??C,O=O.children.find(q=>q.outlet===Rt);return C}getResolvedTitleForRoute(E){return E.data[Jn]}static#e=this.\u0275fac=function(C){return new(C||I)};static#t=this.\u0275prov=d.Yz7({token:I,factory:function(){return(0,d.f3M)(at)},providedIn:"root"})}return I})(),at=(()=>{class I extends ms{constructor(E){super(),this.title=E}updateTitle(E){const C=this.buildTitle(E);void 0!==C&&this.title.setTitle(C)}static#e=this.\u0275fac=function(C){return new(C||I)(d.LFG(Wn.Dx))};static#t=this.\u0275prov=d.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"})}return I})(),yr=(()=>{class I{static#e=this.\u0275fac=function(C){return new(C||I)};static#t=this.\u0275prov=d.Yz7({token:I,factory:function(){return(0,d.f3M)(es)},providedIn:"root"})}return I})();class xr{shouldDetach(S){return!1}store(S,E){}shouldAttach(S){return!1}retrieve(S){return null}shouldReuseRoute(S,E){return S.routeConfig===E.routeConfig}}let es=(()=>{class I extends xr{static#e=this.\u0275fac=function(){let E;return function(O){return(E||(E=d.n5z(I)))(O||I)}}();static#t=this.\u0275prov=d.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"})}return I})();const At=new d.OlP("",{providedIn:"root",factory:()=>({})});let qt=(()=>{class I{static#e=this.\u0275fac=function(C){return new(C||I)};static#t=this.\u0275prov=d.Yz7({token:I,factory:function(){return(0,d.f3M)(Sl)},providedIn:"root"})}return I})(),Sl=(()=>{class I{shouldProcessUrl(E){return!0}extract(E){return E}merge(E,C){return E}static#e=this.\u0275fac=function(C){return new(C||I)};static#t=this.\u0275prov=d.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"})}return I})();var pt=function(I){return I[I.COMPLETE=0]="COMPLETE",I[I.FAILED=1]="FAILED",I[I.REDIRECTING=2]="REDIRECTING",I}(pt||{});function Qe(I,S){I.events.pipe((0,wt.h)(E=>E instanceof Es||E instanceof Qi||E instanceof Ri||E instanceof Ps),(0,pn.U)(E=>E instanceof Es||E instanceof Ps?pt.COMPLETE:E instanceof Qi&&(0===E.code||1===E.code)?pt.REDIRECTING:pt.FAILED),(0,wt.h)(E=>E!==pt.REDIRECTING),(0,Nt.q)(1)).subscribe(()=>{S()})}function ft(I){throw I}function Cr(I,S,E){return S.parse("/")}const fu={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},$u={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Mi=(()=>{class I{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,d.f3M)(d.c2e),this.isNgZoneEnabled=!1,this._events=new zt.x,this.options=(0,d.f3M)(At,{optional:!0})||{},this.pendingTasks=(0,d.f3M)(d.HDt),this.errorHandler=this.options.errorHandler||ft,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Cr,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,d.f3M)(qt),this.routeReuseStrategy=(0,d.f3M)(yr),this.titleStrategy=(0,d.f3M)(ms),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,d.f3M)(Tn,{optional:!0})?.flat()??[],this.navigationTransitions=(0,d.f3M)(_n),this.urlSerializer=(0,d.f3M)(rr),this.location=(0,d.f3M)(un.Ye),this.componentInputBindingEnabled=!!(0,d.f3M)(yi,{optional:!0}),this.eventsSubscription=new tt.w0,this.isNgZoneEnabled=(0,d.f3M)(d.R0b)instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new nn,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Er(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(E=>{this.lastSuccessfulId=E.id,this.currentPageId=this.browserPageId},E=>{this.console.warn(`Unhandled Navigation Error: ${E}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const E=this.navigationTransitions.events.subscribe(C=>{try{const{currentTransition:O}=this.navigationTransitions;if(null===O)return void(bl(C)&&this._events.next(C));if(C instanceof Gs)br(O.source)&&(this.browserUrlTree=O.extractedUrl);else if(C instanceof Ps)this.rawUrlTree=O.rawUrl;else if(C instanceof Ms){if("eager"===this.urlUpdateStrategy){if(!O.extras.skipLocationChange){const q=this.urlHandlingStrategy.merge(O.urlAfterRedirects,O.rawUrl);this.setBrowserUrl(q,O)}this.browserUrlTree=O.urlAfterRedirects}}else if(C instanceof Yi)this.currentUrlTree=O.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(O.urlAfterRedirects,O.rawUrl),this.routerState=O.targetRouterState,"deferred"===this.urlUpdateStrategy&&(O.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,O),this.browserUrlTree=O.urlAfterRedirects);else if(C instanceof Qi)0!==C.code&&1!==C.code&&(this.navigated=!0),(3===C.code||2===C.code)&&this.restoreHistory(O);else if(C instanceof Hn){const q=this.urlHandlingStrategy.merge(C.url,O.currentRawUrl),ae={skipLocationChange:O.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||br(O.source)};this.scheduleNavigation(q,Nr,null,ae,{resolve:O.resolve,reject:O.reject,promise:O.promise})}C instanceof Ri&&this.restoreHistory(O,!0),C instanceof Es&&(this.navigated=!0),bl(C)&&this._events.next(C)}catch(O){this.navigationTransitions.transitionAbortSubject.next(O)}});this.eventsSubscription.add(E)}resetRootComponentType(E){this.routerState.root.component=E,this.navigationTransitions.rootComponentType=E}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const E=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Nr,E)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(E=>{const C="popstate"===E.type?"popstate":"hashchange";"popstate"===C&&setTimeout(()=>{this.navigateToSyncWithBrowser(E.url,C,E.state)},0)}))}navigateToSyncWithBrowser(E,C,O){const q={replaceUrl:!0},ae=O?.navigationId?O:null;if(O){const We={...O};delete We.navigationId,delete We.\u0275routerPageId,0!==Object.keys(We).length&&(q.state=We)}const He=this.parseUrl(E);this.scheduleNavigation(He,C,ae,q)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(E){this.config=E.map(Ii),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(E,C={}){const{relativeTo:O,queryParams:q,fragment:ae,queryParamsHandling:He,preserveFragment:We}=C,Tt=We?this.currentUrlTree.fragment:ae;let Rn,An=null;switch(He){case"merge":An={...this.currentUrlTree.queryParams,...q};break;case"preserve":An=this.currentUrlTree.queryParams;break;default:An=q||null}null!==An&&(An=this.removeEmptyProps(An));try{Rn=st(O?O.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof E[0]||!E[0].startsWith("/"))&&(E=[]),Rn=this.currentUrlTree.root}return Qt(Rn,E,An,Tt??null)}navigateByUrl(E,C={skipLocationChange:!1}){const O=Ge(E)?E:this.parseUrl(E),q=this.urlHandlingStrategy.merge(O,this.rawUrlTree);return this.scheduleNavigation(q,Nr,null,C)}navigate(E,C={skipLocationChange:!1}){return function Vs(I){for(let S=0;S<I.length;S++)if(null==I[S])throw new d.vHH(4008,!1)}(E),this.navigateByUrl(this.createUrlTree(E,C),C)}serializeUrl(E){return this.urlSerializer.serialize(E)}parseUrl(E){let C;try{C=this.urlSerializer.parse(E)}catch(O){C=this.malformedUriErrorHandler(O,this.urlSerializer,E)}return C}isActive(E,C){let O;if(O=!0===C?{...fu}:!1===C?{...$u}:C,Ge(E))return ur(this.currentUrlTree,E,O);const q=this.parseUrl(E);return ur(this.currentUrlTree,q,O)}removeEmptyProps(E){return Object.keys(E).reduce((C,O)=>{const q=E[O];return null!=q&&(C[O]=q),C},{})}scheduleNavigation(E,C,O,q,ae){if(this.disposed)return Promise.resolve(!1);let He,We,Tt;ae?(He=ae.resolve,We=ae.reject,Tt=ae.promise):Tt=new Promise((Rn,Pn)=>{He=Rn,We=Pn});const An=this.pendingTasks.add();return Qe(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(An))}),this.navigationTransitions.handleNavigationRequest({source:C,restoredState:O,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:E,extras:q,resolve:He,reject:We,promise:Tt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Tt.catch(Rn=>Promise.reject(Rn))}setBrowserUrl(E,C){const O=this.urlSerializer.serialize(E);if(this.location.isCurrentPathEqualTo(O)||C.extras.replaceUrl){const ae={...C.extras.state,...this.generateNgRouterState(C.id,this.browserPageId)};this.location.replaceState(O,"",ae)}else{const q={...C.extras.state,...this.generateNgRouterState(C.id,this.browserPageId+1)};this.location.go(O,"",q)}}restoreHistory(E,C=!1){if("computed"===this.canceledNavigationResolution){const q=this.currentPageId-this.browserPageId;0!==q?this.location.historyGo(q):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===q&&(this.resetState(E),this.browserUrlTree=E.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(C&&this.resetState(E),this.resetUrlToCurrentUrlTree())}resetState(E){this.routerState=E.currentRouterState,this.currentUrlTree=E.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,E.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(E,C){return"computed"===this.canceledNavigationResolution?{navigationId:E,\u0275routerPageId:C}:{navigationId:E}}static#e=this.\u0275fac=function(C){return new(C||I)};static#t=this.\u0275prov=d.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"})}return I})();function bl(I){return!(I instanceof Yi||I instanceof Hn)}let Pa=(()=>{class I{constructor(E,C,O,q,ae,He){this.router=E,this.route=C,this.tabIndexAttribute=O,this.renderer=q,this.el=ae,this.locationStrategy=He,this.href=null,this.commands=null,this.onChanges=new zt.x,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const We=ae.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===We||"area"===We,this.isAnchorElement?this.subscription=E.events.subscribe(Tt=>{Tt instanceof Es&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(E){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",E)}ngOnChanges(E){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(E){null!=E?(this.commands=Array.isArray(E)?E:[E],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(E,C,O,q,ae){return!!(null===this.urlTree||this.isAnchorElement&&(0!==E||C||O||q||ae||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const E=null===this.href?null:(0,d.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",E)}applyAttributeValue(E,C){const O=this.renderer,q=this.el.nativeElement;null!==C?O.setAttribute(q,E,C):O.removeAttribute(q,E)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(C){return new(C||I)(d.Y36(Mi),d.Y36(cn),d.$8M("tabindex"),d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(un.S$))};static#t=this.\u0275dir=d.lG2({type:I,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(C,O){1&C&&d.NdJ("click",function(ae){return O.onClick(ae.button,ae.ctrlKey,ae.shiftKey,ae.altKey,ae.metaKey)}),2&C&&d.uIk("target",O.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",d.VuI],skipLocationChange:["skipLocationChange","skipLocationChange",d.VuI],replaceUrl:["replaceUrl","replaceUrl",d.VuI],routerLink:"routerLink"},standalone:!0,features:[d.Xq5,d.TTD]})}return I})();class Ma{}let bn=(()=>{class I{constructor(E,C,O,q,ae){this.router=E,this.injector=O,this.preloadingStrategy=q,this.loader=ae}setUpPreloading(){this.subscription=this.router.events.pipe((0,wt.h)(E=>E instanceof Es),(0,$e.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(E,C){const O=[];for(const q of C){q.providers&&!q._injector&&(q._injector=(0,d.MMx)(q.providers,E,`Route: ${q.path}`));const ae=q._injector??E,He=q._loadedInjector??ae;(q.loadChildren&&!q._loadedRoutes&&void 0===q.canLoad||q.loadComponent&&!q._loadedComponent)&&O.push(this.preloadConfig(ae,q)),(q.children||q._loadedRoutes)&&O.push(this.processRoutes(He,q.children??q._loadedRoutes))}return(0,ge.D)(O).pipe((0,In.J)())}preloadConfig(E,C){return this.preloadingStrategy.preload(C,()=>{let O;O=C.loadChildren&&void 0===C.canLoad?this.loader.loadChildren(E,C):(0,ne.of)(null);const q=O.pipe((0,Ce.z)(ae=>null===ae?(0,ne.of)(void 0):(C._loadedRoutes=ae.routes,C._loadedInjector=ae.injector,this.processRoutes(ae.injector??E,ae.routes))));if(C.loadComponent&&!C._loadedComponent){const ae=this.loader.loadComponent(C);return(0,ge.D)([q,ae]).pipe((0,In.J)())}return q})}static#e=this.\u0275fac=function(C){return new(C||I)(d.LFG(Mi),d.LFG(d.Sil),d.LFG(d.lqb),d.LFG(Ma),d.LFG(dr))};static#t=this.\u0275prov=d.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"})}return I})();const Wo=new d.OlP("");let gu=(()=>{class I{constructor(E,C,O,q,ae={}){this.urlSerializer=E,this.transitions=C,this.viewportScroller=O,this.zone=q,this.options=ae,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},ae.scrollPositionRestoration=ae.scrollPositionRestoration||"disabled",ae.anchorScrolling=ae.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(E=>{E instanceof Gs?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=E.navigationTrigger,this.restoredId=E.restoredState?E.restoredState.navigationId:0):E instanceof Es?(this.lastId=E.id,this.scheduleScrollEvent(E,this.urlSerializer.parse(E.urlAfterRedirects).fragment)):E instanceof Ps&&0===E.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(E,this.urlSerializer.parse(E.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(E=>{E instanceof ro&&(E.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(E.position):E.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(E.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(E,C){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new ro(E,"popstate"===this.lastSource?this.store[this.restoredId]:null,C))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(C){d.$Z()};static#t=this.\u0275prov=d.Yz7({token:I,factory:I.\u0275fac})}return I})();function Cs(I,S){return{\u0275kind:I,\u0275providers:S}}function Ks(){const I=(0,d.f3M)(d.zs3);return S=>{const E=I.get(d.z2F);if(S!==E.components[0])return;const C=I.get(Mi),O=I.get(V);1===I.get(g)&&C.initialNavigation(),I.get(H,null,d.XFs.Optional)?.setUpPreloading(),I.get(Wo,null,d.XFs.Optional)?.init(),C.resetRootComponentType(E.componentTypes[0]),O.closed||(O.next(),O.complete(),O.unsubscribe())}}const V=new d.OlP("",{factory:()=>new zt.x}),g=new d.OlP("",{providedIn:"root",factory:()=>1}),H=new d.OlP("");function he(I){return Cs(0,[{provide:H,useExisting:bn},{provide:Ma,useExisting:I}])}const ln=new d.OlP("ROUTER_FORROOT_GUARD"),Dn=[un.Ye,{provide:rr,useClass:qr},Mi,Jr,{provide:cn,useFactory:function en(I){return I.routerState.root},deps:[Mi]},dr,[]];function Te(){return new d.PXZ("Router",Mi)}let Cn=(()=>{class I{constructor(E){}static forRoot(E,C){return{ngModule:I,providers:[Dn,[],{provide:Tn,multi:!0,useValue:E},{provide:ln,useFactory:fr,deps:[[Mi,new d.FiY,new d.tp0]]},{provide:At,useValue:C||{}},C?.useHash?{provide:un.S$,useClass:un.Do}:{provide:un.S$,useClass:un.b0},{provide:Wo,useFactory:()=>{const I=(0,d.f3M)(un.EM),S=(0,d.f3M)(d.R0b),E=(0,d.f3M)(At),C=(0,d.f3M)(_n),O=(0,d.f3M)(rr);return E.scrollOffset&&I.setOffset(E.scrollOffset),new gu(O,C,I,S,E)}},C?.preloadingStrategy?he(C.preloadingStrategy).\u0275providers:[],{provide:d.PXZ,multi:!0,useFactory:Te},C?.initialNavigation?Wr(C):[],C?.bindToComponentInputs?Cs(8,[Is,{provide:yi,useExisting:Is}]).\u0275providers:[],[{provide:zr,useFactory:Ks},{provide:d.tb,multi:!0,useExisting:zr}]]}}static forChild(E){return{ngModule:I,providers:[{provide:Tn,multi:!0,useValue:E}]}}static#e=this.\u0275fac=function(C){return new(C||I)(d.LFG(ln,8))};static#t=this.\u0275mod=d.oAB({type:I});static#n=this.\u0275inj=d.cJS({})}return I})();function fr(I){return"guarded"}function Wr(I){return["disabled"===I.initialNavigation?Cs(3,[{provide:d.ip1,multi:!0,useFactory:()=>{const S=(0,d.f3M)(Mi);return()=>{S.setUpLocationChangeListener()}}},{provide:g,useValue:2}]).\u0275providers:[],"enabledBlocking"===I.initialNavigation?Cs(2,[{provide:g,useValue:0},{provide:d.ip1,multi:!0,deps:[d.zs3],useFactory:S=>{const E=S.get(un.V_,Promise.resolve());return()=>E.then(()=>new Promise(C=>{const O=S.get(Mi),q=S.get(V);Qe(O,()=>{C(!0)}),S.get(_n).afterPreactivation=()=>(C(!0),q.closed?(0,ne.of)(void 0):q),O.initialNavigation()}))}}]).\u0275providers:[]]}const zr=new d.OlP("")},3106:(Mt,Ve,F)=>{F.d(Ve,{Z:()=>ht});var d=F(9058),ee=F(4537),J=F(534),Ee=F(7879);class ge{constructor(gt,Xe){this._delegate=gt,this.firebase=Xe,(0,J._addComponent)(gt,new ee.wA("app-compat",()=>this,"PUBLIC")),this.container=gt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(gt){this._delegate.automaticDataCollectionEnabled=gt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(gt=>{this._delegate.checkDestroyed(),gt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,J.deleteApp)(this._delegate)))}_getService(gt,Xe=J._DEFAULT_ENTRY_NAME){var Lt;this._delegate.checkDestroyed();const nt=this._delegate.container.getProvider(gt);return!nt.isInitialized()&&"EXPLICIT"===(null===(Lt=nt.getComponent())||void 0===Lt?void 0:Lt.instantiationMode)&&nt.initialize(),nt.getImmediate({identifier:Xe})}_removeServiceInstance(gt,Xe=J._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(gt).clearInstance(Xe)}_addComponent(gt){(0,J._addComponent)(this._delegate,gt)}_addOrOverwriteComponent(gt){(0,J._addOrOverwriteComponent)(this._delegate,gt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ae=new d.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),re=function Le(){const it=function _e(it){const gt={},Xe={__esModule:!0,initializeApp:function se(tt,ce={}){const ct=J.initializeApp(tt,ce);if((0,d.r3)(gt,ct.name))return gt[ct.name];const It=new it(ct,Xe);return gt[ct.name]=It,It},app:nt,registerVersion:J.registerVersion,setLogLevel:J.setLogLevel,onLog:J.onLog,apps:null,SDK_VERSION:J.SDK_VERSION,INTERNAL:{registerComponent:function ke(tt){const ce=tt.name,ct=ce.replace("-compat","");if(J._registerComponent(tt)&&"PUBLIC"===tt.type){const It=(zt=nt())=>{if("function"!=typeof zt[ct])throw Ae.create("invalid-app-argument",{appName:ce});return zt[ct]()};void 0!==tt.serviceProps&&(0,d.ZB)(It,tt.serviceProps),Xe[ct]=It,it.prototype[ct]=function(...zt){return this._getService.bind(this,ce).apply(this,tt.multipleInstances?zt:[])}}return"PUBLIC"===tt.type?Xe[ct]:null},removeApp:function Lt(tt){delete gt[tt]},useAsService:function xe(tt,ce){return"serverAuth"===ce?null:ce},modularAPIs:J}};function nt(tt){if(!(0,d.r3)(gt,tt=tt||J._DEFAULT_ENTRY_NAME))throw Ae.create("no-app",{appName:tt});return gt[tt]}return Xe.default=Xe,Object.defineProperty(Xe,"apps",{get:function Be(){return Object.keys(gt).map(tt=>gt[tt])}}),nt.App=it,Xe}(ge);return it.INTERNAL=Object.assign(Object.assign({},it.INTERNAL),{createFirebaseNamespace:Le,extendNamespace:function gt(Xe){(0,d.ZB)(it,Xe)},createSubscribe:d.ne,ErrorFactory:d.LL,deepExtend:d.ZB}),it}(),ue=new Ee.Yd("@firebase/app-compat");if((0,d.jU)()&&void 0!==self.firebase){ue.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const it=self.firebase.SDK_VERSION;it&&it.indexOf("LITE")>=0&&ue.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ht=re;!function qe(it){(0,J.registerVersion)("@firebase/app-compat","0.2.29",it)}()},534:(Mt,Ve,F)=>{F.r(Ve),F.d(Ve,{FirebaseError:()=>Ee.ZR,SDK_VERSION:()=>Fr,_DEFAULT_ENTRY_NAME:()=>Kt,_addComponent:()=>ur,_addOrOverwriteComponent:()=>ui,_apps:()=>tn,_clearComponents:()=>$t,_components:()=>qn,_getProvider:()=>vr,_registerComponent:()=>vn,_removeServiceInstance:()=>ss,deleteApp:()=>rr,getApp:()=>Vn,getApps:()=>mn,initializeApp:()=>bi,onLog:()=>Rr,registerVersion:()=>Sr,setLogLevel:()=>Pr});var d=F(5861),ee=F(4537),J=F(7879),Ee=F(9058);const ge=(fe,pe)=>pe.some(Fe=>fe instanceof Fe);let ne,Ae;const re=new WeakMap,ue=new WeakMap,Se=new WeakMap,et=new WeakMap,qe=new WeakMap;let gt={get(fe,pe,Fe){if(fe instanceof IDBTransaction){if("done"===pe)return ue.get(fe);if("objectStoreNames"===pe)return fe.objectStoreNames||Se.get(fe);if("store"===pe)return Fe.objectStoreNames[1]?void 0:Fe.objectStore(Fe.objectStoreNames[0])}return se(fe[pe])},set:(fe,pe,Fe)=>(fe[pe]=Fe,!0),has:(fe,pe)=>fe instanceof IDBTransaction&&("done"===pe||"store"===pe)||pe in fe};function nt(fe){return"function"==typeof fe?function Lt(fe){return fe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Le(){return Ae||(Ae=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(fe)?function(...pe){return fe.apply(Be(this),pe),se(re.get(this))}:function(...pe){return se(fe.apply(Be(this),pe))}:function(pe,...Fe){const Ge=fe.call(Be(this),pe,...Fe);return Se.set(Ge,pe.sort?pe.sort():[pe]),se(Ge)}}(fe):(fe instanceof IDBTransaction&&function it(fe){if(ue.has(fe))return;const pe=new Promise((Fe,Ge)=>{const Vt=()=>{fe.removeEventListener("complete",st),fe.removeEventListener("error",Qt),fe.removeEventListener("abort",Qt)},st=()=>{Fe(),Vt()},Qt=()=>{Ge(fe.error||new DOMException("AbortError","AbortError")),Vt()};fe.addEventListener("complete",st),fe.addEventListener("error",Qt),fe.addEventListener("abort",Qt)});ue.set(fe,pe)}(fe),ge(fe,function _e(){return ne||(ne=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(fe,gt):fe)}function se(fe){if(fe instanceof IDBRequest)return function ht(fe){const pe=new Promise((Fe,Ge)=>{const Vt=()=>{fe.removeEventListener("success",st),fe.removeEventListener("error",Qt)},st=()=>{Fe(se(fe.result)),Vt()},Qt=()=>{Ge(fe.error),Vt()};fe.addEventListener("success",st),fe.addEventListener("error",Qt)});return pe.then(Fe=>{Fe instanceof IDBCursor&&re.set(Fe,fe)}).catch(()=>{}),qe.set(pe,fe),pe}(fe);if(et.has(fe))return et.get(fe);const pe=nt(fe);return pe!==fe&&(et.set(fe,pe),qe.set(pe,fe)),pe}const Be=fe=>qe.get(fe),tt=["get","getKey","getAll","getAllKeys","count"],ce=["put","add","delete","clear"],ct=new Map;function It(fe,pe){if(!(fe instanceof IDBDatabase)||pe in fe||"string"!=typeof pe)return;if(ct.get(pe))return ct.get(pe);const Fe=pe.replace(/FromIndex$/,""),Ge=pe!==Fe,Vt=ce.includes(Fe);if(!(Fe in(Ge?IDBIndex:IDBObjectStore).prototype)||!Vt&&!tt.includes(Fe))return;const st=function(){var Qt=(0,d.Z)(function*(Xn,...Sn){const Mr=this.transaction(Xn,Vt?"readwrite":"readonly");let Lr=Mr.store;return Ge&&(Lr=Lr.index(Sn.shift())),(yield Promise.all([Lr[Fe](...Sn),Vt&&Mr.done]))[0]});return function(Sn){return Qt.apply(this,arguments)}}();return ct.set(pe,st),st}!function Xe(fe){gt=fe(gt)}(fe=>({...fe,get:(pe,Fe,Ge)=>It(pe,Fe)||fe.get(pe,Fe,Ge),has:(pe,Fe)=>!!It(pe,Fe)||fe.has(pe,Fe)}));class zt{constructor(pe){this.container=pe}getPlatformInfoString(){return this.container.getProviders().map(Fe=>{if(function un(fe){const pe=fe.getComponent();return"VERSION"===pe?.type}(Fe)){const Ge=Fe.getImmediate();return`${Ge.library}/${Ge.version}`}return null}).filter(Fe=>Fe).join(" ")}}const pn="@firebase/app",Nt=new J.Yd("@firebase/app"),Kt="[DEFAULT]",Xt={[pn]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},tn=new Map,qn=new Map;function ur(fe,pe){try{fe.container.addComponent(pe)}catch(Fe){Nt.debug(`Component ${pe.name} failed to register with FirebaseApp ${fe.name}`,Fe)}}function ui(fe,pe){fe.container.addOrOverwriteComponent(pe)}function vn(fe){const pe=fe.name;if(qn.has(pe))return Nt.debug(`There were multiple attempts to register component ${pe}.`),!1;qn.set(pe,fe);for(const Fe of tn.values())ur(Fe,fe);return!0}function vr(fe,pe){const Fe=fe.container.getProvider("heartbeat").getImmediate({optional:!0});return Fe&&Fe.triggerHeartbeat(),fe.container.getProvider(pe)}function ss(fe,pe,Fe=Kt){vr(fe,pe).clearInstance(Fe)}function $t(){qn.clear()}const nn=new Ee.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class sn{constructor(pe,Fe,Ge){this._isDeleted=!1,this._options=Object.assign({},pe),this._config=Object.assign({},Fe),this._name=Fe.name,this._automaticDataCollectionEnabled=Fe.automaticDataCollectionEnabled,this._container=Ge,this.container.addComponent(new ee.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(pe){this.checkDestroyed(),this._automaticDataCollectionEnabled=pe}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(pe){this._isDeleted=pe}checkDestroyed(){if(this.isDeleted)throw nn.create("app-deleted",{appName:this._name})}}const Fr="10.9.0";function bi(fe,pe={}){let Fe=fe;"object"!=typeof pe&&(pe={name:pe});const Ge=Object.assign({name:Kt,automaticDataCollectionEnabled:!1},pe),Vt=Ge.name;if("string"!=typeof Vt||!Vt)throw nn.create("bad-app-name",{appName:String(Vt)});if(Fe||(Fe=(0,Ee.aH)()),!Fe)throw nn.create("no-options");const st=tn.get(Vt);if(st){if((0,Ee.vZ)(Fe,st.options)&&(0,Ee.vZ)(Ge,st.config))return st;throw nn.create("duplicate-app",{appName:Vt})}const Qt=new ee.H0(Vt);for(const Sn of qn.values())Qt.addComponent(Sn);const Xn=new sn(Fe,Ge,Qt);return tn.set(Vt,Xn),Xn}function Vn(fe=Kt){const pe=tn.get(fe);if(!pe&&fe===Kt&&(0,Ee.aH)())return bi();if(!pe)throw nn.create("no-app",{appName:fe});return pe}function mn(){return Array.from(tn.values())}function rr(fe){return qr.apply(this,arguments)}function qr(){return(qr=(0,d.Z)(function*(fe){const pe=fe.name;tn.has(pe)&&(tn.delete(pe),yield Promise.all(fe.container.getProviders().map(Fe=>Fe.delete())),fe.isDeleted=!0)})).apply(this,arguments)}function Sr(fe,pe,Fe){var Ge;let Vt=null!==(Ge=Xt[fe])&&void 0!==Ge?Ge:fe;Fe&&(Vt+=`-${Fe}`);const st=Vt.match(/\s|\//),Qt=pe.match(/\s|\//);if(st||Qt){const Xn=[`Unable to register library "${Vt}" with version "${pe}":`];return st&&Xn.push(`library name "${Vt}" contains illegal characters (whitespace or "/")`),st&&Qt&&Xn.push("and"),Qt&&Xn.push(`version name "${pe}" contains illegal characters (whitespace or "/")`),void Nt.warn(Xn.join(" "))}vn(new ee.wA(`${Vt}-version`,()=>({library:Vt,version:pe}),"VERSION"))}function Rr(fe,pe){if(null!==fe&&"function"!=typeof fe)throw nn.create("invalid-log-argument");(0,J.Am)(fe,pe)}function Pr(fe){(0,J.Ub)(fe)}const jr="firebase-heartbeat-database",mr=1,ve="firebase-heartbeat-store";let Y=null;function U(){return Y||(Y=function ke(fe,pe,{blocked:Fe,upgrade:Ge,blocking:Vt,terminated:st}={}){const Qt=indexedDB.open(fe,pe),Xn=se(Qt);return Ge&&Qt.addEventListener("upgradeneeded",Sn=>{Ge(se(Qt.result),Sn.oldVersion,Sn.newVersion,se(Qt.transaction),Sn)}),Fe&&Qt.addEventListener("blocked",Sn=>Fe(Sn.oldVersion,Sn.newVersion,Sn)),Xn.then(Sn=>{st&&Sn.addEventListener("close",()=>st()),Vt&&Sn.addEventListener("versionchange",Mr=>Vt(Mr.oldVersion,Mr.newVersion,Mr))}).catch(()=>{}),Xn}(jr,mr,{upgrade:(fe,pe)=>{if(0===pe)try{fe.createObjectStore(ve)}catch(Fe){console.warn(Fe)}}}).catch(fe=>{throw nn.create("idb-open",{originalErrorMessage:fe.message})})),Y}function N(){return(N=(0,d.Z)(function*(fe){try{const Fe=(yield U()).transaction(ve),Ge=yield Fe.objectStore(ve).get(rt(fe));return yield Fe.done,Ge}catch(pe){if(pe instanceof Ee.ZR)Nt.warn(pe.message);else{const Fe=nn.create("idb-get",{originalErrorMessage:pe?.message});Nt.warn(Fe.message)}}})).apply(this,arguments)}function oe(fe,pe){return be.apply(this,arguments)}function be(){return(be=(0,d.Z)(function*(fe,pe){try{const Ge=(yield U()).transaction(ve,"readwrite");yield Ge.objectStore(ve).put(pe,rt(fe)),yield Ge.done}catch(Fe){if(Fe instanceof Ee.ZR)Nt.warn(Fe.message);else{const Ge=nn.create("idb-set",{originalErrorMessage:Fe?.message});Nt.warn(Ge.message)}}})).apply(this,arguments)}function rt(fe){return`${fe.name}!${fe.options.appId}`}class St{constructor(pe){this.container=pe,this._heartbeatsCache=null;const Fe=this.container.getProvider("app").getImmediate();this._storage=new we(Fe),this._heartbeatsCachePromise=this._storage.read().then(Ge=>(this._heartbeatsCache=Ge,Ge))}triggerHeartbeat(){var pe=this;return(0,d.Z)(function*(){var Fe,Ge;const st=pe.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Qt=Zt();if((null!=(null===(Fe=pe._heartbeatsCache)||void 0===Fe?void 0:Fe.heartbeats)||(pe._heartbeatsCache=yield pe._heartbeatsCachePromise,null!=(null===(Ge=pe._heartbeatsCache)||void 0===Ge?void 0:Ge.heartbeats)))&&pe._heartbeatsCache.lastSentHeartbeatDate!==Qt&&!pe._heartbeatsCache.heartbeats.some(Xn=>Xn.date===Qt))return pe._heartbeatsCache.heartbeats.push({date:Qt,agent:st}),pe._heartbeatsCache.heartbeats=pe._heartbeatsCache.heartbeats.filter(Xn=>{const Sn=new Date(Xn.date).valueOf();return Date.now()-Sn<=2592e6}),pe._storage.overwrite(pe._heartbeatsCache)})()}getHeartbeatsHeader(){var pe=this;return(0,d.Z)(function*(){var Fe;if(null===pe._heartbeatsCache&&(yield pe._heartbeatsCachePromise),null==(null===(Fe=pe._heartbeatsCache)||void 0===Fe?void 0:Fe.heartbeats)||0===pe._heartbeatsCache.heartbeats.length)return"";const Ge=Zt(),{heartbeatsToSend:Vt,unsentEntries:st}=function On(fe,pe=1024){const Fe=[];let Ge=fe.slice();for(const Vt of fe){const st=Fe.find(Qt=>Qt.agent===Vt.agent);if(st){if(st.dates.push(Vt.date),me(Fe)>pe){st.dates.pop();break}}else if(Fe.push({agent:Vt.agent,dates:[Vt.date]}),me(Fe)>pe){Fe.pop();break}Ge=Ge.slice(1)}return{heartbeatsToSend:Fe,unsentEntries:Ge}}(pe._heartbeatsCache.heartbeats),Qt=(0,Ee.L)(JSON.stringify({version:2,heartbeats:Vt}));return pe._heartbeatsCache.lastSentHeartbeatDate=Ge,st.length>0?(pe._heartbeatsCache.heartbeats=st,yield pe._storage.overwrite(pe._heartbeatsCache)):(pe._heartbeatsCache.heartbeats=[],pe._storage.overwrite(pe._heartbeatsCache)),Qt})()}}function Zt(){return(new Date).toISOString().substring(0,10)}class we{constructor(pe){this.app=pe,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,d.Z)(function*(){return!!(0,Ee.hl)()&&(0,Ee.eu)().then(()=>!0).catch(()=>!1)})()}read(){var pe=this;return(0,d.Z)(function*(){if(yield pe._canUseIndexedDBPromise){const Ge=yield function x(fe){return N.apply(this,arguments)}(pe.app);return Ge?.heartbeats?Ge:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(pe){var Fe=this;return(0,d.Z)(function*(){var Ge;if(yield Fe._canUseIndexedDBPromise){const st=yield Fe.read();return oe(Fe.app,{lastSentHeartbeatDate:null!==(Ge=pe.lastSentHeartbeatDate)&&void 0!==Ge?Ge:st.lastSentHeartbeatDate,heartbeats:pe.heartbeats})}})()}add(pe){var Fe=this;return(0,d.Z)(function*(){var Ge;if(yield Fe._canUseIndexedDBPromise){const st=yield Fe.read();return oe(Fe.app,{lastSentHeartbeatDate:null!==(Ge=pe.lastSentHeartbeatDate)&&void 0!==Ge?Ge:st.lastSentHeartbeatDate,heartbeats:[...st.heartbeats,...pe.heartbeats]})}})()}}function me(fe){return(0,Ee.L)(JSON.stringify({version:2,heartbeats:fe})).length}!function De(fe){vn(new ee.wA("platform-logger",pe=>new zt(pe),"PRIVATE")),vn(new ee.wA("heartbeat",pe=>new St(pe),"PRIVATE")),Sr(pn,"0.9.29",fe),Sr(pn,"0.9.29","esm2017"),Sr("fire-js","")}("")},4537:(Mt,Ve,F)=>{F.d(Ve,{H0:()=>_e,wA:()=>J});var d=F(5861),ee=F(9058);class J{constructor(re,ue,Se){this.name=re,this.instanceFactory=ue,this.type=Se,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(re){return this.instantiationMode=re,this}setMultipleInstances(re){return this.multipleInstances=re,this}setServiceProps(re){return this.serviceProps=re,this}setInstanceCreatedCallback(re){return this.onInstanceCreated=re,this}}const Ee="[DEFAULT]";class ge{constructor(re,ue){this.name=re,this.container=ue,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(re){const ue=this.normalizeInstanceIdentifier(re);if(!this.instancesDeferred.has(ue)){const Se=new ee.BH;if(this.instancesDeferred.set(ue,Se),this.isInitialized(ue)||this.shouldAutoInitialize())try{const et=this.getOrInitializeService({instanceIdentifier:ue});et&&Se.resolve(et)}catch{}}return this.instancesDeferred.get(ue).promise}getImmediate(re){var ue;const Se=this.normalizeInstanceIdentifier(re?.identifier),et=null!==(ue=re?.optional)&&void 0!==ue&&ue;if(!this.isInitialized(Se)&&!this.shouldAutoInitialize()){if(et)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Se})}catch(qe){if(et)return null;throw qe}}getComponent(){return this.component}setComponent(re){if(re.name!==this.name)throw Error(`Mismatching Component ${re.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=re,this.shouldAutoInitialize()){if(function Ae(Le){return"EAGER"===Le.instantiationMode}(re))try{this.getOrInitializeService({instanceIdentifier:Ee})}catch{}for(const[ue,Se]of this.instancesDeferred.entries()){const et=this.normalizeInstanceIdentifier(ue);try{const qe=this.getOrInitializeService({instanceIdentifier:et});Se.resolve(qe)}catch{}}}}clearInstance(re=Ee){this.instancesDeferred.delete(re),this.instancesOptions.delete(re),this.instances.delete(re)}delete(){var re=this;return(0,d.Z)(function*(){const ue=Array.from(re.instances.values());yield Promise.all([...ue.filter(Se=>"INTERNAL"in Se).map(Se=>Se.INTERNAL.delete()),...ue.filter(Se=>"_delete"in Se).map(Se=>Se._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(re=Ee){return this.instances.has(re)}getOptions(re=Ee){return this.instancesOptions.get(re)||{}}initialize(re={}){const{options:ue={}}=re,Se=this.normalizeInstanceIdentifier(re.instanceIdentifier);if(this.isInitialized(Se))throw Error(`${this.name}(${Se}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const et=this.getOrInitializeService({instanceIdentifier:Se,options:ue});for(const[qe,ht]of this.instancesDeferred.entries())Se===this.normalizeInstanceIdentifier(qe)&&ht.resolve(et);return et}onInit(re,ue){var Se;const et=this.normalizeInstanceIdentifier(ue),qe=null!==(Se=this.onInitCallbacks.get(et))&&void 0!==Se?Se:new Set;qe.add(re),this.onInitCallbacks.set(et,qe);const ht=this.instances.get(et);return ht&&re(ht,et),()=>{qe.delete(re)}}invokeOnInitCallbacks(re,ue){const Se=this.onInitCallbacks.get(ue);if(Se)for(const et of Se)try{et(re,ue)}catch{}}getOrInitializeService({instanceIdentifier:re,options:ue={}}){let Se=this.instances.get(re);if(!Se&&this.component&&(Se=this.component.instanceFactory(this.container,{instanceIdentifier:(Le=re,Le===Ee?void 0:Le),options:ue}),this.instances.set(re,Se),this.instancesOptions.set(re,ue),this.invokeOnInitCallbacks(Se,re),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,re,Se)}catch{}var Le;return Se||null}normalizeInstanceIdentifier(re=Ee){return this.component?this.component.multipleInstances?re:Ee:re}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class _e{constructor(re){this.name=re,this.providers=new Map}addComponent(re){const ue=this.getProvider(re.name);if(ue.isComponentSet())throw new Error(`Component ${re.name} has already been registered with ${this.name}`);ue.setComponent(re)}addOrOverwriteComponent(re){this.getProvider(re.name).isComponentSet()&&this.providers.delete(re.name),this.addComponent(re)}getProvider(re){if(this.providers.has(re))return this.providers.get(re);const ue=new ge(re,this);return this.providers.set(re,ue),ue}getProviders(){return Array.from(this.providers.values())}}},7879:(Mt,Ve,F)=>{F.d(Ve,{Am:()=>Le,Ub:()=>_e,Yd:()=>Ae,in:()=>ee});const d=[];var ee=function(re){return re[re.DEBUG=0]="DEBUG",re[re.VERBOSE=1]="VERBOSE",re[re.INFO=2]="INFO",re[re.WARN=3]="WARN",re[re.ERROR=4]="ERROR",re[re.SILENT=5]="SILENT",re}(ee||{});const J={debug:ee.DEBUG,verbose:ee.VERBOSE,info:ee.INFO,warn:ee.WARN,error:ee.ERROR,silent:ee.SILENT},Ee=ee.INFO,ge={[ee.DEBUG]:"log",[ee.VERBOSE]:"log",[ee.INFO]:"info",[ee.WARN]:"warn",[ee.ERROR]:"error"},ne=(re,ue,...Se)=>{if(ue<re.logLevel)return;const et=(new Date).toISOString(),qe=ge[ue];if(!qe)throw new Error(`Attempted to log a message with an invalid logType (value: ${ue})`);console[qe](`[${et}]  ${re.name}:`,...Se)};class Ae{constructor(ue){this.name=ue,this._logLevel=Ee,this._logHandler=ne,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel(ue){if(!(ue in ee))throw new TypeError(`Invalid value "${ue}" assigned to \`logLevel\``);this._logLevel=ue}setLogLevel(ue){this._logLevel="string"==typeof ue?J[ue]:ue}get logHandler(){return this._logHandler}set logHandler(ue){if("function"!=typeof ue)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ue}get userLogHandler(){return this._userLogHandler}set userLogHandler(ue){this._userLogHandler=ue}debug(...ue){this._userLogHandler&&this._userLogHandler(this,ee.DEBUG,...ue),this._logHandler(this,ee.DEBUG,...ue)}log(...ue){this._userLogHandler&&this._userLogHandler(this,ee.VERBOSE,...ue),this._logHandler(this,ee.VERBOSE,...ue)}info(...ue){this._userLogHandler&&this._userLogHandler(this,ee.INFO,...ue),this._logHandler(this,ee.INFO,...ue)}warn(...ue){this._userLogHandler&&this._userLogHandler(this,ee.WARN,...ue),this._logHandler(this,ee.WARN,...ue)}error(...ue){this._userLogHandler&&this._userLogHandler(this,ee.ERROR,...ue),this._logHandler(this,ee.ERROR,...ue)}}function _e(re){d.forEach(ue=>{ue.setLogLevel(re)})}function Le(re,ue){for(const Se of d){let et=null;ue&&ue.level&&(et=J[ue.level]),Se.userLogHandler=null===re?null:(qe,ht,...it)=>{const gt=it.map(Xe=>{if(null==Xe)return null;if("string"==typeof Xe)return Xe;if("number"==typeof Xe||"boolean"==typeof Xe)return Xe.toString();if(Xe instanceof Error)return Xe.message;try{return JSON.stringify(Xe)}catch{return null}}).filter(Xe=>Xe).join(" ");ht>=(et??qe.logLevel)&&re({level:ee[ht].toLowerCase(),message:gt,args:it,type:qe.name})}}}},3182:(Mt,Ve,F)=>{F.d(Ve,{C6:()=>d.getApps,KN:()=>d.registerVersion,Mq:()=>d.getApp,ZF:()=>d.initializeApp});var d=F(534);(0,d.registerVersion)("firebase","10.9.0","app")},7142:(Mt,Ve,F)=>{F.d(Ve,{Z:()=>d.Z});var d=F(3106);d.Z.registerVersion("firebase","10.9.0","app-compat")},6365:(Mt,Ve,F)=>{F.r(Ve);var d=F(5861),ee=F(3106),J=F(4206),Ee=F(9058),Ae=(F(534),F(7879),F(4537));function _e(){return window}function ue(){return ue=(0,d.Z)(function*(U,x,N){var oe;const{BuildInfo:be}=_e();(0,J.au)(x.sessionId,"AuthEvent did not contain a session ID");const rt=yield function Xe(U){return Lt.apply(this,arguments)}(x.sessionId),dt={};return(0,J.av)()?dt.ibi=be.packageName:(0,J.aw)()?dt.apn=be.packageName:(0,J.ax)(U,"operation-not-supported-in-this-environment"),be.displayName&&(dt.appDisplayName=be.displayName),dt.sessionId=rt,(0,J.ay)(U,N,x.type,void 0,null!==(oe=x.eventId)&&void 0!==oe?oe:void 0,dt)}),ue.apply(this,arguments)}function et(){return(et=(0,d.Z)(function*(U){const{BuildInfo:x}=_e(),N={};(0,J.av)()?N.iosBundleId=x.packageName:(0,J.aw)()?N.androidPackageName=x.packageName:(0,J.ax)(U,"operation-not-supported-in-this-environment"),yield(0,J.az)(U,N)})).apply(this,arguments)}function it(){return(it=(0,d.Z)(function*(U,x,N){const{cordova:oe}=_e();let be=()=>{};try{yield new Promise((rt,dt)=>{let Ct=null;function St(){var we;rt();const me=null===(we=oe.plugins.browsertab)||void 0===we?void 0:we.close;"function"==typeof me&&me(),"function"==typeof N?.close&&N.close()}function Zt(){Ct||(Ct=window.setTimeout(()=>{dt((0,J.aB)(U,"redirect-cancelled-by-user"))},2e3))}function On(){"visible"===document?.visibilityState&&Zt()}x.addPassiveListener(St),document.addEventListener("resume",Zt,!1),(0,J.aw)()&&document.addEventListener("visibilitychange",On,!1),be=()=>{x.removePassiveListener(St),document.removeEventListener("resume",Zt,!1),document.removeEventListener("visibilitychange",On,!1),Ct&&window.clearTimeout(Ct)}})}finally{be()}})).apply(this,arguments)}function Lt(){return(Lt=(0,d.Z)(function*(U){const x=function nt(U){if((0,J.au)(/[0-9a-zA-Z]+/.test(U),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(U);const x=new ArrayBuffer(U.length),N=new Uint8Array(x);for(let oe=0;oe<U.length;oe++)N[oe]=U.charCodeAt(oe);return N}(U),N=yield crypto.subtle.digest("SHA-256",x);return Array.from(new Uint8Array(N)).map(be=>be.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Be extends J.aD{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(x=>{this.resolveInialized=x})}addPassiveListener(x){this.passiveListeners.add(x)}removePassiveListener(x){this.passiveListeners.delete(x)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(x){return this.resolveInialized(),this.passiveListeners.forEach(N=>N(x)),super.onEvent(x)}initialized(){var x=this;return(0,d.Z)(function*(){yield x.initPromise})()}}function tt(U){return ce.apply(this,arguments)}function ce(){return(ce=(0,d.Z)(function*(U){const x=yield zt()._get(un(U));return x&&(yield zt()._remove(un(U))),x})).apply(this,arguments)}function It(){const U=[];for(let N=0;N<20;N++){const oe=Math.floor(62*Math.random());U.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(oe))}return U.join("")}function zt(){return(0,J.aE)(J.b)}function un(U){return(0,J.aF)("authEvent",U.config.apiKey,U.name)}function Nt(U){if(!U?.includes("?"))return{};const[x,...N]=U.split("?");return(0,Ee.zd)(N.join("?"))}const Ce=class wt{constructor(){this._redirectPersistence=J.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=J.aG,this._overrideRedirectResult=J.aH}_initialize(x){var N=this;return(0,d.Z)(function*(){const oe=x._key();let be=N.eventManagers.get(oe);return be||(be=new Be(x),N.eventManagers.set(oe,be),N.attachCallbackListeners(x,be)),be})()}_openPopup(x){(0,J.ax)(x,"operation-not-supported-in-this-environment")}_openRedirect(x,N,oe,be){var rt=this;return(0,d.Z)(function*(){!function gt(U){var x,N,oe,be,rt,dt,Ct,St,Zt,On;const we=_e();(0,J.aC)("function"==typeof(null===(x=we?.universalLinks)||void 0===x?void 0:x.subscribe),U,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,J.aC)(typeof(null===(N=we?.BuildInfo)||void 0===N?void 0:N.packageName)<"u",U,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,J.aC)("function"==typeof(null===(rt=null===(be=null===(oe=we?.cordova)||void 0===oe?void 0:oe.plugins)||void 0===be?void 0:be.browsertab)||void 0===rt?void 0:rt.openUrl),U,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,J.aC)("function"==typeof(null===(St=null===(Ct=null===(dt=we?.cordova)||void 0===dt?void 0:dt.plugins)||void 0===Ct?void 0:Ct.browsertab)||void 0===St?void 0:St.isAvailable),U,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,J.aC)("function"==typeof(null===(On=null===(Zt=we?.cordova)||void 0===Zt?void 0:Zt.InAppBrowser)||void 0===On?void 0:On.open),U,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(x);const dt=yield rt._initialize(x);yield dt.initialized(),dt.resetRedirect(),(0,J.aI)(),yield rt._originValidation(x);const Ct=function ke(U,x,N=null){return{type:x,eventId:N,urlResponse:null,sessionId:It(),postBody:null,tenantId:U.tenantId,error:(0,J.aB)(U,"no-auth-event")}}(x,oe,be);yield function xe(U,x){return zt()._set(un(U),x)}(x,Ct);const St=yield function re(U,x,N){return ue.apply(this,arguments)}(x,Ct,N),Zt=yield function qe(U){const{cordova:x}=_e();return new Promise(N=>{x.plugins.browsertab.isAvailable(oe=>{let be=null;oe?x.plugins.browsertab.openUrl(U):be=x.InAppBrowser.open(U,(0,J.aA)()?"_blank":"_system","location=yes"),N(be)})})}(St);return function ht(U,x,N){return it.apply(this,arguments)}(x,dt,Zt)})()}_isIframeWebStorageSupported(x,N){throw new Error("Method not implemented.")}_originValidation(x){const N=x._key();return this.originValidationPromises[N]||(this.originValidationPromises[N]=function Se(U){return et.apply(this,arguments)}(x)),this.originValidationPromises[N]}attachCallbackListeners(x,N){const{universalLinks:oe,handleOpenURL:be,BuildInfo:rt}=_e(),dt=setTimeout((0,d.Z)(function*(){yield tt(x),N.onEvent(Pe())}),500),Ct=function(){var On=(0,d.Z)(function*(we){clearTimeout(dt);const me=yield tt(x);let De=null;me&&we?.url&&(De=function ct(U,x){var N,oe;const be=function ar(U){const x=Nt(U),N=x.link?decodeURIComponent(x.link):void 0,oe=Nt(N).link,be=x.deep_link_id?decodeURIComponent(x.deep_link_id):void 0;return Nt(be).link||be||oe||N||U}(x);if(be.includes("/__/auth/callback")){const rt=Nt(be),dt=rt.firebaseError?function pn(U){try{return JSON.parse(U)}catch{return null}}(decodeURIComponent(rt.firebaseError)):null,Ct=null===(oe=null===(N=dt?.code)||void 0===N?void 0:N.split("auth/"))||void 0===oe?void 0:oe[1],St=Ct?(0,J.aB)(Ct):null;return St?{type:U.type,eventId:U.eventId,tenantId:U.tenantId,error:St,urlResponse:null,sessionId:null,postBody:null}:{type:U.type,eventId:U.eventId,tenantId:U.tenantId,sessionId:U.sessionId,urlResponse:be,postBody:null}}return null}(me,we.url)),N.onEvent(De||Pe())});return function(me){return On.apply(this,arguments)}}();typeof oe<"u"&&"function"==typeof oe.subscribe&&oe.subscribe(null,Ct);const St=be,Zt=`${rt.packageName.toLowerCase()}://`;_e().handleOpenURL=function(){var On=(0,d.Z)(function*(we){if(we.toLowerCase().startsWith(Zt)&&Ct({url:we}),"function"==typeof St)try{St(we)}catch(me){console.error(me)}});return function(we){return On.apply(this,arguments)}}()}};function Pe(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,J.aB)("no-auth-event")}}function Et(){var U;return(null===(U=self?.location)||void 0===U?void 0:U.protocol)||null}function Mn(U=(0,Ee.z$)()){return!("file:"!==Et()&&"ionic:"!==Et()&&"capacitor:"!==Et()||!U.toLowerCase().match(/iphone|ipad|ipod|android/))}function In(){try{const U=self.localStorage,x=J.aN();if(U)return U.setItem(x,"1"),U.removeItem(x),!function $n(U=(0,Ee.z$)()){return function Nn(){return(0,Ee.w1)()&&11===document?.documentMode}()||function on(U=(0,Ee.z$)()){return/Edge\/\d+/.test(U)}(U)}()||(0,Ee.hl)()}catch{return Wn()&&(0,Ee.hl)()}return!1}function Wn(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Rt(){return(function yt(){return"http:"===Et()||"https:"===Et()}()||(0,Ee.ru)()||Mn())&&!function Jt(){return(0,Ee.b$)()||(0,Ee.UG)()}()&&In()&&!Wn()}function Jn(){return Mn()&&typeof document<"u"}function tr(){return(tr=(0,d.Z)(function*(){return!!Jn()&&new Promise(U=>{const x=setTimeout(()=>{U(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(x),U(!0)})})})).apply(this,arguments)}const Un={LOCAL:"local",NONE:"none",SESSION:"session"},nr=J.aC,Gn="persistence";function Xt(U){return tn.apply(this,arguments)}function tn(){return(tn=(0,d.Z)(function*(U){yield U._initializationPromise;const x=ur(),N=J.aF(Gn,U.config.apiKey,U.name);x&&x.setItem(N,U._getPersistence())})).apply(this,arguments)}function ur(){var U;try{return(null===(U=function kn(){return typeof window<"u"?window:null}())||void 0===U?void 0:U.sessionStorage)||null}catch{return null}}const ui=J.aC;class vn{constructor(){this.browserResolver=J.aE(J.k),this.cordovaResolver=J.aE(Ce),this.underlyingResolver=null,this._redirectPersistence=J.a,this._completeRedirectFn=J.aG,this._overrideRedirectResult=J.aH}_initialize(x){var N=this;return(0,d.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._initialize(x)})()}_openPopup(x,N,oe,be){var rt=this;return(0,d.Z)(function*(){return yield rt.selectUnderlyingResolver(),rt.assertedUnderlyingResolver._openPopup(x,N,oe,be)})()}_openRedirect(x,N,oe,be){var rt=this;return(0,d.Z)(function*(){return yield rt.selectUnderlyingResolver(),rt.assertedUnderlyingResolver._openRedirect(x,N,oe,be)})()}_isIframeWebStorageSupported(x,N){this.assertedUnderlyingResolver._isIframeWebStorageSupported(x,N)}_originValidation(x){return this.assertedUnderlyingResolver._originValidation(x)}get _shouldInitProactively(){return Jn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return ui(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var x=this;return(0,d.Z)(function*(){if(x.underlyingResolver)return;const N=yield function wn(){return tr.apply(this,arguments)}();x.underlyingResolver=N?x.cordovaResolver:x.browserResolver})()}}function vr(U){return U.unwrap()}function $t(U){return nn(U)}function nn(U){const{_tokenResponse:x}=U instanceof Ee.ZR?U.customData:U;if(!x)return null;if(!(U instanceof Ee.ZR)&&"temporaryProof"in x&&"phoneNumber"in x)return J.P.credentialFromResult(U);const N=x.providerId;if(!N||N===J.p.PASSWORD)return null;let oe;switch(N){case J.p.GOOGLE:oe=J.X;break;case J.p.FACEBOOK:oe=J.W;break;case J.p.GITHUB:oe=J.Y;break;case J.p.TWITTER:oe=J.$;break;default:const{oauthIdToken:be,oauthAccessToken:rt,oauthTokenSecret:dt,pendingToken:Ct,nonce:St}=x;return rt||dt||be||Ct?Ct?N.startsWith("saml.")?J.aQ._create(N,Ct):J.N._fromParams({providerId:N,signInMethod:N,pendingToken:Ct,idToken:be,accessToken:rt}):new J.Z(N).credential({idToken:be,accessToken:rt,rawNonce:St}):null}return U instanceof Ee.ZR?oe.credentialFromError(U):oe.credentialFromResult(U)}function sn(U,x){return x.catch(N=>{throw N instanceof Ee.ZR&&function Si(U,x){var N;const oe=null===(N=x.customData)||void 0===N?void 0:N._tokenResponse;if("auth/multi-factor-auth-required"===x?.code)x.resolver=new Vn(U,J.as(U,x));else if(oe){const be=nn(x),rt=x;be&&(rt.credential=be,rt.tenantId=oe.tenantId||void 0,rt.email=oe.email||void 0,rt.phoneNumber=oe.phoneNumber||void 0)}}(U,N),N}).then(N=>{const be=N.user;return{operationType:N.operationType,credential:$t(N),additionalUserInfo:J.aq(N),user:mn.getOrCreate(be)}})}function Fr(U,x){return bi.apply(this,arguments)}function bi(){return(bi=(0,d.Z)(function*(U,x){const N=yield x;return{verificationId:N.verificationId,confirm:oe=>sn(U,N.confirm(oe))}})).apply(this,arguments)}class Vn{constructor(x,N){this.resolver=N,this.auth=function ss(U){return U.wrapped()}(x)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(x){return sn(vr(this.auth),this.resolver.resolveSignIn(x))}}class mn{constructor(x){this._delegate=x,this.multiFactor=J.at(x)}static getOrCreate(x){return mn.USER_MAP.has(x)||mn.USER_MAP.set(x,new mn(x)),mn.USER_MAP.get(x)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(x){return this._delegate.getIdTokenResult(x)}getIdToken(x){return this._delegate.getIdToken(x)}linkAndRetrieveDataWithCredential(x){return this.linkWithCredential(x)}linkWithCredential(x){var N=this;return(0,d.Z)(function*(){return sn(N.auth,J.a2(N._delegate,x))})()}linkWithPhoneNumber(x,N){var oe=this;return(0,d.Z)(function*(){return Fr(oe.auth,J.l(oe._delegate,x,N))})()}linkWithPopup(x){var N=this;return(0,d.Z)(function*(){return sn(N.auth,J.d(N._delegate,x,vn))})()}linkWithRedirect(x){var N=this;return(0,d.Z)(function*(){return yield Xt(J.aJ(N.auth)),J.g(N._delegate,x,vn)})()}reauthenticateAndRetrieveDataWithCredential(x){return this.reauthenticateWithCredential(x)}reauthenticateWithCredential(x){var N=this;return(0,d.Z)(function*(){return sn(N.auth,J.a3(N._delegate,x))})()}reauthenticateWithPhoneNumber(x,N){return Fr(this.auth,J.r(this._delegate,x,N))}reauthenticateWithPopup(x){return sn(this.auth,J.e(this._delegate,x,vn))}reauthenticateWithRedirect(x){var N=this;return(0,d.Z)(function*(){return yield Xt(J.aJ(N.auth)),J.h(N._delegate,x,vn)})()}sendEmailVerification(x){return J.ag(this._delegate,x)}unlink(x){var N=this;return(0,d.Z)(function*(){return yield J.ap(N._delegate,x),N})()}updateEmail(x){return J.al(this._delegate,x)}updatePassword(x){return J.am(this._delegate,x)}updatePhoneNumber(x){return J.u(this._delegate,x)}updateProfile(x){return J.ak(this._delegate,x)}verifyBeforeUpdateEmail(x,N){return J.ah(this._delegate,x,N)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}mn.USER_MAP=new WeakMap;const rr=J.aC;let qr=(()=>{class U{constructor(N,oe){if(this.app=N,oe.isInitialized())return this._delegate=oe.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:be}=N.options;rr(be,"invalid-api-key",{appName:N.name}),rr(be,"invalid-api-key",{appName:N.name});const rt=typeof window<"u"?vn:void 0;this._delegate=oe.initialize({options:{persistence:Rr(be,N.name),popupRedirectResolver:rt}}),this._delegate._updateErrorMap(J.G),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?mn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(N){this._delegate.languageCode=N}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(N){this._delegate.tenantId=N}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(N,oe){J.K(this._delegate,N,oe)}applyActionCode(N){return J.a7(this._delegate,N)}checkActionCode(N){return J.a8(this._delegate,N)}confirmPasswordReset(N,oe){return J.a6(this._delegate,N,oe)}createUserWithEmailAndPassword(N,oe){var be=this;return(0,d.Z)(function*(){return sn(be._delegate,J.aa(be._delegate,N,oe))})()}fetchProvidersForEmail(N){return this.fetchSignInMethodsForEmail(N)}fetchSignInMethodsForEmail(N){return J.af(this._delegate,N)}isSignInWithEmailLink(N){return J.ad(this._delegate,N)}getRedirectResult(){var N=this;return(0,d.Z)(function*(){rr(Rt(),N._delegate,"operation-not-supported-in-this-environment");const oe=yield J.j(N._delegate,vn);return oe?sn(N._delegate,Promise.resolve(oe)):{credential:null,user:null}})()}addFrameworkForLogging(N){!function $e(U,x){(0,J.aJ)(U)._logFramework(x)}(this._delegate,N)}onAuthStateChanged(N,oe,be){const{next:rt,error:dt,complete:Ct}=Sr(N,oe,be);return this._delegate.onAuthStateChanged(rt,dt,Ct)}onIdTokenChanged(N,oe,be){const{next:rt,error:dt,complete:Ct}=Sr(N,oe,be);return this._delegate.onIdTokenChanged(rt,dt,Ct)}sendSignInLinkToEmail(N,oe){return J.ac(this._delegate,N,oe)}sendPasswordResetEmail(N,oe){return J.a5(this._delegate,N,oe||void 0)}setPersistence(N){var oe=this;return(0,d.Z)(function*(){let be;switch(function Kt(U,x){nr(Object.values(Un).includes(x),U,"invalid-persistence-type"),(0,Ee.b$)()?nr(x!==Un.SESSION,U,"unsupported-persistence-type"):(0,Ee.UG)()?nr(x===Un.NONE,U,"unsupported-persistence-type"):Wn()?nr(x===Un.NONE||x===Un.LOCAL&&(0,Ee.hl)(),U,"unsupported-persistence-type"):nr(x===Un.NONE||In(),U,"unsupported-persistence-type")}(oe._delegate,N),N){case Un.SESSION:be=J.a;break;case Un.LOCAL:be=(yield J.aE(J.i)._isAvailable())?J.i:J.b;break;case Un.NONE:be=J.U;break;default:return J.ax("argument-error",{appName:oe._delegate.name})}return oe._delegate.setPersistence(be)})()}signInAndRetrieveDataWithCredential(N){return this.signInWithCredential(N)}signInAnonymously(){return sn(this._delegate,J.a0(this._delegate))}signInWithCredential(N){return sn(this._delegate,J.a1(this._delegate,N))}signInWithCustomToken(N){return sn(this._delegate,J.a4(this._delegate,N))}signInWithEmailAndPassword(N,oe){return sn(this._delegate,J.ab(this._delegate,N,oe))}signInWithEmailLink(N,oe){return sn(this._delegate,J.ae(this._delegate,N,oe))}signInWithPhoneNumber(N,oe){return Fr(this._delegate,J.s(this._delegate,N,oe))}signInWithPopup(N){var oe=this;return(0,d.Z)(function*(){return rr(Rt(),oe._delegate,"operation-not-supported-in-this-environment"),sn(oe._delegate,J.c(oe._delegate,N,vn))})()}signInWithRedirect(N){var oe=this;return(0,d.Z)(function*(){return rr(Rt(),oe._delegate,"operation-not-supported-in-this-environment"),yield Xt(oe._delegate),J.f(oe._delegate,N,vn)})()}updateCurrentUser(N){return this._delegate.updateCurrentUser(N)}verifyPasswordResetCode(N){return J.a9(this._delegate,N)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return U.Persistence=Un,U})();function Sr(U,x,N){let oe=U;"function"!=typeof U&&({next:oe,error:x,complete:N}=U);const be=oe;return{next:dt=>be(dt&&mn.getOrCreate(dt)),error:x,complete:N}}function Rr(U,x){const N=function qn(U,x){const N=ur();if(!N)return[];const oe=J.aF(Gn,U,x);switch(N.getItem(oe)){case Un.NONE:return[J.U];case Un.LOCAL:return[J.i,J.a];case Un.SESSION:return[J.a];default:return[]}}(U,x);if(typeof self<"u"&&!N.includes(J.i)&&N.push(J.i),typeof window<"u")for(const oe of[J.b,J.a])N.includes(oe)||N.push(oe);return N.includes(J.U)||N.push(J.U),N}class Pr{constructor(){this.providerId="phone",this._delegate=new J.P(vr(ee.Z.auth()))}static credential(x,N){return J.P.credential(x,N)}verifyPhoneNumber(x,N){return this._delegate.verifyPhoneNumber(x,N)}unwrap(){return this._delegate}}Pr.PHONE_SIGN_IN_METHOD=J.P.PHONE_SIGN_IN_METHOD,Pr.PROVIDER_ID=J.P.PROVIDER_ID;const jr=J.aC;class mr{constructor(x,N,oe=ee.Z.app()){var be;jr(null===(be=oe.options)||void 0===be?void 0:be.apiKey,"invalid-api-key",{appName:oe.name}),this._delegate=new J.R(oe.auth(),x,N),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Y(U){U.INTERNAL.registerComponent(new Ae.wA("auth-compat",x=>{const N=x.getProvider("app-compat").getImmediate(),oe=x.getProvider("auth");return new qr(N,oe)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:J.A.EMAIL_SIGNIN,PASSWORD_RESET:J.A.PASSWORD_RESET,RECOVER_EMAIL:J.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:J.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:J.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:J.A.VERIFY_EMAIL}},EmailAuthProvider:J.V,FacebookAuthProvider:J.W,GithubAuthProvider:J.Y,GoogleAuthProvider:J.X,OAuthProvider:J.Z,SAMLAuthProvider:J._,PhoneAuthProvider:Pr,PhoneMultiFactorGenerator:J.m,RecaptchaVerifier:mr,TwitterAuthProvider:J.$,Auth:qr,AuthCredential:J.L,Error:Ee.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),U.registerVersion("@firebase/auth-compat","0.5.4")}(ee.Z)},8672:(Mt,Ve,F)=>{F.d(Ve,{Ro:()=>Be,ef:()=>ke,t2:()=>Lt});var d=F(5879),ee=F(5619),J=F(8645),Ee=F(2181),ge=F(9773),ne=F(6825),Ae=F(6814),_e=F(6593);const Le=["overlay"];function re(xe,tt){1&xe&&d._UZ(0,"div")}function ue(xe,tt){if(1&xe&&(d.TgZ(0,"div"),d.YNc(1,re,1,0,"div",6),d.qZA()),2&xe){const ce=d.oxw(2);d.Tol(ce.spinner.class),d.Udp("color",ce.spinner.color),d.xp6(1),d.Q6J("ngForOf",ce.spinner.divArray)}}function Se(xe,tt){if(1&xe&&(d._UZ(0,"div",7),d.ALo(1,"safeHtml")),2&xe){const ce=d.oxw(2);d.Q6J("innerHTML",d.lcZ(1,1,ce.template),d.oJD)}}function et(xe,tt){if(1&xe&&(d.TgZ(0,"div",1,2),d.YNc(2,ue,2,5,"div",3),d.YNc(3,Se,2,3,"div",4),d.TgZ(4,"div",5),d.Hsn(5),d.qZA()()),2&xe){const ce=d.oxw();d.Udp("background-color",ce.spinner.bdColor)("z-index",ce.spinner.zIndex)("position",ce.spinner.fullScreen?"fixed":"absolute"),d.Q6J("@.disabled",ce.disableAnimation)("@fadeIn","in"),d.xp6(2),d.Q6J("ngIf",!ce.template),d.xp6(1),d.Q6J("ngIf",ce.template),d.xp6(1),d.Udp("z-index",ce.spinner.zIndex)}}const qe=["*"],ht={"ball-8bits":16,"ball-atom":4,"ball-beat":3,"ball-circus":5,"ball-climbing-dot":4,"ball-clip-rotate":1,"ball-clip-rotate-multiple":2,"ball-clip-rotate-pulse":2,"ball-elastic-dots":5,"ball-fall":3,"ball-fussion":4,"ball-grid-beat":9,"ball-grid-pulse":9,"ball-newton-cradle":4,"ball-pulse":3,"ball-pulse-rise":5,"ball-pulse-sync":3,"ball-rotate":1,"ball-running-dots":5,"ball-scale":1,"ball-scale-multiple":3,"ball-scale-pulse":2,"ball-scale-ripple":1,"ball-scale-ripple-multiple":3,"ball-spin":8,"ball-spin-clockwise":8,"ball-spin-clockwise-fade":8,"ball-spin-clockwise-fade-rotating":8,"ball-spin-fade":8,"ball-spin-fade-rotating":8,"ball-spin-rotate":2,"ball-square-clockwise-spin":8,"ball-square-spin":8,"ball-triangle-path":3,"ball-zig-zag":2,"ball-zig-zag-deflect":2,cog:1,"cube-transition":2,fire:3,"line-scale":5,"line-scale-party":5,"line-scale-pulse-out":5,"line-scale-pulse-out-rapid":5,"line-spin-clockwise-fade":8,"line-spin-clockwise-fade-rotating":8,"line-spin-fade":8,"line-spin-fade-rotating":8,pacman:6,"square-jelly-box":2,"square-loader":1,"square-spin":1,timer:1,"triangle-skew-spin":1},gt="primary";class Xe{constructor(tt){Object.assign(this,tt)}static create(tt){return!tt?.template&&!tt?.type&&console.warn('[ngx-spinner]: Property "type" is missed. Please, provide animation type to <ngx-spinner> component\n        and ensure css is added to angular.json file'),new Xe(tt)}}let Lt=(()=>{class xe{constructor(){this.spinnerObservable=new ee.X(null)}getSpinner(ce){return this.spinnerObservable.asObservable().pipe((0,Ee.h)(ct=>ct&&ct.name===ce))}show(ce=gt,ct){return new Promise((It,zt)=>{setTimeout(()=>{ct&&Object.keys(ct).length?(ct.name=ce,this.spinnerObservable.next(new Xe({...ct,show:!0})),It(!0)):(this.spinnerObservable.next(new Xe({name:ce,show:!0})),It(!0))},10)})}hide(ce=gt,ct=10){return new Promise((It,zt)=>{setTimeout(()=>{this.spinnerObservable.next(new Xe({name:ce,show:!1})),It(!0)},ct)})}static#e=this.\u0275fac=function(ct){return new(ct||xe)};static#t=this.\u0275prov=d.Yz7({token:xe,factory:xe.\u0275fac,providedIn:"root"})}return xe})();const nt=new d.OlP("NGX_SPINNER_CONFIG");let se=(()=>{class xe{constructor(ce){this._sanitizer=ce}transform(ce){if(ce)return this._sanitizer.bypassSecurityTrustHtml(ce)}static#e=this.\u0275fac=function(ct){return new(ct||xe)(d.Y36(_e.H7,16))};static#t=this.\u0275pipe=d.Yjl({name:"safeHtml",type:xe,pure:!0})}return xe})(),Be=(()=>{class xe{constructor(ce,ct,It,zt){this.spinnerService=ce,this.changeDetector=ct,this.elementRef=It,this.globalConfig=zt,this.disableAnimation=!1,this.spinner=new Xe,this.ngUnsubscribe=new J.x,this.setDefaultOptions=()=>{const{type:un}=this.globalConfig??{};this.spinner=Xe.create({name:this.name,bdColor:this.bdColor,size:this.size,color:this.color,type:this.type??un,fullScreen:this.fullScreen,divArray:this.divArray,divCount:this.divCount,show:this.show,zIndex:this.zIndex,template:this.template,showSpinner:this.showSpinner})},this.bdColor="rgba(51,51,51,0.8)",this.zIndex=99999,this.color="#fff",this.size="large",this.fullScreen=!0,this.name=gt,this.template=null,this.showSpinner=!1,this.divArray=[],this.divCount=0,this.show=!1}initObservable(){this.spinnerService.getSpinner(this.name).pipe((0,ge.R)(this.ngUnsubscribe)).subscribe(ce=>{this.setDefaultOptions(),Object.assign(this.spinner,ce),ce.show&&this.onInputChange(),this.changeDetector.detectChanges()})}ngOnInit(){this.setDefaultOptions(),this.initObservable()}isSpinnerZone(ce){return ce===this.elementRef.nativeElement.parentElement||ce.parentNode&&this.isSpinnerZone(ce.parentNode)}ngOnChanges(ce){for(const ct in ce)if(ct){const It=ce[ct];if(It.isFirstChange())return;typeof It.currentValue<"u"&&It.currentValue!==It.previousValue&&""!==It.currentValue&&(this.spinner[ct]=It.currentValue,"showSpinner"===ct&&(It.currentValue?this.spinnerService.show(this.spinner.name,this.spinner):this.spinnerService.hide(this.spinner.name)),"name"===ct&&this.initObservable())}}getClass(ce,ct){this.spinner.divCount=ht[ce],this.spinner.divArray=Array(this.spinner.divCount).fill(0).map((zt,un)=>un);let It="";switch(ct.toLowerCase()){case"small":It="la-sm";break;case"medium":It="la-2x";break;case"large":It="la-3x"}return"la-"+ce+" "+It}onInputChange(){this.spinner.class=this.getClass(this.spinner.type,this.spinner.size)}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}static#e=this.\u0275fac=function(ct){return new(ct||xe)(d.Y36(Lt),d.Y36(d.sBO),d.Y36(d.SBq),d.Y36(nt,8))};static#t=this.\u0275cmp=d.Xpm({type:xe,selectors:[["ngx-spinner"]],viewQuery:function(ct,It){if(1&ct&&d.Gf(Le,5),2&ct){let zt;d.iGM(zt=d.CRH())&&(It.spinnerDOM=zt.first)}},inputs:{bdColor:"bdColor",size:"size",color:"color",type:"type",fullScreen:"fullScreen",name:"name",zIndex:"zIndex",template:"template",showSpinner:"showSpinner",disableAnimation:"disableAnimation"},features:[d.TTD],ngContentSelectors:qe,decls:1,vars:1,consts:[["class","ngx-spinner-overlay",3,"background-color","z-index","position",4,"ngIf"],[1,"ngx-spinner-overlay"],["overlay",""],[3,"class","color",4,"ngIf"],[3,"innerHTML",4,"ngIf"],[1,"loading-text"],[4,"ngFor","ngForOf"],[3,"innerHTML"]],template:function(ct,It){1&ct&&(d.F$t(),d.YNc(0,et,6,12,"div",0)),2&ct&&d.Q6J("ngIf",It.spinner.show)},dependencies:[Ae.sg,Ae.O5,se],styles:[".ngx-spinner-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%}.ngx-spinner-overlay[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:not(.loading-text){top:50%;left:50%;margin:0;position:absolute;transform:translate(-50%,-50%)}.loading-text[_ngcontent-%COMP%]{position:absolute;top:60%;left:50%;transform:translate(-50%,-60%)}"],data:{animation:[(0,ne.X$)("fadeIn",[(0,ne.SB)("in",(0,ne.oB)({opacity:1})),(0,ne.eR)(":enter",[(0,ne.oB)({opacity:0}),(0,ne.jt)(300)]),(0,ne.eR)(":leave",(0,ne.jt)(200,(0,ne.oB)({opacity:0})))])]},changeDetection:0})}return xe})(),ke=(()=>{class xe{static forRoot(ce){return{ngModule:xe,providers:[{provide:nt,useValue:ce}]}}static#e=this.\u0275fac=function(ct){return new(ct||xe)};static#t=this.\u0275mod=d.oAB({type:xe});static#n=this.\u0275inj=d.cJS({imports:[Ae.ez]})}return xe})()},5861:(Mt,Ve,F)=>{function d(J,Ee,ge,ne,Ae,_e,Le){try{var re=J[_e](Le),ue=re.value}catch(Se){return void ge(Se)}re.done?Ee(ue):Promise.resolve(ue).then(ne,Ae)}function ee(J){return function(){var Ee=this,ge=arguments;return new Promise(function(ne,Ae){var _e=J.apply(Ee,ge);function Le(ue){d(_e,ne,Ae,Le,re,"next",ue)}function re(ue){d(_e,ne,Ae,Le,re,"throw",ue)}Le(void 0)})}}F.d(Ve,{Z:()=>ee})},7582:(Mt,Ve,F)=>{function Ee(Ce,Pe){var $e={};for(var Me in Ce)Object.prototype.hasOwnProperty.call(Ce,Me)&&Pe.indexOf(Me)<0&&($e[Me]=Ce[Me]);if(null!=Ce&&"function"==typeof Object.getOwnPropertySymbols){var Ke=0;for(Me=Object.getOwnPropertySymbols(Ce);Ke<Me.length;Ke++)Pe.indexOf(Me[Ke])<0&&Object.prototype.propertyIsEnumerable.call(Ce,Me[Ke])&&($e[Me[Ke]]=Ce[Me[Ke]])}return $e}function Se(Ce,Pe,$e,Me){return new($e||($e=Promise))(function(lt,Et){function yt(Nn){try{Jt(Me.next(Nn))}catch(on){Et(on)}}function Mn(Nn){try{Jt(Me.throw(Nn))}catch(on){Et(on)}}function Jt(Nn){Nn.done?lt(Nn.value):function Ke(lt){return lt instanceof $e?lt:new $e(function(Et){Et(lt)})}(Nn.value).then(yt,Mn)}Jt((Me=Me.apply(Ce,Pe||[])).next())})}function se(Ce){return this instanceof se?(this.v=Ce,this):new se(Ce)}function Be(Ce,Pe,$e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ke,Me=$e.apply(Ce,Pe||[]),lt=[];return Ke={},Et("next"),Et("throw"),Et("return"),Ke[Symbol.asyncIterator]=function(){return this},Ke;function Et($n){Me[$n]&&(Ke[$n]=function(In){return new Promise(function(Wn,Rt){lt.push([$n,In,Wn,Rt])>1||yt($n,In)})})}function yt($n,In){try{!function Mn($n){$n.value instanceof se?Promise.resolve($n.value.v).then(Jt,Nn):on(lt[0][2],$n)}(Me[$n](In))}catch(Wn){on(lt[0][3],Wn)}}function Jt($n){yt("next",$n)}function Nn($n){yt("throw",$n)}function on($n,In){$n(In),lt.shift(),lt.length&&yt(lt[0][0],lt[0][1])}}function xe(Ce){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var $e,Pe=Ce[Symbol.asyncIterator];return Pe?Pe.call(Ce):(Ce=function it(Ce){var Pe="function"==typeof Symbol&&Symbol.iterator,$e=Pe&&Ce[Pe],Me=0;if($e)return $e.call(Ce);if(Ce&&"number"==typeof Ce.length)return{next:function(){return Ce&&Me>=Ce.length&&(Ce=void 0),{value:Ce&&Ce[Me++],done:!Ce}}};throw new TypeError(Pe?"Object is not iterable.":"Symbol.iterator is not defined.")}(Ce),$e={},Me("next"),Me("throw"),Me("return"),$e[Symbol.asyncIterator]=function(){return this},$e);function Me(lt){$e[lt]=Ce[lt]&&function(Et){return new Promise(function(yt,Mn){!function Ke(lt,Et,yt,Mn){Promise.resolve(Mn).then(function(Jt){lt({value:Jt,done:yt})},Et)}(yt,Mn,(Et=Ce[lt](Et)).done,Et.value)})}}}F.d(Ve,{FC:()=>Be,KL:()=>xe,_T:()=>Ee,mG:()=>Se,qq:()=>se}),"function"==typeof SuppressedError&&SuppressedError}},Mt=>{Mt(Mt.s=6298)}]);